sap.ui.define("u4a.m.LetterMessage",["jquery.sap.global","sap/ui/core/library","sap/ui/base/DataType"],function(a,b,c){"use strict";function d(a){var b=h._getLetterMsgDomRef();if(null!=b)return b;var c=document.createElement("div");c.id="__LetterArea",c.className="u4aMLetterMsgArea",c.style.zIndex="10000";var d=document.createElement("div");d.id="__Letter",d.className="u4aMLetterMsg",d.style.display="none",d.style.width="200px",d.style.height="200px",h._setPosition(d,a);var e=document.createElement("div");e.className="u4aMLetterMsgAnimated",d.appendChild(e);var f=document.createElement("div");f.className="u4aMLetterShadow",d.appendChild(f);var g=document.createElement("div");g.className="u4aMLetterMsgBackFold";var i=document.createElement("div");i.className="u4aMLetter";var j=document.createElement("div");j.className="u4aMLetterTopFold";var k=document.createElement("div");k.className="u4aMLetterBody";var l=document.createElement("div");l.className="u4aMLetterLeftFold",e.appendChild(g),e.appendChild(i),e.appendChild(j),e.appendChild(k),e.appendChild(l);var m=document.createElement("div");m.className="u4aMLetterBorder";var n=document.createElement("div");n.className="u4aMLetterTitle";var o=document.createElement("div");o.className="u4aMLetterContext";var p=document.createElement("div");p.className="u4aMLetterStamp";var q=document.createElement("div");return q.className="u4aMLetterStampInner",p.appendChild(q),i.appendChild(m),i.appendChild(n),i.appendChild(o),i.appendChild(p),c.appendChild(d),document.body.appendChild(c),d}var e=b.Dock,f=c.getType("float"),g=b.CSSSize,h={};return h._mSettings={onClick:null,animationDuration:250,position:"center center",expand:!1,scale:1},h._isShow=!1,h._validateSettings=function(a){h._isFiniteInteger(a.animationDuration),h._validateDockPosition(a.position),h._validateOnClick(a.onClick),h._validateBoolean(a.expand),h._isFiniteFloat(a.scale)},h._isFiniteInteger=function(a){if("number"!=typeof a||!isFinite(a)||Math.floor(a)!==a||0>=a)throw new Error("[U4AIDE] \"iNumber\" should be a Integer on "+h+"._isFiniteInteger")},h._validateDockPosition=function(a){if(!e.isValid(a))throw new Error("[U4AIDE] \""+a+"\" is not of type \"sap.ui.core.Popup.Dock\" on "+h+"._validateDockPosition")},h._validateOnClick=function(a){if("function"!=typeof a&&null!==a)throw new Error("[U4AIDE] \"onClick\" should be a function or null on "+h+"._validateOnClick")},h._validateBoolean=function(a){if("boolean"!=typeof a)throw new Error("[U4AIDE] \"expand\" should be a boolean on "+h+"._validateBoolean")},h._isFiniteFloat=function(a){var b=c.getType("float"),d=b.parseValue(a);if(isNaN(d)||!b.isValid(d)||0>=d)throw new Error("[U4AIDE] \"scale\" should be a float on "+h+"._isFiniteFloat")},h.show=function(b){if(!h._isShow){var c=document.getElementById("u4aMLetter_style");if(null!=c)return void h._render(b);a.ajax({url:"/zu4a_imp/u4a_lib/v1000/css/m/LetterMessage.css",dataType:"text",mimeType:"text/css",success:function(a){if(""==a)throw new Error("[U4AIDE] Load Fail to LetterMessage css files");$("<style id='u4aMLetter_style'></style>").appendTo("head").html(a),h._render(b)},error:function(){throw new Error("[U4AIDE] Load Fail to LetterMessage css files")}})}},h._render=function(b){var c,e;e=a.extend({},h._mSettings),a.extend(e,b),this._validateSettings(e),c=this._getLetterMsgDomRef(),null==c&&(c=d(e)),this.mSettings=e,c.onclick=function(){h.hide(e.onClick)},h._isShow=!0,h._isExpand(e.expand),$(c).fadeIn(e.animationDuration)},h._isExpand=function(a){if(a){var b=$(".u4aMLetterMsgAnimated"),c=$(".u4aMLetter"),d=$(".u4aMLetterShadow"),e=$(".u4aMLetterTopFold");b.css({"-webkit-transform":"translateY(50px)",transform:"translateY(50px)","-moz-transform":"translateY(50px)","-ms-transform":"translateY(50px)"}),c.css("height","180px"),d.css("width","200px"),d.css("left","0px");e.css({transition:"transform .4s, z-index .2s",transform:"rotateX(180deg)","-ms-transition":"transform .4s, z-index .2s","-webkit-transition":"transform .4s, z-index .2s","-ms-transform":"rotateX(180deg)","-webkit-transform":"rotateX(180deg)","-moz-transition":"transform .4s, z-index .2s","-moz-transform":"rotateX(180deg)","z-index":"0"})}},h.hide=function(a){var b=this._getLetterMsgDomRef();if(null!=b){var c=this.mSettings.animationDuration;$(b).fadeOut(c,function(){null==b||($(b).remove(),h._isShow&&(h._isShow=!1,a&&a()))})}},h._getLetterMsgDomRef=function(){return document.getElementById("__LetterArea")},(h._setPosition=function(a,b){var c=b.position,d=c.split(" "),e=d[0],f=d[1],g=b.scale,h=parseInt(a.style.width),i=h/2,j=-1*i;a.setAttribute("u4a-data-position",e+"-"+f);var k,l;"begin"===e||"left"===e?k=g*i:"center"===e?(a.style.left="50%",k=g*j):"right"===e||"end"===e?(a.style.left="auto",a.style.right=g*i+"px",k=h-2*(g*i)):void 0,"top"===f?(a.style.top="100px",l=j):"center"===f?(a.style.top="50%",l=g*j):"bottom"===f?(a.style.bottom=(i+40)*g+i-h+"px",l=-1*j-g*i,"center"==e&&(a.style.transform="translate(-50%)")):void 0,a.style.transform="matrix("+g+", 0, 0,"+g+", "+k+", "+l+")",a.style.webkitTransform="matrix("+g+", 0, 0,"+g+", "+k+", "+l+")",a.style.transformOrigin="0 0"},h.toString=function(){return"u4a.m.LetterMessage"},h)},!0);