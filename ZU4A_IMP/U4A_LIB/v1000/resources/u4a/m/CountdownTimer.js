sap.ui.define("u4a.m.CountdownTimer",["sap/ui/core/Control"],function(t){"use strict";return t.extend("u4a.m.CountdownTimer",{metadata:{library:"u4a.m",properties:{fontSize:{type:"sap.ui.core.CSSSize",defaultValue:"20px"},fontColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},hourCount:{type:"int",defaultValue:0},minCount:{type:"int",defaultValue:0},secCount:{type:"int",defaultValue:0},stopped:{type:"boolean",defaultValue:!1}},events:{countdownComplete:{}}},renderer:function(t,e){t.write("<div"),t.writeControlData(e),t.addStyle("font-size",e.getFontSize()),t.addStyle("color",e.getFontColor()),t.addStyle("font-weight","bold"),t.writeStyles(),t.write(">"),t.write("</div>")},setStopped:function(t){this.setProperty("stopped",t)},setSecCount:function(t){this.setProperty("secCount",t),this.rerender()},setMinCount:function(t){this.setProperty("minCount",t),this.rerender()},setHourCount:function(t){this.setProperty("hourCount",t),this.rerender()},_stopTimer:function(){this.setProperty("stopped",!1,!0),this.setProperty("hourCount",0,!0),this.setProperty("minCount",0,!0),this.setProperty("secCount",0,!0),this._oWorker instanceof Worker&&this._oWorker.terminate(),this._Print("00:00:00"),this.fireCountdownComplete()},_Print:function(t){var e=document.getElementById(this.getId());null!=e&&(e.innerHTML=t)},onMessage:function(t){t=t.data;1==t.isStop&&this._stopTimer(),this._Print(t.print)},onAfterRendering:function(t){var e=t.srcControl,o={},n=e.getHourCount(),r=e.getMinCount(),i=e.getSecCount(),t=new Date;t.setHours(t.getHours()+n),t.setMinutes(t.getMinutes()+r),t.setSeconds(t.getSeconds()+i),o.countDownDate=t,e.getStopped()?e._stopTimer():(this._oWorker instanceof Worker&&(this._oWorker.terminate(),this._oWorker=null),this._oWorker=new Worker("/zu4a_imp/publish/CommonJS/workers/CountdownTimerWorker.js"),this._oWorker.postMessage(o),this._oWorker.onmessage=function(t){this.onMessage(t)}.bind(this),null!=(o=this.aCustomStyleClasses)&&(o=o.join(" "),jQuery(this.getDomRef()).addClass(o)))},exit:function(){this._oWorker&&(this._oWorker.terminate(),this._oWorker=null)}})});