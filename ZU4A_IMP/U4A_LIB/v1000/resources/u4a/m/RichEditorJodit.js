u4a.m.RichEditorJoditTheme={Default:"default",Dark:"dark"},sap.ui.define("u4a.m.RichEditorJodit",["sap/ui/core/Control","sap/ui/core/library"],function(t,e){"use strict";var i=e.TextDirection;return t.extend("u4a.m.RichEditorJodit",{metadata:{library:"u4a.m",properties:{theme:{type:"u4a.m.RichEditorJoditTheme",defaultValue:u4a.m.RichEditorJoditTheme.Default},width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},value:{type:"string",defaultValue:null},editable:{type:"boolean",defaultValue:!0},enabled:{type:"boolean",defaultValue:!0},allowResizeX:{type:"boolean",defaultValue:!1},allowResizeY:{type:"boolean",defaultValue:!1},maxLength:{type:"int",defaultValue:0},stickyToolbar:{type:"boolean",defaultValue:!1},textDirection:{type:"sap.ui.core.TextDirection",defaultValue:i.Inherit}}},init:function(){try{void 0===Jodit&&jQuery.u4aJSloadAsync("/zu4a_imp/tools/jodit/lib/jodit.js",function(){})}catch(t){jQuery.u4aJSloadAsync("/zu4a_imp/tools/jodit/lib/jodit.js",function(){})}},renderer:function(t,e){t.openStart("div",e),t.class("u4aMRichEdtJodit"),t.style("width",e.getWidth()),t.style("height",e.getHeight()),t.openEnd(),t.openStart("textarea",e.getId()+"-txtarea"),t.class("u4aMRichEdtJoditTxtArea"),t.style("display","none"),t.openEnd(),t.close("textarea"),t.close("div")},onBeforeRendering:function(){this._loadCssTheme()},onAfterRendering:function(){this._setEditorProperties()},_setEditorProperties:function(){var t=this.getId()+"-txtarea",t=document.getElementById(t);t&&(t=new Jodit(t,{theme:this.getTheme(),disablePlugins:"file,image-properties,video,about,class-span,copy-format,placeholder,fullsize,search,source,stat,print,preview,symbols,selectall",enter:"DIV",uploader:{insertImageAsBase64URI:!1,imagesExtensions:["jpg","png","jpeg","gif"]},askBeforePasteFromWord:!0,width:this.getWidth(),height:this.getHeight(),maxWidth:this.getWidth(),maxHeight:this.getHeight(),allowResizeX:this.getAllowResizeX(),allowResizeY:this.getAllowResizeY(),limitChars:0!=this.getMaxLength()&&this.getMaxLength(),toolbarSticky:this.getStickyToolbar(),direction:"Inherit"==this.getTextDirection()?i.LTR:this.getTextDirection()}),this._oEditor=t,this._attachEventForJodit(t),this.setEnabled(this.getEnabled()),this.setEditable(this.getEditable()))},_attachEventForJodit:function(t){t.events.on("change",function(t){this.setProperty("value",t,!0)}.bind(this))},_getEditor:function(){return this._oEditor},_loadCssTheme:function(){var t,e="u4aRichEditorJodit_Style";document.getElementById(e)||(t={url:"/zu4a_imp/tools/jodit/lib/jodit.css",dataType:"text",async:!1,mimeType:"text/css",success:function(t){if(""==t)throw new Error("[U4AIDE] Load Fail to u4aRichEditorJodit css files");t+=".jodit-toolbar-button button, .jodit-ui-button { display: inline-block; }",t+=".jodit-properties_image_view > img { width: 100%; height: 100%; }",t+=".jodit-ui-group__copyformat { display: none; }",t+=".jodit-toolbar-button_fullsize { display: none; }",t+=".jodit-toolbar-button_copyformat { display: none; }",t+=".jodit-toolbar-button_source { display: none; }",$("<style id='"+e+"'></style>").appendTo("head").html(t)},error:function(){throw new Error("[U4AIDE] Load Fail to u4aRichEditorJodit css files")}},jQuery.ajax(t))},setValue:function(t){this.setProperty("value",t,!0);var e=this._getEditor();e&&e.setEditorValue(t)},getValue:function(){var t=this._getEditor();if(t){t=t.getEditorValue();return this.setProperty("value",t,!0),t}},setEnabled:function(t){this.setProperty("enabled",t,!0);var e=this._getEditor();e&&(e.setDisabled(!t),t&&(e.setReadOnly(t),e.setReadOnly(!t)))},setEditable:function(t){this.setProperty("editable",t,!0);var e=this._getEditor();e&&(e.setReadOnly(t),e.setReadOnly(!t))},exit:function(){this._oEditor=null}})});