sap.ui.define("u4a.m.SplitApp",["sap/m/SplitApp","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/dom/containsOrEquals"],function(i,d,g,t){"use strict";return i.extend("u4a.m.SplitApp",{metadata:{library:"u4a.m",properties:{masterPageFixed:{type:"boolean",defaultValue:!1},masterPageWidth:{type:"sap.ui.core.CSSSize",defaultValue:"330px"},masterPageExpand:{type:"boolean",defaultValue:!1},rightPageWidth:{type:"sap.ui.core.CSSSize",defaultValue:"330px"},rightPageExpand:{type:"boolean",defaultValue:!1},rightPageAutoHide:{type:"boolean",defaultValue:!0}},aggregations:{rightPage:{type:"sap.m.Page",multiple:!1}}},renderer:function(t,e){sap.m.SplitAppRenderer.render(t,e),e.getRightPage()&&e._rightPageRender(t,e)},onAfterRendering:function(){i.prototype.onAfterRendering.apply(this,arguments),g.system.phone&&this.setMasterPageWidth("100%"),this.getMasterPageFixed()?(this.setMode(sap.m.SplitAppMode.StretchCompressMode),this.setMasterPageExpand(!0),this._handleResize()):this.setMode(sap.m.SplitAppMode.HideMode);var t=this._oShowMasterBtn;if(null!=t&&null!=t.mEventRegistry.press&&(t.detachPress(t.mEventRegistry.press[0].fFunction),t.attachPress(this._attachPressMasterBtnEvent.bind(this))),this._oRightPage=document.getElementById(this.getId()+"-RightPage"),null!=this._oRightPage){var e=this.getDomRef();if(g.system.phone){var a=this.getAggregation("_navMaster").getDomRef();this._oRightPage.style.visibility="hidden",a.appendChild(this._oRightPage)}else e.appendChild(this._oRightPage);this.setRightPageExpand(this.getRightPageExpand())}},_handleResize:function(){i.prototype._handleResize.apply(this,arguments),this.getMode()==sap.m.SplitAppMode.StretchCompressMode&&this.$().hasClass("sapMSplitContainerPortrait")&&this.$().removeClass("sapMSplitContainerPortrait")},_getComputedWidth:function(t,e){if(null!=t){this._pageWidthValidCheck(e);var a,i;return d.sap.endsWith(e,"px")?(a=parseInt(e),d.sap.endsWith(t.sId,"Master")&&(a*=-1,0),i=a+"px"):(i="100%",d.sap.endsWith(t.sId,"Master")&&(a=parseInt(i),i=(a*=-1)+"%")),i}},_getMasterStyleDomId:function(){return this.getId()+"-u4aMSplitApp_masterStyle"},_getRightStyleDomId:function(){return this.getId()+"-u4aMSplitApp_rightStyle"},_setMasterAnimation:function(){if(!g.system.phone){var t=this._oMasterNav,e=this.getMasterPageWidth(),a=this._getComputedWidth(t,e);if(null!=t){var i=document.getElementById(this._getMasterStyleDomId());null!=i&&$(i).remove();var s=document.createElement("style");s.id=this._getMasterStyleDomId();var p=this.getId(),r=".u4aMSplitAppMaster"+p+"{";r+="width : "+e,r+="}",r+=".u4aMSplitAppMasterShow"+p+"{",r+="transform: translate3d(0px, 0px, 0px) !important;",r+="transition: all 300ms ease 0s !important;",r+="box-shadow: rgba(0, 0, 0, 0.15) 0px 0.625rem 1.875rem 0px, rgba(0, 0, 0, 0.15) 0px 0px 0px 1px !important;",r+="visibility: visible !important;",r+="}",r+=".u4aMSplitAppMasterHide"+p+"{",r+="transform: translate3d("+a+",0,0) !important;",r+="-webkit-transform: translate3d("+a+",0,0) !important;",r+="transition: all 300ms !important;",r+="-webkit-transition: all 300ms !important;",r+="box-shadow: rgba(255, 255, 255, 0) 0px 0rem 0rem 0px, rgba(255, 255, 255, 0) 0px 0px 0px 0px !important;",r+="}",s.innerText=r,document.head.appendChild(s),t.removeStyleClass("u4aMSplitAppMaster"+p),t.removeStyleClass("u4aMSplitAppMasterShow"+p),t.removeStyleClass("u4aMSplitAppMasterHide"+p),t.addStyleClass("u4aMSplitAppMaster"+p),this.getMasterPageExpand()?t.addStyleClass("u4aMSplitAppMasterShow"+p):t.addStyleClass("u4aMSplitAppMasterHide"+p)}}},_setRightAnimation:function(){var t=this._oRightPage,e=this.getRightPage();if(null!=t){var a=this.getRightPageWidth(),i=this._getComputedWidth(e,a),s=document.getElementById(this._getRightStyleDomId());null!=s&&$(s).remove();var p=document.createElement("style");p.id=this._getRightStyleDomId();var r=this.getId(),n=".u4aMSplitAppRightPage"+r+"{";n+="height: 100%;",n+="display: inline-block;",n+="position: absolute;",n+="z-index: 4;",n+="top: 0;",n+="box-sizing: border-box;",n+="width: "+a+";",n+="right: 0;",n+="border-left: #ebebeb;",n+="background-color: #ffffff;",n+="}",n+=".u4aMSplitAppRightShow"+r+"{",n+="transform: translate3d(0px, 0px, 0px) !important;",n+="transition: all 300ms ease 0s !important;",n+="box-shadow: rgba(0, 0, 0, 0.15) 0px 0.625rem 1.875rem 0px, rgba(0, 0, 0, 0.15) 0px 0px 0px 1px !important;",n+="visibility: visible !important;",n+="}",n+=".u4aMSplitAppRightHide"+r+"{",n+="transform: translate3d("+i+",0,0) !important;",n+="-webkit-transform: translate3d("+i+",0,0) !important;",n+="transition: all 300ms !important;",n+="-webkit-transition: all 300ms !important;",n+="box-shadow: rgba(255, 255, 255, 0) 0px 0rem 0rem 0px, rgba(255, 255, 255, 0) 0px 0px 0px 0px !important;",n+="visibility: hidden;",n+="}",p.innerText=n,document.head.appendChild(p);var o=$(t);o.removeClass("u4aMSplitAppRightPage"+r),o.removeClass("u4aMSplitAppRightShow"+r),o.removeClass("u4aMSplitAppRightHide"+r),o.addClass("u4aMSplitAppRightPage"+r),this.getRightPageExpand()?o.addClass("u4aMSplitAppRightShow"+r):o.addClass("u4aMSplitAppRightHide"+r)}},_attachPressMasterBtnEvent:function(){this._bMasterPageExpand=!this._bMasterPageExpand,this.setMasterPageExpand(this._bMasterPageExpand)},setMasterPageFixed:function(t){g.system.phone&&(t=!0),this.setProperty("masterPageFixed",t,!0),t?(this.setMode(sap.m.SplitAppMode.StretchCompressMode),this.setMasterPageExpand(t),this._handleResize()):this.setMode(sap.m.SplitAppMode.HideMode)},setMasterPageExpand:function(t){!g.system.phone&&this.getMode()!=sap.m.SplitAppMode.StretchCompressMode||(t=!0),this.setProperty("masterPageExpand",t,!0),this._bMasterPageExpand=t,this._setMasterAnimation()},setMasterPageWidth:function(t){this._pageWidthValidCheck(t),g.system.phone&&(t="100%"),this.setProperty("masterPageWidth",t,!0),this.setMasterPageExpand(this.getMasterPageExpand())},setRightPageWidth:function(t){this._pageWidthValidCheck(t),this.setProperty("rightPageWidth",t,!0),this.setRightPageExpand(this.getRightPageExpand())},setRightPageExpand:function(t){this.setProperty("rightPageExpand",t,!0),null!=this._oRightPage&&this._setRightAnimation()},setRightPageAutoHide:function(t){this.setProperty("rightPageAutoHide",t,!0)},_rightPageRender:function(t,e){var a=e.getId();t.write("<div"),t.addClass("u4aMSplitAppRightPage"+a),t.writeAttribute("id",a+"-RightPage"),t.writeClasses(),t.write(">"),t.renderControl(e.getRightPage()),t.write("</div>")},_pageWidthValidCheck:function(t){if(!d.sap.endsWith(t,"px")&&!d.sap.endsWith(t,"%"))throw new Error("[U4AIDE] property Type Error 'rightPageWidth' : 'px' 또는 % 단위만 입력 가능합니다.")},showMaster:function(){i.prototype.showMaster.apply(this,arguments),this.setMasterPageExpand(!0)},hideMaster:function(){i.prototype.hideMaster.apply(this,arguments),this.setMasterPageExpand(!1)},ontap:function(t){if(!g.system.phone){var e=!0,a=!1,i=!1,s=!1,p=this.getId(),r=d(t.target).closest(".sapMSplitContainerDetail, .sapMSplitContainerMaster, .u4aMSplitAppRightPage"+p),n=d(t.target).closest(".sapMPageHeader"),o=t.srcControl.getMetadata();0<r.length&&r.hasClass("sapMSplitContainerMaster")&&(a=!0),0<r.length&&r.hasClass("sapMSplitContainerDetail")&&(i=!0),0<r.length&&r.hasClass("u4aMSplitAppRightPage"+p)&&(s=!0);var h=!1;i&&0<n.length&&n.hasClass("sapMPageHeader")&&(e=!(h=!0)),h&&"sap.m.Button"!=o._sClassName&&(e=!0),h&&o==sap.ui.core.Icon.getMetadata()&&t.srcControl.getParent()instanceof sap.m.Button&&(e=!1),(a||s)&&(e=!1),h&&o==sap.ui.core.Icon.getMetadata()&&t.srcControl.getParent()instanceof sap.m.Button==0&&(e=!0),this.getMode()==sap.m.SplitAppMode.StretchCompressMode&&a&&!o.getEvent("press")&&(e=!0),e&&(this.hideMaster(),this.getRightPageAutoHide()&&this.setRightPageExpand(!1))}}})});