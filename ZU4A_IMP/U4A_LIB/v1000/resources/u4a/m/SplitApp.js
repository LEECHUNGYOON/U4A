sap.ui.define("u4a.m.SplitApp",["sap/m/SplitApp","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/dom/containsOrEquals"],function(a,b,c){"use strict";var d=a.extend("u4a.m.SplitApp",{metadata:{library:"u4a.m",properties:{masterPageFixed:{type:"boolean",defaultValue:!1},masterPageWidth:{type:"sap.ui.core.CSSSize",defaultValue:"330px"},masterPageExpand:{type:"boolean",defaultValue:!1},rightPageWidth:{type:"sap.ui.core.CSSSize",defaultValue:"330px"},rightPageExpand:{type:"boolean",defaultValue:!1},rightPageAutoHide:{type:"boolean",defaultValue:!0}},aggregations:{rightPage:{type:"sap.m.Page",multiple:!1}}},renderer:function(a,b){sap.m.SplitAppRenderer.render(a,b),b.getRightPage()&&b._rightPageRender(a,b)},onBeforeRendering:function(){this._setMasterAnimation(),this._setRightAnimation()},onAfterRendering:function(){a.prototype.onAfterRendering.apply(this,arguments),this.setMasterPageFixed(this.getMasterPageFixed());var b=this._oShowMasterBtn;if(null!=b&&null!=b.mEventRegistry.press&&(b.detachPress(b.mEventRegistry.press[0].fFunction),b.attachPress(this._attachPressMasterBtnEvent.bind(this))),this._oRightPage=document.getElementById(this.getId()+"-RightPage"),null!=this._oRightPage){var d=this.getDomRef();if(c.system.phone){var e=this.getAggregation("_navMaster"),f=e.getDomRef();this._oRightPage.style.visibility="hidden",f.appendChild(this._oRightPage)}else d.appendChild(this._oRightPage);this.setRightPageExpand(this.getRightPageExpand())}},_getComputedWidth:function(a,c){if(null!=a){this._pageWidthValidCheck(c);var d,e,f=!1;return b.sap.endsWith(c,"px")?(d=parseInt(c),b.sap.endsWith(a.sId,"Master")&&(d*=-1,f=!0),e=d+"px"):(e="100%",b.sap.endsWith(a.sId,"Master")&&(f=!0,d=parseInt(e),d*=-1,e=d+"%")),e}},_setMasterAnimation:function(){var a=this._oMasterNav,b=this.getMasterPageWidth(),c=this._getComputedWidth(a,b);if(null!=a){var d=document.getElementById("u4aMSplitApp_masterStyle");null!=d&&$(d).remove();var e=document.createElement("style");e.id="u4aMSplitApp_masterStyle";var f=".u4aMSplitAppMaster {";f+="width : "+b,f+="}",f+=".u4aMSplitAppMasterShow {",f+="transform: translate3d(0px, 0px, 0px) !important;",f+="transition: all 300ms ease 0s !important;",f+="box-shadow: rgba(0, 0, 0, 0.15) 0px 0.625rem 1.875rem 0px, rgba(0, 0, 0, 0.15) 0px 0px 0px 1px !important;",f+="visibility: visible !important;",f+="}",f+=".u4aMSplitAppMasterHide {",f+="transform: translate3d("+c+",0,0) !important;",f+="-webkit-transform: translate3d("+c+",0,0) !important;",f+="transition: all 300ms !important;",f+="-webkit-transition: all 300ms !important;",f+="box-shadow: rgba(255, 255, 255, 0) 0px 0rem 0rem 0px, rgba(255, 255, 255, 0) 0px 0px 0px 0px !important;",f+="}",e.innerText=f,document.head.appendChild(e),a.removeStyleClass("u4aMSplitAppMaster"),a.removeStyleClass("u4aMSplitAppMasterShow"),a.removeStyleClass("u4aMSplitAppMasterHide"),a.addStyleClass("u4aMSplitAppMaster"),this.getMasterPageExpand()?a.addStyleClass("u4aMSplitAppMasterShow"):a.addStyleClass("u4aMSplitAppMasterHide")}},_setRightAnimation:function(){var a=this._oRightPage,b=this.getRightPage();if(null!=a){var c=this.getRightPageWidth(),d=this._getComputedWidth(b,c),e=document.getElementById("u4aMSplitApp_rightStyle");null!=e&&$(e).remove();var f=document.createElement("style");f.id="u4aMSplitApp_rightStyle";var g=".u4aMSplitAppRightPage {";g+="height: 100%;",g+="display: inline-block;",g+="position: absolute;",g+="z-index: 4;",g+="top: 0;",g+="box-sizing: border-box;",g+="width: "+c+";",g+="right: 0;",g+="border-left: #ebebeb;",g+="background-color: #ffffff;",g+="}",g+=".u4aMSplitAppRightShow {",g+="transform: translate3d(0px, 0px, 0px) !important;",g+="transition: all 300ms ease 0s !important;",g+="box-shadow: rgba(0, 0, 0, 0.15) 0px 0.625rem 1.875rem 0px, rgba(0, 0, 0, 0.15) 0px 0px 0px 1px !important;",g+="visibility: visible !important;",g+="}",g+=".u4aMSplitAppRightHide {",g+="transform: translate3d("+d+",0,0) !important;",g+="-webkit-transform: translate3d("+d+",0,0) !important;",g+="transition: all 300ms !important;",g+="-webkit-transition: all 300ms !important;",g+="box-shadow: rgba(255, 255, 255, 0) 0px 0rem 0rem 0px, rgba(255, 255, 255, 0) 0px 0px 0px 0px !important;",g+="visibility: hidden;",g+="}",f.innerText=g,document.head.appendChild(f);var h=$(a);h.removeClass("u4aMSplitAppRightPage"),h.removeClass("u4aMSplitAppRightShow"),h.removeClass("u4aMSplitAppRightHide"),h.addClass("u4aMSplitAppRightPage"),this.getRightPageExpand()?h.addClass("u4aMSplitAppRightShow"):h.addClass("u4aMSplitAppRightHide")}},_attachPressMasterBtnEvent:function(){this._bMasterPageExpand=!this._bMasterPageExpand,this.setMasterPageExpand(this._bMasterPageExpand)},setMasterPageFixed:function(a){a?this.setMode(sap.m.SplitAppMode.StretchCompressMode):this.setMode(sap.m.SplitAppMode.HideMode),this.setProperty("masterPageFixed",a,!0)},setMasterPageExpand:function(a){this.getMode()==sap.m.SplitAppMode.StretchCompressMode&&(a=!0),this.setProperty("masterPageExpand",a,!0),this._bMasterPageExpand=a,this._setMasterAnimation()},setMasterPageWidth:function(a){this._pageWidthValidCheck(a),this.setProperty("masterPageWidth",a,!0),this.setMasterPageExpand(this.getMasterPageExpand())},setRightPageWidth:function(a){this._pageWidthValidCheck(a),this.setProperty("rightPageWidth",a,!0),this.setRightPageExpand(this.getRightPageExpand())},setRightPageExpand:function(a){this.setProperty("rightPageExpand",a,!0);null==this._oRightPage||this._setRightAnimation()},setRightPageAutoHide:function(a){this.setProperty("rightPageAutoHide",a,!0)},_rightPageRender:function(a,b){a.write("<div"),a.addClass("u4aMSplitAppRightPage"),a.writeAttribute("id",b.getId()+"-RightPage"),a.writeClasses(),a.write(">"),a.renderControl(b.getRightPage()),a.write("</div>")},_pageWidthValidCheck:function(a){if(!b.sap.endsWith(a,"px")&&!b.sap.endsWith(a,"%"))throw new Error("[U4AIDE] property Type Error 'rightPageWidth' : 'px' \uB610\uB294 % \uB2E8\uC704\uB9CC \uC785\uB825 \uAC00\uB2A5\uD569\uB2C8\uB2E4.")},showMaster:function(){a.prototype.showMaster.apply(this,arguments),this.setMasterPageExpand(!0)},hideMaster:function(){a.prototype.hideMaster.apply(this,arguments),this.setMasterPageExpand(!1)},ontap:function(a){if(!c.system.phone){var d=!0,e=!1,f=!1,g=!1,h=b(a.target).closest(".sapMSplitContainerDetail, .sapMSplitContainerMaster, .u4aMSplitAppRightPage"),i=b(a.target).closest(".sapMPageHeader"),j=a.srcControl.getMetadata();0<h.length&&h.hasClass("sapMSplitContainerMaster")&&(e=!0),0<h.length&&h.hasClass("sapMSplitContainerDetail")&&(f=!0),0<h.length&&h.hasClass("u4aMSplitAppRightPage")&&(g=!0);var k=!1;f&&0<i.length&&i.hasClass("sapMPageHeader")&&(k=!0,d=!1),k&&"sap.m.Button"!=j._sClassName&&(d=!0),k&&j==sap.ui.core.Icon.getMetadata()&&a.srcControl.getParent()instanceof sap.m.Button&&(d=!1),(e||g)&&(d=!1),k&&j==sap.ui.core.Icon.getMetadata()&&!1==a.srcControl.getParent()instanceof sap.m.Button&&(d=!0),this.getMode()==sap.m.SplitAppMode.StretchCompressMode&&e&&!j.getEvent("press")&&(d=!0),d&&(this.hideMaster(),this.getRightPageAutoHide()&&this.setRightPageExpand(!1))}}});return d});