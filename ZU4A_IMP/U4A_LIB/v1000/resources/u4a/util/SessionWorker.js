sap.ui.define("u4a.util.SessionWorker",["sap/ui/core/Control"],function(e){return e.extend("u4a.util.SessionWorker",{metadata:{library:"u4a.util",properties:{minute:{type:"int",defaultValue:0},activeWorker:{type:"boolean",defaultValue:!0}},events:{finished:{allowPreventDefault:!0}}},_oWorker:null,_maxMinute:120,init:function(){if(!window.Worker){console.log("Does not support this browser.");return}},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.writeAttribute("visibility","hidden"),e.addStyle("display","none"),e.writeStyles(),e.write(">"),e.write("</div>")},setActiveWorker:function(e){var t={};if(!e){null!=this._oWorker&&(t.isActive=!1,this._oWorker.postMessage(t),this._oWorker.terminate(),this._oWorker=null);return}this.createWorker()},createWorker:function(){var e={},t=this.getMinute();this._oWorker instanceof Worker&&(this._oWorker.terminate(),this._oWorker=null),0!=t&&(this._oWorker=new Worker("/zu4a_imp/publish/CommonJS/workers/SessionWorker.js"),e.keeptime=t,this._oWorker.postMessage(e),this._oWorker.onmessage=(function(e){this.onMessage(e)}).bind(this))},onMessage:function(e){"X"==e.data&&this.fireFinished()},onAfterRendering:function(){if(this.getMinute()>this._maxMinute){let e="The 'minute' property of the 'SessionWorker' cannot exceed a maximum value of 120 minutes.";throw oU4AErroHandle&&"function"==typeof oU4AErroHandle.seterroHTML&&oU4AErroHandle.seterroHTML(e),console.error(e),Error(e)}this.createWorker()},exit:function(){this._oWorker&&(this._oWorker.terminate(),this._oWorker=null)}})});