sap.ui.define("u4a.charts.am.AngularGauge",["sap/ui/core/Control"],(function(e){"use strict";return e.extend("u4a.charts.am.AngularGauge",{metadata:{library:"u4a.charts.am",properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},startValue:{type:"int",defaultValue:0},endValue:{type:"int",defaultValue:100},startAngle:{type:"int",defaultValue:-90},endAngle:{type:"int",defaultValue:90},fontSize:{type:"int",defaultValue:10},valueInterval:{type:"int",defaultValue:10},tickThickness:{type:"int",defaultValue:1},outlineThickness:{type:"int",defaultValue:2},unit:{type:"string",defaultValue:null},centerX:{type:"sap.ui.core.CSSSize",defaultValue:"0%"},centerY:{type:"sap.ui.core.CSSSize",defaultValue:"0%"},headerTitle:{type:"string",defaultValue:null},headerTitleSize:{type:"int",defaultValue:20},headerTitleColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},headerTitleBold:{type:"boolean",defaultValue:!0},innerTitle:{type:"string",defaultValue:null},innerTitleSize:{type:"int",defaultValue:20},innerTitleColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},innerTitleBold:{type:"boolean",defaultValue:!0},bottomText:{type:"string",defaultValue:null},bottomTextColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},bottomTextSize:{type:"int",defaultValue:20},bottomTextBold:{type:"boolean",defaultValue:!0},arrowValue:{type:"float",defaultValue:0},arrowRadius:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},arrowColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"}},defaultAggregation:"gaugeBand",aggregations:{gaugeBands:{type:"u4a.charts.am.AngularGaugeBand",multiple:!0,singularName:"gaugeBand"}},events:{gaugeClick:{}}},init:function(){void 0===window.AmCharts&&jQuery.u4aJSloadAsync("/zu4a_imp/tools/amchart/v343/amcharts/amcharts.js",(function(){})),void 0===window.AmCharts.AmAngularGauge&&jQuery.u4aJSloadAsync("/zu4a_imp/tools/amchart/v343/amcharts/gauge.js",(function(){}))},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.addStyle("width",t.getWidth()),e.addStyle("height",t.getHeight()),e.writeStyles(),e.write(">"),e.write("</div>")},setArrowValue:function(e){if(this.setProperty("arrowValue",e,!0),void 0!==this._gaugeArrow){var t=this.getStartValue(),a=this.getEndValue();e<t&&(console.warn("Warning! : ArrowValue가 StartValue보다 작습니다. 차트의 표현이 정확하지 않을 수 있습니다."),e=t),e>a&&(console.warn("Warning! : ArrowValue가 EndValue보다 큽니다. 차트의 표현이 정확하지 않을 수 있습니다."),e=a),this._gaugeArrow.setValue(e)}},setArrowColor:function(e){this.setProperty("arrowColor",e,!0),void 0===this._gaugeArrow&&void 0===this._gaugeChart||(this._gaugeArrow.color=e,this._gaugeChart.validateNow())},setBottomText:function(e){this.setProperty("bottomText",e,!0),void 0!==this._gaugeAxis&&(this._gaugeAxis.setBottomText(this.getBottomText()),this._gaugeChart.validateNow())},setInnerTitle:function(e){this.setProperty("innerTitle",e,!0),void 0!==this._gaugeAxis&&this._gaugeAxis.setTopText(e)},onAfterRendering:function(){this._createChart(),this._attachGaugeEvent()},_attachGaugeEvent:function(){var e=this,t=document.getElementById(this.getId());null!=t&&(t.onclick=function(t){e.fireGaugeClick()})},_createChart:function(){var e=this,t=this.getStartValue(),a=this.getEndValue();if(!(t>=a)){var r=this.getValueInterval();if(r<=0&&(console.error("error: property 'valueInterval',  1 이상의 값만 입력할 수 있습니다."),r=10),(t+a)%r==0){var i=new AmCharts.AmAngularGauge,l=new AmCharts.GaugeAxis;this._gaugeChart=i,this._gaugeAxis=l,i.addTitle(this.getHeaderTitle(),this.getHeaderTitleSize(),this.getHeaderTitleColor(),1,this.getHeaderTitleBold()),l.centerX=this.getCenterX(),l.centerY=this.getCenterY(),i.fontSize=this.getFontSize(),l.startAngle=this.getStartAngle(),l.endAngle=this.getEndAngle(),l.unit=this.getUnit(),l.axisThickness=this.getOutlineThickness(),l.radius="80%",l.startValue=t,l.endValue=a,l.valueInterval=r,l.topText=this.getInnerTitle(),l.topTextColor=this.getInnerTitleColor(),l.topTextBold=this.getInnerTitleBold(),l.topTextFontSize=this.getInnerTitleSize(),l.tickThickness=this.getTickThickness(),l.bottomTextYOffset=-20,l.setBottomText(this.getBottomText()),l.bottomTextFontSize=this.getBottomTextSize(),l.bottomTextColor=this.getBottomTextColor(),l.bottomTextBold=this.getBottomTextBold(),l.addListener("clickBand",(function(t){event.stopPropagation();for(var a=t.dataItem.properties,r=e.getGaugeBands(),i=r.length,l=0;l<i;l++){var o=r[l];if(o.getId()==a.id){o.fireBandClick();break}}})),this._setGaugeBand(l),i.addAxis(l);var o=new AmCharts.GaugeArrow,n=this.getArrowValue();this._gaugeArrow=o,n<t&&(console.warn("Warning! : ArrowValue가 StartValue보다 작습니다. 차트의 표현이 정확하지 않을 수 있습니다."),n=t),n>a&&(console.warn("Warning! : ArrowValue가 EndValue보다 큽니다. 차트의 표현이 정확하지 않을 수 있습니다."),n=a),o.setValue(n),o.radius=this.getArrowRadius(),o.color=this.getArrowColor(),i.addArrow(o),i.write(this.getId()),this._gaugeChart.validateNow();var u=this.aCustomStyleClasses;if(null!=u){var s=u.join(" ");jQuery(this.getDomRef()).addClass(s)}}else console.error("error: startValue, EndValue의 합을 Interval값으로 나눈 값이 0이 되어야 합니다.")}},_setGaugeBand:function(e){var t=[],a=this.getGaugeBands(),r=a.length;if(0!=r){for(var i=0;i<r;i++){var l=a[i],o=new AmCharts.GaugeBand,n=l.getStartValue(),u=l.getEndValue(),s=this.getStartValue(),g=this.getEndValue();n<s&&(console.warn("Warning! : Band의 StartValue가 Gauge의 StartValue보다 작습니다. 차트의 표현이 정확하지 않을 수 있습니다."),n=s),u>g&&(console.warn("Warning! : Band의 EndValue가 Gauge의 EndValue보다 큽니다. 차트의 표현이 정확하지 않을 수 있습니다."),u=g),o.properties=l.mProperties,o.properties.id=l.getId(),o.startValue=n,o.endValue=u,o.color=l.getBandColor(),o.innerRadius=l.getInnerRadius(),o.radius=l.getRadius(),1==l.getGradient()&&(o.gradientRatio=[.5,0,-.5]),l._gaugeBand=o,t.push(o),o=null}e.bands=t}}})}));