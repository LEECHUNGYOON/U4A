sap.ui.define("u4a.charts.am.AngularGauge",["sap/ui/core/Control"],function(e){"use strict";return e.extend("u4a.charts.am.AngularGauge",{metadata:{library:"u4a.charts.am",properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},startValue:{type:"int",defaultValue:0},endValue:{type:"int",defaultValue:100},startAngle:{type:"int",defaultValue:-90},endAngle:{type:"int",defaultValue:90},fontSize:{type:"int",defaultValue:10},valueInterval:{type:"int",defaultValue:10},tickThickness:{type:"int",defaultValue:1},outlineThickness:{type:"int",defaultValue:2},unit:{type:"string",defaultValue:null},centerX:{type:"sap.ui.core.CSSSize",defaultValue:"0%"},centerY:{type:"sap.ui.core.CSSSize",defaultValue:"0%"},headerTitle:{type:"string",defaultValue:null},headerTitleSize:{type:"int",defaultValue:20},headerTitleColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},headerTitleBold:{type:"boolean",defaultValue:!0},innerTitle:{type:"string",defaultValue:null},innerTitleSize:{type:"int",defaultValue:20},innerTitleColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},innerTitleBold:{type:"boolean",defaultValue:!0},bottomText:{type:"string",defaultValue:null},bottomTextColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"},bottomTextSize:{type:"int",defaultValue:20},bottomTextBold:{type:"boolean",defaultValue:!0},arrowValue:{type:"float",defaultValue:0},arrowRadius:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},arrowColor:{type:"sap.ui.core.CSSColor",defaultValue:"#000000"}},defaultAggregation:"gaugeBand",aggregations:{gaugeBands:{type:"u4a.charts.am.AngularGaugeBand",multiple:!0,singularName:"gaugeBand"}},events:{gaugeClick:{}}},init:function(){try{void 0===AmCharts.AmAngularGauge&&jQuery.u4aJSloadAsync("/zu4a_imp/tools/amchart/v343/amcharts/gauge.js",function(){})}catch(e){jQuery.u4aJSloadAsync("/zu4a_imp/tools/amchart/v343/amcharts/amcharts.js",function(){}),jQuery.u4aJSloadAsync("/zu4a_imp/tools/amchart/v343/amcharts/gauge.js",function(){})}},renderer:function(e,t){e.write("<div"),e.writeControlData(t),e.addStyle("width",t.getWidth()),e.addStyle("height",t.getHeight()),e.writeStyles(),e.write(">"),e.write("</div>")},setArrowValue:function(e){var t,a;this.setProperty("arrowValue",e,!0),void 0!==this._gaugeArrow&&(t=this.getStartValue(),a=this.getEndValue(),e<t&&(console.warn("Warning! : ArrowValue가 StartValue보다 작습니다. 차트의 표현이 정확하지 않을 수 있습니다."),e=t),a<e&&(console.warn("Warning! : ArrowValue가 EndValue보다 큽니다. 차트의 표현이 정확하지 않을 수 있습니다."),e=a),this._gaugeArrow.setValue(e))},setArrowColor:function(e){this.setProperty("arrowColor",e,!0),void 0===this._gaugeArrow&&void 0===this._gaugeChart||(this._gaugeArrow.color=e,this._gaugeChart.validateNow())},setBottomText:function(e){this.setProperty("bottomText",e,!0),void 0!==this._gaugeAxis&&(this._gaugeAxis.setBottomText(this.getBottomText()),this._gaugeChart.validateNow())},setInnerTitle:function(e){this.setProperty("innerTitle",e,!0),void 0!==this._gaugeAxis&&this._gaugeAxis.setTopText(e)},onAfterRendering:function(){this._createChart(),this._attachGaugeEvent()},_attachGaugeEvent:function(){var t=this,e=document.getElementById(this.getId());null!=e&&(e.onclick=function(e){t.fireGaugeClick()})},_createChart:function(){var e,t,a,r,i,l,o,n=this,u=this.getStartValue(),s=this.getEndValue();s<=u||((e=this.getValueInterval())<=0&&(console.error("error: property 'valueInterval',  1 이상의 값만 입력할 수 있습니다."),e=10),(u+s)%e==0?(t=new AmCharts.AmAngularGauge,a=new AmCharts.GaugeAxis,this._gaugeChart=t,this._gaugeAxis=a,t.addTitle(this.getHeaderTitle(),this.getHeaderTitleSize(),this.getHeaderTitleColor(),1,this.getHeaderTitleBold()),a.centerX=this.getCenterX(),a.centerY=this.getCenterY(),t.fontSize=this.getFontSize(),a.startAngle=this.getStartAngle(),a.endAngle=this.getEndAngle(),a.unit=this.getUnit(),a.axisThickness=this.getOutlineThickness(),a.radius="80%",a.startValue=u,a.endValue=s,a.valueInterval=e,a.topText=this.getInnerTitle(),a.topTextColor=this.getInnerTitleColor(),a.topTextBold=this.getInnerTitleBold(),a.topTextFontSize=this.getInnerTitleSize(),a.tickThickness=this.getTickThickness(),a.bottomTextYOffset=-20,a.setBottomText(this.getBottomText()),a.bottomTextFontSize=this.getBottomTextSize(),a.bottomTextColor=this.getBottomTextColor(),a.bottomTextBold=this.getBottomTextBold(),a.addListener("clickBand",function(e){event.stopPropagation();for(var t=e.dataItem.properties,a=n.getGaugeBands(),r=a.length,i=0;i<r;i++){var l=a[i];if(l.getId()==t.id){l.fireBandClick();break}}}),this._setGaugeBand(a),t.addAxis(a),r=new AmCharts.GaugeArrow,i=this.getArrowValue(),this._gaugeArrow=r,i<u&&(console.warn("Warning! : ArrowValue가 StartValue보다 작습니다. 차트의 표현이 정확하지 않을 수 있습니다."),i=u),s<i&&(console.warn("Warning! : ArrowValue가 EndValue보다 큽니다. 차트의 표현이 정확하지 않을 수 있습니다."),i=s),r.setValue(i),r.radius=this.getArrowRadius(),r.color=this.getArrowColor(),t.addArrow(r),t.write(this.getId()),this._gaugeChart.validateNow(),null!=(l=this.aCustomStyleClasses)&&(o=l.join(" "),jQuery(this.getDomRef()).addClass(o))):console.error("error: startValue, EndValue의 합을 Interval값으로 나눈 값이 0이 되어야 합니다."))},_setGaugeBand:function(e){var t=[],a=this.getGaugeBands(),r=a.length;if(0!=r){for(var i=0;i<r;i++){var l=a[i],o=new AmCharts.GaugeBand,n=l.getStartValue(),u=l.getEndValue(),s=this.getStartValue(),g=this.getEndValue();n<s&&(console.warn("Warning! : Band의 StartValue가 Gauge의 StartValue보다 작습니다. 차트의 표현이 정확하지 않을 수 있습니다."),n=s),g<u&&(console.warn("Warning! : Band의 EndValue가 Gauge의 EndValue보다 큽니다. 차트의 표현이 정확하지 않을 수 있습니다."),u=g),o.properties=l.mProperties,o.properties.id=l.getId(),o.startValue=n,o.endValue=u,o.color=l.getBandColor(),o.innerRadius=l.getInnerRadius(),o.radius=l.getRadius(),1==l.getGradient()&&(o.gradientRatio=[.5,0,-.5]),l._gaugeBand=o,t.push(o),o=null}e.bands=t}}})});