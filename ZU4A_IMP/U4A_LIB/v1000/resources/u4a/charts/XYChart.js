sap.ui.define("u4a.charts.am5.XYChart",["u4a/charts/am5/SerialChart","sap/base/util/uid","u4a/charts/am5/am5Loader","u4a/charts/am5/am5xyLoader"],function(a,b){"use strict";function c(){return new Promise(a=>{function b(c){return"undefined"!=typeof window.am5&&"undefined"!=typeof window.am5xy?a():void setTimeout(function(){b(c)},100)}b()})}function d(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b?._createCategoryAxis&&"undefined"!=typeof a?._oChart?.oRoot&&"undefined"!=typeof a?._oChart?.oChartInstance){b._oChart.oRoot=a._oChart.oRoot;let c=b._createCategoryAxis(a);if("undefined"!=typeof c)return c.data.setAll(b._oChart.aData),!0===a.getRotate()?void a._oChart.oChartInstance.yAxes.push(c):void a._oChart.oChartInstance.xAxes.push(c)}}function e(a){return new Promise(function(b){am5.ready(async function(){-1===am5.registry.licenses.findIndex(b=>b===atob(a.licenceKey))&&am5.addLicense(atob(a.licenceKey));let c=a.getDomRef()||void 0;if("undefined"==typeof c)return console.error("\uCC28\uD2B8 dom \uC5C6\uC74C!!!"),b();if(-1!==am5.registry.rootElements.findIndex(a=>a?.dom===c))return b();let d=am5.Root.new(c);a.setChartTheme(d),a._drawChart(d),await a._oChart.oChartInstance.appear(),b()})})}function f(a,b){if("undefined"!=typeof a?._oChart?.oRoot&&"undefined"!=typeof a?._oChart?.oChartInstance){let c=b.getValueAxis()||void 0;if("undefined"!=typeof c?._createValueAxis){c._oChart.oRoot=a._oChart.oRoot;let b=c._createValueAxis(a);return"undefined"==typeof b?void 0:!0===a.getRotate()?void a._oChart.oChartInstance.xAxes.push(b):void a._oChart.oChartInstance.yAxes.push(b)}}}function g(a){let b=a.getCategoryAxis();if(0!==b.length)for(let c,e=0,g=b.length;e<g;e++)c=b[e],d(a,c),f(a,c),c._createSeries(a)}function h(a){let b=a.getLegend()||void 0;if("undefined"!=typeof b?._createLegend){let c=b._createLegend();"undefined"==typeof c||(a._oChart.oChartInstance.children.push(c),c.data.setAll(a._oChart.oChartInstance.series.values))}}function i(a){return new Promise(async function(b){await c(),await e(a),a.fireAfterRenderingFinish(),b()})}u4a.charts.am5.WheelType={zoomX:"zoomX",zoomY:"zoomY",zoomXY:"zoomXY",panX:"panX",panY:"panY",panXY:"panXY",none:"none"},sap.ui.base.DataType.registerEnum("u4a.charts.am5.WheelType",u4a.charts.am5.WheelType),u4a.charts.am5.MaxTooltipDistanceType={xy:"xy",x:"x",y:"y"},sap.ui.base.DataType.registerEnum("u4a.charts.am5.MaxTooltipDistanceType",u4a.charts.am5.MaxTooltipDistanceType),u4a.charts.am5.ScrollbarXPosition={top:"top",bottom:"bottom"},sap.ui.base.DataType.registerEnum("u4a.charts.am5.ScrollbarXPosition",u4a.charts.am5.ScrollbarXPosition),u4a.charts.am5.ScrollbarYPosition={left:"left",right:"right"},sap.ui.base.DataType.registerEnum("u4a.charts.am5.ScrollbarYPosition",u4a.charts.am5.ScrollbarYPosition);let j=a.extend("u4a.charts.am5.XYChart",{metadata:{library:"u4a.charts.am5",properties:{maxTooltipDistance:{type:"int",defaultValue:0},maxTooltipDistanceBy:{type:"u4a.charts.am5.MaxTooltipDistanceType",default:"xy"},panX:{type:"boolean",defaultValue:!1},panY:{type:"boolean",defaultValue:!1},wheelStep:{type:"float",defaultValue:.25},wheelY:{type:"u4a.charts.am5.WheelType",defaultValue:"none"},wheelX:{type:"u4a.charts.am5.WheelType",defaultValue:"none"},scrollbarXPosition:{type:"u4a.charts.am5.ScrollbarXPosition",defaultValue:"top"},scrollbarYPosition:{type:"u4a.charts.am5.ScrollbarYPosition",defaultValue:"right"},rotate:{type:"boolean",defaultValue:!1}},aggregations:{categoryAxis:{type:"u4a.charts.am5.CategoryAxis",multiple:!0,singularName:"categoryAxis"},background:{type:"u4a.charts.am5.Background",multiple:!1},plotBackground:{type:"u4a.charts.am5.Background",multiple:!1},scrollbarX:{type:"u4a.charts.am5.Scrollbar",multiple:!1},scrollbarY:{type:"u4a.charts.am5.Scrollbar",multiple:!1},legend:{type:"u4a.charts.am5.Legend",multiple:!1},title:{type:"u4a.charts.am5.Title",multiple:!1},zoomOutButton:{type:"u4a.charts.am5.ZoomOutButton",multiple:!1}},events:{afterRenderingFinish:{visibility:"restricted",deprecated:!0},click:{},dblclick:{},rightclick:{}}},init:function(){a.prototype.init.apply(this,arguments),this._aExcludeProp=["visible","width","height","rotate"],sap.ui.getCore().attachThemeChanged(function(){this.setChartTheme(this._oChart.oRoot)}.bind(this))},onBeforeRendering:function(){this._removeChart()},renderer:function(a,b){a.openStart("div",b),a.class("u4aAM5XYChart"),a.style("width",b.getWidth()||"auto"),a.style("height",b.getHeight()||"100%"),a.openEnd(),a.close("div")},onAfterRendering:function(a){if("undefined"==typeof window?.oU4A?.taskPromiseStack)return void i(a.srcControl);let c=b(),d=new Promise(async function(b){await i(a.srcControl),b(c)});d.uKey=c,oU4A.taskPromiseStack.push(d)},exit:function(){this._removeChart()},_drawChart:function(a){this._oChart.oRoot=a;let b=this._getChartProperies(this._aExcludeProp),c=this.getDomRef()||void 0;return"undefined"==typeof c&&(b.width=this._convAm5CssSize(this.getWidth()||"100%"),b.height=this._convAm5CssSize(this.getHeight()||"100%"),b.visible=this.getVisible()),b.layout=this._oChart.oRoot.verticalLayout,b.cursor=am5xy.XYCursor.new(this._oChart.oRoot,{behavior:"none"}),b.cursor.lineX.set("visible",!1),b.cursor.lineY.set("visible",!1),this._oChart.oChartInstance=this._oChart.oRoot.container.children.push(am5xy.XYChart.new(this._oChart.oRoot,b)),this._setBackGround(),this._setPlotBackGround(),this._oChart.oChartInstance.events.on("click",function(a){this._fireEvent(a)}.bind(this)),this._oChart.oChartInstance.events.on("dblclick",function(a){this._fireEvent(a)}.bind(this)),this._oChart.oChartInstance.events.on("rightclick",function(a){this._fireEvent(a)}.bind(this)),this._getChartData(this),g(this),this._setNoDataChartContent(),h(this),this._setTitle(),this._createScrollbarX(),this._createScrollbarY(),this._createZoomOutButton(),this._oChart.oChartInstance},_setNoDataChartContent:function(){if("undefined"==typeof this?._oChart?.oChartInstance?.series?.values?.length)return void this._showNoDataChart();if(0===this?._oChart?.oChartInstance?.series?.values?.length)return void this._showNoDataChart();let a=!1;for(let b,c=0,d=this._oChart.oChartInstance.series.values.length;c<d;c++)if((b=this._oChart.oChartInstance.series.values[c],"undefined"!=typeof b?.data?.values?.length)&&0!==b?.data?.values?.length&&-1!==b?.data?.values.findIndex(a=>"undefined"!=typeof a.value&&null!==a.value)){a=!0;break}!0==a||this._showNoDataChart()},_showNoDataChart:function(){var a=[{index:0,value:0,openValue:null}];0===this._oChart.oChartInstance.xAxes.values.length&&this._oChart.oChartInstance.xAxes.push(am5xy.CategoryAxis.new(this._oChart.oRoot,{categoryField:"country",renderer:am5xy.AxisRendererX.new(this._oChart.oRoot,{})}));let b=this._oChart.oChartInstance.xAxes.values[0];b.data.setAll(a),0===this._oChart.oChartInstance.yAxes.values.length&&this._oChart.oChartInstance.yAxes.push(am5xy.ValueAxis.new(this._oChart.oRoot,{renderer:am5xy.AxisRendererY.new(this._oChart.oRoot,{})}));let c=this._oChart.oChartInstance.yAxes.values[0];0===this._oChart.oChartInstance.series.values.length&&this._oChart.oChartInstance.series.push(am5xy.ColumnSeries.new(this._oChart.oRoot,{xAxis:b,yAxis:c,valueYField:"value",categoryXField:"index"}));let d=this._oChart.oChartInstance.series.values[0];d.data.setAll(a)},_fireEvent:function(a){if("undefined"==typeof a?.point)return;if("undefined"==typeof a?.type)return;let b=a.type,c=a.point,d={};d.pointX=c.x,d.pointY=c.y,this.fireEvent(b,d)},_getChartData:function(){let a=this.getCategoryAxis();if(0!==a.length)for(let b,c=0,d=a.length;c<d;c++)b=a[c],b._getChartData()},_createZoomOutButton:function(){if("undefined"!=typeof this?._oChart?.oChartInstance?.zoomOutButton){let a=this.getZoomOutButton()||void 0;if("undefined"!=typeof a?._getChartData){a._oChart.oChartInstance=this._oChart.oChartInstance.zoomOutButton,this._oChart.oChartInstance.zoomOutButton.setAll(a._getChartData());let b=a.getBackground()||void 0;"undefined"!=typeof b&&(b._oChart.oChartInstance=this._oChart.oChartInstance.zoomOutButton.get("background"),b._oChart.oChartInstance.setAll(b._getChartData()))}}},_createScrollbarX:function(){if("undefined"!=typeof this?._oChart?.oChartInstance){let a=this.getScrollbarX()||void 0;if("undefined"!=typeof a?._createScrollbar){let b=a._createScrollbar("horizontal");"undefined"==typeof b||this._oChart.oChartInstance.set("scrollbarX",b)}}},_createScrollbarY:function(){if("undefined"!=typeof this?._oChart?.oChartInstance){let a=this.getScrollbarY()||void 0;if("undefined"!=typeof a?._createScrollbar){let b=a._createScrollbar("vertical");"undefined"==typeof b||this._oChart.oChartInstance.set("scrollbarY",b)}}},_setTitle:function(){if("undefined"!=typeof this?._oChart?.oChartInstance){let a=this.getTitle()||void 0;if("undefined"!=typeof a?._createTitle){let b=a?._createTitle();"undefined"==typeof b||this._oChart.oChartInstance.children.moveValue(b,0)}}},_setBackGround:function(){if("undefined"!=typeof this?._oChart?.oChartInstance){this._oChart.oChartInstance.set("background");let a=this.getBackground()||void 0;if("undefined"!=typeof a?._createSprite){let b=a._createSprite();"undefined"==typeof b||this._oChart.oChartInstance.set("background",b)}}},_setPlotBackGround:function(){if("undefined"!=typeof this?._oChart?.oChartInstance?.plotContainer){this._oChart.oChartInstance.plotContainer.set("background");let a=this.getPlotBackground()||void 0;if("undefined"!=typeof a?._createSprite){let b=a._createSprite();"undefined"==typeof b||this._oChart.oChartInstance.plotContainer.set("background",b)}}},_removeChart:function(){"undefined"==typeof this?._oChart?.oRoot||(this._oChart.oRoot.dispose(),this._oChart={})},_setDomStyle:function(a,b){let c=this.getDomRef()||void 0;"undefined"==typeof c||(c.style[a]=b)},setParent:function(b){a.prototype.setParent.apply(this,arguments),null===b&&this._removeChart()},setMaxTooltipDistance:function(a){let b=this._setProperty("maxTooltipDistance",a);this._setChartSettings("maxTooltipDistance",b)},setMaxTooltipDistanceBy:function(a){let b=this._setProperty("maxTooltipDistanceBy",a);this._setChartSettings("maxTooltipDistanceBy",b)},setMaxTooltipDistanceBy:function(a){let b=this._setProperty("maxTooltipDistanceBy",a);this._setChartSettings("maxTooltipDistanceBy",b)},setPanX:function(a){let b=this._setProperty("panX",a);this._setChartSettings("panX",b)},setPanY:function(a){let b=this._setProperty("panY",a);this._setChartSettings("panY",b)},setWheelStep:function(a){let b=this._setProperty("wheelStep",a);this._setChartSettings("wheelStep",b)},setWheelY:function(a){let b=this._setProperty("wheelY",a);this._setChartSettings("wheelY",b)},setWheelX:function(a){let b=this._setProperty("wheelX",a);this._setChartSettings("wheelX",b)},setRotate:function(a){this._setProperty("rotate",a);"undefined"==typeof this?._oChart?.oChartInstance||(this._oChart.oChartInstance.dispose(),this._drawChart(this._oChart.oRoot))},setBackground:function(a){this.setAggregation("background",a,!0),this._setBackGround()}});return j});