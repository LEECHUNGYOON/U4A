sap.ui.define("u4a.charts.am5.BarSetting",["sap/ui/core/Element","u4a/charts/am5/Settings"],function(a,b){"use strict";u4a.charts.am5.ValueShowType={Working:"Working",Change:"Change",ChangePercent:"ChangePercent",ChangeSelection:"ChangeSelection",ChangeSelectionPercent:"ChangeSelectionPercent",ChangePrevious:"ChangePrevious",ChangePreviousPercent:"ChangePreviousPercent",Total:"Total",TotalPercent:"TotalPercent",Sum:"Sum"},sap.ui.base.DataType.registerEnum("u4a.charts.am5.ValueShowType",u4a.charts.am5.ValueShowType);let c=a.extend("u4a.charts.am5.BarSetting",{metadata:{library:"u4a.charts.am5",properties:{name:{type:"string",defaultValue:""},stacked:{type:"boolean",defaultValue:!1},valueShow:{type:"u4a.charts.am5.ValueShowType"},fill:{type:"sap.ui.core.CSSColor",defaultValue:""}}},init:function(){this._oChart={}},renderer:function(){},_getEventUI:function(a){var b=a?.target?.dataItem?.dataContext?._sId;return"undefined"==typeof b?void 0:sap.ui.getCore().byId(b)},_createBarSetting:function(a){if("undefined"==typeof a?.oChart?._oChart?.oRoot)return;if("undefined"==typeof a?.oValueAxis)return;if("undefined"==typeof a?.oCategoryAxis)return;let c={name:this.getName(),stacked:this.getStacked()},d=this.getValueShow();switch(a.oChart.getRotate()){case!0:c.yAxis=a.oCategoryAxis._oChart.oChartInstance,c.xAxis=a.oValueAxis._oChart.oChartInstance,c.valueXField="value",!1===c.stacked&&(c.openValueXField="openValue",c.lowValueXField="lowValue",c.highValueXField="highValue"),c.categoryYField="index","undefined"!=typeof d&&(c.valueXShow="valueX"+d);break;default:c.xAxis=a.oCategoryAxis._oChart.oChartInstance,c.yAxis=a.oValueAxis._oChart.oChartInstance,c.valueYField="value",!1===c.stacked&&(c.openValueYField="openValue",c.lowValueYField="lowValue",c.highValueYField="highValue"),c.categoryXField="index","undefined"!=typeof d&&(c.valueYShow="valueY"+d);}var e=b.prototype._getAm5Color(this.getFill());e&&(c.fill=e);var f=am5xy.ColumnSeries.new(a.oChart._oChart.oRoot,c);this._oChart.oChartInstance=f,f.set("tooltip",am5.Tooltip.new(a.oChart._oChart.oRoot,{templateField:"tooltipText"})),f.columns.template.set("tooltipPosition","pointer"),f.columns.template.events.on("click",function(a){let b=this._getEventUI(a);"undefined"==typeof b||b._fireEvent(a)}.bind(this)),f.columns.template.events.on("dblclick",function(a){let b=this._getEventUI(a);"undefined"==typeof b||b._fireEvent(a)}.bind(this)),f.columns.template.events.on("rightclick",function(a){let b=this._getEventUI(a);"undefined"==typeof b||b._fireEvent(a)}.bind(this));var g={};g.templateField="columnTemplate",f.columns.template.setAll(g);let h=this._getBulletCount();for(let b=0;b<h;b++)f.bullets.push(function(a,c,d){if("undefined"!=typeof d?.dataContext?._bullets&&0!==d?.dataContext?._bullets?.length){let c=d?.dataContext?._bullets[b];if("undefined"!=typeof c?._createBullet){let b=c?._createBullet(a);return b}}});return f},_getBulletCount:function(){let a=this.getParent()||void 0;if("undefined"==typeof a)return;let b=a.getParent()||void 0;if("undefined"==typeof b)return;let c=b.getCategoryItems();if(0===c.length)return;let d=a.indexOfAggregation("bars",this),e=0;for(let a=0,b=c.length;a<b;a++){let b=c[a],f=b.getAggregation("barItems");if(0===f.length)continue;let g=f[d];if("undefined"==typeof g)continue;let h=g.getBullet().length;h>e&&(e=h)}return e},setFill:function(a){if(this.setProperty("fill",a,!0),!!this?._oChart?.oChartInstance?.columns?.template?.set){var c=b.prototype._getAm5Color(a);if(c)return this._oChart.oChartInstance.columns.template.set("fill",c),void this._oChart.oChartInstance.markDirty();var d=this._oChart.oChartInstance?.chart?.get?.("colors");if(d){var c=d?.next();c&&(this._oChart.oChartInstance.columns.template.set("fill",c),this._oChart.oChartInstance.markDirty())}}}});return c});