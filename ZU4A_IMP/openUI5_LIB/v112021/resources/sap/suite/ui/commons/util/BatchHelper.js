sap.ui.define(["sap/ui/base/Object"],function(t){"use strict";const e=t.extend("ux.eng.s4producthomes1.utils.BatchHelper",{});function n(t){this.url=encodeURI(t);this.options={};this.batchRequests=[];this.boundary="batch_id_"+Date.now()+"_01";this.options.headers={};this.options.method="GET";this.options.headers["content-type"]="multipart/mixed;boundary="+this.boundary;return this}n.prototype.addRequest=function(t){this.batchRequests.push(t)};n.prototype._constructBody=function(){const t="--"+this.boundary;const e="\r\n";const n="Content-Type: application/http"+e+"Content-Transfer-Encoding: binary"+e;let s=t+e;for(let o=0;o<this.batchRequests.length;o++){const i=this.batchRequests[o];s+=n+e;s+=i.options.method+" "+i.url+" HTTP/1.1 "+e;s+="Accept: application/json"+e+e+e;s+=t;s+=o===this.batchRequests.length-1?"--"+e:e}return s};function s(t){const e=[];const n=[];let s=[];try{s=t.split("\r\n")}catch(t){throw new Error}s.forEach(function(t){if(t!==""){n.push(t)}});let o="";for(let t=1;t<n.length-1;t++){o=n[t].includes("Content-Type: ")?n[t].split("Content-Type: ")[1]:o;if(n[t+1].includes(n[0])){if(o==="application/json"){n[t]=JSON.parse(n[t]);e.push(n[t])}else{e.push(n[t])}}}return e}e.createMultipartRequest=async function(t,e){this.url=t;this.batchRequests=[];let s;for(let t=0;t<e.length;t++){const o=e[t];const i=new n(o);if(!s){s=i}s.addRequest(i)}return await this.fetchData(s)};e.fetchData=async function(t){t.options.body=t._constructBody();t.options.method="POST";const e=await fetch(this.url,t.options);if(!e.ok){throw new Error}const n=await e.text();return s(n)};return e});
//# sourceMappingURL=BatchHelper.js.map