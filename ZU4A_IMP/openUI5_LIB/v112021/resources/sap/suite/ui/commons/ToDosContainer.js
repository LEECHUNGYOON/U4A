sap.ui.define(["sap/suite/ui/commons/BaseContainer","sap/base/Log"],function(t,e){"use strict";const o=t.extend("sap.suite.ui.commons.ToDosContainer",{renderer:{apiVersion:2}});o.prototype.init=function(){this.setTitle(this.getResourceBundle().getText("toDosTitle"));this.addStyleClass("sapUiToDosContainer");this._isAuthCheckRequired=true;t.prototype.init.apply(this,arguments)};o.prototype.onBeforeRendering=async function(){t.prototype.onBeforeRendering.apply(this,arguments);this._iconTabBarControl=this.getInnerControl();try{await this.performAuthCheck();const t=this.getContent();const e=t.filter(t=>!t.getSupported());if(e.length===t.length){this._handleToDoUnauthorizedAccess()}else{const o=t.length-e.length===1;this._iconTabBarControl?.toggleStyleClass("sapUiITBHide",o);await this.loadAllPanels()}}catch(t){this._handleToDoUnauthorizedAccess()}};o.prototype.loadAllPanels=async function(){const t=this.getSelectedKey();const e=this.getContent().sort((e,o)=>{if(e.getKey()===t){return-1}if(o.getKey()===t){return 1}return 0});for(const t of e){if(!t?.isLoaded?.()){await t.loadToDos()}}};o.prototype.onPanelSelect=async function(){t.prototype.onPanelSelect.apply(this,arguments);const e=this.getSelectedPanel();if(!e.isLoaded()){await e.loadToDos()}e.updateRefreshInformation()};o.prototype.refreshData=async function(){this.getContent().forEach(t=>t.setLoaded(false));await this.loadAllPanels()};o.prototype.performAuthCheck=async function(){try{if(!this._isAuthCheckRequired){return Promise.resolve()}else{const t=await sap.ushell.Container.getServiceAsync("CrossApplicationNavigation");const e=this.getContent().map(t=>t.getAppIntent());const o=await t.isNavigationSupported(e);this.getContent().forEach((t,e)=>t.setSupported(o[e].supported));this._isAuthCheckRequired=false}}catch(t){return Promise.reject(t)}};o.prototype._handleToDoUnauthorizedAccess=function(t){e.error(t||"User has no access to any available panels");this.setVisible(false)};o.prototype.getSelectedKey=function(){if(!this.getProperty("selectedKey")){this.setProperty("selectedKey",this._getDefaultKey())}return this.getProperty("selectedKey")};o.prototype._getDefaultKey=function(){return this.getContent()[0]?.getKey()};return o});
//# sourceMappingURL=ToDosContainer.js.map