sap.ui.define(["sap/ui/core/Control","./library","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Title","sap/m/HBox","sap/m/FlexBox","sap/m/Button","sap/ui/core/CustomData","sap/ui/core/Lib"],function(t,e,n,o,i,a,r,s,c,p){"use strict";const l=e.LayoutType;const h=t.extend("sap.suite.ui.commons.BaseContainer",{metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:""},layout:{type:"sap.suite.ui.commons.LayoutType",group:"Misc",defaultValue:l.SideBySide},selectedKey:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"content",aggregations:{content:{type:"sap.suite.ui.commons.BasePanel",singularName:"content",multiple:true},actionButtons:{type:"sap.m.Button",multiple:true,singularName:"actionButton",visibility:"hidden"},menuButtons:{type:"sap.suite.ui.commons.MenuButton",multiple:true,singularName:"menuButton",visibility:"hidden"}}}});h.prototype.getResourceBundle=function(){this._resBundle=this._resBundle||p.getResourceBundleFor("sap.suite.ui.commons");return this._resBundle};h.prototype.init=function(){this._createHeaderIfRequired(this)};h.prototype.getHeader=function(){return this._controlMap.get(`${this.getId()}-header`)};h.prototype._createInnerControl=function(){const t=this.getLayout();if(t===l.Horizontal||t===l.Vertical){if(!this._wrapper){this._wrapper=new r(`${this.getId()}-wrapper`,{width:"100%",renderType:"Bare"}).addStyleClass("sapUiBaseWrapper");this._wrapper.setParent(this)}this._wrapper.setDirection(t===l.Horizontal?"Row":"Column")}else if(!this._iconTabBar){this._iconTabBar=new n(`${this.getId()}-iconTabBar`,{expandable:false,backgroundDesign:"Transparent",headerMode:"Inline",headerBackgroundDesign:"Transparent",select:this.onPanelSelect.bind(this)});this._iconTabBar.setParent(this)}};h.prototype.getInnerControl=function(){return this.getLayout()===l.SideBySide?this._iconTabBar:this._wrapper};h.prototype.addToPanel=function(t,e){if(this.getLayout()===l.SideBySide){this._fetchTabFilter(t)?.addContent(e)}else{this._controlMap.get(`${t.getId()}-wrapper`)?.addItem(e)}};h.prototype._fetchTabFilter=function(t){const e=`${t.getId()}-tabFilter`;this._controlMap=this._controlMap||new Map;if(!this._controlMap.get(e)){const n=new o(e,{key:t.getKey(),text:t.getTitle()});n.addCustomData(new c({key:"sap-ui-fastnavgroup",value:"true",writeToDom:true}));this._controlMap.set(e,n)}t.getContent()?.forEach(t=>this._controlMap.get(e).addContent(t));return this._controlMap.get(e)};h.prototype._fetchHeaderButton=function(t){const e=t.getId();this._controlMap=this._controlMap||new Map;if(!this._controlMap.get(e)){this._controlMap.set(e,new s(`${e}-btn`,{type:"Transparent",press:e=>t.firePress({button:e.getSource()})}))}const n=this._controlMap.get(e);n.setText(t.getText());n.setIcon(t.getIcon());return n};h.prototype.getSelectedPanel=function(){const t=this.getContent()?.find(t=>t.getKey()===this.getSelectedKey())||this.getContent()?.[0];this.setProperty("selectedKey",t?.getKey(),true);return t};h.prototype.setTitle=function(t){this.setProperty("title",t,true);this._controlMap?.get(`${this.getId()}-header-title`).setText(t);return this};h.prototype.onBeforeRendering=function(){this._createInnerControl();this.updateContainerHeader();this._addAllPanelContent()};h.prototype.updateContainerHeader=function(){this._controlMap.get(this.getId()+"-header-contentLeft").removeAllItems();this._controlMap.get(this.getId()+"-header-contentRight").removeAllItems();this._updateHeader(this)};h.prototype.updateAndFetchPanelHeader=function(t){const e=this._createHeaderIfRequired(t);const n=t.getTitle()?.trim().length>0;this._updateHeader(t);e.toggleStyleClass("sapUiPanelHeader",n||t.getAggregation("menuButtons")?.length>0||t.getAggregation("actionButtons")?.length>0);return e};h.prototype._updateHeader=function(t){const e=this.getLayout()===l.SideBySide;const n=t.isA("sap.suite.ui.commons.BaseContainer");this._controlMap.get(t.getId()+"-header-title").setText(t.getTitle());this._controlMap.get(t.getId()+"-header-title").setVisible(t.getTitle()?.trim().length>0);(n&&e?this.getSelectedPanel():t).getAggregation("menuButtons")?.forEach(e=>this._controlMap.get(t.getId()+"-header-contentLeft").addItem(this._fetchHeaderButton(e)));(n&&e?this.getSelectedPanel():t).getAggregation("actionButtons")?.forEach(e=>this._controlMap.get(t.getId()+"-header-contentRight").addItem(this._fetchHeaderButton(e)))};h.prototype._fetchPanelContentWrapper=function(t){const e=`${t.getId()}-contentWrapper`;this._controlMap=this._controlMap||new Map;if(!this._controlMap.get(e)){this._controlMap.set(e,new r(e,{width:t.getWidth(),height:t.getHeight(),direction:"Column",renderType:"Bare"}))}this._controlMap.get(e).addItem(this.updateAndFetchPanelHeader(t));t.getContent()?.forEach(t=>this._controlMap.get(e).addItem(t));return this._controlMap.get(e)};h.prototype._addAllPanelContent=function(){const t=this.getContent();if(this.getLayout()===l.SideBySide){this._iconTabBar.removeAllItems();t?.forEach(t=>this._iconTabBar.addItem(this._fetchTabFilter(t)));this._iconTabBar.setSelectedKey(this.getSelectedKey())}else{this._wrapper.removeAllItems();t?.forEach(t=>this._wrapper.addItem(this._fetchPanelContentWrapper(t)))}};h.prototype._createHeaderIfRequired=function(t){const e=t.getId();const n=`${e}-header`;const o=t.isA("sap.suite.ui.commons.BasePanel");this._controlMap=this._controlMap||new Map;if(!this._controlMap.get(n)){this._controlMap.set(`${e}-header-title`,new i(`${e}-title`,{titleStyle:o?"H6":"H4"}));this._controlMap.set(`${e}-header-contentLeft`,new a(`${e}-contentLeft`,{renderType:"Bare"}).addStyleClass("sapUiSectionContentArea"));this._controlMap.set(`${e}-header-contentRight`,new a(`${e}-contentRight`,{renderType:"Bare"}).addStyleClass("sapUiSectionContentArea"));this._controlMap.set(`${e}-header-content`,new a(`${e}-content`,{width:"100%",justifyContent:"SpaceBetween",renderType:"Bare",items:[this._controlMap.get(`${e}-header-contentLeft`),this._controlMap.get(`${e}-header-contentRight`)]}).addStyleClass("sapUiTinyMarginBegin"));this._controlMap.set(n,new a(`${e}-header`,{alignItems:"Center",items:[this._controlMap.get(`${e}-header-title`),this._controlMap.get(`${e}-header-content`)]}));this._controlMap.get(n).setParent(this)}this._controlMap.get(n).addStyleClass(o?"sapUiPanelHeader":"sapUiContainerHeader");return this._controlMap.get(n)};h.prototype.onPanelSelect=function(t){this.setProperty("selectedKey",t.getSource().getSelectedKey(),true);this.updateContainerHeader()};h.prototype.getActionButtons=function(){this._aActionButtons=this._aActionButtons||this.getAggregation("actionButtons");return this._aActionButtons};h.prototype.setPanelCount=function(t,e){if(this.getLayout()===l.SideBySide){this._fetchTabFilter(t).setCount(e)}};h.prototype.removeContent=function(t){if(this.getSelectedKey()&&this.getSelectedKey()===t.getKey()){this.setProperty("selectedKey",undefined,true)}this.removeAggregation("content",t)};return h});
//# sourceMappingURL=BaseContainer.js.map