sap.ui.define(["sap/suite/ui/commons/library","sap/ui/thirdparty/jquery","sap/ui/core/Control","./SvgBase","./Node","./Line","./Group","./layout/LayeredLayout","./Tooltip","sap/ui/model/json/JSONModel","sap/m/SuggestionItem","./Utils","sap/m/Label","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/SearchField","sap/m/ToolbarSpacer","sap/ui/core/CustomData","sap/ui/model/Filter","sap/m/OverflowToolbarLayoutData","./KeyboardNavigator","sap/ui/core/theming/Parameters","sap/base/Log","sap/ui/performance/Measurement","sap/base/util/uid","sap/base/security/encodeXML","./GraphRenderer","sap/m/ToggleButton","sap/ui/core/routing/HashChanger","sap/m/library","sap/m/Dialog","sap/suite/ui/commons/util/FullScreenUtil","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/Core","sap/ui/core/Lib"],(function(t,jQuery,e,i,o,s,n,r,a,h,l,u,g,c,p,d,_,m,f,y,L,v,T,S,b,N,E,C,I,A,O,w,F,R,G,x){"use strict";var U=A.ButtonType,D=t.networkgraph.Orientation,P=t.networkgraph.LayoutRenderType,k=t.networkgraph.RenderType,B=[.05,.1,.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],M="group",H="node",W="line",Z="islast",K="type",Y=Object.freeze({Node:"Node",Line:"Line",Group:"Group"}),z=x.getResourceBundleFor("sap.suite.ui.commons"),X=R.InvisibleMessageMode,V=i.extend("sap.suite.ui.commons.networkgraph.Graph",{metadata:{library:"sap.suite.ui.commons",properties:{height:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%"},orientation:{type:"sap.suite.ui.commons.networkgraph.Orientation",group:"Behavior",defaultValue:D.LeftRight},enableZoom:{type:"boolean",group:"Behavior",defaultValue:!0},enableWheelZoom:{type:"boolean",group:"Behavior",defaultValue:!0},backgroundImage:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},backgroundColor:{type:"sap.suite.ui.commons.networkgraph.BackgroundColor",group:"Appearance",defaultValue:"White"},renderType:{type:"sap.suite.ui.commons.networkgraph.RenderType",group:"Appearance",defaultValue:k.Html},noData:{type:"boolean",group:"Behavior",defaultValue:!1},noDataText:{type:"string",group:"Behavior",defaultValue:""}},aggregations:{lines:{type:"sap.suite.ui.commons.networkgraph.Line",multiple:!0,singularName:"line"},nodes:{type:"sap.suite.ui.commons.networkgraph.Node",multiple:!0,singularName:"node"},groups:{type:"sap.suite.ui.commons.networkgraph.Group",multiple:!0,singularName:"group"},legend:{type:"sap.ui.core.Control",multiple:!1},layoutAlgorithm:{type:"sap.suite.ui.commons.networkgraph.layout.LayoutAlgorithm",multiple:!1},statuses:{type:"sap.suite.ui.commons.networkgraph.Status",multiple:!0,singularName:"status"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:!0,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:!0,singularName:"ariaLabelledBy"}},events:{graphReady:{},afterLayouting:{},beforeLayouting:{},zoomChanged:{},failure:{parameters:{type:"string",message:"string"}},selectionChange:{parameters:{items:{type:"sap.suite.ui.commons.networkgraph.ElementBase[]"}}},searchSuggest:{parameters:{term:{type:"string"}}},search:{parameters:{term:{type:"string"},key:{type:"string"}}}}}});return V.FAILURE_TYPE={INCONSISTENT_MODEL:"Inconsistent model",LAYOUT_FAILURE:"Layout failure"},V.prototype.ZOOM_100=1,V.prototype.init=function(){this._fZoomLevel=1,this._mSelectedNodes={},this._mSelectedLines={},this._bIsLayedOut=!1,this._bIsFullScreen=!1,this._mNodes={},this._bNeedNodeProcessing=!0,this._oFullScreenContainer=null,this._bRequiresDataProcessing=!0,this._oPanning={},this._oLegendLabels={},this._iRunningLayouts=0,this._oLastLayout=null,this._bIsRtl=G.getConfiguration().getRTL(),this._oFocus=null,this._tooltip=this._createTooltip(),this._bIsInvalid=!1,this._oStatuses={},this._aShadedNodes=[],this._createToolbar(),this.oInvisibleMessage=F.getInstance()},V.prototype.onBeforeRendering=function(){this._bIsRtl=G.getConfiguration().getRTL(),this.setBusy(!1),this.setBusyIndicatorDelay(0),this._iNodeMaxWidth=0,this.getNodes().forEach(function(t){t._resetDimensions();var e=t.getMaxWidth();e>this._iNodeMaxWidth&&(this._iNodeMaxWidth=e)}.bind(this)),this.getLines().forEach((function(t){t._resetLayoutData()})),this.getNoData()?this.setDisableToolbarButtons(!1):(this.setDisableToolbarButtons(!0),this._loadData())},V.prototype.onAfterRendering=function(){var t=this.getNodes(),e=G.createRenderManager();if(this.$divnodes=this.$("divnodes"),this.$divgroups=this.$("divgroups"),this.$background=this.$("background"),this.$tooltips=this.$("tooltiplayer"),this.$scroller=this.$("scroller"),this._$innerscroller=this.$("innerscroller"),this.$legend=this.$("legend"),this._oFullScreenContainer&&this._bIsFullScreen&&(this._oFullScreenContainer.$content=this.$(),this.$().addClass("sapSuiteUiCommonsNetworkGraphFullScreen")),0===t.length||this._bIsInvalid||this.getNoData())return this._bIsInvalid&&(e.openStart("span"),e.class("sapSuiteNetworkGraphErrorText"),e.openEnd(),e.close("span"),e.flush(this.$scroller[0])),this._oSuggestionItemsModel&&this._oSuggestionItemsModel.setData(""),void this.fireGraphReady();if(this.setBusy(!0),t.forEach((function(t){t.bOutput=!0})),this._isDelayedLayouting()){var i=function(){this._iNodeMaxWidth&&this.$divnodes.css("width",this._iNodeMaxWidth+50+"px"),this._isUseNodeHtml()?this._createDivNodes():(e.openStart("svg",this.getId()+"-sizesvg"),this._bIsRtl&&e.attr("direction","rtl"),e.class("sapSuiteUiCommonsNetworkGraphSvg"),e.openEnd(),t.forEach((function(t){t._setupWidthAndHeight(),t._render({sizeDetermination:!0,renderManager:e}),e.close("g")})),e.openStart("rect"),e.class("sapSuiteFlickerFreeRect"),e.attr("x","0").attr("y","0"),e.openEnd(),e.close("rect"),e.close("svg"),e.flush(this._$innerscroller[0],!0,this._$innerscroller.children().length)),t.forEach(function(t){this._isUseNodeHtml()?t._setupDivDimensions():(t.calculateSizes(),t._setupWidthAndHeight())}.bind(this)),this._preprocessData(),G.detachThemeChanged(i)}.bind(this);G.isThemeApplied()?i():G.attachThemeChanged(i)}e.destroy()},V.prototype.exit=function(){this._oFullScreenUtil&&this._oFullScreenUtil.cleanUpFullScreen(this)},V.prototype._beforeRender=function(){this.fireEvent("afterLayouting")},V.prototype._fireFailure=function(t,e){var i=e;"object"==typeof e&&e.text&&(i=e.text);var o="Graph failure: "+t+": "+i;t===V.FAILURE_TYPE.INCONSISTENT_MODEL&&(o+=" This may be due to the model size restriction. For its increase use model's 'setSizeLimit' method."),this.fireFailure([t.toString(),i]),T.error(o)},V.prototype.isFullScreen=function(){return this._bIsFullScreen},V.prototype.toggleFullScreen=function(){this._toggleFullScreen()},V.prototype.preventInvalidation=function(t){this._bPreventInvalidation=t},V.prototype.scrollToElement=function(t){this._scrollToElement(t)},V.prototype.setSearchSuggestionItems=function(t){var e=[];t&&t.forEach((function(t){e.push({text:t.getText(),icon:t.getIcon(),key:t.getKey(),description:t.getDescription()})})),this._oSuggestionItemsModel.setData({items:e})},V.prototype.destroyAllElements=function(){this.destroyAggregation("nodes",!1),this.destroyAggregation("groups",!1),this.destroyAggregation("lines",!1)},V.prototype.deselect=function(t){var e=[],i=this.$(),o=function(t){Object.keys(t).forEach((function(i){e.push(t[i]),t[i].setSelected(!1)}),this)}.bind(this);return i.find("."+this.HIGHLIGHT_CLASS).removeClass(this.HIGHLIGHT_CLASS),i.find("."+this.SELECT_CLASS).removeClass(this.SELECT_CLASS),i.find("."+this.VISIBLE_ACTIONS_BUTTONS_CLASS).removeClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS),o(this._mSelectedNodes),o(this._mSelectedLines),this._aShadedNodes.forEach((function(t){t._setNodeOpacity(!1)})),this._aShadedNodes=[],this.$(this.LINEBUTTONSID).hide(),!t&&e.length&&this.fireSelectionChange({items:e}),e},V.prototype.getFocus=function(){return this._oFocus},V.prototype.getToolbar=function(){return this._toolbar},V.prototype.getNodeByKey=function(t){return this._bRequiresDataProcessing&&this._processData(),this._mNodes[t]},V.prototype.setCustomLegendLabel=function(t){var e;e=!0===t.isGroup?Y.Group:!0===t.isLine||!1===t.isNode?Y.Line:Y.Node,t.status&&(this._oLegendLabels[e+t.status]=t.label,this._createLegend())},V.prototype.updateLegend=function(){this._createLegend()},V.prototype.zoom=function(t){(t=t||{}).deltaY=!1!==t.zoomin?1:-1,t.x&&t.y&&(t.point={x:t.x,y:t.y}),this._zoom(t)},V.prototype.getZoomLevelMilestones=function(){return B},V.prototype.getCurrentZoomLevel=function(){return this._fZoomLevel},V.prototype.setCurrentZoomLevel=function(t){this._fZoomLevel=t,this._zoomLabel.setText(this._getZoomText())},V.prototype.getCorrectMousePosition=function(t){var e=this.$svg.offset(),i=1,o=1;return this._iWidth===this.$svg.width()&&this._iHeight===this.$svg.height()||(i=this._iWidth/this.$svg.width(),o=this._iHeight/this.$svg.height()),{x:parseInt((t.x-e.left)*i,10),y:parseInt((t.y-e.top)*o,10)}},V.prototype._createTooltip=function(){var t=new a(this.getId()+"-tooltip");return this.addDependent(t),t.create(this),t.attachEvent("afterClose",function(){var t=this.getFocus();t&&(this.setFocus(t),"menu"==t.button&&t.item._setMenuButtonFocus(!0))}.bind(this)),t},V.prototype.defocus=function(){this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS)},V.prototype.setFocus=function(t,e){!t&&!this._oFocus||t&&this._oFocus&&t.item===this._oFocus.item&&t.button===this._oFocus.button?e&&this._updateAccessibility(t):(this.defocus(),this.getFocusDomRef()&&this.getFocusDomRef().focus(),t&&(t.button?t.item instanceof o||t.item instanceof s?t.item._setActionButtonFocus(t.button,!0):t.item instanceof n&&(t.button===n.BUTTONS.MENU?t.item._setMenuButtonFocus(!0):t.button===n.BUTTONS.COLLAPSE&&t.item._setCollapseButtonFocus(!0)):t.item&&(t.item._setFocus(!0),t.item instanceof n&&(t.button=n.BUTTONS.MENU))),this._oFocus=t,this._ensureOnScreen(t?t.item:null),this._updateAccessibility(t))},V.prototype._updateAccessibility=function(t){var e=function(){this._setAccessibilityTitle(z.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT"))}.bind(this),i=function(e){return"Expand/Collapse"===e?t.item.getCollapsed()?z.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+e+" "+z.getText("NETWORK_GRAPH_EXPANDED"):z.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+e+" "+z.getText("NETWORK_GRAPH_COLLAPSED"):z.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+" "+e};this.getDomRef("wrapper")&&(this.getDomRef("wrapper").setAttribute("aria-live","assertive"),this._setAriaLabelForWrapper()),t?t.button?t.item instanceof o?"Expand/Collapse"===t.button.title?this._setAccessibilityTitle(t.item._getActionButtonTitle(t.button)+" "+t.item._oExpandState):this._setAccessibilityTitle(t.item._getActionButtonTitle(t.button)):t.item instanceof n?t.button===n.BUTTONS.MENU?this._setAccessibilityTitle(i(z.getText("NETWORK_GRAPH_GROUP_DETAIL"))):t.button===n.BUTTONS.COLLAPSE?this._setAccessibilityTitle(i(z.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"))):e():e():t.item?this._setAccessibilityTitle(t.item._getAccessibilityLabel()):(this._setAriaLabelForWrapper(z.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT")),this._setAccessibilityTitle(" ")):e()},V.prototype._setAriaLabelForWrapper=function(t){t=t||" ",this.getDomRef("wrapper").setAttribute("aria-label",t)},V.prototype._processProperties=function(){this._bNeedNodeProcessing&&(this._mSelectedNodes={},this._mSelectedLines={},this.getNodes().forEach((function(t){t.getSelected()&&(this._mSelectedNodes[t.getKey()]=t),t.getCollapsed()&&t.setCollapsed(!0)}),this),this.getLines().forEach((function(t){t.getSelected()&&(this._mSelectedLines[t._getLineId()]=t)}),this),this._bNeedNodeProcessing=!1)},V.prototype._loadData=function(){if(this.getNodes().length>0){if(!this._processData())return;this._isDelayedLayouting()||setTimeout(this._preprocessData.bind(this),0)}},V.prototype._preprocessData=function(){this._bIsLayedOut=!1,this._bImageLoaded=!1,this.fireBeforeLayouting(),this._applyLayout().then(this._render.bind(this))},V.prototype._getAllElements=function(){return this.getNodes().concat(this.getGroups())},V.prototype._render=function(){if(this._beforeRender(),this._iRunningLayouts--,!(this._iRunningLayouts>0)){if(this._oLastLayout=null,this._createSearchSuggestItems(),this._innerRender(),this._createLegend(),this._processProperties(),1!==this._fZoomLevel){this.$svg[0].setAttribute("viewBox","0 0 "+this.$svg.width()+" "+this.$svg.height());var t=this.$svg.width(),e=this.$svg.height();if(this.$svg.width(t*this._fZoomLevel),this.$svg.height(e*this._fZoomLevel),this.$background.width(t*this._fZoomLevel),this.$background.height(e*this._fZoomLevel),this._isUseNodeHtml()){var i="scale("+this._fZoomLevel+")";this.$("divnodes").css("transform",i)}this.$("tooltiplayer").css("transform",i),this.$("divgroups").css("transform",i)}this._setLineClasses(),this._selectElementAfterScroll&&(this._scrollToElement(this._selectElementAfterScroll),this._selectElementAfterScroll=null),this._oFocus&&this._oFocus.button===n.BUTTONS.COLLAPSE&&this._oFocus.item._setCollapseButtonFocus(!0),this._bIsLayedOut=!0,this._setupEvents(),this._setupKeyboardNavigation(),this.setFocus(this.getFocus()),this.getBackgroundImage()&&!this._bImageLoaded||(this.setBusy(!1),this.fireGraphReady()),this._isSwimLane()||this._isTwoColumnsLayout()||this.$("innerscroller").addClass(" sapSuiteUiCommonsNetworkGraphInnerScrollerCenter ")}},V.prototype._createDivNodes=function(){var t=G.createRenderManager();this.getNodes().forEach((function(e){e._bMainRender=!0,t.renderControl(e),e._bMainRender=!1})),t.flush(this.$divnodes[0]),t.destroy()},V.prototype._innerRender=function(t){var e=function(){this.$svg.find(".sapSuiteFlickerFreeRect").remove(),this._bImageLoaded=!0,this._bIsLayedOut&&(this.setBusy(!1),this.fireGraphReady())}.bind(this),i=function(){var t=G.createRenderManager();this.getGroups().forEach((function(e){t.renderControl(e)})),t.flush(this.$("divgroups")[0],!1,!0),t.destroy()}.bind(this),o=function(){var t=0,i=0,o=function(e,o){e>t&&(t=e),o>i&&(i=o)};if(this._iWidth=0,this._iHeight=0,this._getAllElements().forEach((function(t){t._isIgnored()||o(t._iWidth+t.getX(),t._iHeight+t.getY())}),this),this.getLines().forEach((function(t){t._isIgnored()||t.getCoordinates().forEach((function(t){o(t.getX(),t.getY())}))}),this),this.getBackgroundImage()){var s=new Image;s.onload=function(){this._iWidth=Math.max(this._iWidth,s.width),this._iHeight=Math.max(this._iHeight,s.height),this.$svg.width(this._iWidth),this.$svg.height(this._iHeight),this.$background.width(this._iWidth),this.$background.height(this._iHeight),this.$svg.css("background-image","url("+this.getBackgroundImage()+")"),this.$svg.css("background-size","cover"),e()}.bind(this),s.onerror=function(){T.warning("Unable to load background image."),e()},s.src=this.getBackgroundImage()}if(this._iWidth=Math.round(t+(this._isTwoColumnsLayout()?0:50)),this._iHeight=Math.round(i+20),"auto"===this.getWidth()&&this.$().width(this._iWidth),"auto"===this.getHeight()&&this.$("wrapper").height(this._iHeight),this._isTwoColumnsLayout()){var n=this._$innerscroller.width();this._iWidth<n&&(this._iWidth=n)}this.$svg.width(this._iWidth),this.$svg.height(this._iHeight),this.$background.width(this._iWidth),this.$background.height(this._iHeight),this._isUseNodeHtml()&&(this.$divnodes.width(this._iWidth),this.$divnodes.height(this._iHeight),this.$divnodes.css("opacity",1)),this.$divgroups.width(this._iWidth),this.$divgroups.height(this._iHeight),this.$tooltips.width(this._iWidth),this.$tooltips.height(this._iHeight)}.bind(this),s=this.getNodes(),n=this.getLines();S.start(this.getId(),"Rendering of a network graph"),this._isUseNodeHtml()||this.$("sizesvg").remove(),i();var r=G.createRenderManager();this._renderSvg(this._isUseNodeHtml()?[]:s,n,r),r.flush(this._$innerscroller[0],!0,this._$innerscroller.children().length),r.destroy(),this.$svg=this.$("networkGraphSvg"),this.$background=this.$("background"),o(),this._isUseNodeHtml()&&s.forEach((function(t){var e=t.$();t._isInCollapsedGroup()&&e.hide(),e.css("top",t.getY()+"px"),e.css("left",t.getX()+"px")})),[this._isUseNodeHtml()?[]:s,n].forEach((function(t){t.forEach((function(t){t._afterRendering()}))})),S.end(this.getId())},V.prototype._renderSvg=function(t,e,i){var o=["sapSuiteUiCommonsNetworkGraphSvg","sapSuiteUiCommonsNetworkGraphNoSelect","sapSuiteNetworkGraphSvgMargin"];this._fZoomLevel<.4&&o.push("sapSuiteUiCommonsNetworkGraphZoomedOut"),this._isUseNodeHtml()||o.push("sapSuiteNetworkGraphSvgPosition");var s=function(t,e,o){i.openStart("g",this._getDomId(t)),o&&i.class(o),i.openEnd(),function(t,e){t.forEach((function(t){t._render({renderManager:e}),t.bOutput=!0}))}(e,i),i.close("g")}.bind(this);i.openStart("svg",this.getId()+"-networkGraphSvg"),this._bIsRtl&&i.attr("direction","rtl"),o.forEach((function(t){i.class(t)})),i.attr("preserveAspectRatio","none"),i.openEnd(),i.openStart("g",this.getId()+"-svgbody"),i.openEnd(),s("lines",e,"sapSuiteUiCommonsNetworkLines"),this._isUseNodeHtml()||s("nodes",t,"sapSuiteUiCommonsNetworkNodes"),i.close("g"),this.getBackgroundImage()&&(i.openStart("rect"),i.class("sapSuiteFlickerFreeRect"),i.attr("x","0"),i.attr("y","0"),i.attr("height","100%"),i.attr("width","100%"),i.openEnd(),i.close("rect")),i.close("svg"),this._isUseNodeHtml()&&(i.openStart("div",this.getId()+"-background"),i.openEnd(),i.close("div"))},V.prototype._isProperKey=function(t){return t||"0"===t},V.prototype._processData=function(){var t=this._isSwimLane(),e=function(){var e=0;return this.mGroups={},this.getGroups().some((function(i){var o=i.getKey();let s=!1;if(""===o){let t=i.getBindingPath("key")||"",e=i.getModel()||void 0;""!==t&&void 0!==e&&(o=e.getProperty(t,i.getBindingContext()),s=!0)}return i._iNestedLevel=0,this._isProperKey(o)?(i._bIsSwimLane=t,i._resetSize(),i._clearChildren(),this.mGroups[o]?(this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Group with a duplicit key "+o+" found."),!0):(this.mGroups[o]=i,e++,s)):(this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Group without a proper key [index: "+e+"] found."),!0)}),this)||this.getGroups().some((function(t){return!(!t.getParentGroupKey()||this.mGroups[t.getParentGroupKey()])&&(this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Group '"+t.getKey()+"' reffers to a nonexistent parent group '"+t.getParentGroupKey()+"'."),!0)}),this)}.bind(this),i=function(){var t=0;return this._mNodes={},this.getNodes().some((function(e){if(!this._isProperKey(e.getKey()))return this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Node without a proper ID [index: "+t+"] found."),!0;var i,o=e.getGroup();if(e._oGroup=null,o){if(!(i=this.mGroups[o]))return this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Node belonging to a nonexistent group with key "+o+" found."),!0;e._oGroup=i,i.aNodes.push(e)}return this._isUseNodeHtml()?e._resetDimensions():e._setupWidthAndHeight(),e._clearChildren(),e._rendered=!1,this._mNodes[e.getKey()]?(this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Node with a duplicit key "+e.getKey()+" found."),!0):(this._mNodes[e.getKey()]=e,t++,!1)}),this)}.bind(this),o=function(){return this.getLines().some((function(t,e){var i=this.getNodeByKey(t.getFrom()),o=this.getNodeByKey(t.getTo());return i?o?(t._rendered=!1,t._initialized=!1,i&&o&&(i.aChildren.push(o),i.aLines.push(t),o.aParents.push(i),o.aParentLines.push(t),t._oFrom=i,t._oTo=o,t._sKey="line_"+i.getKey()+"-"+o.getKey()+"["+e+"]"),i._oGroup&&(i._oGroup.aLines.push(t),i._oGroup.aChildren.push(o)),o._oGroup&&(o._oGroup.aParentLines.push(t),o._oGroup.aParents.push(i)),!1):(this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Line going to a nonexistent node with key "+t.getTo()+" found."),!0):(this._fireFailure(V.FAILURE_TYPE.INCONSISTENT_MODEL,"Line going from a nonexistent node with key "+t.getFrom()+" found."),!0)}),this)}.bind(this),s=function(){this.getGroups().forEach(function(t){var e=t.getParentGroupKey();if(e){var i=this.mGroups[e];i&&(t._oParentGroup=i,i.aChildGroups.push(t))}}.bind(this)),this.getGroups().forEach((function(t){for(var e=0,i=t._oParentGroup,o=!1,s=t;i;)i.getCollapsed()&&!o&&(t._oCollapsedByParent=i,o=!0),s=i,i=i._oParentGroup,e++;t._iNestedLevel=e,t._oTopParentGroup=s}))}.bind(this);return this._bRequiresDataProcessing=!1,e()||i()||o()?(this._bIsInvalid=!0,!1):(s(),this._oStatuses={},this.getStatuses().forEach((function(t){var e=t.getKey();e&&(this._oStatuses[e]=t)}),this),this._bIsInvalid=!1,!0)},V.prototype._validateLayout=function(){var t="";return this.getNodes().some((function(e){return!e._isIgnored()&&(t="Missing coordinates: Node("+e.getKey()+")",!(e._oGroup&&e._oGroup.getCollapsed()||isFinite(e.getX())&&isFinite(e.getY())))}))||this._isLayered()&&this.getGroups().some((function(e){return!e._isIgnored()&&(t="Missing coordinates: Group("+e.getKey()+")",!(e._isEmpty()||isFinite(e.getX())&&isFinite(e.getY())))}))?(this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,t),!1):!this.getLines().some((function(e){return!e._isIgnored()&&(t="Missing coordinates: Line("+e.getKey()+")",!e._validateLayout())}))||(this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,t),!1)},V.prototype._suggest=function(t){var e=function(t){t.addCustomData(new m({key:Z,value:"true",writeToDom:!0}))},i=function(t){var e=u.find(t.getCustomData(),(function(t){return t.getKey()===Z}));e&&t.removeCustomData(e)},o=function(t){var e=u.find(t.getCustomData(),(function(t){return t.getKey()===K}));return e&&e.getValue()},s=function(){for(var t,s,n,r=this._searchField.getSuggestionItems(),a=0;a<r.length;a++)t=r[a],i(t),a<r.length-1&&(s=o(t),n=o(r[a+1]),s&&n&&(s===H&&n===W||s===W&&n===M)&&e(t))}.bind(this),n=[];this.fireEvent("searchSuggest",{term:t},!0)&&(t&&(n=[new f([new f("text",(function(e){return(e.toLowerCase()||"").indexOf(t.toLowerCase())>-1})),new f("description",(function(e){return(e.toLowerCase()||"").indexOf(t.toLowerCase())>-1}))],!1)]),this._searchField.getBinding("suggestionItems").filter(n),s()),this._searchField.suggest()},V.prototype._getElementSelectFunctionName=function(t){var e="";return t instanceof o&&(e="_selectNode"),t instanceof s&&(e="_selectLine"),t instanceof n&&(e="_selectGroup"),e},V.prototype._search=function(t,e){var i,o;this.fireEvent("search",{term:t,key:e},!0)&&(t?((o=u.find(this.getNodes(),(function(i){return e?i.getKey()===e:i.getTitle()===t})))||(o=u.find(this.getLines(),(function(i){return!i._isLoop()&&(e?i._getLineId()===e:i._createSuggestionHelpText()===t)}))),o||(o=u.find(this.getGroups(),(function(i){return i.aNodes.length>0&&(e?i.getKey()===e:i.getTitle()===t)}))),o&&(i=this._getElementSelectFunctionName(o))&&this[i]({element:o,scroll:!0,alwaysSelect:!0})):(this.deselect(!1),this.setFocus(null)))},V.prototype._createToolbar=function(){var t=this;this._toolbar=new c(this.getId()+"-toolbar",{content:[new _]}).addStyleClass("sapSuiteUiCommonsNetworkGraphToolbar"),this.addDependent(this._toolbar),this._toolbar.ontouchstart=function(){this.setFocus(null),this.getDomRef("wrapper").setAttribute("aria-live","off"),this._setAriaLabelForWrapper(z.getText("NETWORK_GRAPH_ACCESSIBILITY_LABEL"))}.bind(this),this._searchField=new d({layoutData:new y({priority:sap.m.OverflowToolbarPriority.NeverOverflow,shrinkable:!0}),enableSuggestions:!0,suggest:function(e){t._suggest(e.getParameter("suggestValue"))},search:function(e){var i,o=e.getParameter("query"),s=e.getParameter("suggestionItem");s&&(i=s.getProperty("key")),t._search(o,i)}}).addStyleClass("sapSuiteUiCommonsNetworkGraphSearchField"),this._toolbar.addContent(this._searchField),this._toolbar.addContent(new C({id:this.getId()+"-legendButton",type:U.Transparent,icon:"sap-icon://legend",tooltip:z.getText("NETWORK_GRAPH_LEGEND"),press:function(e){t.$legend.is(":visible")?t.$legend.hide():t.$legend.show()}})),this.getEnableZoom()&&(this._zoomLabel=new g({layoutData:new y({group:1,priority:sap.m.OverflowToolbarPriority.Disappear}),text:"100%"}),this._zoomIn=new p({layoutData:new y({group:1}),type:U.Transparent,ariaDescribedBy:[this._zoomLabel],text:z.getText("CHARTCONTAINER_ZOOMIN"),icon:"sap-icon://zoom-in",tooltip:z.getText("CHARTCONTAINER_ZOOMIN"),press:function(e){t._zoom({deltaY:1})}}),this._toolbar.addContent(this._zoomIn),this._toolbar.addContent(this._zoomLabel),this._zoomOut=new p({layoutData:new y({group:1}),type:U.Transparent,ariaDescribedBy:[this._zoomLabel],text:z.getText("CHARTCONTAINER_ZOOMOUT"),icon:"sap-icon://zoom-out",tooltip:z.getText("CHARTCONTAINER_ZOOMOUT"),press:function(e){t._zoom({deltaY:-1})}}),this._toolbar.addContent(this._zoomOut)),this._toolbar.addContent(new p({type:U.Transparent,icon:"sap-icon://popup-window",tooltip:z.getText("NETWORK_GRAPH_ZOOMTOFIT"),text:z.getText("NETWORK_GRAPH_ZOOMTOFIT"),press:this._fitToScreen.bind(this)})),this._oFullScreenButton=new p({type:U.Transparent,text:z.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),icon:"sap-icon://full-screen",tooltip:z.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON"),press:this._toggleFullScreen.bind(this)}),this._toolbar.addContent(this._oFullScreenButton)},V.prototype._fitToScreen=function(){for(var t=this.$scroller.height()/this._iHeight,e=this.$scroller.width()/this._iWidth,i=Math.min(t,e),o=B.slice(-1),s=1;s<B.length;s++)if(i<B[s]){o=B[s-1];break}this._zoom({zoomLevel:o}),this.oInvisibleMessage.announce(z.getText("NETWORK_GRAPH_ZOOMTOFIT_ANNOUNCEMENT",100*o),X.Assertive)},V.prototype._getZoomText=function(){return Math.floor(100*this._fZoomLevel)+"%"},V.prototype._toggleFullScreen=function(){0==this._bIsFullScreen&&(this._sControlHeight=this.getHeight(),this.setHeight("100%"),this._sControlWidth=this.getWidth(),this.setWidth("100%"));var t=function(t,e){this._oFullScreenButton.setIcon(t),this._oFullScreenButton.setText(e),this._oFullScreenButton.setTooltip(e)}.bind(this);this._bIsFullScreen?t("sap-icon://full-screen",z.getText("CALCULATION_BUILDER_ENTER_FULL_SCREEN_BUTTON")):t("sap-icon://exit-full-screen",z.getText("CALCULATION_BUILDER_EXIT_FULL_SCREEN_BUTTON")),this._bIsFullScreen=!this._bIsFullScreen,this._oFullScreenUtil||(this._oFullScreenUtil=w),this._oFullScreenUtil.toggleFullScreen(this,this._bIsFullScreen,this._oFullScreenButton,this._toggleFullScreen),0==this._bIsFullScreen&&(this.setHeight(this._sControlHeight),this.setWidth(this._sControlWidth))},V.prototype._setupKeyboardNavigation=function(){var t,e,i=[],o=[[]];this._isLayedOut()&&(this.getNodes().forEach((function(t){t.isHidden()||t._isIgnored()||!t.getVisible()||i.push({item:t,x:t.getX(),y:t.getY()})})),this.getLines().forEach((function(t){if(!(t.isHidden()||t._isIgnored()||!t.getVisible()||t.getCoordinates().length<2)){var e=t.getCoordinates()[0],o=e.getX(),s=e.getY();t.getCoordinates().forEach((function(t){o>t.getX()&&(o=t.getX()),s>t.getY()&&(s=t.getY())})),i.push({item:t,x:o,y:s})}})),this.getGroups().forEach((function(t){t.isHidden()||t._isEmpty()||!t.getVisible()||i.push({item:t,x:t.getX(),y:t.getY()})})),i.sort((function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0})),i.length>0&&(e=[i[0]],o=[e],t=i[0],i.forEach((function(i,s){0!==s&&(i.y===t.y?e.push(i):(e=[i],o.push(e)),t=i)}))),o=this._normalizeGrid(o,i),this._oKeyboardNavigator||(this._oKeyboardNavigator=new L(this),this.addDelegate(this._oKeyboardNavigator)),this._oKeyboardNavigator.setItems(o),this._oKeyboardNavigator.setWrapperDom(this.getFocusDomRef()))},V.prototype._normalizeGrid=function(t,e){if(0===e.length)return t;var i,o,s,n=e[0],r=n.x,a=n.x,h=1,l=[];for(e.forEach((function(t){t.x<r&&(r=t.x),t.x>a&&(a=t.x)})),t.forEach((function(t){t.length>h&&(h=t.length)})),i=Math.abs(a-r)/h,o=r,s=0;s<h;s++)o+=i,l.push(o);return t.map((function(t){var e,i;if(t.length===h)e=t;else{for(e=[],i=0;i<h-t.length&&l[i]<t[0].x;)i++,e.push(null);for(t.forEach((function(t){e.push(t),i++}));i<h;)e.push(null),i++}return e.map((function(t){return t?t.item:null}))}))},V.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper")},V.prototype._setupEvents=function(){var t=0,e={},i=this.$("ctrlalert"),o=this.$scroller,s=function(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))},n=function(i){if(i.touches&&2===i.touches.length){if(5==++t){var o=i.touches[0],n=i.touches[1],r=s(o,n);this._zoom({point:{x:(o.clientX+n.clientX)/2,y:(o.clientY+n.clientY)/2},deltaY:r-e.diff}),t=0,e={t1:o,t2:n,diff:r}}i.preventDefault()}}.bind(this);o.on("mousemove",function(t){this._mouseMove(t.clientX,t.clientY)}.bind(this)),(this._isSwimLane()?this.$svg:this.$divgroups).on("mousedown",function(t){this._mouseDown(t.clientX,t.clientY),t.preventDefault()}.bind(this)),o.on("mouseleave",this._endDragging.bind(this)),o.on("mouseup",this._mouseUp.bind(this)),this.getEnableZoom()&&o.on("wheel",function(t){this._wheel({x:t.originalEvent.clientX,y:t.originalEvent.clientY,deltaY:t.originalEvent.deltaY,div:i,ctrl:t.ctrlKey})&&t.preventDefault()}.bind(this)),o.on("touchstart",(function(t){var i;(i=t).touches&&2===i.touches.length&&(e={t1:i.touches[0],t2:i.touches[1],diff:s(i.touches[0],i.touches[1])})})),o.on("touchmove",(function(t){n(t)}))},V.prototype._wheel=function(t){if(this.getEnableWheelZoom()||t.ctrl)return t.div.css("opacity","0"),this._zoom({point:{x:t.x,y:t.y},deltaY:-t.deltaY}),this._zoomLabel.setText(this._getZoomText()),!0},V.prototype._endDragging=function(){this._oPanning.dragging=!1,this.$scroller.removeClass("sapSuiteUiCommonsNetworkGraphPanning")},V.prototype._mouseMove=function(t,e){var i=this.$scroller[0];this._oPanning.dragging&&(this.$scroller.hasClass("sapSuiteUiCommonsNetworkGraphPanning")||this.$scroller.addClass("sapSuiteUiCommonsNetworkGraphPanning"),i.scrollTop=i.scrollTop-(e-this._oPanning.lastY),i.scrollLeft=i.scrollLeft-(t-this._oPanning.lastX),this._oPanning.lastX=t,this._oPanning.lastY=e)},V.prototype._mouseDown=function(t,e){this.deselect(!1),this.setFocus(null),this._oPanning.lastX=t,this._oPanning.lastY=e,this._oPanning.dragging=!0,this._tooltip.instantClose()},V.prototype._mouseUp=function(){this._endDragging()},V.prototype._preventZoomToChangeLineWidth=function(){return this._isLayered()&&this._fZoomLevel>=.5&&this._fZoomLevel<2},V.prototype._setLineClasses=function(){var t=this.$(),e=this._preventZoomToChangeLineWidth()?"addClass":"removeClass",i=this._fZoomLevel<.5?"removeClass":"addClass";t[e]("sapSuiteUiCommonsNetworkGraphDefaultLineWidth"),t[i]("sapSuiteUiCommonsNetworkGraphCrispEdges")},V.prototype._zoom=function(t){var e,i,o,s,n,r,a,h=this.$svg[0].getAttribute("viewBox"),l=t.deltaY<0?-1:1;t.point||(t.point={x:this.$scroller.width()/2,y:this.$scroller.height()/2}),e=this.getCorrectMousePosition({x:t.point.x,y:t.point.y}),t.zoomLevel||0===t.zoomLevel?this._fZoomLevel=t.zoomLevel:(n=this._fZoomLevel,a=0,B.forEach((function(t,e){var i=Math.abs(n-t);(i<r||void 0===r)&&(a=e,r=i)})),o=a,B.indexOf(this._fZoomLevel)<0?o=this._fZoomLevel>B[o]?l<0?o:o+l:l>0?o:o+l:o+=l,o<0?o=0:o>B.length-1&&(o=B.length-1),this._fZoomLevel=B[o]),this._fZoomLevel<0&&(this._fZoomLevel=0),h||(s="0 0 "+Math.round(this.$svg.width())+" "+Math.round(this.$svg.height()),this.$svg[0].setAttribute("viewBox",s)),this.$svg.width(Math.round(this._iWidth*this._fZoomLevel)),this.$svg.height(Math.round(this._iHeight*this._fZoomLevel)),this.$background.width(Math.round(this._iWidth*this._fZoomLevel)),this.$background.height(Math.round(this._iHeight*this._fZoomLevel)),i=this.getCorrectMousePosition({x:t.point.x,y:t.point.y}),this.$scroller[0].scrollLeft+=(e.x-i.x)*this._fZoomLevel,this.$scroller[0].scrollTop+=(e.y-i.y)*this._fZoomLevel,this._zoomLabel.setText(this._getZoomText()),this._fZoomLevel<.4?this.$svg.addClass("sapSuiteUiCommonsNetworkGraphZoomedOut"):this.$svg.removeClass("sapSuiteUiCommonsNetworkGraphZoomedOut"),this._isUseNodeHtml()&&this.$("divnodes").css("transform","scale("+this._fZoomLevel+")"),this.$("divgroups").css("transform","scale("+this._fZoomLevel+")"),this.$tooltips.css("transform","scale("+this._fZoomLevel+")"),this._setLineClasses(),this.fireEvent("zoomChanged")},V.prototype._createSearchSuggestItems=function(){var t={items:[]},e=this.getNodes().sort((function(t,e){return t.getTitle().localeCompare(e.getTitle())})),i=this.getLines().sort((function(t,e){var i=t.getTitle(),o=e.getTitle();return i===o?t.getFromNode().getTitle().localeCompare(e.getFromNode().getTitle()):i.localeCompare(o)})),o=this.getGroups().sort((function(t,e){return t.getTitle().localeCompare(e.getTitle())}));this._oSuggestionItemsModel=new h,this._oSuggestionItemsModel.setSizeLimit(100),e.forEach((function(e){var i=u.trimText(e.getTitle(),50);t.items.push({text:i||e.getKey(),type:H,icon:e.getIcon(),key:e.getKey(),description:"("+z.getText("NETWORK_GRAPH_NODE")+")"})})),i.forEach((function(e){e._isLoop()||(e.getTitle()||e.getFromNode().getTitle()||e.getToNode().getTitle())&&t.items.push({text:e._createSuggestionHelpText(),type:W,key:e._getLineId(),description:"("+z.getText("NETWORK_GRAPH_LINE")+")"})})),o.forEach((function(e){var i=u.trimText(e.getTitle(),50);e.aNodes.length>0&&t.items.push({text:i||e.getKey(),key:e.getKey(),type:M,description:"("+z.getText("NETWORK_GRAPH_GROUP")+")"})})),this._oSuggestionItemsModel.setData(t),this._searchField.setModel(this._oSuggestionItemsModel),this._searchField.bindAggregation("suggestionItems",{path:"/items",template:new l({text:"{text}",icon:"{icon}",key:"{key}",description:"{description}",customData:new m({key:"type",value:"{type}"})})})},V.prototype._scrollToElement=function(t){var e,i,o,n,r,a;t._oGroup&&t._oGroup.getCollapsed()&&(t=t._oGroup),t instanceof s?(r=t.getSource(),a=t.getTarget(),o=Math.abs(a.getX()-r.getX()),n=Math.abs(a.getY()-r.getY()),e=Math.min(r.getX(),a.getX()),i=Math.max(r.getY(),a.getY())):(e=t.getX(),i=t.getY(),o=t._iWidth,n=t._iHeight),this.$scroller.get(0).scrollLeft=(e+(o||0)/2)*this._fZoomLevel-this.$scroller.width()/2,this.$scroller.get(0).scrollTop=(i+(n||0)/2)*this._fZoomLevel-this.$scroller.height()/2},V.prototype._ensureOnScreen=function(t){if(t&&this.$scroller){var e,i,r,a=this.$scroller[0],h=a.scrollLeft/this._fZoomLevel,l=a.scrollTop/this._fZoomLevel,u=h+this.$scroller.width()/this._fZoomLevel,g=l+this.$scroller.height()/this._fZoomLevel;t._isOnScreen(h,u,l,g)||(t instanceof o?(i=t.getX()+t._iWidth/2,r=t.getY()+t._iHeight/2):t instanceof s?(i=((e=t._getArrowFragmentVector()).center.x+e.apex.x)/2,r=(e.center.y+e.apex.y)/2):t instanceof n&&(i=t.getX(),r=t.getY()),(i<h||i>u)&&(a.scrollLeft=i*this._fZoomLevel-this.$scroller.width()/2),(r<l||r>g)&&(a.scrollTop=r*this._fZoomLevel-this.$scroller.height()/2))}},V.prototype._createLegend=function(){var t=G.createRenderManager(),e=this.$("legend"),i=this,o={},s={},n=function(e,o,s){var n=this._oStatuses[e],r=n&&n._getLegendColor(),a=r?"background-color:"+r:"";this._renderControl.call(i,"div",{status:e,elementtype:s,class:"sapSuiteUiCommonsNetworkGraphLegendLine"},!1,t),this._renderControl.call(i,"div",{class:"sapSuiteUiCommonsNetworkGraphLegendColorLine "+this._getStatusClass(e),style:a},null,t),this._renderControl.call(i,"label",{class:"sapSuiteUiCommonsNetworkGraphLegendLineLabel"},!1,t),t.text(this._oLegendLabels[s+e]?this._oLegendLabels[s+e]:o),t.close("label"),t.close("div")}.bind(this),r=function(e,i,o,s,r){if(e.forEach((function(t){var e,o,s;o=i,(s=N((e=t).getStatus()))&&(o[s]?o[s].push(e):o[s]=[e])})),h=i,Object.keys(h).length>0){t.openStart("div").class(o).openEnd(),t.openStart("label").class("sapSuiteUiCommonsNetworkGraphLegendTitle").openEnd(),t.text(z.getText(s)),t.close("label"),t.close("div");var a=Object.keys(i).reduce(function(t,e){var i;if(this._oLegendLabels[r+e])i=this._oLegendLabels[r+e];else{var o=this._oStatuses[e];i=o?o.getTitle()||e:z.getText("NETWORK_GRAPH_"+e.toUpperCase())}return t[e]=i,t}.bind(this),{});Object.keys(i).sort((function(t,e){return(a[t]||"").localeCompare(a[e])})).forEach((function(t){n(t,a[t],r)}))}var h}.bind(this);this.getLegend()||e[0]&&(r(this.getNodes(),o,"sapSuiteUiCommonsNetworkGraphLegendTitleNode","NETWORK_GRAPH_NODES",Y.Node),r(this.getLines(),s,"sapSuiteUiCommonsNetworkGraphLegendTitleLine","NETWORK_GRAPH_LINES",Y.Line),r(this.getGroups(),{},"sapSuiteUiCommonsNetworkGraphLegendTitleLine","NETWORK_GRAPH_GROUPS",Y.Group),t.flush(e[0]),t.destroy(),G.byId(this.getId()+"-legendButton").getPressed()&&(this.getDomRef("legend").style.display="block"),this.$().find(".sapSuiteUiCommonsNetworkGraphLegendLine").on("click",(function(t){var e,n=jQuery(this).attr("status"),r=jQuery(this).attr("elementtype");r===Y.Node&&(e=o),r===Y.Line&&(e=s),t.ctrlKey||(i.deselect(!1),i.setFocus(null)),r!==Y.Group&&e[n]&&e[n].forEach((function(t){t.setSelected(!0)}))})))},V.prototype._selectElement=function(t){var e=t.element&&!t.element.getSelected(),i=[],o=function(e){t.element.setSelected(e),!1!==t.setFocus&&this.setFocus({item:t.element})}.bind(this);this.$("svg").find("."+this.VISIBLE_ACTIONS_BUTTONS_CLASS).removeClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS),t.preventDeselect?o(e):(i=this.deselect(!0),t.setFocus&&this.setFocus(null),(e||t.alwaysSelect)&&o(!0)),!t.element._hasFocus()&&t.forceFocus&&this.setFocus({item:t.element}),i.some((function(e){return e===t.element}))||i.push(t.element),this.fireSelectionChange({items:i})},V.prototype._selectLine=function(t){var e=t.element.getFromNode(),i=t.element.getToNode(),o=e._isInCollapsedGroup()&&e._oGroup===i._oGroup?i._oGroup:null;t.scroll&&this._scrollToElement(o||t.element),o||this._selectElement(t)},V.prototype._selectNode=function(t){var e=t.element._isInCollapsedGroup()?t.element._oGroup:null;t.scroll&&this._scrollToElement(e||t.element),e||(this._selectElement(t),!1!==t.renderActionButtons&&t.element.showActionButtons(!0))},V.prototype._selectGroup=function(t){t.scroll&&this._scrollToElement(t.element),this.setFocus({item:t.element})},V.prototype._applyLayout=function(){var t;return this._iRunningLayouts++,t=this._getLayoutAlgorithm().layout().catch(function(t){return this._fireFailure(V.FAILURE_TYPE.LAYOUT_FAILURE,t),Promise.reject()}.bind(this)).then(function(){return new Promise(function(e,i){t.isTerminated()||this._validateLayout()?e():i()}.bind(this))}.bind(this)),this._oLastLayout&&this._iRunningLayouts>1&&this._oLastLayout.terminate(),this._oLastLayout=t,t},V.prototype._setAccessibilityTitle=function(t){var e,i=this.$("accessibility");e=null===t?z.getText("NETWORK_GRAPH_ACCESSIBILITY_CONTENT"):"string"==typeof t?t:t._getAccessibilityLabel(),i&&i.html(N(e))},V.prototype._isTopBottom=function(){return this.getOrientation()===D.TopBottom||this.getOrientation()===D.BottomTop},V.prototype._getLayoutAlgorithm=function(){return this.getLayoutAlgorithm()||this._getDefalutLayout()},V.prototype._isUseNodeHtml=function(){return this.getRenderType()===k.Html},V.prototype._getDefalutLayout=function(){return this._oDefalutLayout||(this._oDefaultLayout=new r,this._oDefaultLayout.setParent(this,null,!0)),this._oDefaultLayout},V.prototype._isLayered=function(){var t=this._getLayoutAlgorithm().getLayoutRenderType();return t===P.SwimLanes||t===P.LayeredWithGroups||t===P.TwoColumns},V.prototype._isSwimLane=function(){return this._getLayoutAlgorithm().getLayoutRenderType()===P.SwimLanes},V.prototype._isTwoColumnsLayout=function(){return this._getLayoutAlgorithm().getLayoutRenderType()===P.TwoColumns},V.prototype._isDelayedLayouting=function(){return!!this._isUseNodeHtml()||this.getNodes().some((function(t){return t.hasListeners("computeSizes")||t._useAutomaticSize()||1!==t.getTitleLineSize()||t._displayDescription()}))},V.prototype._isLayedOut=function(){return this._bIsLayedOut},V.prototype.setEnableZoom=function(t){return this._toolbar&&(this._zoomLabel.setVisible(t),this._zoomIn.setVisible(t),this._zoomOut.setVisible(t)),this.setProperty("enableZoom",t),this},V.prototype.setDisableToolbarButtons=function(t){return this._toolbar.setEnabled(t),this},V.prototype.destroyAggregation=function(t,i){this._bRequiresDataProcessing=!0,e.prototype.destroyAggregation.call(this,t,i)},V.prototype.insertAggregation=function(t,i,o,s){this._bRequiresDataProcessing=!0,e.prototype.insertAggregation.call(this,t,i,o,s)},V.prototype.removeAggregation=function(t,i,o){this._bRequiresDataProcessing=!0,e.prototype.removeAggregation.call(this,t,i,o)},V.prototype.addAggregation=function(t,i,o){this._bRequiresDataProcessing=!0,e.prototype.addAggregation.call(this,t,i,o)},V.prototype.removeAllAggregation=function(t,i){this._bRequiresDataProcessing=!0,e.prototype.removeAllAggregation.call(this,t,i)},V.prototype.updateAggregation=function(t){this._bNeedNodeProcessing=!0,e.prototype.updateAggregation.call(this,t)},V.prototype.invalidate=function(){!0!==this._bPreventInvalidation&&e.prototype.invalidate.call(this)},V}));