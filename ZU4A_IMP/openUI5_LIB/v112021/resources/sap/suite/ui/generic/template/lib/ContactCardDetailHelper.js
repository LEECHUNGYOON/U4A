sap.ui.define(["sap/suite/ui/commons/collaboration/ServiceContainer"],function(t){"use strict";function e(e,a,o,i){var n=JSON.parse(a.data("contactDetails"));var l="",s;if(n.email&&n.email[0]){s=n.email[0].type&&n.email[0].type.EnumMember;if(s&&s.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1){if(n.email[0].address&&n.email[0].address.Path){l=o.getProperty(n.email[0].address.Path)}else{l=n.email[0].address&&n.email[0].address.String}}}var c=function(){e.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ContactDetails",{formatUri:function(t){var e=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;if(e.test(t)){return"mailto:"+t}else{return"tel:"+t}},onTeamsCollabOptionPress:function(t){var e=t.getSource().data("type");var r=i.find(function(t){return t.key===e});r.callBackHandler.call(this,t)},afterClose:function(t){var e=t.getSource();e.close()}},"contact").then(function(t){var e=t.getModel("contact");var s;e.setProperty("/",{});e.setProperty("/device",sap.ui.Device);n.fn&&n.fn.Path?e.setProperty("/fn",o.getProperty(n.fn.Path)):e.setProperty("/fn",n.fn&&n.fn.String);n.title&&n.title.Path?e.setProperty("/title",o.getProperty(n.title.Path)):e.setProperty("/title",n.title&&n.title.String);n.photo&&n.photo.Path?e.setProperty("/photo",o.getProperty(n.photo.Path)):e.setProperty("/photo",n.photo&&n.photo.String);n.role&&n.role.Path?e.setProperty("/role",o.getProperty(n.role.Path)):e.setProperty("/role",n.role&&n.role.String);n.org&&n.org.Path?e.setProperty("/org",o.getProperty(n.org&&n.org.Path)):e.setProperty("/org",n.org&&n.org.String);e.setProperty("/email",l);if(n.adr&&n.adr[0]&&!e.getProperty("/adr")){s=n.adr[0].type&&n.adr[0].type.EnumMember;if(s&&s.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType")>-1){var c=r(o,n);e.setProperty("/adr",c)}}var p=n.tel&&n.tel.length||0;for(var u=0;u<p;u++){if(n.tel[u]&&!e.getProperty("/fax")){s=n.tel[u].type&&n.tel[u].type.EnumMember;if(s&&s.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1){if(n.tel[u].uri&&n.tel[u].uri.Path){e.setProperty("/fax",o.getProperty(n.tel[u].uri.Path))}else{e.setProperty("/fax",n.tel[u].uri&&n.tel[u].uri.String)}continue}}if(n.tel[u]&&!e.getProperty("/cell")){s=n.tel[u].type&&n.tel[u].type.EnumMember;if(s&&s.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1){if(n.tel[u].uri&&n.tel[u].uri.Path){e.setProperty("/cell",o.getProperty(n.tel[u].uri.Path))}else{e.setProperty("/cell",n.tel[u].uri&&n.tel[u].uri.String)}continue}}if(n.tel[u]&&!e.getProperty("/work")){s=n.tel[u].type&&n.tel[u].type.EnumMember;if(s&&s.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1){if(n.tel[u].uri&&n.tel[u].uri.Path){e.setProperty("/work",o.getProperty(n.tel[u].uri.Path))}else{e.setProperty("/work",n.tel[u].uri&&n.tel[u].uri.String)}continue}}}if(i&&i.length&&l){e.setProperty("/teamsCollabOptions",i)}t.openBy(a)})};c.call(this);var p=true;if(!p){t.getServiceAsync().then(function(t){if(typeof t.isContactsCollaborationSupported==="function"&&t.isContactsCollaborationSupported()){return t.enableContactsCollaboration(l)}else{return Promise.reject()}}).then(function(t){t.openBy(a)}).catch(function(t){c.call(this)})}}function r(t,e){if(e.adr[0].label&&e.adr[0].label.Path){return t.getProperty(e.adr[0].label.Path)}else if(e.adr[0].label&&e.adr[0].label.String){return e.adr[0].label.String}else{var r="";if(e.adr[0].street&&e.adr[0].street.Path){r+=t.getProperty(e.adr[0].street.Path)+", "}else if(e.adr[0].street&&e.adr[0].street.String){r+=e.adr[0].street.String+", "}if(e.adr[0].code&&e.adr[0].code.Path){r+=t.getProperty(e.adr[0].code.Path)+", "}else if(e.adr[0].code&&e.adr[0].code.String){r+=e.adr[0].code.String+", "}if(e.adr[0].locality&&e.adr[0].locality.Path){r+=t.getProperty(e.adr[0].locality.Path)+", "}else if(e.adr[0].locality&&e.adr[0].locality.String){r+=e.adr[0].locality.String+", "}if(e.adr[0].region&&e.adr[0].region.Path){r+=t.getProperty(e.adr[0].region.Path)+", "}else if(e.adr[0].region&&e.adr[0].region.String){r+=e.adr[0].region.String+", "}if(e.adr[0].country&&e.adr[0].country.Path){r+=t.getProperty(e.adr[0].country.Path)+", "}else if(e.adr[0].country&&e.adr[0].country.String){r+=e.adr[0].country.String+", "}return r.slice(0,r.length-2)}}return{populateDataInContactQuickView:e}});
//# sourceMappingURL=ContactCardDetailHelper.js.map