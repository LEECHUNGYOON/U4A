sap.ui.define(["sap/ui/base/Object","sap/base/util/extend","sap/base/util/deepEqual","sap/ui/core/message/Message","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/lib/MessageUtils"],function(e,t,n,r,i,a){"use strict";function o(e,t,i,o,s,u){var l=t.data("inlineCreationRowsConfig").requiredProps;var g=l.length>0;var c=e.oServices.oCRUDManager.getUnfilledProperties.bind(null,l);var f=s.getBindingContext().getPath();var d=[];var p=new Map;var v=false;var R=true;t.attachUiStateChange(M);function h(){var e=s.getBindingContext().getPath();if(e===f){return}f=e;v=false;R=true;C()}function P(){if(!R){return}R=false;m()}function C(){var e=[];Array.from(p.entries()).forEach(function(t){var n=t[0],r=t[1];if(r.length>0){e=e.concat(r);p.set(n,[])}});a.deleteMessages(e)}function m(){var e=U();if(e.length>0){b(e);v=true;E()}else{d=[];I()}}function E(){d=i.findHiddenColumnProperties(l);I()}function M(e){if(!v){return}var t=i.findHiddenColumnProperties(l);var r=!n(d,t);if(r){d=t;I()}}function U(){return i.getBinding().getAllCurrentContexts().filter(function(e){return e.isInactive()&&p.has(e.getPath())})}function b(e){e.forEach(function(e){_(e,true)})}function I(){var e=d&&d.length>0?{message:H(d),type:sap.ui.core.MessageType.Error}:null;u.setTechnicalMessage(e,t.getId())}function O(e){return _(e)}function _(e,t){var n=e.getPath(),r=p.get(n);if(!g){return true}if(!v&&!t){v=true;E()}if(r&&r.length>0){a.deleteMessages(r);p.delete(n)}var i=c(e),o=i.length>0;if(o){var s=D(e,i);p.set(n,s)}return!o}function D(e,n){var i=e.getPath(),a=t.getModel(),o=sap.ui.getCore().getMessageManager(),s=[];n.forEach(function(t){var n=e.getDeepPath()+"/"+t,u=i+"/"+t,l=y(t);var g=new r({message:l,persistent:false,validation:true,technical:false,target:u,fullTarget:n,type:sap.ui.core.MessageType.Error,processor:a});o.addMessages(g);s.push(g.id)});return s}function y(t){var n=x(t);return e.oCommonUtils.getSpecializedText("REQUIRED_PROP_ERROR",n)}function x(n){var r=e.oCommonUtils.getSpecificI18nKeyForSmartControl(t.getId());return r+"|"+n}function H(t){var n=t.map(function(e){return T(e)});var r=n.join(", ");var i=t.length>1?"REQUIRED_PROP_COLUMN_HIDDEN_ERROR_PLURAL":"REQUIRED_PROP_COLUMN_HIDDEN_ERROR";return e.oCommonUtils.getText(i,[r])}function T(n){var r=e.oInfoObjectHandler.getControlInformation(t.getId());var a=r.getColumnKeyForProperty(n);return i.getColumnLabel(a)}return{getUnfilledRequiredProps:c,handleActivateRow:O,onBeforeRebindObjectPage:h,onTableDataReceived:P}}return e.extend("sap.suite.ui.generic.template.ObjectPage.controller.inlineCreationRows.RequiredPropHelper",{constructor:function(e,n,r,i,a,s){t(this,o(e,n,r,i,a,s))}})});
//# sourceMappingURL=RequiredPropHelper.js.map