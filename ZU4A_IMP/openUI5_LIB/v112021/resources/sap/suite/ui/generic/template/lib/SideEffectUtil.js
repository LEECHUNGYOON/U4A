sap.ui.define(["sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/metadataAnalyser","sap/base/util/deepExtend"],function(e,t,a){"use strict";var n={SINGLE_SOURCE_ONLY:"OnlySingleSource",SINLGE_AND_MULTIPLE_SOURCE:"SingleAndMultipleSource",MULTIPLE_SOURCE_ONLY:"OnlyMultipleSource",NO_SIDE_EFFECT:"NoSideEffect"};function i(e,n){var i;var r=a({},n);for(var o in n.entityType){if(o.startsWith("com.sap.vocabularies.Common.v1.SideEffects")){i=n.entityType[o];if(i.SourceProperties&&i.SourceProperties.length>1&&t.hasPropertyInSideEffect(i,n.path)){delete r.entityType[o]}}}return e._calculateFieldGroupIDs(r)}function r(t,a){var r;var o=function(){if(r){t.triggerValidateFieldGroup(r)}};var u=function(e,a){switch(e){case n.SINGLE_SOURCE_ONLY:var u=t.getInnerControls();r=u&&u[0]&&u[0].getFieldGroupIds&&u[0].getFieldGroupIds();o(r);break;case n.SINLGE_AND_MULTIPLE_SOURCE:if(a){r=i(t,a);o(r)}else{t._getComputedMetadata().then(function(e){r=i(t,e);o(r)})}break;case n.MULTIPLE_SOURCE_ONLY:break;default:break}};if(!a){t._getComputedMetadata().then(function(a){var i,r=a.entityType.namespace+"."+a.entityType.name;i=e.getSideEffectSourcePropertyType(a.path,true,t.getModel().getMetaModel(),r);if(i===n.NO_SIDE_EFFECT){return}u(i,a)})}else{u(a)}}function o(e,t,a){if(!t.isDraftEnabled()){return}var n=e.getParameter("changeEvent")&&e.getParameter("changeEvent").getSource?e.getParameter("changeEvent").getSource():e.getSource();if(a){var i=n.getCustomData().find(function(e){return e.getKey()==="SideEffectSourcePropertyType"});i=i&&i.getValue();r(n,i)}else{r(n)}}function u(e,t,n){e._getComputedMetadata().then(function(i){if(i&&i.navigationPath&&!!e.getBindingContext()){var r=a({},i);r.entitySet=t.getODataEntitySet(n);r.entityType=t.getODataEntityType(r.entitySet.entityType);var o=e._calculateFieldGroupIDs(r);if(o){e._setInternalFieldGroupIds(o)}}})}return{handleSideEffectForField:o,assignFieldGroupIds:u}});
//# sourceMappingURL=SideEffectUtil.js.map