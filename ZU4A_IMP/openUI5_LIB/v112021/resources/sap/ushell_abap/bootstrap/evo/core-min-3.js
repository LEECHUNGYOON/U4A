//@ui5-bundle sap/ushell_abap/bootstrap/evo/core-min-3.js
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/PagesAndSpaceId", ["sap/ushell/resources","sap/ushell/Config"],function(e,n){"use strict";var t=function(){};t.prototype.getPageAndSpaceId=function(e){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(n){if(e===undefined){e=window.hasher.getHash()}var t=n.parseShellHash(e)||{};var i={semanticObject:t.semanticObject||"",action:t.action||""};var a=t.params||{};var r=a.pageId||[];var s=a.spaceId||[];return this._parsePageAndSpaceId(r,s,i)}.bind(this))};t.prototype._parsePageAndSpaceId=function(n,t,i){return new Promise(function(a,r){this.getUserMyHomeEnablement().then(function(){if(n.length<1&&t.length<1){var s=i.semanticObject==="Shell"&&i.action==="home";var c=i.semanticObject===""&&i.action==="";if(s||c){this._getUserDefaultSpaceAndPage().then(function(e){a(e)}).catch(function(e){r(e)});return}r(e.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"))}if(n.length===1&&t.length===0){r(e.i18n.getText("PageRuntime.OnlyPageIdProvided"))}if(n.length===0&&t.length===1){r(e.i18n.getText("PageRuntime.OnlySpaceIdProvided"))}if(n.length>1||t.length>1){r(e.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"))}if(n[0]===""){r(e.i18n.getText("PageRuntime.InvalidPageId"))}if(t[0]===""){r(e.i18n.getText("PageRuntime.InvalidSpaceId"))}a({pageId:n[0],spaceId:t[0]})}.bind(this))}.bind(this))};t.prototype.getUserMyHomeEnablement=function(){return new Promise(function(e,t){var i=sap.ushell.Container.getUser().getShowMyHome();n.emit("/core/spaces/myHome/userEnabled",i);e(i)})};t.prototype._getUserDefaultSpaceAndPage=function(){return new Promise(function(n,t){Promise.all([sap.ushell.Container.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(i){var a=i[0];a.getDefaultSpace().then(function(i){if(!i){t(e.i18n.getText("PageRuntime.NoAssignedSpace"));return}var a=i&&i.children&&i.children[0];if(!a){t(e.i18n.getText("PageRuntime.NoAssignedPage"));return}n({spaceId:i.id,pageId:a.id})})}).catch(function(e){t(e)})}.bind(this))};return new t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncher/StaticTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/library","sap/ushell/library","sap/ui/model/json/JSONModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing","sap/ushell/EventHub"],function(e,t,i,a,r,n,o,s,l,jQuery,g,p){"use strict";var c=n.GenericTileScope;var _=n.GenericTileMode;var u=o.AppType;return e.extend("sap.ushell.components.tiles.applauncher.StaticTile",{_aDoables:[],onInit:function(){var e=this.getView();var r=e.getViewData();var n=r.chip;var o=t.getAppLauncherConfig(n,n.configurationUi.isEnabled(),false);var l=this;var p=o.navigation_target_url;var c;this.oShellModel=i.getElementsModel();var u=n.url.getApplicationSystem();if(u){if(g.isIntentUrl(p)){c=g.parseShellHash(p);if(!c.params){c.params={}}c.params["sap-system"]=u;p="#"+g.constructShellHash(c)}else{p+=(p.indexOf("?")<0?"?":"&")+"sap-system="+u}}this.navigationTargetUrl=p;var f=new s({sizeBehavior:a.last("/core/home/sizeBehavior"),wrappingType:a.last("/core/home/wrappingType"),config:o,mode:o.display_mode,nav:{navigation_target_url:n.configurationUi&&n.configurationUi.isEnabled()?"":p},search:{display_highlight_terms:[]}});e.setModel(f);this._aDoables.push(a.on("/core/home/sizeBehavior").do(function(e){f.setProperty("/sizeBehavior",e)}));if(n.types){n.types.attachSetType(function(e){if(l.tileType!==e){if(e==="link"){f.setProperty("/mode",_.LineMode)}else{f.setProperty("/mode",f.getProperty("/config/display_mode"))}l.tileType=e}})}if(!this.tileType){this.tileType="tile"}if(n.search){var d=e.getModel().getProperty("/config/display_search_keywords");var y=d.split(/[, ]+/).filter(function(e){return e&&e!==""});if(o.display_title_text&&o.display_title_text!==""&&y.indexOf(o.display_title_text)===-1){y.push(o.display_title_text)}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&y.indexOf(o.display_subtitle_text)===-1){y.push(o.display_subtitle_text)}if(o.display_info_text&&o.display_info_text!==""&&y.indexOf(o.display_info_text)===-1){y.push(o.display_info_text)}n.search.setKeywords(y);n.search.attachHighlight(function(t){e.getModel().setProperty("/search/display_highlight_terms",t)})}if(n.bag&&n.bag.attachBagsUpdated){n.bag.attachBagsUpdated(function(i){if(i.indexOf("tileProperties")>-1){t._updateTilePropertiesTexts(e,n.bag.getBag("tileProperties"))}})}if(n.configuration&&n.configuration.attachConfigurationUpdated){n.configuration.attachConfigurationUpdated(function(i){if(i.indexOf("tileConfiguration")>-1){t._updateTileConfiguration(e,n.configuration.getParameterValueAsString("tileConfiguration"))}})}if(n.preview){n.preview.setTargetUrl(p);n.preview.setPreviewIcon(o.display_icon_url);n.preview.setPreviewTitle(o.display_title_text);if(n.preview.setPreviewSubtitle&&typeof n.preview.setPreviewSubtitle==="function"){n.preview.setPreviewSubtitle(o.display_subtitle_text)}}if(n.configurationUi.isEnabled()){n.configurationUi.setAsyncUiProvider(function(){return t.getConfigurationUi(e,"sap.ushell.components.tiles.applauncher.Configuration").then(function(e){n.configurationUi.attachCancel(l.onCancelConfiguration.bind(null,e));n.configurationUi.attachSave(l.onSaveConfiguration.bind(null,e));return e})});this.getView().getContent()[0].setTooltip(t.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}if(n.actions){var v=[];var h=o.actions;if(h){v=h.slice()}if(a.last("/core/shell/enablePersonalization")){var b=f.getProperty("/mode")===_.LineMode?"link":"tile";var w=t.getTileSettingsAction(f,this.onSaveRuntimeSettings.bind(this),b);v.push(w)}n.actions.setActionsProvider(function(){return v})}},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},onPress:function(e){var t=this.getView();var i=t.getViewData();var n=i.chip;var o=t.getModel().getProperty("/config");if(e.getSource().getScope&&e.getSource().getScope()===c.Display){if(n.configurationUi.isEnabled()){n.configurationUi.display()}else if(this.navigationTargetUrl){p.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:this.navigationTargetUrl}});if(this.navigationTargetUrl[0]==="#"){hasher.setHash(this.navigationTargetUrl)}else{var s=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(s){var l={title:o.display_title_text,appType:u.URL,url:o.navigation_target_url,appId:o.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(l)}r.openURL(this.navigationTargetUrl,"_blank")}}}},onSaveRuntimeSettings:function(e){var t=e.getModel();var i=this.getView().getViewData().chip;var a=this.getView().getModel().getProperty("/config");a.display_title_text=t.getProperty("/title")||"";a.display_subtitle_text=t.getProperty("/subtitle")||"";a.display_info_text=t.getProperty("/info")||"";a.display_search_keywords=t.getProperty("/keywords")||"";var r=i.bag.getBag("tileProperties");r.setText("display_title_text",a.display_title_text);r.setText("display_subtitle_text",a.display_subtitle_text);r.setText("display_info_text",a.display_info_text);r.setText("display_search_keywords",a.display_search_keywords);function n(e){l.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller")}r.save(function(){l.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty("/config/display_title_text",a.display_title_text);this.getView().getModel().setProperty("/config/display_subtitle_text",a.display_subtitle_text);this.getView().getModel().setProperty("/config/display_info_text",a.display_info_text);this.getView().getModel().setProperty("/config/display_search_keywords",a.display_search_keywords);this.getView().getModel().refresh()}.bind(this),n)},onSaveConfiguration:function(e){var i=new jQuery.Deferred;var a=e.getModel();var r=a.getProperty("/tileModel");var n=e.getViewData().chip;var o=t.tileActionsRows2TileActionsArray(a.getProperty("/config/tile_actions_rows"));var g={display_icon_url:a.getProperty("/config/display_icon_url"),navigation_use_semantic_object:a.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:a.getProperty("/config/navigation_target_url"),navigation_semantic_object:(a.getProperty("/config/navigation_semantic_object")||"").trim(),navigation_semantic_action:(a.getProperty("/config/navigation_semantic_action")||"").trim(),navigation_semantic_parameters:(a.getProperty("/config/navigation_semantic_parameters")||"").trim(),display_search_keywords:a.getProperty("/config/display_search_keywords")};var p=t.checkInputOnSaveConfig(e);if(!p){p=t.checkTileActions(e)}if(p){i.reject("mandatory_fields_missing");return i.promise()}if(g.navigation_use_semantic_object){g.navigation_target_url=t.getSemanticNavigationUrl(g);a.setProperty("/config/navigation_target_url",g.navigation_target_url)}var c=n.bag.getBag("tileProperties");c.setText("display_title_text",a.getProperty("/config/display_title_text"));c.setText("display_subtitle_text",a.getProperty("/config/display_subtitle_text"));c.setText("display_info_text",a.getProperty("/config/display_info_text"));c.setText("display_search_keywords",g.display_search_keywords);var _=n.bag.getBag("tileNavigationActions");t.populateTileNavigationActionsBag(_,o);function u(e,t){l.error(e,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");i.reject(e,t)}n.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(g)},function(){var a=t.getAppLauncherConfig(n,false,false);var o=t.getAppLauncherConfig(n,true,false);var g=new s({config:a,nav:{navigation_target_url:""},tileModel:r});e.setModel(g);r.setData({config:o,nav:{navigation_target_url:""}},false);if(n.preview){n.preview.setTargetUrl(a.navigation_target_url);n.preview.setPreviewIcon(a.display_icon_url);n.preview.setPreviewTitle(a.display_title_text);if(n.preview.setPreviewSubtitle&&typeof n.preview.setPreviewSubtitle==="function"){n.preview.setPreviewSubtitle(a.display_subtitle_text)}}c.save(function(){l.debug("property bag 'tileProperties' saved successfully");if(n.title){n.title.setTitle(a.display_title_text,function(){i.resolve()},u)}else{i.resolve()}},u);_.save(function(){l.debug("property bag 'navigationProperties' saved successfully")},u)},u);e.destroy();return i.promise()},onCancelConfiguration:function(e){var i=e.getViewData();var a=e.getModel();var r=a.getProperty("/tileModel");var n=i.chip;var o=t.getAppLauncherConfig(n,n.configurationUi.isEnabled(),false);e.getModel().setData({config:o,nav:{navigation_target_url:""},tileModel:r},false);e.destroy()},formatters:{leanURL:r.getLeanURL.bind(r)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/library","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/EventHub"],function(e,t,i,a,r,s,n,o,jQuery,l,g,p,u,c){"use strict";var f=n.GenericTileScope;var d=n.GenericTileMode;var _=e.AppType;var v="sap.ushell.components.tiles.applauncherdynamic.DynamicTile";return t.extend(v,{_aDoables:[],oDataRequest:null,sConfigNavigationTargetUrlOld:"",REFRESH_INTERVAL_MIN:10,constructTargetUrlWithSapSystem:function(e,t){var i;if(t){if(p.isIntentUrl(e)){i=p.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+p.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},onInit:function(){var e=this;var t=this.getView();var s=t.getViewData();var n=s.chip;var g=i.getAppLauncherConfig(n,n.configurationUi.isEnabled(),false);var p=g.navigation_target_url;var u=n.url.getApplicationSystem();this.sConfigNavigationTargetUrlOld=g.navigation_target_url;l.setLevel(2,v);this.bIsRequestCompleted=false;this.oShellModel=a.getElementsModel();this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(p,u);var c=new o({sizeBehavior:r.last("/core/home/sizeBehavior"),wrappingType:r.last("/core/home/wrappingType"),config:g,mode:g.display_mode||d.ContentMode,data:i.getDataToDisplay(g,{number:n.preview&&n.preview.isEnabled()?1234:"..."}),nav:{navigation_target_url:n.configurationUi&&n.configurationUi.isEnabled()?"":this.navigationTargetUrl},search:{display_highlight_terms:[]}});t.setModel(c);this._aDoables.push(r.on("/core/home/sizeBehavior").do(function(e){c.setProperty("/sizeBehavior",e)}));if(n.types){n.types.attachSetType(function(t){if(e.tileType!==t){if(t==="link"){c.setProperty("/mode",d.LineMode)}else{c.setProperty("/mode",c.getProperty("/config/display_mode")||d.ContentMode)}e.tileType=t}})}if(!this.tileType){this.tileType="tile"}if(n.search){var f=t.getModel().getProperty("/config/display_search_keywords");var _=f.split(/[, ]+/).filter(function(e,t){return e&&e!==""});if(g.display_title_text&&g.display_title_text!==""&&_.indexOf(g.display_title_text)===-1){_.push(g.display_title_text)}if(g.display_subtitle_text&&g.display_subtitle_text!==""&&_.indexOf(g.display_subtitle_text)===-1){_.push(g.display_subtitle_text)}if(g.display_info_text&&g.display_info_text!==""&&_.indexOf(g.display_info_text)===-1){_.push(g.display_info_text)}if(g.display_number_unit&&g.display_number_unit!==""&&_.indexOf(g.display_number_unit)===-1){_.push(g.display_number_unit)}n.search.setKeywords(_);n.search.attachHighlight(function(e){t.getModel().setProperty("/search/display_highlight_terms",e)})}if(n.bag&&n.bag.attachBagsUpdated){n.bag.attachBagsUpdated(function(e){if(e.indexOf("tileProperties")>-1){i._updateTilePropertiesTexts(t,n.bag.getBag("tileProperties"))}})}if(n.configuration&&n.configuration.attachConfigurationUpdated){n.configuration.attachConfigurationUpdated(function(e){if(e.indexOf("tileConfiguration")>-1){i._updateTileConfiguration(t,n.configuration.getParameterValueAsString("tileConfiguration"))}})}if(n.preview){n.preview.setTargetUrl(this.navigationTargetUrl);n.preview.setPreviewIcon(g.display_icon_url);n.preview.setPreviewTitle(g.display_title_text);if(n.preview.setPreviewSubtitle&&typeof n.preview.setPreviewSubtitle==="function"){n.preview.setPreviewSubtitle(g.display_subtitle_text)}}if(n.configurationUi.isEnabled()){n.configurationUi.setAsyncUiProvider(function(){return i.getConfigurationUi(t,"sap.ushell.components.tiles.applauncherdynamic.Configuration").then(function(t){n.configurationUi.attachCancel(e.onCancelConfiguration.bind(null,t));n.configurationUi.attachSave(e.onSaveConfiguration.bind(null,t));return t})});this.getView().getContent()[0].setTooltip(i.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"))}else if(!n.preview||!n.preview.isEnabled()){if(!u){sap.ushell.Container.addRemoteSystemForServiceUrl(g.service_url)}this.bNeedsRefresh=true;this.iNrOfTimerRunning=0}if(n.refresh){n.refresh.attachRefresh(this.refreshHandler.bind(this))}if(n.visible){n.visible.attachVisible(this.visibleHandler.bind(this))}if(n.actions){var h;var y=g.actions;if(y){h=y.slice()}else{h=[]}if(r.last("/core/shell/enablePersonalization")){var b=c.getProperty("/mode")===d.LineMode?"link":"tile";var m=i.getTileSettingsAction(c,this.onSaveRuntimeSettings.bind(this),b);h.push(m)}n.actions.setActionsProvider(function(){return h})}sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this._clearRequest,this)},stopRequests:function(){if(this.oDataRequest){if(this.oDataRequest.abort()){this.bNeedsRefresh=true}}},_clearRequest:function(){this.stopRequests();clearTimeout(this.timer)},onExit:function(){if(this.oDataRequest){this._clearRequest();this.oDataRequest.destroy()}sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this._clearRequest,this);this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},onPress:function(e){var t=this.getView();var i=t.getViewData();var a=t.getModel();var n=a.getProperty("/nav/navigation_target_url");var o=i.chip;var l=a.getProperty("/config");if(e.getSource().getScope&&e.getSource().getScope()===f.Display){if(o.configurationUi.isEnabled()){o.configurationUi.display()}else if(n){c.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:n}});if(n[0]==="#"){hasher.setHash(n)}else{var g=r.last("/core/shell/enableRecentActivity")&&r.last("/core/shell/enableRecentActivityLogging");if(g){var p={title:l.display_title_text,appType:_.URL,url:l.navigation_target_url,appId:l.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(p)}s.openURL(n,"_blank")}}}},onSaveRuntimeSettings:function(e){var t=this.getView();var i=t.getModel();var a=t.getViewData().chip;var r=i.getProperty("/config");var s=e.getModel();r.display_title_text=s.getProperty("/title")||"";r.display_subtitle_text=s.getProperty("/subtitle")||"";r.display_info_text=s.getProperty("/info")||"";r.display_search_keywords=s.getProperty("/keywords")||"";var n=a.bag.getBag("tileProperties");n.setText("display_title_text",r.display_title_text);n.setText("display_subtitle_text",r.display_subtitle_text);n.setText("display_info_text",r.display_info_text);n.setText("display_search_keywords",r.display_search_keywords);function o(e){l.error(e,null,v)}n.save(function(){l.debug("property bag 'tileProperties' saved successfully");i.setProperty("/config",r);i.setProperty("/data/display_title_text",r.display_title_text);i.setProperty("/data/display_subtitle_text",r.display_subtitle_text);i.setProperty("/data/display_info_text",r.display_info_text);i.refresh()},o)},onSaveConfiguration:function(e){var t=new jQuery.Deferred;var a=e.getModel();var r=a.getProperty("/tileModel");var s=e.getViewData().chip;var n=i.tileActionsRows2TileActionsArray(a.getProperty("/config/tile_actions_rows"));var g={display_icon_url:a.getProperty("/config/display_icon_url"),display_number_unit:a.getProperty("/config/display_number_unit"),service_url:a.getProperty("/config/service_url"),service_refresh_interval:a.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:a.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:a.getProperty("/config/navigation_target_url"),navigation_semantic_object:(a.getProperty("/config/navigation_semantic_object")||"").trim(),navigation_semantic_action:(a.getProperty("/config/navigation_semantic_action")||"").trim(),navigation_semantic_parameters:(a.getProperty("/config/navigation_semantic_parameters")||"").trim(),display_search_keywords:a.getProperty("/config/display_search_keywords")};var p=i.checkInputOnSaveConfig(e);if(!p){p=i.checkTileActions(e)}if(p){t.reject("mandatory_fields_missing");return t.promise()}if(g.navigation_use_semantic_object){g.navigation_target_url=i.getSemanticNavigationUrl(g);a.setProperty("/config/navigation_target_url",g.navigation_target_url)}var u=s.bag.getBag("tileProperties");u.setText("display_title_text",a.getProperty("/config/display_title_text"));u.setText("display_subtitle_text",a.getProperty("/config/display_subtitle_text"));u.setText("display_info_text",a.getProperty("/config/display_info_text"));u.setText("display_search_keywords",g.display_search_keywords);var c=s.bag.getBag("tileNavigationActions");i.populateTileNavigationActionsBag(c,n);function f(e,i){l.error(e,null,v);t.reject(e,i)}s.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(g)},function(){var a=i.getAppLauncherConfig(s,false,false);var n=i.getAppLauncherConfig(s,true,false);var g=new o({config:a,tileModel:r});e.setModel(g);r.setData({data:n,nav:{navigation_target_url:""}},false);if(s.preview){s.preview.setTargetUrl(a.navigation_target_url);s.preview.setPreviewIcon(a.display_icon_url);s.preview.setPreviewTitle(a.display_title_text);if(s.preview.setPreviewSubtitle&&typeof s.preview.setPreviewSubtitle==="function"){s.preview.setPreviewSubtitle(a.display_subtitle_text)}}u.save(function(){l.debug("property bag 'tileProperties' saved successfully");if(s.title){s.title.setTitle(a.display_title_text,function(){t.resolve()},f)}else{t.resolve()}},f);c.save(function(){l.debug("property bag 'navigationProperties' saved successfully")},f)},f);return t.promise()},successHandlerFn:function(e){var t=this.getView();var a=t.getModel();var r=a.getProperty("/config");var s=a.getProperty("/config/navigation_target_url");var n=a.getProperty("/config/service_refresh_interval");var o=a.getProperty("/config/service_url");var g=t.getViewData();var p=g.chip;var u=p.url.getApplicationSystem();if(g.properties&&g.properties.info){if(typeof e==="object"){e.info=g.properties.info}}var c=i.getDataToDisplay(r,e);a.setProperty("/data",c);if(this.sConfigNavigationTargetUrlOld!==s){this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(s,u);this.sConfigNavigationTargetUrlOld=this.navigationTargetUrl}a.setProperty("/nav/navigation_target_url",i.addParamsToUrl(this.navigationTargetUrl,c));if(n>0){n=Math.max(n,this.REFRESH_INTERVAL_MIN);l.info("Wait "+n+" seconds before calling "+o+" again",null,v);this.refeshAfterInterval(n)}},errorHandlerFn:function(e,t){var i=this.getView();var a=i.getModel();var r=a.getProperty("/config/service_url");var s=e&&e.message?e.message:e;if(e.statusText==="Abort"||e.aborted===true){l.info("Data request from service "+r+" was aborted",null,v)}else{if(e.response){s+=" - "+e.response.statusCode+" "+e.response.statusText}var n=t?l.warning:l.error;n("Failed to update data via service\n service URL: "+r+"\n "+s,null,v);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){var e=i.getResourceBundleModel().getResourceBundle();var t=this.getView().getModel();var a=t.getProperty("/config");t.setProperty("/data",i.getDataToDisplay(a,{number:"???",info:e.getText("dynamic_data.error"),infoState:"Critical"}))},onCancelConfiguration:function(e){var t=e.getViewData();var a=e.getModel();var r=a.getProperty("/tileModel");var s=t.chip;var n=i.getAppLauncherConfig(s,false,false);a.setData({config:n,tileModel:r},false)},loadData:function(){var e=this.getView();var t=e.getViewData().chip;var i=e.getModel();var a=i.getProperty("/config/service_url");if(/;o=([;/?]|$)/.test(a)){a=t.url.addSystemToServiceUrl(a)}if(!a){l.error("No service URL given!",v);this._setTileIntoErrorState();return}if(!this.oDataRequest||this.oDataRequest.sUrl!==a){if(this.oDataRequest){this.oDataRequest.destroy()}this.sRequestUrl=a;var r={dataSource:i.getProperty("/config/data_source")};this.oDataRequest=new g(a,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),"",r)}else if(this.oDataRequest){this.oDataRequest.refresh()}},refreshTile:function(){var e=this.getView();var t=e.getViewData();var i=t.chip.visible.isVisible();if(i&&this.bNeedsRefresh){this.bNeedsRefresh=false;this.loadData()}},refeshAfterInterval:function(e){this.iNrOfTimerRunning++;this.timer=window.setTimeout(function(){this.iNrOfTimerRunning--;if(this.iNrOfTimerRunning===0){this.bNeedsRefresh=true;this.refreshTile()}}.bind(this),u.sanitizeTimeoutDelay(e*1e3))},refreshHandler:function(){this.bNeedsRefresh=true;this.refreshTile()},visibleHandler:function(e){if(e){this.refreshTile()}else{this.stopRequests()}},formatters:{leanURL:s.getLeanURL.bind(s)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var o=t.properties.tilePersonalization||{};var i=t.startupParameters;if(i&&i["sap-system"]){o["sap-system"]=i["sap-system"][0]}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:t.properties,configuration:o}}).then(function(e){this._oController=e.getController();e.getContent()[0].bindTileContent({path:"/properties",factory:this._oController._getTileContent.bind(this._oController)});return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updatePropertiesHandler(e)}},tileRefresh:function(){},tileSetVisible:function(e){},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ushell/EventHub"],function(e,t,i,r,o,n,a,s,l){"use strict";var p=n.GenericTileScope;var c=n.GenericTileMode;var u=e.DisplayFormat;var h=e.AppType;return t.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoables:[],_getConfiguration:function(){var e=this.getView().getViewData();e.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");e.properties.wrappingType=i.last("/core/home/wrappingType");return e},_setShowContentProviderInfoOnVisualizations:function(e,t,i){if(!e){i.setProperty("/properties/showContentProviderInfoOnVisualizations",false);return Promise.resolve()}return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)}).then(function(e){i.setProperty("/properties/contentProviderLabel",e.label);i.setProperty("/properties/showContentProviderInfoOnVisualizations",true)}).catch(function(e){a.error("StaticTile.controller threw an error:",e)})},onInit:function(){var e=this.getView();var t=new o;t.setData(this._getConfiguration());e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));var r=this.getView().getViewData();var n=r.properties;var a=r.properties.contentProviderId;n.mode=n.mode||(n.icon?"ContentMode":"HeaderMode");if(n.displayFormat===u.Compact&&n.title&&n.targetURL){t.setProperty("/properties/mode",c.LineMode)}switch(n.displayFormat){case u.Flat:t.setProperty("/properties/frameType","OneByHalf");break;case u.FlatWide:t.setProperty("/properties/frameType","TwoByHalf");break;case u.StandardWide:t.setProperty("/properties/frameType","TwoByOne");break;default:{t.setProperty("/properties/frameType","OneByOne")}}this._setShowContentProviderInfoOnVisualizations(i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations"),a,t);this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){this._setShowContentProviderInfoOnVisualizations(e,a,t)}.bind(this)))},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},editModeHandler:function(e){var t=e?p.ActionMore:p.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===p.Display){var o=this._createTargetUrl();if(!o){return}l.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:o}});if(o[0]==="#"){hasher.setHash(o)}else{var n=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(n){var a={title:t.title,appType:h.URL,url:t.targetURL,appId:t.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(a)}r.openURL(o,"_blank")}}},updatePropertiesHandler:function(e){var t=this.getView().getContent()[0];var i=t.getTileContent()[0];if(typeof e.title!=="undefined"){t.setHeader(e.title)}if(typeof e.subtitle!=="undefined"){t.setSubheader(e.subtitle)}if(typeof e.icon!=="undefined"){i.getContent().setSrc(e.icon)}if(typeof e.info!=="undefined"){i.setFooter(e.info)}},_createTargetUrl:function(){var e=this.getView().getViewData().properties.targetURL;var t=this.getView().getViewData().configuration["sap-system"];var i;if(e&&t){if(s.isIntentUrl(e)){i=s.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+s.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},_getLeanUrl:function(){return r.getLeanURL(this._createTargetUrl())},_getTileContent:function(e,t){var i=t.getPath().split("/");i.pop();var r=t.getProperty(i.join("/"));if(r!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=r;this.oTileContent=this.getView().byId(r.icon?"imageTileContent":"standardTileContent").clone()}return this.oTileContent},_getCurrentProperties:function(){var e=this.getView().getContent()[0];var t=e.getTileContent()[0];var r=i.last("/core/home/sizeBehavior");return{title:e.getHeader(),subtitle:e.getSubheader(),info:t.getFooter(),icon:t.getContent().getSrc(),mode:e.getMode(),configSizeBehavior:r}}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent"],function(e,t,r,i){"use strict";return e.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({mode:"{/properties/mode}",header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{path:"/properties/targetURL",formatter:e._getLeanUrl.bind(e)},tileContent:new i({footer:"{/properties/info}",content:new r({src:"{/properties/icon}"})}),press:[e.onPress,e],additionalTooltip:"{/properties/contentProviderLabel}"})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var i=t.properties||{};var r=i.tilePersonalization||{};var o=i.indicatorDataSource;if(o&&o.path){r.serviceUrl=o.path;r.serviceRefreshInterval=o.refresh}var n=t.startupParameters;if(n&&n["sap-system"]&&n["sap-system"][0]){r["sap-system"]=n["sap-system"][0]}if(r.serviceUrl&&r.serviceUrl.charAt(0)!=="/"&&i.dataSource&&i.dataSource.uri){var s=i.dataSource.uri;if(r["sap-system"]){if(s.charAt(s.length-1)==="/"){s=s.slice(0,s.length-1)}s+=";o="+r["sap-system"]}if(s.charAt(s.length-1)!=="/"){s+="/"}s+=r.serviceUrl;r.serviceUrl=s}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:i,configuration:r}}).then(function(e){this._oController=e.getController();this._oController.visibleHandler(this.bIsVisible);return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updateVisualPropertiesHandler(e)}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler()}},tileSetVisible:function(e){if(this._oController){this._oController.visibleHandler(e)}else{this.bIsVisible=e}},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},tileSetPreview:function(e){if(this._oController){this._oController.previewHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/ushell/library","sap/base/Log","sap/base/util/merge","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/EventHub"],function(e,t,r,i,a,o,s,n,l,u,p,f,d,c){"use strict";var h=s.GenericTileScope;var m=s.DeviationIndicator;var g=s.ValueColor;var v=s.FrameType;var b=n.DisplayFormat;var y=n.AppType;var _="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";var D="<RESET>";var R={title:"",subtitle:"",icon:"",info:"",infoState:g.Neutral,targetURL:"",number_value:"...",number_unit:"",number_factor:"",number_state_arrow:m.None,number_value_state:g.Neutral};return e.extend(_,{_aDoables:[],timer:null,iLastTimeoutStart:0,oDataRequest:null,bShouldNotRefreshDataAfterInit:false,_getConfiguration:function(e){var t={};var r;t.configuration=e.configuration;t.properties=e.properties;t.properties.info=t.properties.info||R.info;t.properties.number_value=t.properties.preview?1234:R.number_value;t.properties.number_value_state=R.number_value_state;t.properties.number_state_arrow=R.number_state_arrow;t.properties.number_factor=R.number_factor;t.properties.number_unit=t.properties.numberUnit||R.number_unit;var a=t.configuration["sap-system"];var o=t.properties.targetURL;if(o&&a){if(d.isIntentUrl(o)){r=d.parseShellHash(o);if(!r.params){r.params={}}r.params["sap-system"]=a;o="#"+d.constructShellHash(r)}else{o+=(o.indexOf("?")<0?"?":"&")+"sap-system="+a}t.properties.targetURL=o}t.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");t.properties.wrappingType=i.last("/core/home/wrappingType");switch(t.properties.displayFormat){case b.Flat:t.properties.frameType=v.OneByHalf;break;case b.FlatWide:t.properties.frameType=v.TwoByHalf;break;case b.StandardWide:t.properties.frameType=v.TwoByOne;break;default:{t.properties.frameType=v.OneByOne}}t.originalProperties=u({},e.properties);return t},_setShowContentProviderInfoOnVisualizations:function(e,t,r){if(!e){r.setProperty("/properties/showContentProviderInfoOnVisualizations",false);return Promise.resolve()}return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)}).then(function(e){r.setProperty("/properties/contentProviderLabel",e.label);r.setProperty("/properties/showContentProviderInfoOnVisualizations",true)}).catch(function(e){l.error("DynamicTile.controller threw an error:",e)})},onInit:function(){var e=this.getView();var t=new o;var r=e.getViewData();var a=r.properties;t.setData(this._getConfiguration(r));var s=a.contentProviderId;this._setShowContentProviderInfoOnVisualizations(i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations"),s,t);this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){this._setShowContentProviderInfoOnVisualizations(e,s,t)}.bind(this)));e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));if(a.preview){this.previewHandler(true)}},refreshHandler:function(){this.loadData(0,true)},visibleHandler:function(e){if(e){if(!this.oDataRequest||this.timer===null){this.initRequestInterval()}}else{this.stopRequests()}},editModeHandler:function(e){var t=e?h.ActionMore:h.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},previewHandler:function(e){var t=this.getView();var r=t.getModel();if(e){var i=t.getViewData();var a=u({},i,{properties:{preview:true}});var o=this._getConfiguration(a);var s=u({},o.properties,{customSizeBehavior:r.getProperty("/properties/customSizeBehavior"),configSizeBehavior:r.getProperty("/properties/configSizeBehavior")});r.setProperty("/properties",s);return}r.setProperty("/properties/preview",false)},updateVisualPropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/properties");var r=this.getView().getModel().getProperty("/originalProperties");if(f.isDefined(e.title)){t.title=e.title;r.title=e.title}if(f.isDefined(e.subtitle)){t.subtitle=e.subtitle;r.subtitle=e.subtitle}if(f.isDefined(e.icon)){t.icon=e.icon;r.icon=e.icon}if(f.isDefined(e.targetURL)){t.targetURL=e.targetURL;r.targetURL=e.targetURL}if(f.isDefined(e.info)){t.info=e.info;r.info=e.info}this.getView().getModel().refresh()},stopRequests:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.oDataRequest){this.oDataRequest.abort()}},onPress:function(e){if(e.getSource().getScope&&e.getSource().getScope()===h.Display){var t=this.getView().getModel().getProperty("/properties/targetURL");var r=this.getView().getModel().getProperty("/properties/title");if(!t){return}c.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:t}});if(t[0]==="#"){hasher.setHash(t)}else{var o=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(o){var s={title:r,appType:y.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}a.openURL(t,"_blank")}}},initRequestInterval:function(){var e=this.getView().getModel();var t=e.getProperty("/configuration/serviceRefreshInterval");if(!t||t==="0"){t=0;if(this.oDataRequest){this.bShouldNotRefreshDataAfterInit=true}}else if(t<10){var r=e.getProperty("/configuration/serviceUrl");l.warning("Refresh Interval "+t+" seconds for service URL "+r+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,_);t=10}this.loadData(t,false)},loadData:function(e,t){if(!t&&this.bShouldNotRefreshDataAfterInit){return}var r=this.getView().getModel();var i=r.getProperty("/properties/preview");var a=r.getProperty("/configuration/serviceUrl");if(i){l.info("Tile in preview mode",_);return}if(!a){l.error("No service URL given!",_);this._setTileIntoErrorState();return}var o=e*1e3-(Date.now()-this.iLastTimeoutStart);if(!t&&!this.timer&&o>0){l.info("Started timeout to call "+a+" again in "+Math.ceil(o/1e3)+" seconds",null,_);this.timer=setTimeout(this.loadData.bind(this,e,false),f.sanitizeTimeoutDelay(o));return}if(!this.oDataRequest||this.oDataRequest.sUrl!==a){if(this.oDataRequest){this.oDataRequest.destroy()}var s=r.getProperty("/properties/contentProviderId");var n={dataSource:r.getProperty("/properties/dataSource")};this.oDataRequest=new p(a,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),s,n)}else if(this.oDataRequest){this.oDataRequest.refresh()}if(e>0){l.info("Started timeout to call "+a+" again in "+e+" seconds",null,_);this.iLastTimeoutStart=Date.now();this.timer=setTimeout(this.loadData.bind(this,e,false),f.sanitizeTimeoutDelay(e*1e3))}},successHandlerFn:function(e){this.updatePropertiesHandler(e)},errorHandlerFn:function(e){var t=e&&e.message?e.message:e;var r=this.getView().getModel().getProperty("/configuration/serviceUrl");if(e.statusText==="Abort"||e.aborted===true){l.info("Data request from service "+r+" was aborted",null,_);this.bShouldNotRefreshDataAfterInit=false}else{if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}l.error("Failed to update data via service "+r+": "+t,null,_);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){var e=t.getResourceBundleModel().getResourceBundle();this.updatePropertiesHandler({number:"???",info:e.getText("dynamic_data.error")})},_normalizeNumber:function(e,t,i,a){var o;if(isNaN(e)){o=e}else{var s=r.getFloatInstance({maxFractionDigits:a});if(!i){var n=Math.abs(e);if(n>=1e9){i="B";e/=1e9}else if(n>=1e6){i="M";e/=1e6}else if(n>=1e3){i="K";e/=1e3}}o=s.format(e)}var l=o;var u=l[t-1];t-=u==="."||u===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:i}},updatePropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/originalProperties");var a=this.getView().getModel().getProperty("/properties");var o=[{dataField:"title",modelField:"title"},{dataField:"subtitle",modelField:"subtitle"},{dataField:"icon",modelField:"icon"},{dataField:"info",modelField:"info"},{dataField:"infoState",modelField:"infoState"},{dataField:"targetURL",modelField:"targetURL"},{dataField:"stateArrow",modelField:"number_state_arrow"},{dataField:"numberState",modelField:"number_value_state"},{dataField:"numberUnit",modelField:"number_unit"},{dataField:"numberFactor",modelField:"number_factor"}];o.forEach(function(r){var i=e[r.dataField];var o=!i;var s=R[r.modelField];if(o){a[r.modelField]=t[r.modelField]||s}else if(this._isResetValue(i)){a[r.modelField]=s}else{a[r.modelField]=i}}.bind(this));a.number_value=!isNaN(e.number)?e.number:R.number_value;a.number_digits=e.numberDigits>=0?e.numberDigits:4;var s=[];if(e.targetParams){s.push(e.targetParams)}if(e.results){var n;var l;var u=0;e.results.forEach(function(e){l=e.number||0;if(typeof l==="string"){l=parseFloat(l)}u+=l;n=e.targetParams;if(n){s.push(n)}});a.number_value=u}if(s.length>0){var p=a.targetURL.indexOf("?")!==-1?"&":"?";a.targetURL+=p+s.join("&")}if(!isNaN(e.number)){if(typeof e.number==="string"){e.number=e.number.trim()}var f=this._shouldProcessDigits(e.number,e.numberDigits);var d=a.icon?4:5;if(e.number&&e.number.toString().length>=d||f){var c=this._normalizeNumber(e.number,d,e.numberFactor,e.numberDigits);a.number_factor=c.numberFactor;a.number_value=c.displayNumber}else{var h=r.getFloatInstance({maxFractionDigits:d});a.number_value=h.format(e.number)}}a.configSizeBehavior=i.last("/core/home/sizeBehavior");this.getView().getModel().refresh()},_shouldProcessDigits:function(e,t){var r;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){r=e.split(".")[1].length;if(r>t){return true}}return false},_getLeanUrl:function(e){return a.getLeanURL(e)},_formatValueColor:function(e){if(e==="Positive"){return g.Good}if(e==="Negative"){return g.Error}return g[e]||g.Neutral},_getValueColor:function(e){var t=this._formatValueColor(e);if(t===g.Neutral){return g.None}return t},_isResetValue:function(e){if(typeof e!=="string"){return false}return e===D},onExit:function(){if(this.oDataRequest){this.stopRequests();this.oDataRequest.destroy()}this._aDoables.forEach(function(e){e.off()});this._aDoables=[]}})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],function(e,t,r,i,o){"use strict";var n=o.ValueColor;return e.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{parts:["/properties/targetURL"],formatter:e.formatters&&e.formatters.leanURL},tileContent:new r({footer:"{/properties/info}",footerColor:{path:"/properties/infoState",formatter:function(e){if(e==="Positive"){e=n.Good}if(e==="Negative"){e=n.Error}if(!n[e]){e=n.Neutral}return e}},unit:"{/properties/number_unit}",content:new i({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(e){if(!e||e==="Neutral"||!n[e]){return n.None}return e}},icon:"{/properties/icon}",withMargin:false,width:"100%"})}),additionalTooltip:"{/properties/contentProviderLabel}",press:[e.onPress,e]})}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/utils", ["sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/Core","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],function(e,t,a,i,n,r,s,l,o,u,p,c,g,d,_,f,b,y,I,v,m,V,jQuery,h,w){"use strict";var S=s.MessageType;var x=s.ValueState;var T=s.mvc.ViewType;var P=l.ButtonType;var D={};D.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};D.getResourceBundleModel=function(){return t.i18nModel};D.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};D.getEmptyTileActionsRowObj=function(e){var t=D.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};D.getTileNavigationActionsRows=function(e,t){var a=[],i=[];i=this.getTileNavigationActions(e);if(i.length){for(var n=0;n<i.length;n++){a.push(C(i[n],t))}}else{a=[this.getEmptyTileActionsRowObj(t)]}return a};D.getTileNavigationActions=function(e){var t=[],a="";var i=e.bag.getBag("tileNavigationActions");if(i.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(i.getProperty("tile_navigation_actions"));for(var n=0;n<t.length;n++){if(t[n].text){if(i.getTextNames().indexOf("action_tile_"+(n+1))>=0){a=i.getText("action_tile_"+(n+1))}t[n].text=a}}}return t};var C=function(e,t){var a={},i=D.getResourceBundleModel().getResourceBundle();a.menu_title=e.text;a.icon=e.icon;if(e.targetURL.charAt(0)==="#"){a.target_type=i.getText("configuration.tile_actions.table.target_type.intent");var n=e.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true}else{a.target_type=i.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=e.targetURL;a.action="";a.isTargetTypeIntent=false}a.editable=t;return a};D.tileActionsRows2TileActionsArray=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].menu_title){t.push(R(e[a]))}}return t};var R=function(e){var t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL="#"+e.navigation_target+"-"+e.action}else{t.targetURL=e.navigation_target}return t};D.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(var a=0;a<t.length;a++){var i=t[a].text;e.setText("action_tile_"+(a+1),i)}};D.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};D.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};D.tableHasDuplicateParameterNames=function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a].name;if(i!==""){if(t[i]){return true}t[i]=true}}return false};D.tableHasInvalidSapPrelaunchOperationValue=function(t){for(var a=0;a<t.length;a++){if(t[a].name==="sap-prelaunch-operations"){if(e.parseAndValidateOperations(t[a].defaultValue)===null){return false}break}}return true};D.getMappingSignatureString=function(e,t){var a="";for(var i=0;i<e.length;i++){if(e[i].name){a+=A(e[i])+"&"}}return t?a+"*=*":a.substring(0,a.length-1)};var A=function(e){var t="";if(e.mandatory){if(e.isRegularExpression){t="{"+e.name+"="+encodeURIComponent(e.value)+"}"}else{t=e.name+"="+encodeURIComponent(e.value)}}else{t="["+e.name+"="+encodeURIComponent(e.defaultValue)+"]"}return t};D.getMappingSignatureTableData=function(e,t){var a=[];var i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n];if(r!=="*=*"){a.push(E(i[n],t))}}return a};var E=function(e,t){var a={};if(e.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";e=e.substring(1,e.length-1);a.name=e.substring(0,e.indexOf("="));a.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{a.mandatory=true;a.defaultValue="";if(e.charAt(0)==="{"){a.isRegularExpression=true;e=e.substring(1,e.length-1)}else{a.isRegularExpression=false}a.name=e.substring(0,e.indexOf("="));a.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}a.editable=t;if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}return a};D.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};D.getMappingSignature=function(e,t){var a=t?"allowed":"ignored";var i=new RegExp("%%UserDefault[.].+%%");var n=[];var r={parameters:{},additional_parameters:a};e.forEach(function(e){r.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=i.exec(e.defaultValue);if(n){e.defaultValue=n[0]}r.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=i.exec(e.value);if(n){e.value=n[0]}r.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){r.parameters[e.name].filter.format="regexp"}}});return r};D.getSignatureTableData=function(e,t){var a=[];var i={};var n={};var r=e.parameters;for(var s in r){n=r[s];i={};i.editable=t;i.name=s;i.mandatory=n.required;if(n.rename_to){i.rename_to=n.rename_to}else{i.rename_to=n.renameTo}if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}if(n.filter){i.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){i.isRegularExpression=true}}if(n.defaultValue){i.defaultValue=n.defaultValue.value}a.push(i)}return a};D.getTranslatedTitle=function(e){if(e.bag){var t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};D.getTranslatedSubtitle=function(e,t){if(e.bag){var a=e.bag.getBag("tileProperties");if(a.getTextNames().indexOf("display_subtitle_text")>=0){return a.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};D.getTranslatedProperty=function(e,t,a){if(e.bag){var i=e.bag.getBag("tileProperties");if(i.getTextNames().indexOf(a)>=0){return i.getText(a)}}return t[a]};D.getActionConfiguration=function(e,t){var a=e.configuration.getParameterValueAsString("tileConfiguration");var i=JSON.parse(a||"{}"),n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=D.getResourceBundleModel().getResourceBundle()}i.semantic_object=i.semantic_object||(t?"["+n.getText("configuration.semantic_object")+"]":"");i.semantic_action=i.semantic_action||(t?"["+n.getText("configuration.semantic_action")+"]":"");i.navigation_provider=i.navigation_provider||"";i.navigation_provider_role=i.navigation_provider_role||"";i.navigation_provider_instance=i.navigation_provider_instance||"";i.target_application_id=i.target_application_id||"";i.target_application_alias=i.target_application_alias||"";i.display_info_text=i.display_info_text||"";i.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){i.editable=false}}return i};D.getViewConfiguration=function(e){var t=e.getViewData();var a=t.chip;var i=D.getAppLauncherConfig(a,true,true);return i};D.getConfigurationUi=function(e,t){var a,i,s,l,o;var u=e.getViewData();var p=D.getViewConfiguration(e);var c=new r({config:p,tileModel:e.getModel()});return n.create({type:T.XML,viewData:u,viewName:t}).then(function(t){t.setModel(c);a=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(a){a.getModel().setProperty("/enabled",p.navigation_use_semantic_object);a.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}i=t.byId("navigation_provider_roleInput");if(i){i.getModel().setProperty("/value",p.navigation_provider_role)}s=t.byId("navigation_provider_instanceInput");if(s){s.getModel().setProperty("/value",p.navigation_provider_instance)}l=t.byId("target_application_aliasInput");if(l){l.getModel().setProperty("/value",p.target_application_alias)}o=t.byId("targetTypeInput");if(o){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){D.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){o.setSelectedKey("WCF");D.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){o.setSelectedKey("SAPUI5");D.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){D.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){D.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){D.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){D.displayURLTApplicationTypeFields(t);c.setProperty("/config/editable",false);c.setProperty("/config/manualFormFactor",false)}}return t})};D._updateTilePropertiesTexts=function(e,t){var a=t.getTextNames(),i=e.getModel();a.forEach(function(e){i.setProperty("/data/"+e,t.getText(e));i.setProperty("/config/"+e,t.getText(e))})};D._updateTileConfiguration=function(e,t){var a=e.getModel(),i=JSON.parse(t),n;Object.keys(i).forEach(function(e){n=i[e];a.setProperty("/data/"+e,n);a.setProperty("/config/"+e,n);if(e==="navigation_target_url"){a.setProperty("/nav/"+e,n)}})};D.aData=[];D.aActionData=[];D.aRoleData=[];D.aAliasData=[];D.objectSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("name",u.Contains,a);r=new o("obj",u.Contains,a);t.push(r);t.push(n);i.filter(new o(t,false))}};D.actionSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("text",u.Contains,a);t.push(n);i.filter(new o(t,false))}};D.roleSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new o("role",u.Contains,a);r=new o("instance",u.Contains,a);t.push(n);t.push(r);i.filter(new o(t,false))}};D.instanceSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");if(a!==""){l=new o("instance",u.Contains,a);t.push(l)}if(n!==""){s=new o("role",u.EQ,n);t.push(s)}if(t.length>0){r.filter(new o(t,true))}}};D.instanceSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,p,c;r=a.byId("navigation_provider_roleInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){c=new o("instance",u.Contains,n);i.push(c)}if(s!==""){p=new o("role",u.EQ,s);i.push(p)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new o(i,true))}};D.aliasSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,p,c;r=a.byId("navigation_provider_instanceInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){c=new o("alias",u.Contains,n);i.push(c)}if(s!==""){p=new o("instance",u.EQ,s);i.push(p)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new o(i,true))}};D.aliasSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");s=new o("instance",u.EQ,n);if(a!==""){l=new o("alias",u.Contains,a);t.push(l)}t.push(s);r.filter(new o(t,true))}};D.objectSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("name",u.Contains,t);a.push(n);i.filter(a)}};D.actionSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("text",u.Contains,t);a.push(n);i.filter(a)}};D.roleSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new o("role",u.Contains,t);a.push(n);i.filter(a)}};D.instanceSelectUpdateDialog=function(e,t){var a=[],i,n=e.getBinding("items"),r,s,l;i=e.getCustomData();s=i[0].getValue();if(t!==undefined){r=new o("instance",u.Contains,t);a.push(r)}if(s!==""){l=new o("role",u.EQ,s);a.push(l)}if(a.length>0){n.filter(a,true)}};D.aliasSelectUpdateDialog=function(e,t){var a=[],i,n,r=e.getBinding("items"),s,l;i=e.getCustomData();n=i[0].getValue();if(t!==undefined){l=new o("alias",u.Contains,t);a.push(l)}if(n!==""){s=new o("instance",u.EQ,n);a.push(s)}if(a.length>0){r.filter(a,true)}};D.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");D.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");D.iconSelect=function(e,t){e.setColor(t?D.sSelectedColor:D.sDeselectedColor);e.setActiveColor(t?D.sDeselectedColor:D.sSelectedColor)};D.onSelectIcon=function(e,t,a,i){var n=e.getView().getModel(),r;if(t){r=n.getProperty("/config/tile_actions_selected_icon")}else{r=n.getProperty("/config/selected_icon")}if(r){D.iconSelect(r,false)}r=i.getSource();D.iconSelect(r,true);n.setProperty("/config/ok.enabled",true);if(t){n.setProperty("/config/tile_actions_selected_icon",r)}else{n.setProperty("/config/selected_icon",r)}e.byId("selectIconDialog").setTitle(r.getSrc())};D.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};D.onSelectIconOk=function(e,t){var a=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",a.getSrc());e.byId("iconInput").setValueState(x.None)}else{a=e.getModel().getProperty("/config/tile_actions_selected_icon");if(a){t.setValue(a.getSrc());t.setValueState(x.None)}}D.onSelectIconClose(e)};D.iconSelectOnValueHelpRequest=function(e,t,a){var n=e.getView().getModel();var r=e.getView().byId("icons");var s=p.getIconCollectionNames();var l=e.getView().byId("selectIconDialog");var o=e.getView().byId("ok");var u,g,d,_,f,b,y,I=false;r.destroyContent();if(a){d=i.byId(t.getParameter("id"));g=d.getValue()}else{g=n.getProperty("/config/display_icon_url")}o.attachEventOnce("press",function(){D.onSelectIconOk(e.getView(),d)});s.sort();s=s.filter(function(e){if(e==="BusinessSuiteInAppSymbols"){I=true;return false}return true});if(I){s.push("BusinessSuiteInAppSymbols")}for(f=0;f<s.length;f+=1){_=p.getIconNames(s[f]);_.sort();for(b=0;b<_.length;b+=1){y=p.getIconURI(_[b],s[f]);r.addContent(new c({height:"38px",press:D.onSelectIcon.bind(null,e,a,d),size:"2rem",src:y,tooltip:y,width:"38px"}))}}u=r.getContent();n.setProperty("/config/ok.enabled",false);l.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(f=0;f<u.length;f+=1){if(u[f].getSrc()===g){if(a){n.setProperty("/config/tile_actions_selected_icon",u[f])}else{n.setProperty("/config/selected_icon",u[f])}D.iconSelect(u[f],true);n.setProperty("/config/ok.enabled",true);l.setTitle(g)}else{D.iconSelect(u[f],false)}}l.open()};D.objectSelectOnValueHelpRequest=function(e,t,a){var n=e.getView();var s=D.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object");var l;var o;var u=new r;var p=new g("semantic_object_select_dialog",{title:s,search:D.objectSelectDoSearch,liveChange:D.objectSelectDoSearch}),c=new d({title:"{obj}"});if(a){l=i.byId(t.getParameter("id"))}else{l=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}o=l.getValue();p.open(o);u.setData(e.aDefaultObjects.concat(D.aData));p.bindAggregation("items","/",c);p.setModel(u);D.objectSelectUpdateDialog(p,o);p.attachCancel(function(e){l.setValue(o);if(!a){l.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){l.setValue(t.getTitle());if(!a){l.fireChange()}}p.destroy();p=null})};D.actionSelectOnValueHelpRequest=function(e,t,a){var n=e.getView();var s=D.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action");var l;var o;var u=new r;var p=new g("semantic_action_select_dialog",{title:s,search:D.actionSelectDoSearch,liveChange:D.actionSelectDoSearch}),c=new d({title:"{text}"});if(a){l=i.byId(t.getParameter("id"))}else{l=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}o=l.getValue();p.open(o);u.setData(D.aActionData);p.bindAggregation("items","/items",c);p.setModel(u);D.actionSelectUpdateDialog(p,o);p.attachCancel(function(e){l.setValue(o);if(!a){l.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){l.setValue(t.getTitle());if(!a){l.fireChange();l.fireLiveChange({newValue:t.getTitle()})}}p.destroy();p=null})};D.roleSelectOnValueHelpRequest=function(e){var t=e.getView(),a=D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),i,n,s,l=new r,o=new f("role_select_dialog",{title:a,search:D.roleSelectDoSearch,liveChange:D.roleSelectDoSearch,columns:[new b({header:[new _({text:D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new b({header:[new _({text:D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),u=new y({cells:[new _({text:"{role}"}),new _({text:"{instance}"})]});i=t.byId("navigation_provider_roleInput");n=t.byId("navigation_provider_instanceInput");s=i.getValue();o.open(s);l.setData(e.aDefaultObjects.concat(D.aRoleData));o.bindAggregation("items","/",u);o.setModel(l);D.roleSelectUpdateDialog(o,s);o.attachCancel(function(e){i.setValue(s);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getCells()[0].getText());n.setValue(t.getCells()[1].getText());i.fireChange();n.fireChange()}o.destroy();o=null})};D.instanceSelectOnValueHelpRequest=function(e){var t=e.getView();var a;var i=D.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance");var n;var s;var l=new r;var o=new g("instance_select_dialog",{title:i,search:D.instanceSelectDoSearch,liveChange:D.instanceSelectDoSearch}),u=new d({title:"{instance}"});n=t.byId("navigation_provider_instanceInput");s=n.getValue();a=t.byId("navigation_provider_roleInput").getValue();o.addCustomData(new I({key:"role",value:a}));o.open(s);l.setData(e.aDefaultObjects.concat(D.aRoleData));o.bindAggregation("items","/",u);o.setModel(l);D.instanceSelectUpdateDialog(o,s);o.attachCancel(function(e){n.setValue(s);n.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){n.setValue(t.getTitle());n.fireChange()}o.destroy();o=null})};D.applicationAliasSelectOnValueHelpRequest=function(e){var t=e.getView();var a=D.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias");var i;var n;var s;var l=new r;var o=new g("alias_select_dialog",{title:a,search:D.aliasSelectDoSearch,liveChange:D.aliasSelectDoSearch}),u=new d({title:"{alias}"});i=t.byId("target_application_aliasInput");n=i.getValue();s=t.byId("navigation_provider_instanceInput").getValue();o.addCustomData(new I({key:"instance",value:s}));o.open(n);l.setData(e.aDefaultObjects.concat(D.aAliasData));o.bindAggregation("items","/",u);o.setModel(l);D.aliasSelectUpdateDialog(o,n);o.attachCancel(function(e){i.setValue(n);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getTitle());i.fireChange()}o.destroy();o=null})};D.onTargetTypeChange=function(e){var t=e.getParameter("id");var a=i.byId(t).getParent().getCells();var n=e.getSource().getSelectedKey();if(n==="INT"){a[3].setEnabled(true);a[2].setShowValueHelp(true);a[2].setValue("")}else{a[2].setShowValueHelp(false);a[2].setValue("");a[3].setEnabled(false);a[3].setValue("")}};D.addTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=this.getEmptyTileActionsRowObj();a.push(i);t.setProperty("/config/tile_actions_rows",a)};D.deleteTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=e.byId("tileActions");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/tile_actions_rows",a)};D.checkInput=function(e,t){var a=D.getResourceBundleModel().getResourceBundle(),i=e.byId("iconInput"),n=e.byId("useLpdCheckbox"),r=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput"),s=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput"),l=x.None,o=null,u=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case i:if(u!==""&&u.substring(0,11)!=="sap-icon://"){l=x.Error;o=a.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){s.setValueState(x.None);r.setValueState(x.None)}break;case r:if(/[-#&? ]/.test(u)){l=x.Error;o=a.getText("configuration.semantic_object.error_invalid_chars")}else if(u===""){l=x.Error}break;case s:if(/[-#&? ]/.test(u)){l=x.Error;o=a.getText("configuration.semantic_action.error_invalid_chars")}else if(u===""){l=x.Error}break;default:break}if(l){t.getSource().setValueState(l);if(o!==null){t.getSource().setValueStateText(o||"")}}};D.checkInputOnSaveConfig=function(e){var t=e.byId("iconInput");var a=e.byId("navigation_semantic_objectInput");var i=e.byId("navigation_semantic_actionInput");var n=e.byId("useLpdCheckbox");var r=D.getResourceBundleModel().getResourceBundle();var s=false;if(t.getValue()!==""&&!D.isIconURIValid(t.getValue())){t.setValueState(x.Error);t.setValueStateText(r.getText("configuration.display_icon_url.warning"));s=true}if(n.getSelected()&&/[-#&? ]/.test(a.getValue())){a.setValueState(x.Error);a.setValueStateText(r.getText("configuration.semantic_object.error_invalid_chars"));s=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(x.Error);s=true}if(/[-#&? ]/.test(i.getValue())){i.setValueState(x.Error);i.setValueStateText(r.getText("configuration.semantic_action.error_invalid_chars"));s=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(x.Error);s=true}return s};D.checkTileActions=function(e){var t=e.getModel().getProperty("/config/tile_actions_rows");var a=D.getResourceBundleModel().getResourceBundle();var i=false;for(var n=0;n<t.length;n++){if(!t[n].menu_title&&(t[n].navigation_target||t.length>1)){t[n].valueState=x.Error;i=true}else{t[n].valueState=x.None}if(t[n].icon){if(!D.isIconURIValid(t[n].icon)){t[n].iconValueState=x.Error;t[n].iconValueStateText=a.getText("configuration.display_icon_url.warning");i=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return i};D.isIconURIValid=function(e){var t=[];var a="";var i="";var n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){a=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){i=t[1]}else{i=""}n=p.getIconURI(i,a);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){i=t[1];if(!p.getIconInfo(i)){return false}}else{return false}}return true};D.checkTMInput=function(e,t){var a=D.getResourceBundleModel().getResourceBundle(),i=e.byId("semantic_objectInput"),n=e.byId("semantic_actionInput"),r=e.byId("target_application_descriptionInput"),s=e.byId("target_application_urlInput"),l=e.byId("target_application_componentInput"),o=e.byId("navigation_provider_roleInput"),u=e.byId("navigation_provider_instanceInput"),p=e.byId("target_application_aliasInput"),c=e.byId("target_application_idInput"),g=String(t.getParameter("newValue")||"").trim(),d=x.None,_=null;switch(t.getSource()){case i:if(/[-#&? ]/.test(g)){d=x.Error;_=a.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(x.Error)}break;case n:if(/[-#&? ]/.test(g)){d=x.Error;_=a.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=x.Error}break;case r:if(g===""){d=x.Error}break;case s:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=x.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=x.Error;_=a.getText("configuration.target_application.component.error_invalid_input")}break;case o:if(g===""){d=x.Error}else if(!/^[\w/]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.role.error_invalid_chars")}break;case u:if(g===""){d=x.Error}else if(!/^[\w/]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&c.getValue()===""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&c.getValue()!==""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning");c.setValueState(d);c.setValueStateText(_)}else{c.setValueState(x.None)}break;case c:if(g===""&&p.getValue()===""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=x.Error;_=a.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=x.Error;_=a.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(x.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};D.checkTMInputOnSaveConfig=function(e){var t=D.getResourceBundleModel().getResourceBundle();var a=e.byId("semantic_objectInput");var i=e.byId("semantic_actionInput");var n=e.byId("target_application_descriptionInput");var r=e.byId("target_application_urlInput");var s=e.byId("target_application_componentInput");var l=e.byId("navigation_provider_roleInput");var o=e.byId("navigation_provider_instanceInput");var u=e.byId("target_application_aliasInput");var p=e.byId("target_application_idInput");var c=e.byId("targetTypeInput");var g=e.byId("target_transactionInput");var d=e.byId("target_web_dynpro_applicationInput");var _=e.byId("target_wcf_application_idInput");var f=e.byId("desktopCB");var b=e.byId("tabletCB");var y=e.byId("phoneCB");var I=false;a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(x.Error);a.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(x.Error);i.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(i.getValue()===""){i.setValueState(x.Error);I=true}var v=e.getModel().getProperty("/config/navigation_provider"),m;if(v==="SAPUI5"){if(n.getValue()===""){n.setValueState(x.Error);I=true}if(r.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(x.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(s.getValue()===""){s.setValueState(x.Error);I=true}else if(s.getValue().substring(0,17)==="SAPUI5.Component="){s.setValueState(x.Error);s.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(v==="LPD"){if(l.getValue()===""){l.setValueState(x.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(x.Error);m=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(m);I=true}if(o.getValue()===""){o.setValueState(x.Error);I=true}if(!/^[\w]+$/.test(o.getValue())){o.setValueState(x.Error);m=t.getText("configuration.target_application.instance.error_invalid_chars");o.setValueStateText(m);I=true}if(u.getValue()===""&&p.getValue()===""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(x.Error);u.setValueStateText(m);p.setValueState(x.Error);p.setValueStateText(m);I=true}if(u.getValue()!==""&&p.getValue()!==""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(x.Error);u.setValueStateText(m);p.setValueState(x.Error);p.setValueStateText(m);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(x.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(v==="TR"){if(g.getValue()===""){g.setValueState(x.Error);I=true}}else if(v==="WDA"){if(d.getValue()===""){d.setValueState(x.Error);I=true}}else if(v==="WCF"){if(_.getValue()===""){_.setValueState(x.Error);I=true}}else if(v==="URL"){if(r.getValue()===""){r.setValueState(x.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(x.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{c.setValueState(x.Error);c.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){m=t.getText("configuration.form_factor.warning");f.setValueState(x.Error);f.setValueStateText(m);b.setValueState(x.Error);b.setValueStateText(m);y.setValueState(x.Error);y.setValueStateText(m);I=true}return I};D.updateTooltipForDisabledProperties=function(e){var t=e.getModel();var a=t.getProperty("/config/isLocaleSuitable");if(!a){var i=D.getResourceBundleModel().getResourceBundle();var n=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(n);e.byId("subtitleInput").setTooltip(n);e.byId("keywordsInput").setTooltip(n);e.byId("infoInput").setTooltip(n)}};D.updateMessageStripForOriginalLanguage=function(e){var t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){var a=D.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);var i=e.byId("messageStrip");i.setVisible(true);i.setText(a);i.setType(S.Warning)}};D.createSemanticObjectModel=function(e,t,i){var n=e.getView(),s="/sap/opu/odata/UI2/INTEROP/SemanticObjects",l=[{obj:"",name:""},{obj:"*",name:"*"}],o=(i||l).slice(0),u=new r;u.setSizeLimit(999999);u.setProperty("/value","");u.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new v({text:"{suggest>obj}"}));t.setModel(u,"suggest");if(D.aData.length>0){setTimeout(function(){u.setData({items:o.concat(D.aData)},true)},0);return}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].id;a=e.results[i].text;D.aData.push({obj:t,name:a||t})}u.setData({items:o.concat(D.aData)},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,n.getViewName()||"sap.ushell.components.tiles.utils")})};D.createRoleModel=function(e,t,i){var n=e.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",l=new r,o=new r;l.setSizeLimit(999999);o.setSizeLimit(999999);l.setProperty("/value","");l.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var u=new y({cells:[new m({text:"{role}"}),new m({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",u);i.bindAggregation("suggestionItems","/items",new v({text:"{instance}"}));i.setModel(o);t.setModel(l);t.attachSuggestionItemSelected(function(e){i.setValue(e.getParameter("selectedRow").getCells()[1].getText());i.fireChange()});if(D.aRoleData.length>0){l.setData({items:D.aRoleData},false);o.setData({items:D.aRoleData},false);return}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].lpdRole;a=e.results[i].instance;D.aRoleData.push({role:t,instance:a})}l.setData({items:D.aRoleData},true);o.setData({items:D.aRoleData},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,n.getViewName()||"sap.ushell.components.tiles.utils")})};D.createAliasModel=function(e,t){var i=e.getView(),n,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",l=new r;l.setSizeLimit(999999);l.setProperty("/value","");l.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new v({text:"{alias}"}));t.setModel(l);n=D.getAppLauncherConfig(i.oViewData.chip,true,true);if(n&&n.navigation_provider_role&&n.navigation_provider_instance){if(n.navigation_provider_role!==""&&n.navigation_provider_instance!==""){s=s+"?role='"+n.navigation_provider_role+"'&instance='"+n.navigation_provider_instance+"'"}}a.read({requestUri:s,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;D.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;D.aAliasData.push({role:a,instance:i,alias:t})}r=l.getData();if(r){r.items=D.aAliasData}else{r={items:D.aAliasData}}l.setData(r,false)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}h.error("Could not fetch data: "+s+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};D.updateAliasModel=function(e,t){var i,n,r,s=t.getModel();n=e.byId("navigation_provider_instanceInput").getValue();r=e.byId("navigation_provider_roleInput").getValue();i="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+r+"'&instance='"+n+"'";a.read({requestUri:i,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;D.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;D.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=D.aAliasData}else{r={items:D.aAliasData}}s.setData(r,false)},function(t){var a=t&&t.message?t.message:t;if(t.response){a+=" - "+t.response.statusCode+" "+t.response.statusText}h.error("Could not fetch data: "+i+": "+a,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};D.createActionModel=function(e,t){var a=new r;var i=e.getView(),n,s;a.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});D.aActionData=a.getData();n=D.getAppLauncherConfig(i.oViewData.chip,true,true);s=n.navigation_semantic_action||n.semantic_action;if(s){if(!a.getData().items.some(function(e){return e.text===s})){a.getData().items.push({text:s})}}t.bindAggregation("suggestionItems","items>/items",new v({text:"{items>text}"}));t.setModel(a,"items");t.getBinding("suggestionItems").sort(new V("text",false))};D.createNavigationProviderModel=function(e,t){var a=new r;var i=D.getResourceBundleModel().getResourceBundle();var n=[{key:"SAPUI5",text:i.getText("configuration.target_application.sapui5")},{key:"LPD",text:i.getText("configuration.target_application.lpd_cust")},{key:"TR",text:i.getText("configuration.target_application.transaction")},{key:"WDA",text:i.getText("configuration.target_application.web_dynpro")},{key:"URL",text:i.getText("configuration.target_application.url")}];var s=D.getViewConfiguration(e.getView()).navigation_provider;if(s==="WCF"){n.push({key:"WCF",text:i.getText("configuration.target_application.wcf")})}else if(s==="URLT"){n.push({key:"URLT",text:i.getText("configuration.target_application.urlt")})}a.setData({items:n});t.bindItems("items>/items",new v({key:"{items>key}",text:"{items>text}"}));t.setModel(a,"items");t.getBinding("items").sort(new V("text",false))};D.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":D.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":D.displaySapui5ApplicationTypeFields(t);break;case"TR":D.displayTransactionApplicationTypeFields(t);break;case"WDA":D.displayWebDynproApplicationTypeFields(t);break;case"URL":D.displayURLApplicationTypeFields(t);break;case"WCF":D.displayWCFApplicationTypeFields(t);break;case"URLT":D.displayURLTApplicationTypeFields(t);break}};D.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};D.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};D.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};D.getAppLauncherConfig=function(e,t,a){var n;var r=e.configuration.getParameterValueAsString("tileConfiguration");var s;try{s=JSON.parse(r||"{}")}catch(e){h.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}s.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){s.editable=false}}var l=D.getTranslatedTitle(e);var o=D.getTranslatedSubtitle(e,s);var u=D.getTranslatedProperty(e,s,"display_info_text");var p=D.getTranslatedProperty(e,s,"display_search_keywords");if(t){n=D.getResourceBundleModel().getResourceBundle();if(a&&e.bag){var c=e.bag.getOriginalLanguage();var g=i.getConfiguration().getLocale().getSAPLogonLanguage();var d=i.getConfiguration().getLanguage();s.isLocaleSuitable=c===""||c.toLowerCase()===g.toLowerCase()||c.toLowerCase()===d.toLowerCase();s.orgLocale=c;s.userLocale=g}}s.display_icon_url=s.display_icon_url||"";if(u!==undefined){s.display_info_text=u}else if(s.display_info_text===undefined){if(t&&!a){s.display_info_text="["+n.getText("configuration.display_info_text")+"]"}else{s.display_info_text=""}}s.navigation_semantic_object=s.navigation_semantic_object||"";s.navigation_semantic_action=s.navigation_semantic_action||"";s.navigation_semantic_parameters=s.navigation_semantic_parameters||"";s.display_number_unit=s.display_number_unit||"";s.display_number_factor=s.display_number_factor||"";s.service_refresh_interval=s.service_refresh_interval?parseInt(s.service_refresh_interval,10):0;s.service_url=s.service_url||"";s.navigation_target_url=s.navigation_target_url||"";if(t&&D.isInitial(l)){s.display_title_text=a?"":"["+n.getText("configuration.display_title_text")+"]";s.display_subtitle_text=a?"":"["+n.getText("configuration.display_subtitle_text")+"]"}else{s.display_title_text=l||s.display_title_text||"";if(o!==undefined){s.display_subtitle_text=o}else if(s.display_subtitle_text===undefined){s.display_subtitle_text=""}}s.navigation_use_semantic_object=s.navigation_use_semantic_object!==false;s.display_search_keywords=p||s.display_search_keywords||"";if(t){s.display_number_value=s.display_number_value||1234}s.form_factors=s.form_factors?s.form_factors:D.getDefaultFormFactors();s.desktopChecked=s.form_factors.manual.desktop;s.tabletChecked=s.form_factors.manual.tablet;s.phoneChecked=s.form_factors.manual.phone;s.manualFormFactor=!s.form_factors.appDefault&&s.editable;s.appFormFactor=s.form_factors.appDefault;s.formFactorConfigDefault=!!s.form_factors.defaultParam;if(s.signature){s.rows=D.getSignatureTableData(s.signature,a&&s.editable)}else{s.rows=s.mapping_signature&&s.mapping_signature!=="*=*"?D.getMappingSignatureTableData(s.mapping_signature,a&&s.editable):[D.getEmptyRowObj(s.editable)]}if(s.signature){s.isUnknownAllowed=s.signature.additional_parameters==="allowed"||s.signature.additionalParameters==="allowed"}else{s.isUnknownAllowed=s.mapping_signature!==undefined?D.getAllowUnknownParametersValue(s.mapping_signature):true}if(t){s.tile_actions_rows=D.getTileNavigationActionsRows(e,s.editable)}else if(!s.actions){s.actions=D.getTileNavigationActions(e)}if(t){var _=e.bag.getBag("deprecationProperties"),f=_.getProperty("deprecation"),b=null;if(f){b=n.getText(f==="D"?"configuration.app_deprecated":"configuration.app_archived",[_.getProperty("successor")])}s.deprecation_text=b}return s};D.getDataToDisplay=function(e,t){var a=0,i,n,r,s,l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(i=0,n=t.results.length;i<n;i=i+1){r=t.results[i].number||0;if(typeof r==="string"){r=parseFloat(r)}a=a+r;s=t.results[i].targetParams;if(s){l.targetParams.push(s)}}l.display_number_value=a}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{var o=this._shouldProcessDigits(t.number,t.numberDigits),u=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=u||o){var p=this._normalizeNumber(t.number,u,t.numberFactor,t.numberDigits);l.display_number_factor=p.numberFactor;l.display_number_value=p.displayNumber}else{var c=w.getFloatInstance({maxFractionDigits:u});l.display_number_value=c.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};D._normalizeNumber=function(e,t,a,i){var n;if(isNaN(e)){n=e}else{var r=w.getFloatInstance({maxFractionDigits:i});if(!a){var s=Math.abs(e);if(s>=1e9){a="B";e/=1e9}else if(s>=1e6){a="M";e/=1e6}else if(s>=1e3){a="K";e/=1e3}}n=r.format(e)}var l=n;var o=l[t-1];t-=o==="."||o===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:a}};D._shouldProcessDigits=function(e,t){var a;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){a=e.split(".")[1].length;if(a>t){return true}}return false};D.getTileSettingsAction=function(e,t,a){var i=D.getResourceBundleModel().getResourceBundle();var n=!a||a==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:i.getText(n),press:function(){return new Promise(function(n){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/library"],function(s,l,o,u,p){var c=p.form.SimpleFormLayout;var g={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!a||a==="tile"){g.info=e.getProperty("/config/display_info_text");g.icon=e.getProperty("/config/display_icon_url");g.keywords=e.getProperty("/config/display_search_keywords")}else if(a==="link"){g.showInfo=false;g.showIcon=false;g.showPreview=false}o.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(e){var o=new r(g);e.setModel(o);var p=new u({id:"tileSettings",layout:c.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");var d=new s("bookmarkOkBtn",{text:i.getText("okBtn"),type:P.Emphasized,press:function(){t(e);b.close()},enabled:true});var _=new s("bookmarkCancelBtn",{text:i.getText("cancelBtn"),press:function(){b.close()}});var f=function(e){d.setEnabled(!!e.trim())};e.getTitleInput().attachLiveChange(function(){f(this.getValue())});var b=new l({id:"settingsDialog",title:!a||a==="tile"?i.getText("tileSettingsDialogTitle"):i.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:p,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){b.destroy()}}).addStyleClass("sapContrastPlus");b.open();n(b)})})})}}};D.getSemanticNavigationUrl=function(e){var t="#"+String(e.navigation_semantic_object||"").trim();t+="-"+String(e.navigation_semantic_action||"").trim();if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+="?"+String(e.navigation_semantic_parameters||"").trim()}return t};D.addParamsToUrl=function(e,t){var a="",i=e.indexOf("?")!==-1,n=t.targetParams,r;if(n&&n.length>0){for(r=0;r<n.length;r=r+1){a+=n[r];if(r<n.length-1){a+="&"}}}if(a.length>0){if(!i){e+="?"}else{e+="&"}e+=a}return e};return D},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/iconfonts", ["sap/ui/core/IconPool"],function(e){"use strict";var i={};i.registerFiori2IconFont=function(){e.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});e.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});var i={fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",icons:[["icon-heart","e000"],["icon-quarter","e001"],["icon-year","e002"],["icon-equalizer","e003"],["icon-component","e004"],["icon-component-private","e005"],["icon-raw-material","e006"],["icon-sms","e007"],["icon-add-note","e008"],["icon-change-time-horizon","e009"],["icon-table-chart-customization","e00a"],["icon-delegated-important-task","e00b"],["icon-forklift","e00c"],["icon-coins","e00d"],["icon-filter-menu","e00e"],["icon-target-to-date","e00f"],["icon-program","e010"],["icon-phase","e011"],["icon-checklist","e012"],["icon-mirrored-task","e013"],["icon-sub-project","e014"],["icon-checklist-item","e015"],["icon-adhoc-analysis","e016"],["icon-change-analysis","e017"],["icon-review-demands","e018"],["icon-project-definition","e019"],["icon-data-access","e01a"],["icon-define-shortage","e01b"],["icon-review-supplies","e01c"],["icon-change-log","e01d"],["icon-priority-1","e01e"],["icon-priority-2","e01f"],["icon-jam","e020"],["icon-milestone","e021"],["icon-bulleting-with-numbers","e022"],["icon-decrease-indent","e023"],["icon-increase-indent","e024"],["icon-bold","e025"],["icon-italic","e026"],["icon-strike-through","e027"],["icon-underline","e028"],["icon-save-as","e029"],["icon-segmentation","e02A"],["icon-context-menu","e02B"],["icon-snapshot","e02C"],["icon-substraction-b-a","e02D"],["icon-substraction-a-b","e02E"],["icon-intersection","e02F"],["icon-union","e030"],["icon-top","e031"],["icon-bottom","e032"],["icon-page-up","e033"],["icon-page-down","e034"],["icon-create-dashboard","e035"],["icon-excelsius-file","e036"],["icon-open-folder","e037"],["icon-neutral","e038"],["icon-split-segmentation","e039"],["icon-manage-budget","e03A"],["icon-blocked","e03B"],["icon-pipette","e03C"],["icon-top-recipe","e03D"],["icon-recipe","e03E"],["icon-ingredients","e03F"],["icon-multiple-charts","e040"],["icon-descending-bars","e041"],["icon-descending-stacked-bars","e042"],["icon-scatter-plot","e043"],["icon-spill","e044"],["icon-fire","e045"],["icon-stratification","e046"],["icon-relationship","e047"],["icon-margin-decomposition","e048"],["icon-control-group","e049"],["icon-bullet-chart","e04A"],["icon-responsible-area","e04B"],["icon-increase","e04C"],["icon-decrease","e04D"],["icon-current-stock","e04E"],["icon-expedite","e04F"],["icon-postpone","e050"],["icon-approved","e051"],["icon-partially-delivered","e052"],["icon-line-bar-chart","e053"],["icon-expand-all","e054"],["icon-submission","e055"],["icon-change-request","e056"],["icon-column-unselected","e057"],["icon-column-selected","e058"],["icon-row-unselected","e059"],["icon-row-selected","e05A"],["icon-stock-requirements","e05B"],["icon-gender-male-and-female","e05C"],["icon-icon-marital-status","e05D"],["icon-birthday","e05E"],["icon-classification","e05F"],["icon-marked-for-deletion","e060"],["icon-bullet-chart","e061"],["icon-remove-filter","e062"],["icon-bank-account","e063"],["icon-savings-account","e064"],["icon-debit-card","e065"],["icon-vip-customer","e066"],["icon-undesirable-customer","e067"],["icon-answered-change-request","e068"],["icon-collected-change-request","e069"],["icon-draw-freehand","e06A"],["icon-draw-circle","e06B"],["icon-completed","e06C"],["icon-answered","e06D"],["icon-traffic-cone","e06E"],["icon-traffic-lights","e06F"],["icon-container","e070"],["icon-container-loading","e071"],["icon-traffic-jam","e072"],["icon-products","e073"],["icon-sidepanel","e074"],["icon-split-screen","e075"],["icon-truck-driver","e076"],["icon-keep-segment","e077"],["icon-exclude-segment","e078"],["icon-separate-segments","e079"],["icon-distribute-segments","e07A"],["icon-next-open-item","e07B"],["icon-where-used","e07C"],["icon-outbound-delivery","e07D"],["icon-outbound-delivery-inactive","e07E"],["icon-outbound-delivery-active","e07F"],["icon-target","e080"],["icon-source","e081"],["icon-material","e082"],["icon-due-date","e083"],["icon-overdue","e084"],["icon-set-as-default","e085"],["icon-face-very-bad","e086"],["icon-face-bad","e087"],["icon-face-skeptical","e088"],["icon-face-neutral","e089"],["icon-face-astonished","e08A"],["icon-face-happy","e08B"],["icon-face-very-happy","e08C"],["icon-face-awful","e08D"],["icon-face-devastated","e08E"],["icon-face-okey-dokey","e08F"],["icon-alarm","e090"],["icon-activate","e091"],["icon-segment-preview-reference-objects","e092"],["icon-radius","e093"],["icon-polygon-black","e094"],["icon-polygon-white","e095"],["icon-polygon","e096"],["icon-no-filter","e097"],["icon-grip","e098"],["icon-water","e09A"],["icon-liquid","e09C"],["icon-gas","e09B"],["icon-gas-2","e09d"],["icon-water-2","e09e"],["icon-operator","e09f"],["icon-target-filter","e0a0"],["icon-equipment","e0A1"],["icon-gis-layer","e0A2"],["icon-section","e0A3"],["icon-kohorte","e0A4"],["icon-female","e0A5"],["icon-male","e0A6"],["icon-model","e0A7"],["icon-hourglass","e0A8"],["icon-plain-grid-layout","e0A9"],["icon-top-panel-layout","e0AA"],["icon-2x1-grid-layout","e0AB"],["icon-1x2-grid-layout","e0AC"],["icon-side-panel-left-layout","e0AD"],["icon-2x2-grid-layout","e0AE"],["icon-inverse-t-layout","e0AF"],["icon-t-layout","e0B0"],["icon-top-side-panel-layout","e0B1"],["icon-side-top-panel-layout","e0B2"],["icon-4x4-grid-layout","e0B3"],["icon-add-point","e0B4"],["icon-add-polyline","e0B5"],["icon-add-polygone","e0B6"],["icon-email-send-delayed","e0B7"],["icon-email-not-opened","e0B8"],["icon-link-not-clicked","e0B9"],["icon-sms-send-delayed","e0BA"],["icon-ab-testing","e0BB"],["icon-tv","e0BC"],["icon-radio","e0BD"],["icon-outdoor","e0BE"],["icon-event","e0BF"],["icon-paid-search","e0C0"],["icon-display-ads","e0C1"],["icon-call-center","e0C2"],["icon-social","e0C3"],["icon-event2","e0C4"],["icon-official-service-group","e0C5"],["icon-time-deposit","e0C6"],["icon-early-widthdrawal-for-time-deposits","e0C7"],["icon-aggregated-view","e0C8"],["icon-detailed-view","e0C9"],["icon-rescheduling","e0CA"],["icon-resequencing","e0CB"],["icon-movement-warning","e0CC"],["icon-multiple-warnings","e0CD"],["icon-box-truck","e0CE"],["icon-box-truck-empty","e0CF"],["icon-tractor","e0C0"],["icon-driver","e0D1"],["icon-driver-warning","e0D2"],["icon-overlap","e0D3"],["icon-expand-overlap","e0D4"],["icon-collapse-overlap","e0D5"],["icon-utilization","e0D6"],["icon-expand-utilization","e0D7"],["icon-collapse-utilization","e0D8"],["icon-trailer","e0D7"],["icon-container-closed","e0DA"],["icon-railcar","e0DB"],["icon-warehouse","e0DC"],["icon-goods","e0DD"],["icon-ship","e0DE"],["icon-truck-driver","e0DF"],["icon-return-delivery","e0E0"],["icon-return-order","e0E1"],["icon-contract","e0E2"],["icon-business-partner","e0E3"],["icon-business-partner-verified","e0E4"],["icon-business-partner-anonymous","e0E5"],["icon-business-partner-self-identified","e0E6"],["icon-money-withdrawal","e0E7"],["icon-truck-load","e0E8"],["icon-truck-load-unload","e0ea"],["icon-truck-unload","e0e9"],["icon-pharmacy","e0eb"],["icon-medicine-syrup","e0ec"],["icon-reminder","e0ed"],["icon-medicine-pill","e0ee"],["icon-medicine-ointment","e0ef"],["icon-medicine-drops","e0f0"],["icon-blood-test","e0f1"],["icon-temperature","e0f2"],["icon-allergies","e0f9"],["icon-immunization","e0f8"],["icon-blood-pressure","e0f7"],["icon-health-tracking","e0f6"],["icon-weight","e0f5"],["icon-foot-steps","e0f4"],["icon-medicine-inhaler","e0f3"],["icon-rescheduling2","e0fa"],["icon-resequencing2","e0fb"],["icon-no-time-change","e0fc"],["icon-time-change","e0fd"],["icon-smart-matcher","e0fe"],["icon-3d","e0ff"],["icon-parallel-sequence","e100"],["icon-alternative-sequence","e101"],["icon-main-sequence","e102"],["icon-refinery","e103"],["icon-terminal","e104"],["icon-vessel","e105"],["icon-barge","e106"],["icon-road","e107"],["icon-pipeline","e108"],["icon-delay","e109"],["icon-legal-section","e10a"],["icon-causes","e10b"],["icon-effects","e10c"],["icon-shared-by-me","e10d"],["icon-shared-with-me","e10e"],["icon-main-milestone","e10f"],["icon-indicator-groups","e110"],["icon-alert-groups","e111"],["icon-function-alert","e112"],["icon-function-hierarchy","e113"],["icon-rfid","e114"],["icon-input","e115"],["icon-software-item","e116"],["icon-product-view","e117"],["icon-software-item-variant","e118"],["icon-lighthouse","e119"],["icon-demand-unit","e11a"],["icon-fma-management","e11b"],["icon-fma-validation","e11c"],["icon-fma-analytics","e11d"],["icon-class","e11e"],["icon-overview","e11f"],["icon-production","e120"],["icon-subclass","e121"],["icon-variant-configuration","e122"],["icon-sum","e123"],["icon-add-outside","e124"],["icon-compressor","e125"],["icon-dehydrator","e126"],["icon-heater-treater","e127"],["icon-pump","e128"],["icon-separator","e129"],["icon-well-completion","e12a"],["icon-well","e12b"],["icon-meter-chained","e12c"],["icon-cluster-chained","e12d"],["icon-tank-chained","e12e"],["icon-empty-trailer","e12f"],["icon-door","e130"],["icon-loading-point","e131"],["icon-stock-warehouse","e132"],["icon-gate","e133"],["icon-timeseries-waterfall-chart","e134"],["icon-expand-collapse-level-2","e135"],["icon-expand-collapse-level-3","e136"],["icon-recycle","e137"],["icon-stages-warning","e138"],["icon-empty-warning","e139"],["icon-ps-text","e140"],["icon-activity","e141"],["icon-activity-element","e142"],["icon-transformer","e143"],["icon-generation","e144"],["icon-consumer","e145"],["icon-storage","e146"],["icon-circuit-breaker","e147"],["icon-grid","e148"],["icon-applied_filter","e149"],["icon-thumb-sideway","e14a"],["icon-thumb-sideway-filled","e14b"],["icon-thumb-up-filled","e14c"],["icon-thumb-down-filled","e14d"],["icon-multi-container","e14e"],["icon-network-header","e150"],["icon-late","e151"],["icon-created","e152"],["icon-dispatched-deallocate","e153"],["icon-confirmed","e154"],["icon-unfirmed","e155"],["icon-firmed","e156"],["icon-unsaved-changes","e157"],["icon-project-definition-2","e158"],["icon-asterisk","e159"],["icon-equal","e15a"],["icon-not-equal","e15b"],["icon-fixed-cell","e15c"],["icon-partially-fixed-cell","e15d"],["icon-stripes-pattern","e15e"],["icon-feature-dictionary","e15f"],["icon-variant-planning","e160"],["icon-requirement-model","e161"],["icon-bottle","e162"],["icon-bottle-cap","e163"],["icon-pallet","e164"],["icon-foil","e165"],["icon-tray","e166"],["icon-unknown-dependency","e167"],["icon-layer","e168"],["icon-move-folder","e169"],["icon-remove-folder","e16a"],["icon-match-case","e16b"],["icon-match-whole-word","e16c"],["icon-remove-total","e16d"],["icon-after-total","e16e"],["icon-before-total","e16f"],["icon-workbook-filter","e170"],["icon-update-filter","e171"],["icon-cell-lock","e172"],["icon-monitor-assembly-sequence","e173"],["icon-monitor-just-in-time-calls","e174"],["icon-manage-charging-stations","e175"]]};var n={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},o={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},c={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},F={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]},E={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},t={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},a={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},r={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},l={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},d={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},u={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(n,c,o,d,F,E,u,t,a,r,l,s,i)};i.registerFonts=function(){var i,n,o,c;for(n=0;n<arguments.length;n=n+1){i=arguments[n];for(o=0;o<i.icons.length;o=o+1){c={};c.fontFamily=i.fontFamily;c.content=i.icons[o][1];c.overWrite=false;c.suppressMirroring=true;e.addIcon(i.icons[o][0],i.collectionName,c)}}};return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/library", ["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(e,l,a){"use strict";var s=e.initLibrary({name:"sap.ushell",version:"1.120.20",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AllMyAppsProviderType","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState","sap.ushell.AppType","sap.ushell.FloatingNumberType"],interfaces:[],controls:["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.components.workPageBuilder.controls.WorkPage","sap.ushell.components.workPageBuilder.controls.WorkPageButton","sap.ushell.components.workPageBuilder.controls.WorkPageCell","sap.ushell.components.workPageBuilder.controls.WorkPageColumn","sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer","sap.ushell.components.workPageBuilder.controls.WorkPageRow","sap.ushell.services._VisualizationInstantiation.VizInstance","sap.ushell.services._VisualizationInstantiation.VizInstanceAbap","sap.ushell.services._VisualizationInstantiation.VizInstanceCdm","sap.ushell.services._VisualizationInstantiation.VizInstanceLaunchPage","sap.ushell.services._VisualizationInstantiation.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.SidePane","sap.ushell.ui.shell.SubHeader","sap.ushell.ui.shell.SysInfoBar","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});s.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};s.AllMyAppsProviderType={HOME:0,EXTERNAL:1,CATALOG:2};s.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};s.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page"};s.components=s.components||{};s.components.container=s.components.container||{};s.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};s.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};s.NavigationState={InProgress:"InProgress",Finished:"Finished"};s.ui=s.ui||{};s.ui.launchpad=s.ui.launchpad||{};s.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};s.ui.tile=s.ui.tile||{};s.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};s.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};s.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};s.AppType={OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application"};s.FloatingNumberType={None:"None",Notifications:"Notifications",OverflowButton:"OverflowButton"};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/navigationMode", ["sap/base/Log","sap/base/util/isPlainObject","sap/ushell/Config"],function(e,n,a){"use strict";var i={};var o=function(n){var a=true;if(n){if(typeof n!=="object"){a=false}else{Object.keys(n).forEach(function(e){if(["GUI","WDA","WCF"].indexOf(e)===-1){a=false}else if(typeof n[e]!=="boolean"){a=false}})}}if(!a){e.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(n),"sap.ushell.services.navigationMode")}};var d=function(e){switch(e){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined}};i._isInplaceEnabledForApplicationType=function(e){var i=a.last("/core/navigation/enableInPlaceForClassicUIs");o(i);if(n(i)){return i[d(e)]}return false};i._getInternalNavigationMode=function(n,a){var i=a.applicationType;var o={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!o.hasOwnProperty(i)){e.error(i+" is not a valid application type","expected one of "+Object.keys(o).join(", "),"sap.ushell.navigationMode");return null}if(n!=="inplace"&&n!=="explace"&&n!=="frameless"){e.error(n+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null}if(i==="SAPUI5"&&n==="frameless"){e.error("'"+n+"' is not a valid external navigation mode for application type '"+i+"'","falling back to internal navigation mode '"+o.SAPUI5.frameless+"'","sap.ushell.navigationMode")}if(i==="URL"){var d=a.appCapabilities?a.appCapabilities.templateNavigationMode:undefined;if(d){var t={embedded:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},standalone:{inplace:"newWindow",explace:"newWindow",frameless:"newWindow"}};if(d==="standalone"&&n==="inplace"){e.warning("Inplace navigation was requested for an app that supports only standalone mode! 'newWindow' used instead...","sap.ushell.navigationMode")}if(d==="embedded"&&n==="frameless"){e.warning("Frameless navigation was requested for an app that supports only embedded mode! 'newWindowThenEmbedded' used instead...","sap.ushell.navigationMode")}return t[d][n]}}return o[i][n]};i.getExternalNavigationMode=function(n){var a={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!a.hasOwnProperty(n)){e.error(n+" is not a recognized internal navigation mode","expected one of "+Object.keys(a).join(","),"sap.ushell.navigationMode");return null}return a[n]};var t=["NWBC","WDA","TR","WCF"];i.getNavigationMode=function(n,a,o){var d=n.additionalInformation;var r=n.applicationType;var l;var s;var p={navigationMode:undefined,explicitNavMode:false};if(["inplace","explace"].indexOf(o)>=0){p["sap-ushell-next-navmode"]=o}if(["inplace","explace","frameless"].indexOf(a)>=0){var f=i._getInternalNavigationMode(a,n);e.debug("Navigation mode was forced to "+f+" because sap-ushell-navmode parameter was set to "+a+" for target","sap.ushell.navigationMode");p.navigationMode=f;p.explicitNavMode=true;return p}if(i._isInplaceEnabledForApplicationType(r)===true){p.navigationMode=i._getInternalNavigationMode("inplace",n)}if(n.appCapabilities&&n.appCapabilities.navigationMode){p.navigationMode=n.appCapabilities.navigationMode;return p}if((d===null||typeof d==="string"||typeof d==="undefined")&&(r==="URL"||r==="SAPUI5")){if(d&&d.indexOf("managed=")===0){if(d==="managed=FioriWave1"){p.navigationMode="embedded";return p}if(d==="managed="){p.navigationMode="newWindow";return p}return p}if(d&&d.indexOf("SAPUI5.Component=")===0){l="[a-zA-Z0-9_]+";s=["^SAPUI5.Component=",l,"([.]",l,")*$"].join("");if(!new RegExp(s).test(d)){e.warning(["The UI5 component name in",d,"is not valid.","Please use names satisfying",s].join(" "))}p.navigationMode="embedded";return p}p.navigationMode="newWindow";return p}if(p.navigationMode===undefined){if(t.indexOf(r)>-1){p.navigationMode="newWindowThenEmbedded"}else if(r==="SAPUI5"){p.navigationMode="embedded"}else{p.navigationMode="newWindow";e.error("Invalid ApplicationType: "+r)}}return p};i.computeNavigationModeForHomepageTiles=function(e,n,a){var i={applicationType:e,additionalInformation:n};if(t.indexOf(e)>-1&&a){return"embedded"}return this.getNavigationMode(i).navigationMode};return i},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/override", ["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],function(t,e,i,n){"use strict";var r={};r.updateAggregation=function(t){if(this.isTreeBinding(t)){e.prototype.updateAggregation.apply(this,arguments)}else{var n=this.mBindingInfos[t],s=n.binding,o=s.getContexts(),a=n.factory,g=this.getMetadata().getJSONKeys()[t],u=g._sMutator+"Group",d=s.isGrouped()&&this[u],p=[],l=function(t){var e=this.getId()+"-"+i(),r=a(e,t);if(r.isA("sap.ui.integration.widgets.Card")){r.setBindingContext(t,"ushellCardModel")}else{r.setBindingContext(t,n.model)}this[g._sMutator](r)}.bind(this);if(d){e.prototype.updateAggregation.apply(this,arguments)}else{p=this[g._sGetter]();r._adaptCurrentGroup(o,p);r._updateCurrentGroup(o,p,n.model,l);p.length=o.length}}};r._adaptCurrentGroup=function(t,e){var i,n,r;for(i=0;i<t.length;i++){n=!!(e[i]&&e[i].isA("sap.ui.integration.widgets.Card"));r=!!t[i].getProperty(t[i].sPath+"/isCard");if(n||r){var s=i;for(;s<e.length;s++){e[s].destroy()}break}}};r._updateCurrentGroup=function(t,e,i,n){var r;for(r=0;r<t.length;r++){if(r<e.length&&!e[r].bIsDestroyed){e[r].setBindingContext(t[r],i)}else{n(t[r])}}for(;r<e.length;++r){e[r].destroy()}};r.updateAggregationGrouped=function(e){var i=this.mBindingInfos[e],r=i.binding,s=i.factory,o,a=null,g=null,u=null,d=this,p=d.getItems(),l=0,f=0,h,c,y=[];g=r.isGrouped()&&this.addItemGroup;n(r.getContexts(),function(e,m){if(g&&r.aSorters.length>0){a=r.aSorters[0].fnGroup(m);if(typeof a==="string"){a={key:a}}if(a.key!==u){var C,I;if(i.groupHeaderFactory){C=i.groupHeaderFactory(a)}I=C||new t({title:a.text||a.key}).addStyleClass("sapMListHdr");d.insertAggregation("items",I,f,true);f=f+1;u=a.key}}p=d.getItems();for(h=f;h<p.length;h=h+1){if(p[h].constructor===t){y.push(d.removeItem(p[h]));p=d.getItems()}}if(f<p.length){p[f].setBindingContext(m,i.model);if(p[f].aDelegates){n(p[f].aDelegates,function(t,e){e.vThis=m})}}else{c=d.getId()+"-"+f;o=s(c,m);o.setBindingContext(m,i.model);d.addItem(o)}f=f+1;l=f});for(h=p.length-1;h>=l;h=h-1){y.push(d.removeItem(p[h]))}setTimeout(function(){n(y,function(t,e){e.destroy()})},1)};r.updateAggregatesFactory=function(t){return function(){r.updateAggregation.bind(this)(t)}};return r},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/FesrEnhancer", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/performance/trace/FESR","sap/ushell/EventHub","sap/ushell/performance/ShellAnalytics"],function(e,t,n,r,a){"use strict";const i="FesrEnhancer";const s="[FesrFlp]";const c={HOME_INITIAL:"FLP@LOAD",HOME_LOADING:"FLP@DURING_LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION",CUSTOM_HOME_INITIAL:"FLPCUSTOMHOME"};const o=[c.HOME_INITIAL,c.FINDER_INITIAL,c.CUSTOM_HOME_INITIAL,c.APP_INITIAL];const l={APP_START:1,STEP_IN_APP:2,UNKNOWN:3};const p=["stepName","appNameLong","appNameShort","interactionType","timeToInteractive"];const u={stepName:{maxLength:20},appNameShort:{maxLength:20}};const d={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(n.getActive()){a.enable();this._fnOriginalOnBeforeCreated=n.onBeforeCreated;n.onBeforeCreated=this._onBeforeCreatedHandler.bind(this)}},reset:function(){n.onBeforeCreated=this._fnOriginalOnBeforeCreated;a.disable();this._setLastTrackedRecord(null)},_getPerformanceEntries:function(e,t){if(t){return performance.getEntriesByName(e)}return performance.getEntriesByType("mark").filter(t=>t.name.includes(e))},_getLastTrackedApplicationId:function(){const e=a.getCurrentApplication();if(e){return e.id}return null},_getLastTrackedRecord:function(){return this._lastTrackedRecord},_setLastTrackedRecord:function(e){this._lastTrackedRecord=e},_onBeforeCreatedHandler:function(n,a){let l=t({},n);try{const{scenario:t,relatedRecord:n}=this._detectScenario(l);e.debug(`${s} identified scenario: ${t}`,null,i);const a=this._getLastTrackedApplicationId();if(a){l.appNameShort=a}let d;switch(t){case c.HOME_INITIAL:case c.CUSTOM_HOME_INITIAL:case c.FINDER_INITIAL:d=this._enhanceInitialStart(l,t,n);break;case c.APP_INITIAL:d=this._enhanceInitialAppStart(t,n);break;case c.NAVIGATION:case c.HOME_LOADING:d=this._enhanceNavigationRecord(t,n);break;default:e.debug(`${s} unknown scenario, step name: ${l.stepName}`,null,i);return l}if(o.includes(t)){r.emit("startUpFesrEnhanced",Date.now())}d=Object.keys(d).reduce((e,t)=>{const n=d[t];if(p.includes(t)&&!!n){const r=u[t];if(r&&r.maxLength){e[t]=n.substring(0,r.maxLength)}else{e[t]=n}}return e},{});l={...l,...d};e.debug(`${s} passing enhancements:`,JSON.stringify(d,null,2),i)}catch(t){e.error(`${s} Could not enhance the FESR:`,t,i)}e.debug(`${s}      => UI5: ${l.stepName} - ${l.appNameShort}`,null,i);return l},_getRelevantPerformanceMark:function(t){if(!t){e.warning(`${s} Could not determine performance mark`,"No Statistical Record found",i);return}const n=[];if(t.getTargetIsHomeApp()){n.push(this._getPerformanceEntries("FLP-TTI-Homepage-Custom",true)[0])}else{switch(t.getTargetApplication()){case"FLP_HOME":n.push(this._getPerformanceEntries("FLP-TTI-Homepage",true)[0]);break;case"FLP_PAGE":n.push(this._getPerformanceEntries("FLP-TTI-Homepage",true)[0]);n.push(this._getPerformanceEntries("FLP-Pages-Service-loadPage-end",false)[0]);break;case"FLP_FINDER":n.push(this._getPerformanceEntries("FLP-TTI-AppFinder",true)[0]);break;default:}}return n.filter(e=>{if(!e){return false}if(typeof e.startTime!=="number"){return false}if(e.startTime>t.getTimeStart()){return true}return false})[0]},_detectScenario:function(t){if(t.stepName==="undetermined_startup"){let n;const r=a.getLastClosedRecord();if(r){this._setLastTrackedRecord(r)}else{e.warning(`${s} Identified undetermined_startup but could not find a closed StatisticalRecord`,null,i);return{scenario:null,relatedRecord:null}}if(r.getTargetIsHomeApp()){n=c.CUSTOM_HOME_INITIAL}else{switch(t.appNameLong){case"sap.ushell.components.homepage":case"sap.ushell.components.pages":n=c.HOME_INITIAL;break;case"sap.ushell.components.appfinder":n=c.FINDER_INITIAL;break;default:n=c.APP_INITIAL}}return{scenario:n,relatedRecord:r}}const n=this._getLastTrackedRecord();const r=a.getNextNavigationRecords(n);if(r.length){const t=r[r.length-1];if(r.length>1){const t=r.reduce((e,t,n)=>{if(n<r.length-1){e.push(t.getTargetHash())}return e},[]);e.warning(`${s} skipped Records:`,JSON.stringify(t,null,2),i)}if(n&&t.isEqual(n)){return{scenario:null,relatedRecord:null}}this._setLastTrackedRecord(t);const a=t.getStep()===c.HOME_LOADING?c.HOME_LOADING:c.NAVIGATION;return{scenario:a,relatedRecord:t}}return{scenario:null,relatedRecord:null}},_enhanceInitialStart:function(t,n,r){const a={};if(n===c.CUSTOM_HOME_INITIAL){a.stepName=n+"@"+t.appNameShort}else{a.stepName=n}a.interactionType=l.APP_START;a.appNameShort=r.getTargetAppNameShort()||r.getTargetApplication();const o=this._getRelevantPerformanceMark(r);if(o){e.debug(`${s} using performance mark: ${o.name}`,null,i);a.timeToInteractive=o.startTime}else{e.warning(`${s} Scenario ${n} detected did not found a performance mark`,null,i)}return a},_enhanceNavigationRecord:function(t,n){const r={};if(t!=="FLP@DURING_LOAD"){r.stepName=n.getStep()}if(n.getTargetApplicationType()==="UI5"){r.interactionType=l.APP_START}r.appNameShort=n.getTargetAppNameShort()||n.getTargetApplication();const a=this._getRelevantPerformanceMark(n);if(/^FLP_BACK/.test(r.stepName)&&a){e.debug(`${s} using performance mark: ${a.name}`,null,i);r.timeToInteractive=a.startTime-n.getTimeStart()}return r},_enhanceInitialAppStart:function(e,t){const n={};n.stepName=e;if(t.getTargetApplicationType()==="UI5"){n.interactionType=l.APP_START}else{n.interactionType=l.STEP_IN_APP}return n}};return d},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/ShellAnalytics", ["sap/base/Log","sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord","sap/ushell/utils"],function(e,n,t,a,i){"use strict";const o="ShellAnalytics";const r="[FesrFlp]";let s=[];let c=[];let l=false;let p=false;let u,d,h;const f={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};const g={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};function m(e){if(!e){return false}return e.id==="FLP_HOME"||e.id==="FLP_PAGE"}function C(e){return e&&e.isHomeApp}function v(){return s}function A(){const e=v().filter(e=>e.isClosed());if(e.length>0){return e[e.length-1]}return null}function N(e){if(!e){return v().filter(e=>e.isClosed())}return v().filter(n=>e.getTimeStart()<n.getTimeStart()&&n.isClosed())}function I(){return d}function E(n){e.debug(`${r} ShellAnalytics setCurrentApplication: ${n&&n.id}`,null,o);d=n}function P(){h=performance.now();i.setPerformanceMark("FLP -- change hash")}function y(){if(!u){const e=s[s.length-1]||null;u=new a(e);s.push(u)}return u}function L(e){const n=y();n.setTargetHash(e);n.setTimeStart(h||performance.now())}function S(e){const n=e||"";if(n.slice(-7)==="(TCODE)"){return n.replace(/ .*/,"").replace(/^\*/,"").substring(0,15).concat(" (TR)")}return n}function T(e){let n="";const t=e.componentInstance&&e.componentInstance.getManifest();if(t&&t["sap.app"]&&t["sap.app"].id){n=t["sap.app"].id}return n}async function H(){const e=await sap.ushell.Container.getServiceAsync("AppLifeCycle");const n=e.getCurrentApplication();if(!n){return{}}const a=n&&n.componentInstance&&n.componentInstance.sId&&n.componentInstance.sId.includes("homeApp-component");let i;if(n.getTechnicalParameter){i=n.getTechnicalParameter("sap-fiori-id")}else{i=Promise.resolve([])}const o=await i;let r=o&&o[0];if(a){return{type:"UI5",id:r,isHomeApp:true}}if(n.homePage){const e=g[T(n)]||"FLP_HOME";return{type:"UI5",id:e}}if(n.applicationType==="UI5"){if(!r){r=T(n);r=g[r]||r}r=r.replace(/,/g,"");return{type:"UI5",id:r}}const s=t.getMetadata().technicalName||t.getCurrentApplication().text||n.applicationType;const c=S(s.replace(/,/g,""));return{type:n.applicationType,id:c}}function R(e,n,t,a){if(a){a.setSourceApplication(e&&e.id);a.setTargetApplication(n&&n.id);a.setTargetApplicationType(n&&n.type);a.setNavigationMode(t);a.setTargetIsHomeApp(C(n));a.setSourceIsHomeApp(C(e));if(!l&&(C(n)||m(n))){l=true;a.setHomepageLoading(true)}a.closeRecord()}}function F(e){if(!u){return}const n=u;u=null;H().then(t=>{const a=I();if(e&&e.technicalName){t.id=S(e.technicalName);t.type=t.id.slice(-4)==="(TR)"?"GUI":"NWBC"}E(t);R(a,t,f.INPLACE,n)})}function w(){const e=u;u=null;const n=I();R(n,null,f.EXPLACE,e)}function b(){if(u){const e=I();u.setSourceApplication(e?e.id:undefined);u.closeRecordWithError();u=null}}async function M(){const e=await sap.ushell.Container.getServiceAsync("ShellNavigation");e.hashChanger.attachEvent("hashChanged",P);e.hashChanger.attachEvent("shellHashChanged",P)}async function O(){const e=await sap.ushell.Container.getServiceAsync("ShellNavigation");e.hashChanger.detachEvent("hashChanged",P);e.hashChanger.detachEvent("shellHashChanged",P)}function $(){if(p){return}p=true;const t=[{once:true,eventName:"ShellNavigationInitialized",handler:M},{eventName:"trackHashChange",handler:L},{eventName:"doHashChangeError",handler:b},{once:true,eventName:"firstSegmentCompleteLoaded",handler:F},{once:true,eventName:"firstCatalogSegmentCompleteLoaded",handler:F},{once:true,eventName:"PagesRuntimeRendered",handler:F},{once:true,eventName:"CustomHomeRendered",handler:F},{eventName:"PageRendered",handler:_},{eventName:"AppRendered",handler:F},{eventName:"openedAppInNewWindow",handler:w},{eventName:"CloseFesrRecord",handler:F}];const a=t.map(t=>{if(t.once){return n.once(t.eventName).do((...n)=>{e.debug(`${r} Incoming event: ${t.eventName}`,JSON.stringify(n[0],null,2),o);t.handler(...n)})}return n.on(t.eventName).do((...n)=>{e.debug(`${r} Incoming event: ${t.eventName}`,JSON.stringify(n[0],null,2),o);t.handler(...n)})});c=[...c,...a]}function _(e){const n=y();n.enhanceTargetApplicationData({pageId:e.pageId,spaceId:e.spaceId})}function U(){if(!p){return}c.forEach(e=>{e.off()});c=[];O();E(null);s=[];u=null;p=false}return{enable:$,disable:U,getAllRecords:v,getCurrentApplication:I,getLastClosedRecord:A,getNextNavigationRecords:N}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/StatisticalRecord", ["sap/base/Log","sap/ui/performance/trace/Interaction"],function(t,i){"use strict";const e="StatisticalRecord";const r="[FesrFlp]";const s={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};class o{#t=null;#i=null;#e=false;#r=s.OPEN;#s=null;#o=null;#a=null;#n=null;#l=null;#c=null;#p=null;#h=null;#d=null;#u={};#g=null;constructor(){t.debug(`${r} ======================================`,"‾‾‾ OPEN ‾‾‾",e);t.debug(`${r} Opening Record`,null,e);this.#E()}setNavigationMode(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#i=t}setHomepageLoading(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#e=t}getSourceApplication(){return this.#l}#E(){if(!this.#g){t.debug(`${r} Interaction Start`,null,e);this.#g=i.notifyAsyncStep()}}#A(){if(this.#g){t.debug(`${r} Interaction End`,null,e);this.#g();this.#g=null}}#m(){const t=this.#h||this.#S(this.#p);const i=this.#c||this.#S(this.#l);if(!this.#p&&!this.#l){return""}if(!this.#l&&t){return"FLP@DURING_LOAD"}if(!this.#l&&!t){return"FLP@DEEP_LINK"}if(!t&&!i){return"A2A@"+this.#l}if(this.#l&&t&&!i){return"FLP_BACK@"+this.#l}if(i&&t){return"HOME2HOME"}if(this.#S(this.#l)){return"FLP@HOMEPAGE_TILE"}if(this.#c){return"APPSTART@CUSTOMHOME"}return""}isEqual(t){return this.#a===t.getTimeStart()}closeRecord(){this.#s=this.#m();this.#r=s.CLOSED;this.#n=performance.now();if(this.#a){this.#t=this.#n-this.#a}this.#A();t.debug(`${r} Closing Record`,`${this.#s} - ${this.getTargetAppNameShort()||this.#p}`,e);t.debug(`${r} ======================================`,"___ CLOSE ___",e)}closeRecordWithError(){this.#r=s.ERROR;this.#n=performance.now();this.#t=this.#n-this.#a;this.#A();t.debug(`${r} Closing Record with Error`,`${this.getTargetAppNameShort()||this.#p}`,e);t.debug(`${r} ======================================`,"___ CLOSE ___",e)}isClosed(){return this.#r===s.CLOSED}isClosedWithError(){return this.#r===s.ERROR}getStep(){if(!this.isClosed()&&!this.isClosedWithError()){throw new Error("Statistical record is still open no step can be determined!")}return this.#s}getTimeStart(){return this.#a}setTimeStart(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#a=t}getTimeEnd(){return this.#n}setSourceApplication(i){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}t.debug(`${r} Record setSource: ${i}`,null,e);this.#l=i}getTargetApplication(){return this.#p}setTargetApplication(i){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}t.debug(`${r} Record setTarget: ${i}`,null,e);this.#p=i}getTargetAppNameShort(){if(this.#p==="FLP_PAGE"){const{pageId:t}=this.#u;if(t){return`FLP_PAGE@${t}`}}return null}getTargetApplicationType(){return this.#d}setTargetApplicationType(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#d=t}setTargetIsHomeApp(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#h=!!t}getTargetIsHomeApp(){return!!this.#h}setTargetHash(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#o=t}getTargetHash(){return this.#o}setSourceIsHomeApp(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#c=!!t}getSourceIsHomeApp(){return!!this.#c}#S(t){return t&&["FLP_HOME","FLP_PAGE","FLP_FINDER"].includes(t)}enhanceTargetApplicationData(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#u={...this.#u,...t}}}return o},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/AccessKeysHandler", ["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(e,t,n,s,o,i){"use strict";var r=e.extend("sap.ushell.renderer.AccessKeysHandler",{constructor:function(){e.apply(this,arguments);o.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[]}});r.prototype.init=function(e){this.oModel=e;document.addEventListener("keydown",function(e){if(e.keyCode===16){return}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e)}.bind(this),0)}else{this._handleEventUsingExternalKeysHandler(e)}var t=s.last("/core/shell/model/currentState/stateName");if(t!=="headerless"&&t!=="headerless-home"){var n=t==="home"||t==="app"||t==="minimal";this.handleShortcuts(e,n)}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e)}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this)};r.prototype.appOpenedHandler=function(){var e=n.getHash();if(e!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null}this.sLastExternalKeysHandlerUrl=e};r.prototype._focusItemInOverflowPopover=function(e,t){var n=sap.ui.getCore().byId("headEndItemsOverflow");if(n&&n.isOpen()){if(n.getContent().length){this._focusItemInPopover(e,n.getContent()[0].getItems())}}else if(t<10){var s=window.document.getElementById("endItemsOverflowBtn");if(s){s.click();var o=this;window.setTimeout(function(){o._focusItemInOverflowPopover(e,++t)},300)}}};r.prototype._focusItemInUserMenu=function(e,t){var n=sap.ui.getCore().byId("sapUshellUserActionsMenuPopover");if(n&&n.isOpen()){if(n.getContent().length){this._focusItemInPopover(e,n.getContent()[0].getItems())}}else if(t<10){var s=this;o.emit("showUserActionsMenu",Date.now());window.setTimeout(function(){s._focusItemInUserMenu(e,++t)},300)}};r.prototype._focusItemInPopover=function(e,t){for(var n=0;n<t.length;n++){var s=t[n].getId().split("-");if(s[s.length-1]===e){t[n].getDomRef().focus();return}}};r.prototype._handleAccessOverviewKey=function(e){var n=this.oModel.getProperty("/searchAvailable"),o=this.oModel.getProperty("/personalization"),r=s.last("/core/catalog/enabled"),a=s.last("/core/shell/model/enableNotifications");if(t.browser.msie){document.addEventListener("help",this._cancelHelpEvent)}var l=[];l=l.concat(this.aShortcutsDescriptions);var u;var c;if(t.os.macintosh){u=i.i18n.getText("OptionKey");c=i.i18n.getText("CommandKey")}else{u=i.i18n.getText("AltKey");c=i.i18n.getText("ControlKey")}if(window.document.getElementById("shell-header")){if(r&&e){l.push({text:u+" + A",description:i.i18n.getText("hotkeyFocusOnAppFinderButton")})}if(n){l.push({text:u+" + F",description:i.i18n.getText("hotkeyFocusOnSearchButton")})}l.push({text:u+" + H",description:i.i18n.getText("hotkeyHomePage")});l.push({text:u+" + M",description:i.i18n.getText("hotkeyFocusOnUserActionMenu")});if(a){l.push({text:u+" + N",description:i.i18n.getText("hotkeyFocusOnNotifications")})}if(e){l.push({text:u+" + S",description:i.i18n.getText("hotkeyFocusOnSettingsButton")});l.push({text:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("CommaKey"),description:i.i18n.getText("hotkeyOpenSettings")})}if(o&&r){l.push({text:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("EnterKey"),description:i.i18n.getText("hotkeyExitEditing")})}if(n){l.push({text:c+" + "+i.i18n.getText("ShiftKey")+" + F",description:i.i18n.getText("hotkeyFocusOnSearchField")})}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(e,t,n,s){var o=new s;l.forEach(function(t){o.addItem(new e({text:t.description}));o.addItem(new n({text:t.text}).addStyleClass("sapUiSmallMarginBottom"))});t.show(o,{id:"hotKeysGlossary",title:i.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"})})};r.prototype._focusAppFinderButton=function(){if(!s.last("/core/catalog/enabled")){return}if(this._isFocusInDialog()){return}var e=window.document.getElementById("openCatalogBtn");if(e){e.focus();return}var t=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(t.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return}this._focusItemInUserMenu("openCatalogBtn",0)};r.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("userSettingsBtn");if(e){e.focus();return}var t=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(t.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return}this._focusItemInUserMenu("userSettingsBtn",0)};r.prototype._blockBrowserDefault=function(e){return new Promise(function(n){if(t.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");n()}},0)}}else{n()}e.preventDefault()})};r.prototype._handleAltShortcutKeys=function(e,t){var n=sap.ui.getCore().byId("shell-header"),s=sap.ui.getCore().byId("sapUshellUserActionsMenuPopover"),i=sap.ui.getCore().byId("shellNotificationsPopover");if(this._isFocusInInput()){return}if(n){if(t){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this))}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this))}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("sf"),t=window.document.getElementById("searchFieldInShell-button");if(e){e.focus()}else if(t){t.focus()}else{this._focusItemInOverflowPopover("sf",0)}}.bind(this))}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=document.getElementById("shell-header-logo");if(e){e.focus();return}}.bind(this))}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(s&&s.isOpen())){o.emit("showUserActionsMenu",Date.now())}}.bind(this))}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(i&&i.isOpen())){o.emit("showNotifications",Date.now())}}.bind(this))}}};r.prototype._handleCtrlShortcutKeys=function(e,t){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}var n=sap.ui.getCore().byId("sf");if(n){n.firePress();e.preventDefault();e.stopPropagation()}}}else if(e.keyCode===188&&t){if(this._isFocusInDialog()){return}var o=sap.ui.getCore().byId("userSettingsBtn");if(o&&!this._isFocusInATable()){o.firePress();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}this._handleAccessOverviewKey(t)}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}var i=window.document.getElementById("appFinderSearch-I");if(i){i.focus();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}if(s.last("/core/spaces/enabled")){this.fireEvent("editModeDone")}else{var r=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(r&&r.getDomRef()){r.firePress();e.preventDefault();e.stopPropagation()}}}};r.prototype.handleShortcuts=function(e,n){if(t.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation()}e.preventDefault()}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,n)}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,n)}};r.prototype.registerAppKeysHandler=function(e){this.fnExternalKeysHandler=e;this.sLastExternalKeysHandlerUrl=n.getHash()};r.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null};r.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler};r.prototype.registerAppShortcuts=function(e,t){this.fnExternalShortcuts=e;this.aShortcutsDescriptions=t};r.prototype._handleFocusBackToMe=function(e,t){this.bFocusOnShell=true;var n;if(t){n=window.document.getElementById(t)}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6"}var s=sap.ui.getCore().byId("shell-header");if(s){s.setFocusOnShellHeader(!this.bForwardNavigation);this.fromOutside=false}}if(n){n.focus();this.fromOutside=false}this.bFocusPassedToExternalHandlerFirstTime=true};r.prototype.setIsFocusHandledByAnotherHandler=function(e){this.isFocusHandledByAnotherHandler=e};r.prototype.sendFocusBackToShell=function(e){var t,n;if(typeof e==="string"){n=e}else if(typeof e==="object"){t=e}this._handleFocusBackToMe(t,n)};r.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false}}this.setIsFocusHandledByAnotherHandler(false)};r.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent)};r.prototype._isFocusInInput=function(){var e=(document.activeElement||{}).tagName;return e==="INPUT"||e==="TEXTAREA"};r.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true}}return false};r.prototype._isFocusInATable=function(){var e=document.activeElement;var t;for(;e!==document.body;e=e.parentNode){t=e.classList;if(t.contains("sapUiCompSmartTable")||t.contains("sapUiMdcTable")||t.contains("sapMListTbl")||t.contains("sapUiTable")){return true}}return false};return new r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/LogonFrameProvider", ["sap/m/Button","sap/m/Dialog","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources"],function(e,t,a,s,i,n){"use strict";function o(){r();var o=new t({id:"SAMLDialog",title:n.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new a("SAMLDialogFrame",{content:'<iframe id=SAMLDialogFrame src=""></iframe>'}),endButton:new e({text:n.i18n.getText("samlCloseBtn"),press:sap.ushell.Container.cancelLogon.bind(sap.ushell.Container)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(i.last("/core/extension/SupportTicket")){var u=new s;u.setWidth("150px");u.setIcon("");o.setBeginButton(u)}o.open();l(true);return document.getElementById("SAMLDialogFrame")}function l(e){var t=document.getElementById("sap-ui-blocklayer-popup");if(t){if(e){t.classList.add("sapUshellSamlDialogHidden")}else{t.classList.remove("sapUshellSamlDialogHidden")}}}function r(){var e=sap.ui.getCore().byId("SAMLDialog");if(e){e.destroy()}}function u(){var e=sap.ui.getCore().byId("SAMLDialog");if(e){e.removeStyleClass("sapUshellSamlDialogHidden");l(true)}}const p={create:o,show:u,destroy:r};(function(){setTimeout(()=>{sap.ui.require(["sap/ushell/renderers/fiori2/LogonFrameProvider"],function(){})},0)})();return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/Renderer", ["sap/ui/core/Core","sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepExtend","sap/base/util/extend","sap/ui/base/Object","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/View","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","sap/ushell/renderer/ShellLayout","sap/ushell/renderer/utils"],function(e,t,o,r,n,i,a,l,s,p,d,h,u,jQuery,c,f,g,m,y,v,C,S,w,I,b,P){"use strict";var A=v.mvc.ViewType;var F=C.AppType;var M=t.extend("sap.ushell.renderer.Renderer",{metadata:{version:"1.120.20",dependencies:{version:"1.120.20",libs:["sap.ui.core","sap.m"],components:[]},interfaces:["sap.ui.core.IAsyncContentCreation"],routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:function(){if(r.last("/core/homeApp/enabled")){return"homeapp"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")!==null){return"workpages"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")===null){return"runtimeSwitcher"}if(r.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:r.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:function(){if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")!==null){return"workpages"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/myHome/pageId")===null){return"runtimeSwitcher"}if(r.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"openWorkPage",pattern:["Launchpad-openWorkPage?:hashParameters:","Launchpad-openWorkPage"],target:"workpages"},{name:"wzsearch",pattern:["WorkZoneSearchResult-display:?query:"],target:"wzsearch"}],targets:{home:{name:"homepage",type:"Component",title:h.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:r.last("/core/home/featuredGroup/enable")?["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]}}},workpages:{name:"workPageRuntime",type:"Component",id:"workPageRuntime-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}},runtimeSwitcher:{name:"runtimeSwitcher",type:"Component",id:"runtimeSwitcher-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}},wzsearch:{name:"cepsearchresult.app",type:"Component",id:"cepsearchresult-app-component",options:{manifest:true,componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}}}}},init:function(){t.prototype.init.apply(this,arguments);var o=this.getRouter();["appfinder-legacy","home","appfinder","openFLPPage","openWorkPage","wzsearch"].forEach(e=>{o.getRoute(e).attachBeforeMatched(()=>{n.emit("trackHashChange",window.hasher.getHash())})});if(r.last("/core/homeApp/enabled")){this._getHomeAppTarget().then(function(e){o.getTargets().addTarget("homeapp",e);o.getTarget("homeapp").attachEventOnce("display",function(){n.emit("CoreResourcesComplementLoaded",{status:"success"})})})}o.getRoute("home").attachMatched(this._prepareHomepage,this);o.getRoute("openFLPPage").attachMatched(this._prepareHomepage,this);o.getRoute("openWorkPage").attachMatched(this._prepareHomepage,this);o.getRoute("appfinder-legacy").attachMatched(function(e){o.navTo("appfinder",{},true)});o.getRoute("appfinder").attachMatched(function(t){if(!r.last("/core/catalog/enabled")){c.warning("AppFinder is disabled. Re-route to the homepage.");o.navTo("home",null,true);return}var n=e.getComponent(this.createId("Shell-appfinder-component"));var i=t.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){a.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder")}d.setCurrentApplication(null);var l=n.getRouter();n.getRootControl().loaded().then(function(){l.parse(i["innerHash*"]||"")});a.switchViewState("app",false,"Shell-appfinder");a.getAppMeta().setAppIcons();p.initializeAccessKeys()},this);o.getRoute("wzsearch").attachMatched(function(e){a.getShellUIService().setBackNavigation();a.switchViewState("app",false,"cepsearchresult-app")});var i=new s(l);i.setDefaultBindingMode("OneWay");this.setModel(i,"device");this.setModel(h.i18nModel,"i18n");this._aCreatedControlIds=[]}});M.prototype._prepareHomepage=function(e){if(d.getCurrentApplication()){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.setIsInitialNavigation(false)})}var t=window.hasher.getHash();if(!r.last("/core/spaces/enabled")&&t.indexOf("Launchpad-openFLPPage")===0){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.replaceHashWithoutNavigation("Shell-home")})}var o=h.i18n.getText("homeBtn_tooltip");var n=this.getShellConfig().rootIntent;var l=!n||i.isFlpHomeIntent(n);a.switchViewState(l?"home":"app",false,"Shell-home");this.setCurrentCoreView("home");d.setCurrentApplication(null);a.getShellUIService().setTitle(o);a.getShellUIService().setHierarchy();a.getShellUIService().setRelatedApps();a.getAppMeta().setAppIcons();p.initializeAccessKeys()};M.prototype._getHomeAppTarget=function(){return sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){var t=r.last("/core/homeApp/component");var o=e.getCoreResourcesComplementBundle();if(t.url){return{name:t.name,type:"Component",id:"homeApp-component",path:"",options:{url:t.url,componentData:{},asyncHints:Object.assign({},t.asyncHints||{},{preloadBundles:o})}}}return{name:"error",type:"Component",id:"homeApp-component",path:"sap/ushell/components/homeApp",options:{componentData:{},asyncHints:{preloadBundles:o}}}})};M.prototype.getSapUshellConfigParam=function(){let e=u.fromQuery(window.location.search).get("sap-ushell-config");(function(){if(!e){e=u.fromQuery(window.location.search).get("appState");if(e){c.error("URL parameter 'appState' is given, but deprecated. Please use 'sap-ushell-config' instead!","sap.ushell.renderer.Renderer")}}})();return e&&e.toLowerCase()};M.prototype.createContent=function(){var e=M.prototype.getSapUshellConfigParam();var t=this.getComponentData()||{};var o={applications:{"Shell-home":{}},rootIntent:"Shell-home"};if(e){if(!t.config){t.config={}}t.config.appState=e}if(t.config){if(t.config.rootIntent===undefined){t.config.migrationConfig=true}t.config=f(o,t.config);g(t.config.applications["Shell-home"],r.last("/core/home"),r.last("/core/catalog"));if(t.config.appState==="headerless"||t.config.appState==="merged"||t.config.appState==="blank"){t.config.enablePersonalization=false;r.emit("/core/shell/enablePersonalization",false)}else{t.config.enablePersonalization=r.last("/core/shell/enablePersonalization")}if(!t.config.enablePersonalization){t.config.moveEditHomePageActionToShellHeader=false;t.config.moveAppFinderActionToShellHeader=false}}t.shellModel=r.createModel("/core/shell/model",s);t.helperModel=new s({shell:{floatingContainerVisible:false,footerContent:""}});if(!this.getComponentData().async){c.error("sap/ushell/renderer/Renderer component is created synchronously. Synchronous instantiation is not allowed. Please use async:true in component data");var n=sap.ui.view("mainShell",{type:A.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:t});n.addStyleClass("sapUshellRenderer");this._oShellView=n;this.oShellModel=a.getElementsModel();n.loaded().then(function(e){this.shellCtrl=e.oController;P.init(e.getController())}.bind(this));return n}return S.create({id:"mainShell",viewName:"module:sap/ushell/renderer/Shell.view",height:"100%",viewData:t}).then(function(e){e.addStyleClass("sapUshellRenderer");this._oShellView=e;this.oShellModel=a.getElementsModel();this.shellCtrl=e.getController();P.init(e.getController());return e}.bind(this))};M.prototype._storeControl=function(e,t){this._aCreatedControlIds.push(e.getId());if(t){this.oShellModel.addElementToManagedQueue(e)}};M.prototype.createExtendedShellState=function(e,t){return a.shellElements().createExtendedShellState(e,t)};M.prototype.applyExtendedShellState=function(e,t){this.oShellModel.applyExtendedShellState(e,t)};M.prototype.showLeftPaneContent=function(e,t,o){var r=typeof e==="string"?[e]:e;if(t){a.shellElements().addShellModelForApplications("paneContent",r)}else{this.oShellModel.addLeftPaneContent(r,false,o)}};M.prototype.showHeaderItem=function(e,t,o){var r=typeof e==="string"?[e]:e;if(t){a.shellElements().addShellModelForApplications("headItems",r)}else{this.oShellModel.addHeaderItem(r,false,o)}};M.prototype.showRightFloatingContainerItem=function(e,t,o){var r=typeof e==="string"?[e]:e;if(t){a.shellElements().addShellModelForApplications("RightFloatingContainerItems",r)}else{this.oShellModel.addRightFloatingContainerItem(r,false,o)}};M.prototype.showRightFloatingContainer=function(e){a.shellElements().setShellModelForApplications("showRightFloatingContainer",e)};M.prototype.showToolAreaItem=function(e,t,o){this.oShellModel.addToolAreaItem(e,true,t,o)};M.prototype.showActionButton=function(t,o,r){var n=[];var i=[];var l;if(typeof t==="string"){t=[t]}n=t.filter(function(t){l=e.byId(t);return m.isA(l,"sap.m.Button")&&!m.isA(l,"sap.ushell.ui.launchpad.ActionItem")});i=t.filter(function(t){l=e.byId(t);return l instanceof sap.ushell.ui.launchpad.ActionItem});if(n.length){this.convertButtonsToActions(n,o,r)}if(i.length){if(o){a.shellElements().addShellModelForApplications("actions",t)}else{this.oShellModel.addActionButton(t,false,r)}}};M.prototype.showFloatingActionButton=function(e,t,o){if(t){a.shellElements().addShellModelForApplications("floatingActions",typeof e==="string"?[e]:e)}else{this.oShellModel.addFloatingActionButton(typeof e==="string"?[e]:e,false,o)}};M.prototype.showHeaderEndItem=function(e,t,o){if(t){a.shellElements().addShellModelForApplications("headEndItems",typeof e==="string"?[e]:e)}else{this.oShellModel.addHeaderEndItem(typeof e==="string"?[e]:e,false,o)}};M.prototype.setHeaderVisibility=function(e,t,o){if(t){a.shellElements().setShellModelForApplications("headerVisible",e)}else{this.oShellModel.setHeaderVisibility(e,false,o)}};M.prototype.showSubHeader=function(e,t,o){if(t){a.shellElements().addShellModelForApplications("subHeader",typeof e==="string"?[e]:e)}else{this.oShellModel.addSubHeader(typeof e==="string"?[e]:e,false,o)}};M.prototype.showSignOutItem=function(e,t){if(e){a.shellElements().addShellModelForApplications("actions",["logoutBtn"],false)}else{this.oShellModel.showSignOutButton(e,t)}};M.prototype.showSettingsItem=function(e,t){this.oShellModel.showSettingsButton(e,t)};M.prototype.setFooter=function(e){this.shellCtrl.setFooter(e)};M.prototype.setNavigationBar=function(e){this.shellCtrl.setNavigationBar(e)};M.prototype.setShellShapes=function(e){this.shellCtrl.setShellShapes(e)};M.prototype.setShellFooter=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var a=t.oControlProperties;if(a&&a.id&&e.byId(a.id)){n=e.byId(a.id);if(n){if(this.lastFooterId){this.removeFooter()}this.lastFooterId=n.getId();this.shellCtrl.setFooter(n);o.resolve(n)}}if(i){var l=i.replace(/\./g,"/");sap.ui.require([l],function(e){n=new e(a);r._storeControl(n,false);if(r.lastFooterId){r.removeFooter()}r.lastFooterId=n.getId();r.shellCtrl.setFooter(n);o.resolve(n)})}else{c.warning("You must specify control type in order to create it")}return o.promise()};M.prototype.setFooterControl=function(e,t){var o=e.replace(/\./g,"/");var r=sap.ui.require(o);var n=false;if(r){n=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderer.Renderer");return undefined}var i=this.createItem(t,undefined,function(t){if(e){if(n){return new r(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(this.lastFooterId){this.removeFooter()}this.lastFooterId=i.getId();this.shellCtrl.setFooter(i);return i};M.prototype.hideHeaderItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeHeaderItem([e],t,o)}else{this.oShellModel.removeHeaderItem(e,t,o)}};M.prototype.removeToolAreaItem=function(e,t,o){if(typeof e==="string"){e=[e]}this.oShellModel.removeToolAreaItem(e,t,o)};M.prototype.removeRightFloatingContainerItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeRightFloatingContainerItem([e],t,o)}else{this.oShellModel.removeRightFloatingContainerItem(e,t,o)}};M.prototype.hideActionButton=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeActionButton([e],t,o)}else{this.oShellModel.removeActionButton(e,t,o)}};M.prototype.hideLeftPaneContent=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeLeftPaneContent([e],t,o)}else{this.oShellModel.removeLeftPaneContent(e,t,o)}};M.prototype.hideFloatingActionButton=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeFloatingActionButton([e],t,o)}else{this.oShellModel.removeFloatingActionButton(e,t,o)}};M.prototype.hideHeaderEndItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeHeaderEndItem([e],t,o)}else{this.oShellModel.removeHeaderEndItem(e,t,o)}};M.prototype.hideSubHeader=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeSubHeader([e],t,o)}else{this.oShellModel.removeSubHeader(e,t,o)}};M.prototype.removeFooterById=function(t){if(t===this.shellCtrl.getFooterId()){this.shellCtrl.removeFooter()}var o=e.byId(t);if(o){o.destroy()}};M.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var t=e.byId(this.lastFooterId);if(t){t.destroy()}this.lastFooterId=undefined}};M.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState()};M.prototype.addShellSubHeader=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var a=t.oControlProperties;var l=t.bIsVisible;var s=t.bCurrentState;var p=t.aStates;if(a&&a.id&&e.byId(a.id)){n=e.byId(a.id);if(n){if(l){this.showSubHeader(n.getId(),s,p)}o.resolve(n)}}if(i){var d=i.replace(/\./g,"/");sap.ui.require([d],function(e){n=new e(a);r._storeControl(n,s);if(l){r.showSubHeader(n.getId(),s,p)}o.resolve(n)})}else{c.warning("You must specify control type in order to create it")}return o.promise()};M.prototype.addSubHeader=function(e,t,o,r,n){var i=e.replace(/\./g,"/");var a=sap.ui.require(i);var l=false;if(a){l=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderer.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(l){return new a(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showSubHeader(s.getId(),r,n)}return s};M.prototype.addUserAction=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var l=t.oControlProperties;var s=t.bIsVisible;var p=t.bCurrentState;var d=p?a.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate();var h=t.aStates;if(l){n=e.byId(l.id)}if(n){o.resolve(n)}if(i){if(i==="sap.m.Button"){i="sap.ushell.ui.launchpad.ActionItem"}var u=i.replace(/\./g,"/");sap.ui.require([u],function(e){var t;if(p){t=a.shellElements().getStateModelToUpdate();a.shellElements().setStateModelToUpdate(d)}else{t=r.oShellModel.getModelToUpdate();r.oShellModel.setModelToUpdate(d,true)}if(!n){n=new e(l);r._storeControl(n,p)}if(!n.getActionType){n=new e(l);r._storeControl(n,p)}if(s){r.showActionButton(n.getId(),p,h)}if(p){a.shellElements().setStateModelToUpdate(t)}else{r.oShellModel.setModelToUpdate(t,false)}o.resolve(n)})}else{var f="You must specify control type in order to create it";c.warning(f);o.reject(f)}return o.promise()};M.prototype.addActionButton=function(e,t,o,r,n){var i=false;if(e==="sap.m.Button"){e="sap.ushell.ui.launchpad.ActionItem"}var a=e.replace(/\./g,"/");var l=sap.ui.require(a);if(l){i=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderer.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(i){return new l(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showActionButton(s.getId(),r,n)}return s};M.prototype.addFloatingButton=function(t){var o=new jQuery.Deferred;var r=this;var n;var i;var a=t.controlType;var l=t.oControlProperties;var s=t.bIsVisible;var p=t.bCurrentState;var d=t.aStates;if(l&&l.id&&e.byId(l.id)){i=e.byId(l.id);if(i){if(s){r.showFloatingActionButton(i.getId(),p,d)}o.resolve(i)}}if(a){n=a.replace(/\./g,"/")}else{n="sap/m/Button"}sap.ui.require([n],function(e){i=new e(l);r._storeControl(i,p);if(s){r.showFloatingActionButton(i.getId(),p,d)}o.resolve(i)});return o.promise()};M.prototype.addFloatingActionButton=function(e,t,o,r,n){var i=false;if(!e){e="sap.m.Button"}var a=e.replace(/\./g,"/");var l=sap.ui.require(a);if(l){i=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderer.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(i){return new l(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showFloatingActionButton(s.getId(),r,n)}return s};M.prototype.addSidePaneContent=function(t){var o=new jQuery.Deferred;var r=this;var n;var i=t.controlType;var a=t.oControlProperties;var l=t.bIsVisible;var s=t.bCurrentState;var p=t.aStates;if(a&&a.id&&e.byId(a.id)){n=e.byId(a.id);if(n){o.resolve(n)}}if(i){var d=i.replace(/\./g,"/");sap.ui.require([d],function(e){n=new e(a);r._storeControl(n,s);if(l){r.showLeftPaneContent(n.getId(),s,p)}o.resolve(n)})}else{c.warning("You must specify control type in order to create it")}return o.promise()};M.prototype.addLeftPaneContent=function(e,t,o,r,n){var i=e.replace(/\./g,"/");var a=sap.ui.require(i);var l;if(a){l=true}else if(!y.get(e||"")){c.error("Renderer.setFooterControl: the referenced control resource "+e+" is not available.",undefined,"sap.ushell.renderer.Renderer");return undefined}var s=this.createItem(t,r,function(t){if(e){if(l){return new a(t)}var o=y.get(e||"");return new o(t)}c.warning("You must specify control type in order to create it");return undefined});if(o){this.showLeftPaneContent(s.getId(),r,n)}return s};M.prototype.addHeaderItem=function(e,t,o,r,n){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];o=arguments[1];r=arguments[2];n=arguments[3]}else{c.error("sap.ushell.renderer.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!")}var i=this.createItem(t,r,function(e){return new w(e)});if(o){this.showHeaderItem(i.getId(),r,n)}return i};M.prototype.addRightFloatingContainerItem=function(e,t,o,r){var n=this.createItem(e,o,function(e){return new I(e)});if(t){this.showRightFloatingContainerItem(n.getId(),o,r)}return n};M.prototype.addToolAreaItem=function(e,t,r,n){if(t!==null){e.visible=!!t}var i=function(e){return new o(e)};var a=this.createItem(e,r,i);this.oShellModel.addToolAreaItem(a.getId(),!!t,r,n);return a};M.prototype.addHeaderEndItem=function(e,t,o,r,n){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];o=arguments[1];r=arguments[2];n=arguments[3]}var i=this.createItem(t,r,function(e){return new w(e)});if(o){this.showHeaderEndItem(i.getId(),r,n)}return i};M.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration()};M.prototype.addEndUserFeedbackCustomUI=function(e,t){if(e||t){c.info("Application calls sap.ushell.Renderer.addEndUserFeedbackCustomUI. This function is deprecated. The call has no effect.")}};M.prototype.addUserPreferencesEntry=function(e){this.shellCtrl.addUserPreferencesEntry(e)};M.prototype.addUserPreferencesGroupedEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e,true)};M.prototype.setHeaderTitle=function(e){this.shellCtrl.setHeaderTitle(e)};M.prototype.setLeftPaneVisibility=function(e,t){this.oShellModel.setLeftPaneVisibility(t,false,[e])};M.prototype.showToolArea=function(e,t){this.oShellModel.showShellItem("/toolAreaVisible",e,t)};M.prototype.setHeaderHiding=function(e){return this.oShellModel.setHeaderHiding(e)};M.prototype.setFloatingContainerContent=function(e,t,o){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[e.getId()],t,o)};M.prototype.setFloatingContainerVisibility=function(e){this.shellCtrl.setFloatingContainerVisibility(e)};M.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState()};M.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility()};M.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility()};M.prototype.setFloatingContainerDragSelector=function(e){this.shellCtrl.setFloatingContainerDragSelector(e)};M.prototype.LaunchpadState={App:"app",Home:"home"};M.prototype.createTriggers=function(e,t,o){this.oShellModel.createTriggers(e,t,o)};M.prototype.convertButtonsToActions=function(t,o,r){var n={};var i=this;t.forEach(function(t){var a=e.byId(t);n.id=a.getId();n.text=a.getText();n.icon=a.getIcon();n.tooltip=a.getTooltip();n.enabled=a.getEnabled();n.visible=a.getVisible();if(a.mEventRegistry&&a.mEventRegistry.press){n.press=a.mEventRegistry.press[0].fFunction}a.destroy();i.addActionButton("sap.ushell.ui.launchpad.ActionItem",n,n.visible,o,r)})};M.prototype.createItem=function(t,o,r){var n;if(t&&t.id){n=e.byId(t.id)}if(!n){n=r(t);this._storeControl(n,o)}return n};M.prototype.addEntryInShellStates=function(e,t,o,r,n){this.oShellModel.addEntryInShellStates(e,t,o,r,n)};M.prototype.removeCustomItems=function(e,t,o,r){if(typeof t==="string"){this.oShellModel.removeCustomItems(e,[t],o,r)}else{this.oShellModel.removeCustomItems(e,t,o,r)}};M.prototype.addCustomItems=function(e,t,o,r){if(typeof t==="string"){this.oShellModel.addCustomItems(e,[t],o,r)}else{this.oShellModel.addCustomItems(e,t,o,r)}};M.prototype.addRightViewPort=function(e){this.shellCtrl.getViewPortContainer().addRightViewPort(e,false)};M.prototype.addLeftViewPort=function(e){this.shellCtrl.getViewPortContainer().addLeftViewPort(e,false)};M.prototype.getShellController=function(){return this.shellCtrl};M.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState()};M.prototype.ViewPortContainerNavTo=function(e,t,o){return this.shellCtrl.getViewPortContainer().navTo(e,t,o)};M.prototype.switchViewPortStateByControl=function(){};M.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};M.prototype.setUserActionsMenuSelected=function(e){this.shellCtrl.setUserActionsMenuSelected(e)};M.prototype.getUserActionsMenuSelected=function(){return this.shellCtrl.getUserActionsMenuSelected()};M.prototype.setNotificationsSelected=function(e){this.shellCtrl.setNotificationsSelected(e)};M.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected()};M.prototype.addShellDanglingControl=function(e){this.shellCtrl.getView().addDanglingControl(e)};M.prototype.getShellConfig=function(){return this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{}};M.prototype.getEndUserFeedbackConfiguration=function(){return{}};M.prototype.reorderUserPrefEntries=function(e){return this.shellCtrl._reorderUserPrefEntries(e)};M.prototype.addUserProfilingEntry=function(e){this.shellCtrl.addUserProfilingEntry(e)};M.prototype.logRecentActivity=function(e){if(!e.appType){e.appType=F.APP}if(!e.appId){e.appId=e.url}return this.shellCtrl._logRecentActivity(e)};M.prototype.setCurrentCoreView=function(e){this.currentCoreView=e};M.prototype.getCurrentCoreView=function(){return this.currentCoreView};M.prototype.registerTileActionsProvider=function(e){if(!r.last("/core/spaces/enabled")){return Promise.reject("registerTileActionsProvider is only supported with spaces enabled")}if(!this._aTileActionProviders){this._aTileActionProviders=[]}this._aTileActionProviders.push(e);return Promise.resolve()};M.prototype.getCustomTileActions=function(e){if(!r.last("/core/spaces/enabled")){return Promise.reject("getCustomTileActions is only supported with spaces enabled")}var t={controlId:e.getId(),tileId:e.getVizRefId(),stableId:e.getDataHelpId()||e.getVizRefId(),control:e,domRef:e.getDomRef()};var o=[];this._aTileActionProviders.forEach(function(e){var r=e(t)||[];o.push.apply(o,r)});return Promise.resolve(o)};M.prototype._isBuiltInIntent=function(e){if(!M._aBuiltInRoutes){var t=M.getMetadata().getRoutes();M._aBuiltInRoutes=t.reduce(function(e,t){return e.concat(t.pattern)},[])}if(!e||!e.semanticObject||!e.action){return false}var o=e.semanticObject+"-"+e.action;return M._aBuiltInRoutes.indexOf(o)!==-1};this.addTopHeaderPlaceHolder=function(){};this.removeTopHeaderPlaceHolder=function(){};M.prototype.updateHeaderItem=function(t,o){var r=e.byId(t);if(r&&o){if(o.hasOwnProperty("floatingNumber")){r.setFloatingNumber(o.floatingNumber)}}};M.prototype.destroyButton=function(t){if(!t){return}t=typeof t==="string"?[t]:t;t.forEach(function(t){var o=e.byId(t);if(o){o.destroy()}})};M.prototype.waitForShellLayout=function(){return this.shellCtrl.getView().waitForShellLayout()};M.prototype.destroy=function(){var e=this.shellCtrl?this.shellCtrl.awaitPendingInitializations():Promise.resolve();return e.then(function(){return t.prototype.destroy.apply(this,arguments)}.bind(this)).then(function(){if(this._aCreatedControlIds){this._aCreatedControlIds.forEach(function(e){try{sap.ui.getCore().byId(e).destroy()}catch(t){c.error("Failed to destroy control with id: "+e,t)}})}b.destroyLayout()}.bind(this))};(function(){setTimeout(()=>{sap.ui.require(["sap/ushell/renderers/fiori2/Renderer","sap/ushell/renderers/fiori2/RendererExtensions"],function(){})},0)})();return M});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/Shell.controller", ["./History","sap/base/Log","sap/base/util/extend","sap/base/util/isPlainObject","sap/m/InstanceManager","sap/ui/core/Component","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/performance/trace/Interaction","sap/ui/performance/Measurement","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/bootstrap/SchedulingAgent","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/HeaderManager","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/performance/FesrEnhancer","sap/ushell/renderer/LogonFrameProvider","sap/ushell/resources","sap/ushell/services/AppConfiguration","sap/ushell/UserActivityLog","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/renderer/ShellLayout","sap/ushell/renderer/utils","sap/base/util/ObjectPath"],function(e,t,n,i,a,o,r,s,l,c,h,d,p,g,u,f,v,jQuery,m,C,y,S,b,w,_,A,F,P,I,D,E,H,k,N,T,U,L){"use strict";var R=T.LAYOUT_MAPPING;var M=l.routing.HistoryDirection;var B=F.AppType;var x=true;var O=false;var W;var V=S.getElementsModel();var z;var j={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0};var q={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"};var X={};P.init();const G="Shell.controller";const Y="[FesrFlp]";return c.extend("sap.ushell.renderer.Shell",{_aDoables:[],addDoable:function(e){this._aDoables.push(e)},_aDanglingControls:[],addDanglingControl:function(e){this._aDanglingControls.push(e)},_aDanglingBindings:[],addDanglingBinding:function(e){this._aDanglingBindings.push(e)},removeDanglingBinding:function(e){var t=this._aDanglingBindings.findIndex(function(t){return t===e});if(t>-1){this._aDanglingBindings.splice(t,1)}},_aPendingInitializations:[],addPendingInitialization:function(e){this._aPendingInitializations.push(e);return e},awaitPendingInitializations:function(){var e=this._aPendingInitializations.length;return Promise.allSettled(this._aPendingInitializations).then(function(){var t=this._aPendingInitializations.length;if(e<t){return this.awaitPendingInitializations()}}.bind(this))},onComponentTargetDisplay:function(e){var t=e.getParameters();var n=t.control;var i=t.object;if(this.bRestorePreviousHash){this.bRestorePreviousHash=false}n.navTo("centerViewPort",i.getId(),"show")},onInit:function(){var t=o.getOwnerComponentFor(this.getView()).getRouter();t.getTarget("home").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("pages").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("workpages").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("runtimeSwitcher").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("wzsearch").attachDisplay(this.onComponentTargetDisplay,this);if(_.last("/core/homeApp/enabled")){t.getTarget("homeapp").attachDisplay(this.onComponentTargetDisplay,this)}t.oHashChanger=h.getInstance();t.initialize(true);this.bEnableHashChange=true;x=true;var n=this.getView();var i=n.getViewData()||{};var a=window.matchMedia("(min-width: 600px)");var r=i.config||{};var l=S.shellElements().model();w.init(r,l);n.setModel(i.helperModel,"helper");n.setModel(i.shellModel);this.initShellModel(r,l);var c=function(e){_.emit("/core/shell/model/isPhoneWidth",!e.matches)};if(a.addListener){a.addListener(c);c(a)}n.setModel(D.i18nModel,"i18n");s.getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);s.getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);s.getEventBus().subscribe("ESHSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._registerAndCreateEventHubDoables();W.addHeaderEndItem(["userActionsMenuHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var d=[];if(r&&!r.moveContactSupportActionToShellHeader){d.push("ContactSupportBtn")}this.history=e;this.oViewPortContainer=s.byId("viewPortContainer");S.init(r.appState,this.oViewPortContainer,r.rootIntent,r.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},d,r.cacheConfiguration);var g=function(e,n){this.oShellNavigation=e;this.oShellNavigation.registerPrivateFilters(n);this.oShellNavigation.registerExtraRouter(t);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));S.registerHandleHashChange(this.oShellNavigation);A.emit("ShellNavigationInitialized",Date.now())}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("AppLifeCycle")]).then(function(e){this.oURLParsing=e[0];var t=e[1];this._oAppLifeCycleService=e[2];g(t,this._oAppLifeCycleService)}.bind(this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());if(p.system.desktop){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],function(e){e.init(z)})}window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(p.browser.name===p.browser.BROWSER.INTERNET_EXPLORER&&S.getCurrentApplication().container.getApplicationType()==="NWBC")){if(!D.browserI18n){D.browserI18n=D.getTranslationModel(window.navigator.language).getResourceBundle()}return D.browserI18n.getText("dataLossExternalMessage")}return undefined};if(_.last("/core/shell/model/contentDensity")){S.getAppMeta()._applyContentDensityClass()}this.initShellUIService();if(!r.disableSignOut&&(r.sessionTimeoutTileStopRefreshIntervalInMinutes>0||r.sessionTimeoutReminderInMinutes>0)){this._createSessionHandler(r)}if(p.system.desktop){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],function(e){n.waitForShellLayout().then(function(){var t=document.getElementById(R.NavigationBar);t.addEventListener("focusin",function(){e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false});t.addEventListener("focusout",function(){e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true});var n=document.getElementById(R.RendererRootView);n.addEventListener("focusin",function(){e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false});n.addEventListener("focusout",function(){e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true})})})}},shellUpdateAggItem:function(e,t){return s.byId(t.getObject())},getViewPortContainer:function(){return s.byId("viewPortContainer")},_registerAndCreateEventHubDoables:function(){[A.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),A.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),A.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),A.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),A.on("ShellFloatingContainerUndockOnResize").do(this._handleFloatingContainerUndockOnResize.bind(this)),A.on("ShellFloatingContainerDockedIsResized").do(this._emitFloatingContainerResizeEvent.bind(this)),A.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),A.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),A.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),A.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),A.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),A.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),A.on("centerViewPort").do(this._centerViewPort.bind(this))].forEach(function(e){this.addDoable(e)}.bind(this))},initShellModel:function(e,t){W=V;W.init(e,t);z=this.getView().getViewData().shellModel;_.emit("/core/shell/model/personalization",_.last("/core/shell/enablePersonalization"))},initShellUIService:function(){S.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(X.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"})}.bind(this))}},onBackNavigationChange:function(e){S.setBackNavigationChanged(true);var t=e.getParameters().data;var n=_.last("/core/shell/model/currentState");if(t){S.service().setNavigateBack(t);if(n.stateName==="minimal"||n.stateName==="standalone"||n.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true)}}else{S.service().resetNavigateBack()}},toggleContentDensity:function(e){var t=e.contentDensity==="compact";S.getAppMeta()._applyContentDensityByPriority(t,true)},_handleEmptyHash:function(e){e=typeof e==="string"?e:"";e=e.split("?")[0];if(e.length===0){var t=this.getView()?this.getView().getViewData():{};X=t.config||{};if(X.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue}if(X.rootIntent){window.setTimeout(function(){window.hasher.setHash(X.rootIntent)},0);return this.oShellNavigation.NavigationFilterStatus.Abandon}}return this.oShellNavigation.NavigationFilterStatus.Continue},_setConfigurationToModel:function(){var e=this.getView().getViewData();if(e){X=e.config||{}}if(X){if(X.states){V.extendStates(X.states);w.extendStates(X.states)}if(X.enableSetTheme!==undefined){z.setProperty("/setTheme",X.enableSetTheme)}z.setProperty("/contentDensity",X.enableContentDensity===undefined?true:X.enableContentDensity);if(X.migrationConfig!==undefined){z.setProperty("/migrationConfig",X.migrationConfig)}if(X.enableUserDefaultParameters!==undefined){z.setProperty("/userDefaultParameters",X.enableUserDefaultParameters)}if(X.disableHomeAppCache!==undefined){z.setProperty("/disableHomeAppCache",X.disableHomeAppCache)}z.setProperty("/enableHelp",_.last("/core/extension/enableHelp"));z.setProperty("/searchAvailable",X.enableSearch!==false)}},_loadTrackingActivitiesSetting:function(e){this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(t){if(t===undefined){t=true}z.setProperty("/enableTrackingActivity",t);A.emit("StepDone",e.stepName)}).catch(function(n){t.error("Failed to load tracking activities state from the personalization, tracking activities is disabled",n,"sap.ushell.components.flp.settings.FlpSettings");z.setProperty("/enableTrackingActivity",false);A.emit("StepDone",e.stepName)})},_getPreviousPageDirty:function(){return O},_setPreviousPageDirty:function(e){O=e},getModelConfiguration:function(){var e=this.getView().getViewData();var t;if(e){var i=e.config||{};t=n({},i)}delete t.applications;return t},_getLogonFrameProvider:function(){return I},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[];this._aDanglingControls.forEach(function(e){e.destroy()});this._aDanglingControls=[];this._aDanglingBindings.forEach(function(e){e.destroy()});this._aDanglingBindings=[];s.getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);s.getEventBus().unsubscribe("ESHSearchFinished",this._logSearchActivity,this);s.getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy()}w.destroy();y.destroy();H.deactivate();W.destroy();S.shellElements().clean();W=undefined},_getCurrentAppRouter:function(){var e=this._oAppLifeCycleService;var t=e&&e.getCurrentApplication&&e.getCurrentApplication();var n=t&&t.componentInstance;if(n){return n.getRouter()}return null},_disableSourceAppRouter:function(e,t){if(!this.bEnableHashChange||this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue}var n=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,t);if(!n){var i=this._getCurrentAppRouter();if(i&&i.isInitialized()){i.stop()}}return this.oShellNavigation.NavigationFilterStatus.Continue},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true)}},handleDataLoss:function(e,t){var n=this.oShellNavigation.hashChanger;var i=n.getReloadApplication();if(this.bReloadApplication!==null&&this.bReloadApplication!==undefined){n.setReloadApplication(this.bReloadApplication);this.bReloadApplication=null}if(t===""||v.disableBlueBoxHashChangeTrigger===true){return this.oShellNavigation.NavigationFilterStatus.Continue}if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom}if(this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue}if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue}var a=this.oURLParsing.parseShellHash(e);var o=sap.ushell.Container.getRenderer()._isBuiltInIntent(a);var r=a.params["sap-ushell-navmode"];var s=r&&r[0];if(!o&&(this.bExplaceNavigation||s==="explace"||s==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue}var l=sap.ushell.Container.getDirtyFlag();var c=sap.ushell.Container.isAsyncDirtyStateProviderSet();if(!c&&!l){O=l;return this.oShellNavigation.NavigationFilterStatus.Continue}var h=d.getInstance().getHistoryStateOffset()<0;Promise.all([this._waitForHash(t),sap.ushell.Container.getServiceAsync("NavTargetResolution"),sap.ushell.Container.getDirtyFlagsAsync()]).then(function(t){var n=t[1];var a=t[2];O=a;if(!a){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");return}if(o){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}}else{var r="#"+e;n.resolveHashFragment(r).then(function(t){var n=t.targetNavigationMode==="explace"||t.targetNavigationMode==="frameless";var a=h&&t.navigationMode===q.newWindowThenEmbedded;if(n&&!a){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this.bReloadApplication=i;this._restoreHashUsingAction(e,"redo")}}.bind(this)).catch(function(){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}.bind(this))}}.bind(this));return this._restoreHashUsingAction(t,"undo")},_waitForHash:function(e){var t="#"+e;return new Promise(function(e){var n=function(){var i=t===decodeURIComponent(window.location.hash);if(i){window.removeEventListener("hashchange",n);e()}};window.addEventListener("hashchange",n)})},_handleDirtyStateUserConfirm:function(){t.debug(`${Y} Interaction Start`,"_handleDirtyStateUserConfirm",G);const e=u.notifyAsyncStep();if(window.confirm(D.i18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);if(b.isBackNavigation()===true){b.resetBackNavigationFlag()}t.debug(`${Y} Interaction End`,"_handleDirtyStateUserConfirm",G);e();O=true;return true}t.debug(`${Y} Interaction End`,"_handleDirtyStateUserConfirm",G);e();return false},_restoreHashUsingAction:function(e,t){var n=this.oShellNavigation.wasHistoryEntryReplaced();var i=this._getRestoreHashStrategy(n,t);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(i,e)},_getRestoreHashStrategy:function(e,t){if(e){return{strategy:"replaceHash",stepCount:0}}var n;var i=d.getInstance().getHistoryStateOffset();if(i===undefined||i>=0){i=1}else if(i<0){i=-1}if(t==="undo"){if(i<0){n="historyForward"}else{n="historyBack"}this.sLastUndoStrategy=n}else{switch(this.sLastUndoStrategy){case"historyBack":n="historyForward";break;case"historyForward":n="historyBack";break;default:n="replaceHash"}}return{strategy:n,stepCount:1}},_restoreHash:function(e,t){var n={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:""};switch(e.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(e.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(e.stepCount);break;case"replaceHash":this.bEnableHashChange=false;v.replaceHash(t);break;default:throw new Error("Cannot execute unknown navigation strategy")}return n},_setEnableHashChange:function(e){this.bEnableHashChange=e},_logRecentActivity:async function(e){if(!this.oInitialEnableTrackingPromise){if(_.last("/core/shell/model/enableTrackingActivity")!==undefined){this.oInitialEnableTrackingPromise=Promise.resolve()}else{this.oInitialEnableTrackingPromise=new Promise(function(e){_.once("/core/shell/model/enableTrackingActivity").do(e)})}}return this.oInitialEnableTrackingPromise.then(function(){if(_.last("/core/shell/model/enableTrackingActivity")){return new Promise(function(t,n){E.addActivity(e).done(t).fail(n)})}t.warning("Tracking is not enabled",null,"sap.ushell.renderer.Shell.controller");return Promise.reject()})},doHashChange:function(e,n,i,a,o){t.debug(`${Y} Interaction Start`,"doHashChange",G);const r=u.notifyAsyncStep();f.start("FLP:ShellController.doHashChange","doHashChange","FLP");k.setPerformanceMark("FLP-ShellController-doHashChange-begin");A.emit("trackHashChange",e);var l=s.byId("sapUshellDashboardPage");if(l){l.setBlocked(true);l.setBusy(true)}return this._doHashChange(this,e,n,i,a,o).then(function(){f.end("FLP:ShellController.doHashChange");t.debug(`${Y} Interaction End`,"doHashChange",G);r()},function(){f.end("FLP:ShellController.doHashChange");A.emit("doHashChangeError",Date.now());if(l){l.setBlocked(false);l.setBusy(false)}t.debug(`${Y} Interaction End`,"doHashChange",G);r()})},_doHashChange:function(e,t,n,i,a,o){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var r;if(!this.bEnableHashChange){this.bEnableHashChange=true;return jQuery.when()}if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;return jQuery.when()}if(o){e.hashChangeFailure(e.history.getHistoryLength(),o.message,null,"sap.ushell.renderer.Shell.controller",false);return jQuery.when()}var l=new jQuery.Deferred;var c=e.history.getHistoryLength();var h=e.fixShellHash(t);var d=e.fixShellHash(i);e.history.hashChange(h,i);e.currentAppBeforeNav=E.getCurrentApplication();e._resolveHashFragment(h).then(function(t,o){var p=o?o.semanticObject+"-"+o.action:"";var g=e._getConfig();var u=!!(t&&t.componentHandle);var v=t&&t.ui5ComponentName;t=e._calculateNavigationMode(t);if(e.currentAppBeforeNav){S.storeAppExtensions()}e._handleEarlyNavigation(h,n,t).then(function(m){if(m!==true){if(g&&g.applications&&g.applications[p]){t.applicationConfiguration=g.applications[p]}r=S.getInMemoryInstance(p,h,n,i);if(r.isInstanceSupported){e._initiateApplication(t,h,o,c,n,d,a);l.resolve();return}if(u||!v){var C=new jQuery.Deferred;if((t.applicationType==="URL"||k.isSAPLegacyApplicationType(t.applicationType))&&r.isInstanceSupported===false&&r.appId){S.destroyApplication(r.appId,r.container,C)}else{C.resolve()}C.done(function(){e._initiateApplication(t,h,o,c,n,d,a);l.resolve()});return}S.destroyApplication(r.appId,r.container);S.removeApplication(p);E.setApplicationInInitMode();s.getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:v});f.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){S.createComponent(t,o).done(function(){f.end("FLP:ShellController.UI5createComponent");e._initiateApplication(t,h,o,c,n,d,a)}).fail(function(t){var n=D.i18n.getText("cannot_load_ui5_component_details",[h]);var i="Failed to load UI5 component for navigation intent "+h;E.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(c,{title:D.i18n.getText("error"),message:D.i18n.getText("failed_to_open_ui5_component"),technicalMessage:i},{info:n,technicalMessage:t.message+"\n"+t.stack},"sap.ushell.renderer.Shell.controller",false)})})}l.resolve()})},function(t){var n=D.i18n.getText("cannot_resolve_navigation_target_details",[h]);var i="Failed to resolve navigation target: "+h+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(c,{title:D.i18n.getText("error"),message:D.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:i},{info:n,fixedShellHash:h,technicalMessage:t},"sap.ushell.renderer.Shell.controller",false);l.reject(i)});return l.promise()},_handleEarlyNavigation:function(e,n,i){var o=this;var r;return new Promise(function(l){o._openAppViaNWBC(i).then(function(c){if(c===true){i.sFixedShellHash=e;o.logOpenAppAction(i,n).catch(()=>{t.info("NWBC application was not logged.",undefined,"sap.ushell.renderer.Shell.controller")});r=s.byId("sapUshellDashboardPage");if(r){r.setBlocked(false);r.setBusy(false)}l(true);return}var h=i&&i.navigationMode===q.newWindow;if(h){i.sFixedShellHash=e;o.logOpenAppAction(i,n).catch(()=>{t.info("Application in new window was not logged.",undefined,"sap.ushell.renderer.Shell.controller")});sap.ui.require(["sap/ushell/components/container/ApplicationContainer"],function(e){i.url=e.prototype._checkNwbcUrlAdjustment(undefined,i.applicationType,i.url,true);o._openAppInNewWindowAndRestore(i);r=s.byId("sapUshellDashboardPage");if(r){r.setBlocked(false);r.setBusy(false)}l(true)});return}if(a&&x){a.closeAllDialogs();a.closeAllPopovers()}x=true;if(_.last("/core/shell/model/migrationConfig")){X.migrationConfig=false;o.getModel().setProperty("/migrationConfig",false);if(i&&e==="#"){X.rootIntent=""}else if(e==="#"){window.setTimeout(function(){window.hasher.setHash(X.rootIntent)},0);l(true);return}}l(false);return})})},_initiateApplication:function(e,n,i,a,o,r){f.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var s=E.getMetadata(e);var l=_.last("/core/extension/SupportTicket");var c;if(s.title){window.document.title=s.title}else{t.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined")}if(l){window.setTimeout(function(){H.activate()},0)}try{c=this.oShellNavigation.isInitialNavigation();this.navigate(i,n,s,e,r)}catch(e){if(e.stack){t.error("Application initialization (Intent: \n"+n+"\n failed due to an Exception:\n"+e.stack)}this.oShellNavigation.setIsInitialNavigation(c);this.hashChangeFailure(a,e.name,e.message,s?s.title:"",false)}f.end("FLP:ShellController._initiateApplication")},_resolveHashFragment:function(e){f.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var t=this.oURLParsing.parseShellHash(e);var n=new jQuery.Deferred;var i=this._getConfig();if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(e){n.resolve(e.resolvedHashFragment,t);delete window["sap-ushell-async-libs-promise-directstart"]},function(e){n.reject(e);delete window["sap-ushell-async-libs-promise-directstart"]});return n.promise()}sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(a){a.resolveHashFragment(e).done(function(e){E.setCurrentApplication(e);if(t&&t.semanticObject+"-"+t.action===i.rootIntent){e.navigationMode="embedded"}f.end("FLP:ShellController._resolveHashFragment");k.setPerformanceMark("FLP-ShellController-resolveHashFragment-end");n.resolve(e,t)}).fail(function(e){n.reject(e)})});return n.promise()},_calculateNavigationMode:function(e){if(!e){return undefined}var t=e.navigationMode;if(t===q.newWindowThenEmbedded){if(k.isColdStart()||d.getInstance().getDirection()===M.Backwards){e.navigationMode=q.embedded}else{e.navigationMode=q.newWindow;if(!k.isNativeWebGuiNavigation(e)){e.url=this._getCurrentLocationHash()}}return e}if(t===q.newWindow&&k.isColdStart()){if(this._hasAppCapabilitiesNavigationMode(e)&&e.appCapabilities.navigationMode===q.embedded){e.navigationMode=q.embedded;return e}e.navigationMode=q.replace;return e}if(t===q.newWindow&&this._hasAppCapabilitiesNavigationMode(e)&&e.appCapabilities.navigationMode===q.embedded){e.url=this._getCurrentLocationHash()}return e},_hasAppCapabilitiesNavigationMode:function(e){return k.isPlainObject(e.appCapabilities)&&e.appCapabilities.hasOwnProperty("navigationMode")},_usesNavigationRedirect:function(e){if(!e){return(new jQuery.Deferred).reject().promise()}var n=this;var i=e.getInstance({});if(i&&typeof i.navigationRedirect==="function"){var a=new jQuery.Deferred;var o=i.navigationRedirect();if(o&&typeof o.then==="function"){o.then(function(e){t.warning("Performing navigation redirect to hash "+e);i.destroy();n.history.pop();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toExternal({target:{shellHash:e}},undefined,false);a.resolve(true)})},function(){a.reject()});return a.promise()}}return(new jQuery.Deferred).reject().promise()},navigate:function(e,n,a,o,r){f.start("FLP:ShellController.navigate","navigate","FLP");var s=i(o)?o.navigationMode:null;var l=this;if(s===null){if(k.isColdStart()){window.hasher.setHash("");return}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve()}o=this._calculateNavigationMode(o);s=i(o)?o.navigationMode:null;if(!s){t.error("Mandatory member 'navigationMode' is missing in the resolution result! Temporarily set to 'embedded' for further processing...","sap.ushell.renderer.Shell.controller");s="embedded"}if(s===q.embedded){if(!k.isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false)}var c=this._usesNavigationRedirect(o.componentHandle);var h=new Promise(function(t){c.then(null,function(){l._handleEmbeddedNavMode(n,e,a,o,r).then(function(){A.emit("CloseFesrRecord",{time:Date.now(),technicalName:a.technicalName});t()})});f.end("FLP:ShellController.navigate")});return h}if(s===q.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(o.url);return Promise.resolve()}if(s===q.newWindow){this._openAppInNewWindowAndRestore(o);return Promise.resolve()}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderer.Shell.controller",false);return Promise.resolve()},_openAppViaNWBC:function(e){var n=this;return new Promise(function(i){var a;if(e&&(k.isNativeWebGuiNavigation(e)||e.nativeNWBCNavigation)){a=true}else{a=false}if(a===false){i(false);return}var o=k.getPrivateEpcm();var r=j[e.navigationMode];var l;var c;if(k.hasNavigationModeCapability()){c=r||j[q.embedded]}var h=n._appendUserIdToUrl("sap-user",e.url).then(async function(t){l=await k.appendSapShellParam(t);return new Promise(function(t){try{var n=e.applicationType;var i=e.appCapabilities&&e.appCapabilities.appFrameworkId;var a={};var o=[];var r;var s=function(){a["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);a["system-alias"]=e.systemAlias;return[{name:"sap-flp-params",value:JSON.stringify(a)}]};var c=function e(t,n){var i=[];var a=function(e,a){if(t.indexOf(e+"=")>0){var o=new RegExp("(?:"+e+"=)([^&/]+)").exec(t);if(o&&o.length===2){i.push([o[1]]);n.push(a)}}};a("sap-iapp-state","sap-iapp-state-data");a("sap-xapp-state","sap-xapp-state-data");a("sap-xapp-state-data","sap-xapp-state-data");a("sap-intent-param","sap-intent-param-data");return i};if(k.isSAPLegacyApplicationType(n,i)){sap.ushell.Container.getServiceAsync("Navigation").then(function(e){r=c(l,o);if(r.length>0){e.getAppStateData(r).then(function(e){o.forEach(function(t,n){if(e[n][0]){a[t]=e[n][0]}});t(s())},function(){t()})}else{t(s())}})}else{t()}}catch(e){t()}})});h.then(function(a){try{s.getEventBus().publish("launchpad","appOpening",e);if(!o.doNavigate(l,c,undefined,undefined,undefined,undefined,undefined,a)){i(false);return}s.getEventBus().publish("sap.ushell","appOpened",e);n._restoreAfterNwbcNavigation(e).then(function(){if(n._oAppLifeCycleService.getCurrentApplication()&&n._oAppLifeCycleService.getCurrentApplication().homePage){n._setMenuVisible(true)}i(true)})}catch(a){if(a.stack){t.error("Application initialization failed due to an Exception:\n"+a.stack)}n.hashChangeFailure(n.history.getHistoryLength(),a.name,a.message,e.text,false);i(false)}})})},_restoreAfterNwbcNavigation:function(e){if(this.history.getHistoryLength()===1&&!this._oAppLifeCycleService.getCurrentApplication()){return sap.ushell.Container.getServiceAsync("Navigation").then(function(e){e.navigate({target:{shellHash:"#"},writeHistory:false})})}this._restorePreviousHashAfterOpenNewWindow(e);return Promise.resolve()},_appendUserIdToUrl:function(e,t){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(n){var i=n.getUser().getId();var a=t.indexOf("?")>=0?"&":"?";return t+a+e+"="+i})},_restorePreviousHashAfterOpenNewWindow:function(e){this.history.pop();var t=e.componentHandle&&e.componentHandle.getInstance&&e.componentHandle.getInstance({});if(t){t.destroy()}this._resumeAppRouterIgnoringCurrentHash();this.bRestorePreviousHash=true;this._windowHistoryBack(1);E.setCurrentApplication(this.currentAppBeforeNav);A.emit("openedAppInNewWindow",Date.now())},_openAppInNewWindowAndRestore:function(e){s.getEventBus().publish("launchpad","appOpening",e);this._openAppNewWindow(e.url);s.getEventBus().publish("sap.ushell","appOpened",e);this._restorePreviousHashAfterOpenNewWindow(e)},_handleEmbeddedNavMode:function(e,t,n,i,a){f.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var o=this,r=this._getConfig();this.resetShellUIServiceHandlers();S.getAppMeta().setAppIcons();var s="-"+t.semanticObject+"-"+t.action;var l=e==="#"||r.rootIntent&&k.getBasicHash(r.rootIntent)===t.semanticObject+"-"+t.action;var c=t?t.semanticObject+"-"+t.action:"";S.switchViewState(S.shellElements().calculateElementsState(l?"home":"app",i.applicationType,r.appState,i.explicitNavMode),undefined,s);if(l){S.getShellUIService().setBackNavigation()}i.sFixedShellHash=e;var h=S.handleControl(c,s,t,i,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e,a);if(this.currentAppBeforeNav){if(k.isTRApplicationType(this.currentAppBeforeNav.applicationType,L.get("appCapabilities.appFrameworkId",this.currentAppBeforeNav))&&!k.isTRApplicationType(i.applicationType)){sap.ui.require(["sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/components/applicationIntegration/application/WebGUIStatefulHandler"],function(e,t){var n=e.getBlueBoxByUrl(o.currentAppBeforeNav.url);if(n&&n.getStatefulType()===e.STATEFUL_TYPES.GUI_V1){t.guiStatefulCloseCurrentApp(n)}})}}f.end("FLP:ShellController._handleEmbeddedNavMode");return h},_centerViewPort:function(){this.oViewPortContainer.switchState("Center")},_isShellHomeIntent:function(e){return e==="#"||e===X.rootIntent},getWrappedApplicationWithMoreStrictnessInIntention:function(e,n,i,a,o,r,l){var c=this;if(p.system.desktop){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],function(e){var t=s.byId("shellAppTitle");if(t&&_.last("/core/shell/model/currentState/stateName")==="app"){var n=t.getFocusDomRef();if(n){e.sendFocusBackToShell(n.getAttribute("id"))}}})}window.setTimeout(function(){window.setTimeout(function(){c.readNavigationEnd()},600);s.getEventBus().publish("launchpad","appOpening",a);t.info("app is being opened")},0);if(X.applications){a.applicationConfiguration=X.applications[e]}var h=S.getAppContainer(o,a,k.isColdStart(),i,l);var d=false;if(h.getIsFetchedFromCache&&h.getIsFetchedFromCache()){d=true}if(!d){S.publishNavigationStateEvents(h,a,this.onAppAfterRendering.bind(this,a));if(k.isSAPLegacyApplicationType(h.getApplicationType(),h.getFrameworkId())){h.addStyleClass("sapUShellApplicationContainerShiftedIframe")}if(!r){h.addStyleClass("sapUShellApplicationContainerLimitedWidth")}if(this._isFloatingContainerDocked()&&window.matchMedia("(min-width: 106.4rem)").matches){h.addStyleClass("sapUShellDockingContainer");h.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}else if(this._isFloatingContainerDocked()){h.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}h.toggleStyleClass("sapUshellDefaultBackground",!n.hideLightBackground);S.getAppMeta()._applyContentDensityByPriority();S.addControl(h)}k.setPerformanceMark("FLP - addAppContainer");f.end("FLP:ShellController.getWrappedApplication");return h},resetShellUIServiceHandlers:function(){S.getAppMeta().resetShellUIServiceHandlers();S.setBackNavigationChanged(false)},onAppAfterRendering:function(e){var n=S.getShellUIService();window.setTimeout(function(){s.getEventBus().publish("sap.ushell","appOpened",e);t.info("app was opened")},0);var i=S._publicEventDataFromResolutionResult(e);A.emit("AppRendered",i,true);U.publishExternalEvent("appOpened",i);k.setPerformanceMark("FLP.appOpened");if(n){S.initAppMetaParams()}W.updateStateProperty("application/icon",S.getAppMeta().getAppIcon(),true)},_saveHomePageComponent:function(){if(this.oHomeApp){return}var e=this;var t="sap.ushell";var n=function(i,a,o){e.oHomeApp=o.component;s.getEventBus().unsubscribe(t,"appComponentLoaded",n)};s.getEventBus().subscribe(t,"appComponentLoaded",n)},hashChangeFailure:function(e,t,n,i,a){var o=s.byId("sapUshellDashboardPage");if(o){o.setBlocked(false);o.setBusy(false)}if(k.isPlainObject(t)){this.reportError(t.technicalMessage,n.technicalMessage,i);sap.ushell.Container.getServiceAsync("Message").then(function(e){e.show(e.Type.ERROR,t.message,{title:t.title,details:n})})}else{this.reportError(t,n,i);this.delayedMessageError(D.i18n.getText("fail_to_start_app_try_later"))}x=false;this._resumeAppRouterIgnoringCurrentHash();if(e===0){window.hasher.setHash("")}else if(new URLSearchParams(window.location.search).get("bFallbackToShellHome")){window.hasher.setHash("")}else{this.bEnableHashChange=a;sap.ushell.Container.setDirtyFlag(O);this._windowHistoryBack(1)}},reportError:function(e,n,i){t.error(e,n,i)},delayedMessageError:function(e){window.setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(e)})}},0)},fixShellHash:function(e){if(!e){e="#"}else if(e.charAt(0)!=="#"){e="#"+e}return e},_openAppNewWindow:function(e){var t=N.openURL(e);if(!t&&!this._checkWindowLocationSearch("workzone-mobile-app=true")){var n=D.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(n)}},_checkWindowLocationSearch:function(e){return window.location.search.indexOf(e)>-1},_windowHistoryBack:function(e){window.history.go(-1*e)},_windowHistoryForward:function(e){window.history.go(e)},_changeWindowLocation:function(e){window.location.href=e},_setMenuVisible:function(e){var t=document.getElementById(R.NavigationBar);if(!t){return}e=e||_.last("/core/menu/enabled")&&_.last("/core/menu/visibleInAllStates");t.classList.toggle("sapUshellShellHidden",!e)},onAppOpened:function(e,n,i){if(i.targetNavigationMode!=="explace"&&i.targetNavigationMode!=="frameless"){this._setMenuVisible(false)}var a=this.oShellNavigation.hashChanger.getAppHash();var o=a?"&/"+a:null;this.logOpenAppAction(i,o).catch(()=>{t.info("Opened application was not logged.",undefined,"sap.ushell.renderer.Shell.controller")});this._notifyUITracer(i)},externalSearchTriggered:function(e,t,n){_.emit("/core/shell/model/searchTerm",n.searchTerm);n.query=n.searchTerm},onBeforeNavigate:function(e){var t=e.getParameter("to");var n=this.getOwnerComponent();var i=t===n.byId("Shell-home-component-container");var a=t===n.byId("pages-component-container");var o=t===n.byId("homeApp-component-container");var r=t===n.byId("workPageRuntime-component-container");var s=t===n.byId("runtimeSwitcher-component-container");var l=i||a||o||r||s;S.onBeforeNavigate(e.getParameter("fromId"),e.getParameter("from"),e.getParameter("toId"),e.getParameter("to"));this._setMenuVisible(l)},onAfterNavigate:function(e){var t=e.mParameters?e.mParameters.toId:undefined;var n=s.byId("sapUshellDashboardPage");if(n){n.setBlocked(false);n.setBusy(false)}S.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),t,e.getParameter("to"));s.getEventBus().publish("sap.ushell","navigated",{})},logOpenAppAction:async function(e,t){const n=_.last("/core/shell/enableRecentActivity")&&_.last("/core/shell/enableRecentActivityLogging");if(!n){return Promise.reject()}const i=E.getMetadata(e);const a=e.sFixedShellHash||this._getCurrentLocationHash();const o={title:i.title,appType:B.APP,url:t?a+t:a};const r=await sap.ushell.Container.getServiceAsync("URLParsing");const s=r.parseShellHash(a);if(s){o.appId="#"+r.constructShellHash({semanticObject:s.semanticObject,action:s.action})}else{o.appId=a}if(a&&a.indexOf("#Action-search")===-1&&a.indexOf("#Shell-startIntent")===-1){return new Promise((e,t)=>{window.setTimeout(()=>{this._logRecentActivity(o).then(e).catch(t)},1500)})}return Promise.reject()},_notifyUITracer:function(e){try{var n=e.ui5ComponentName;if(e.reservedParameters){n=e.reservedParameters["sap-fiori-id"]||e.reservedParameters["sap-ui-app-id-hint"]}A.emit("UITracer.trace",{reason:"NavigateApp",source:"Intent",data:{applicationId:n||"",applicationType:e.applicationType||"",hash:e.sFixedShellHash||"",targetNavigationMode:e.targetNavigationMode||"",providerId:e.contentProviderId||"",targetUrl:e.url||""}})}catch(e){t.warning("Could not emit UITracer.trace event",e,"sap.ushell.renderer.Shell.controller")}},_logSearchActivity:function(){if(_.last("/core/shell/enableRecentActivity")&&_.last("/core/shell/enableRecentActivityLogging")){var e="";try{e=s.byId("searchFieldInShell-input").getModel().getLastSearchTerm()}catch(e){t.error("Shell: last search term is not available to log a recent activity")}this._logRecentActivity({appId:"#Action-search",appType:B.SEARCH,title:e,url:"#"+window.hasher.getHash()}).catch(()=>{t.info("Search activity was not logged.",undefined,"sap.ushell.renderer.Shell.controller")})}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=D.i18n.getText("loadingComplete");window.setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML=""},0)}},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt()}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(t){t.init(D.i18n.getText("usageAnalytics"),D.i18n.getText("i_agree"),D.i18n.getText("i_disagree"),D.i18n.getText("remind_me_later"));A.emit("StepDone",e.stepName)},function(){A.emit("StepFailed",e.stepName)})},_onCoreResourcesComplementLoaded:function(){k.setPerformanceMark("SchedulingAgent-StartOfFlow");var e=this.getView();if(e){e.createPostCoreExtControls()}C._initialize();A.emit("startScheduler")},_loadRendererExtensionPlugins:function(e){var t=new URLSearchParams(window.location.search);var n=t.get("sap-ushell-xx-pluginmode")==="delayed";function i(t){function i(){A.emit("StepDone",e.stepName)}function a(){t.loadPlugins("RendererExtensions").always(i)}if(n){window.setTimeout(a,5e3)}else{a()}}sap.ushell.Container.getServiceAsync("PluginManager").then(i.bind(this))},_loadWarmupPlugins:function(e){sap.ushell.Container.getServiceAsync("PluginManager").then(function(n){n.loadPlugins("AppWarmup").always(function(){t.debug("WARMUP plugins loaded",null,"sap.ushell.renderer.Shell");A.emit("StepDone",e.stepName);k.setPerformanceMark("SchedulingAgent-EndOfFlow");k.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow")})})},_loadCoreExt:function(){f.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){A.emit("loadCoreResourcesComplement",Date.now())})},getCurrentViewportState:function(){return _.last("/core/shell/model/currentViewPortState")},_activateFloatingUIActions:function(e){if(e<417){this.oFloatingUIActions.disable()}else{this.oFloatingUIActions.enable()}},setFloatingContainerDragSelector:function(e){if(!this._oFloatingContainerPromise){this._oFloatingContainerPromise=this.getView().createFloatingContainer()}this._oFloatingContainerPromise.then(function(){var n=document.querySelector(e);if(n){n.classList.add("sapUshellFloatingContainerSelector")}else{t.error("setFloatingContainerDragSelector could not find the element","sap.ushell.renderer.Shell.controller")}sap.ui.require(["sap/ushell/UIActions"],function(n){if(!this.oFloatingUIActions){this.oFloatingUIActions=new n({containerSelector:".sapUiBody",wrapperSelector:".sapUshellFloatingContainerWrapper",draggableSelector:".sapUshellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerDrag.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onFloatingContainerDragStart.bind(this),onDragEndUIHandler:this._onFloatingContainerDragEnd.bind(this),dragAndScrollCallback:this._onFloatingContainerDrag.bind(this),switchModeDelay:1e3,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:t.getLevel()>=t.Level.DEBUG})}else{this.oFloatingUIActions.elementsToCapture=jQuery(e)}this._activateFloatingUIActions(jQuery(window).width());var i;addEventListener("resize",function(){clearTimeout(i);i=window.setTimeout(this._activateFloatingUIActions(jQuery(window).width()),300)}.bind(this))}.bind(this))}.bind(this))},_onFloatingContainerDrag:function(e){f.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");if(!this._isFloatingContainerDockSupported()){f.end("FLP:Shell.controller._doDock");return}var t=jQuery(window).width();if(e){e.docked={};var n=e.docked;if(e.moveX>=t-64){n.dockPos="right";n.setIsDockingAreaOpen=true;this._handleDockingPreview(e)}else if(e.moveX<64){n.dockPos="left";n.setIsDockingAreaOpen=true;this._handleDockingPreview(e)}else{if(this._isDockingAreaOpen()){this._handleDockingPreview(false)}if(this._isFloatingContainerDocked()){this._handleDockingPreview(false);this._undockFloatingContainer()}}}f.end("FLP:Shell.controller._doDock")},_isFloatingContainerDockSupported:function(){var e=p.media.getCurrentRange(p.media.RANGESETS.SAP_STANDARD);return e.name==="Desktop"},_finishDoDock:function(e){this._handleDockingPreview(false);this._saveFloatingContainerState("docked:"+e.dockPos);this._moveFloatingContainerIntoDock(e);const t={isDocked:(this.getFloatingContainerState()||"").startsWith("docked"),isVisible:this.getFloatingContainerVisibility()};s.getEventBus().publish("launchpad","shellFloatingContainerIsDocked",t)},_expandFloatingContainerToDock:function(){var e=document.getElementById(R.FloatingContainer);e.style.height="100%";s.byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight")},_shrinkFloatingContainerToDragUI:function(){var e=document.getElementById(R.FloatingContainer);e.classList.remove("sapUshellContainerDocked");s.byId("shell-floatingContainer").removeStyleClass("sapUshellShellFloatingContainerFullHeight");jQuery(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight")},_emitFloatingContainerResizeEvent:function(){var e=s.byId("viewPortContainer");if(e){e._handleSizeChange()}window.setTimeout(function(){s.getEventBus().publish("launchpad","appFinderWithDocking")},300)},_undockFloatingContainer:function(){if(this._isFloatingContainerDocked()){this._saveFloatingContainerState("floating");this._shrinkFloatingContainerToDragUI();this._removeFloatingContainerFromDock();this._startFloatingContainerAnimation(false)}},_handleFloatingContainerUndockOnResize:function(){this._undockFloatingContainer();const e={isDocked:(this.getFloatingContainerState()||"").startsWith("docked"),isVisible:this.getFloatingContainerVisibility()};s.getEventBus().publish("launchpad","shellFloatingContainerIsUnDockedOnResize",e)},_onFloatingContainerDragStart:function(){f.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");this._undockFloatingContainer();const e={isDocked:(this.getFloatingContainerState()||"").startsWith("docked"),isVisible:this.getFloatingContainerVisibility()};s.getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked",e);f.end("FLP:Shell.controller._onDragStartUI")},_startFloatingContainerAnimation:function(e){return new Promise(function(t){this._clearFloatingContainerAnimation();var n=Array.from(document.getElementsByClassName("sapUshellFloatingContainerWrapper"));n.forEach(function(n){if(e){n.classList.add("sapUshellContainerDockedExtendCoPilot");this._emitFloatingContainerResizeEvent()}else{return}["webkitAnimationEnd","onanimationend","msAnimationEnd","animationend"].forEach(function(e){n.addEventListener(e,function(){this._clearFloatingContainerAnimation();t()}.bind(this),{once:true})}.bind(this))}.bind(this))}.bind(this))},_clearFloatingContainerAnimation:function(){var e=Array.from(document.getElementsByClassName("sapUshellFloatingContainerWrapper"));e.forEach(function(e){e.classList.remove("sapUshellContainerDockedExtendCoPilot");e.classList.remove("sapUshellContainerDockedMinimizeCoPilot")})},_handleDockingPreview:function(e){var t=e?e.docked:false;var n=t?t.setIsDockingAreaOpen:false;if(n&&jQuery("#DockingAreaDiv").length===0){var i=r.getRTL();if(t.dockPos==="right"&&e.clone&&!i||t.dockPos==="left"&&e.clone&&i){jQuery('<div id="DockingAreaDiv" class="sapUshellShellDisplayDockingAreaRight">').appendTo(e.clone.parentElement)}else if(t.dockPos==="left"&&e.clone&&!i||t.dockPos==="right"&&e.clone&&i){jQuery('<div id="DockingAreaDiv" class="sapUshellShellDisplayDockingAreaLeft">').appendTo(e.clone.parentElement)}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=t.dockPos}else if(!n){window.setTimeout(function(){jQuery(".sapUshellShellDisplayDockingAreaRight").remove();jQuery(".sapUshellShellDisplayDockingAreaLeft").remove()},150)}},_isFloatingContainerDocked:function(){return document.getElementsByClassName("sapUshellContainerDocked").length!==0},_isDockingAreaOpen:function(){return document.getElementsByClassName("sapUshellShellDisplayDockingAreaRight").length!==0||document.getElementsByClassName("sapUshellShellDisplayDockingAreaLeft").length!==0},_moveFloatingContainerIntoDock:function(e){var t=r.getRTL();var n=document.getElementById(R.FloatingContainer);n.classList.add("sapUshellContainerDocked");var i;if(e.dockPos==="left"&&!t||e.dockPos==="right"&&t){i=R.FloatingContainerDockStart}else{i=R.FloatingContainerDockEnd}if(e.dockPos==="left"){n.classList.add("sapUshellContainerDockedStart");n.classList.remove("sapUshellContainerDockedEnd")}else{n.classList.remove("sapUshellContainerDockedStart");n.classList.add("sapUshellContainerDockedEnd")}var a=document.getElementById(i);a.appendChild(n);this._expandFloatingContainerToDock();this._emitFloatingContainerResizeEvent()},_removeFloatingContainerFromDock:function(){var e=document.getElementById(R.FloatingContainer);document.body.appendChild(e);e.classList.remove("sapUshellContainerDocked");e.classList.remove("sapUshellContainerDockedStart");e.classList.remove("sapUshellContainerDockedEnd");this._emitFloatingContainerResizeEvent()},_onFloatingContainerDragEnd:function(e){var t=jQuery(window).width();if(this._isFloatingContainerDocked()){if(e&&(e.clientX>=t-64||e.clientX<64)){this._startFloatingContainerAnimation(false)}}else{}},_handleFloatingContainerDrop:function(e,t,n){f.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var i=t.firstChild?s.byId(t.firstChild.id):undefined;var a=new m(m.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");var o=jQuery(window).width();var r=jQuery(window).height();var l=n.deltaX/o;var c=-n.deltaY/r;var h=t.style.visibility;var d=t.style.display;var p=parseFloat(t.style.left.replace("%",""));var g=parseFloat(t.style.top.replace("%",""));if(typeof p==="number"){l=p+100*n.deltaX/o}if(typeof g==="number"){c=g+100*n.deltaY/r}if(this._isDockingAreaOpen()){c=0}t.style.left=l+"%";t.style.top=c+"%";t.style.position="absolute";t.style.display="block";t.visibility=h;t.display=d;a.put("floatingContainerStyle",t.style.cssText);if(i){i.handleDrop();if(n.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(n.clone.oDockedProp)}}f.end("FLP:Shell.controller.handleFloatingContainerDrop")},_handleFloatingContainerDrag:function(e,t){f.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");t.style.display="none";if(window.getSelection){var n=window.getSelection();try{n.removeAllRanges()}catch(e){}}f.end("FLP:Shell.controller._handleFloatingContainerUIStart")},getFloatingContainerState:function(){var e=new m(m.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var t="floating";if(e!==null){t=e.get("lastState");if(t===null){t="floating"}}return t},_saveFloatingContainerState:function(e){var t=new m(m.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");t.put("lastState",e)},setFloatingContainerVisibility:function(e){if(!this._oFloatingContainerPromise){this._oFloatingContainerPromise=this.getView().createFloatingContainer()}this.getView().getModel("helper").setProperty("/shell/floatingContainerVisible",e);return this._oFloatingContainerPromise.then(function(){var t=this.getFloatingContainerState()||"";if(t==="floating"){}else if(t.indexOf("docked")!==-1){if(e){if(this._isFloatingContainerDockSupported()){var n=t.indexOf("right")!==-1?"right":"left";this._moveFloatingContainerIntoDock({dockPos:n});this._startFloatingContainerAnimation(true)}else{this._saveFloatingContainerState("floating")}}else{this._startFloatingContainerAnimation(false)}this._emitFloatingContainerResizeEvent()}}.bind(this))},getFloatingContainerVisibility:function(){return this.getView().getModel("helper").getProperty("/shell/floatingContainerVisible")},setFloatingContainerContent:function(e,t,n,i){W.setFloatingContainerContent(e,t,n,i)},getRightFloatingContainerVisibility:function(){var e=this.getView().getRightFloatingContainer();return e&&e.getVisible()},setHeaderTitle:function(e){w.updateStates({propertyName:"title",value:e||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false})},setNavigationBar:function(e){e.placeAt(R.NavigationBar,"only");this.addDanglingControl(e)},setShellShapes:function(e){if(e.placeAt){e.placeAt(R.ShellShapes,"only");this.addDanglingControl(e)}else if(e instanceof Node){document.getElementById(R.ShellShapes).appendChild(e)}},setFooter:function(e){var n=this.getView();var i=n.getModel("helper");if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid")}var a=i.getProperty("/shell/footerContent");if(a){t.warning("You can only set one footer. Replacing existing footer: "+a+", with the new footer: "+e.getId()+".")}i.setProperty("/shell/footerContent",e.getId());e.placeAt(R.Footer,"only");this.addDanglingControl(e);if(e._applyContextClassFor){e._applyContextClassFor("footer")}},getFooterId:function(){var e=this.getView();var t=e.getModel("helper");return t.getProperty("/shell/footerContent")},removeFooter:function(){var e=this.getView();var t=e.getModel("helper");var n=t.getProperty("/shell/footerContent");if(n){var i=s.byId(n);if(i&&i.destroy){i.destroy()}}t.setProperty("/shell/footerContent","")},addUserPreferencesEntry:function(e,t){this._validateUserPrefEntryConfiguration(e,t);this._updateUserPrefModel(e,t)},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e)},_validateUserPrefEntryConfiguration:function(e,t){if(!e||typeof e!=="object"){throw new Error("object oConfig was not provided")}if(!e.title){throw new Error("title was not provided")}if(!e.value){throw new Error("value was not provided")}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid")}else if(e.entryHelpID===""){throw new Error("entryHelpID should not be an empty string")}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid")}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid")}["onSave","content","onCancel"].forEach(function(t){if(e[t]&&typeof e[t]!=="function"){throw new Error(t+" type is  "+typeof e[t]+" but should be a function")}});if(t){[{name:"groupingId",type:"string"},{name:"groupingTabTitle",type:"string"},{name:"groupingTabHelpId",type:"string"}].forEach(function(t){if(!e[t.name]){throw new Error(t.name+" is missing")}else if(typeof e[t.name]!==t.type){throw new Error(t.name+" type is "+typeof e[t.name]+" but should be a "+t.type)}})}},_createSessionHandler:function(e){var t=this;var n=2e4;sap.ui.require(["sap/ushell/SessionHandler"],function(i){t.oSessionHandler=new i(S);t.oSessionHandler.initLogout();window.setTimeout(function(){t.oSessionHandler.init({sessionTimeoutReminderInMinutes:e.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:e.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:e.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:e.enableAutomaticSignout})},n)})},_getSessionHandler:function(){return this.oSessionHandler},_navBack:function(){this.setUserActionsMenuSelected(false);S.service().navigateBack()},_updateUserPrefModel:function(e,t){var n=this._getModelEntryFromEntryObject(e);var i=_.last("/core/userPreferences/entries")||[];if(t){n.groupingEnablement=true;n.groupingId=e.groupingId;n.groupingTabTitle=e.groupingTabTitle;n.groupingTabHelpId=e.groupingTabHelpId}i.push(n);i=this._reorderUserPrefEntries(i);_.emit("/core/userPreferences/entries",i)},_updateProfilingModel:function(e){var t=this._getModelEntryFromEntryObject(e);var n=_.last("/core/userPreferences/profiling")||[];n.push(t);_.emit("/core/userPreferences/profiling",n)},_getModelEntryFromEntryObject:function(e){return{id:k._getUid(),entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper}},_reorderUserPrefEntries:function(e){var t=[];var n=["userAccountEntry","themes","homepageEntry","spacesEntry","userActivitiesEntry","userProfiling","language","notificationsEntry","userDefaultEntry"];var i={};for(var a=e.length-1;a>=0;a--){if(n.indexOf(e[a].id)!==-1){var o=e.splice(a,1)[0];i[o.id]=o}}n.forEach(function(e){var n=i[e];if(n){t.push(n)}});return t.concat(e)},getModel:function(){return z},_getConfig:function(){return X||{}},_getPersData:function(e){var t=o.getOwnerComponentFor(this.getView());return sap.ushell.Container.getServiceAsync("PersonalizationV2").then(async function(n){var i={keyCategory:n.constants.keyCategory.FIXED_KEY,writeFrequency:n.constants.writeFrequency.LOW,clientStorageAllowed:true};var a=await n.getPersonalizer(e,i,t);return a.getPersData()})},_getCurrentLocationHash:function(){return window.location.hash},setUserActionsMenuSelected:function(e){A.emit("showUserActionsMenu",e)},getUserActionsMenuSelected:function(){return _.last("/core/shell/model/currentViewPortState")==="LeftCenter"},setNotificationsSelected:function(e){A.emit("showNotifications",e)},getNotificationsSelected:function(){return _.last("/core/shell/model/currentViewPortState")==="RightCenter"}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/Shell.view", ["sap/base/Log","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/core/mvc/View","sap/ui/core/mvc/XMLView","sap/ui/core/Fragment","sap/ui/core/Core","sap/ushell/renderer/ShellLayout","sap/ushell/renderer/Shell.controller"],function(e,t,n,i,a,o,l,r,s,h,d,u,g,c,p,f){"use strict";var y=p.LAYOUT_MAPPING;function S(e,t){return sap.ui.getCore().byId(t.getObject())}var v={Property:"Property",List:"List"};return d.extend("sap.ushell.renderer.Shell",{getControllerName:function(){return"sap.ushell.renderer.Shell"},waitForShellLayout:function(){if(!this._oShellLayoutPromise){this._oShellLayoutPromise=new Promise(function(e){this.getController().addDoable(o.once("ShellLayoutApplied").do(e))}.bind(this))}return this._oShellLayoutPromise},getShellModel:function(){return this.getViewData().shellModel},getHelperModel:function(){return this.getViewData().helperModel},getViewDataConfig:function(){var e=this.getViewData()||{};var t=e.config||{};return t},createContent:function(){this._allowUpToThreeActionInShellHeader();this.initBackgroundImage();var e=this.createShellHeader();this.setNavigationBarMinHeight();var t=this.createRendererRootView();this.setDisplayBlock(true);r.setPerformanceMark("FLP - Shell.view rendering started!");return Promise.all([t,e]).then(function(e){var t=e[0];this.initCanvasShapesManager();return t}.bind(this))},initBackgroundImage:function(){this.waitForShellLayout().then(function(){var e=document.getElementById(y.BackgroundImage);var t=["<div class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG sapContrastPlus'></div>","<div class='sapMShellBG sapUiGlobalBackgroundImage'></div>"].join("\n");e.insertAdjacentHTML("afterbegin",t)})},createRendererRootView:function(){var e=this.getController();return g.load({name:"sap.ushell.ui.RendererRootView",controller:e}).then(function(e){e.updateAggregation=this.updateShellAggregation;sap.ui.getCore().byId("viewPortContainer");return e}.bind(this))},createShellHeader:function(){var e=this.getViewDataConfig();var t=this.getShellModel();var a=s.createModel("/core/shellHeader",h);var o=new i;o.onInit();return g.load({name:"sap.ushell.ui.ShellHeader",controller:o}).then(function(i){i.updateAggregation=this.updateShellAggregation;n.init(e,o,t);if(e.appState==="embedded"){i.setNoLogo()}i.setModel(a);i.setModel(l.i18nModel,"i18n");this.addDanglingControl(i);this._oShellHeader=i;this.waitForShellLayout().then(function(){i.placeAt(y.ShellHeader,"only")})}.bind(this))},setNavigationBarMinHeight:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.isMenuEnabled()}).then(function(e){if(!e){return}this.waitForShellLayout().then(function(){var e=document.getElementById(y.NavigationBar);e.classList.add("sapUshellMenuBarHeight")})}.bind(this)).catch(function(t){e.info("Could not apply min-height of the navigationBar",t)})},createRightFloatingContainer:function(){this.addPendingInitialization(new Promise(function(e){sap.ui.require(["sap/ushell/ui/shell/RightFloatingContainer"],function(t){var n=new t({id:"right-floating-container",top:"2",hideItemsAfterPresentation:true,visible:"{/currentState/showRightFloatingContainer}",floatingContainerItems:{path:"/currentState/RightFloatingContainerItems",factory:S}});n.updateAggregation=this.updateShellAggregation;n.setModel(this.getShellModel());this.addDanglingControl(n);this._oRightFloatingContainer=n;e();this.waitForShellLayout().then(function(){n.placeAt(y.RightFloatingContainer,"only")})}.bind(this))}.bind(this)))},initCanvasShapesManager:function(){this.bindFactory({model:this.getShellModel(),factory:this.createCanvasShapesManager.bind(this),bindingPath:"/enableBackGroundShapes",bindingType:v.Property,valueCheck:function(e){return!!e}})},createCanvasShapesManager:function(){var e=setInterval(function(){if(c.isThemeApplied()){clearInterval(e);sap.ui.require(["sap/ushell/CanvasShapesManager"],function(e){e.drawShapes()})}},200)},createSubHeader:function(){sap.ui.require(["sap/ushell/ui/shell/SubHeader"],function(e){var t=new e({id:"subhdr",content:{path:"/currentState/subHeader",factory:S}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(y.SubHeader,"only")})}.bind(this))},createFloatingContainer:function(){return new Promise(function(e,n){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ui/util/Storage"],function(n,i){var o=new n({id:"shell-floatingContainer",visible:"{helper>/shell/floatingContainerVisible}",content:{path:"/currentState/floatingContainerContent",factory:S}});o.updateAggregation=this.updateShellAggregation;if(t.system.desktop){o.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}))}o.setModel(this.getShellModel());o.setModel(this.getHelperModel(),"helper");this.addDanglingControl(o);this.waitForShellLayout().then(function(){o.placeAt(y.FloatingContainer,"only");var t=new i(i.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");var n=document.getElementById(y.FloatingContainer);var a=!n.classList.contains("sapUshellFloatingContainerWrapper");var l=t.get("floatingContainerStyle");if(a&&!l){var r=jQuery(".sapUshellShellHeadItm").position()?jQuery(".sapUshellShellHeadItm").position().left:0;var s=(jQuery(window).width()-jQuery("#shell-floatingContainer").width()-r)*100/jQuery(window).width();var h=jQuery(".sapUshellShellHeader").height()*100/jQuery(window).height();n.style.left=s+"%";n.style.top=h+"%";n.style.position="absolute";t.put("floatingContainerStyle",n.style.cssText)}else if(l){n.style.cssText=l}n.classList.add("sapUshellFloatingContainerWrapper");e()})}.bind(this))}.bind(this))},createSidePane:function(){sap.ui.require(["sap/ushell/ui/shell/SidePane"],function(e){var t=new e({id:"shell-sidePane",visible:"{/currentState/showPane}",content:{path:"/currentState/paneContent",factory:S}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(y.SidePane,"only")})}.bind(this))},createToolArea:function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",visible:"{/currentState/toolAreaVisible}",toolAreaItems:{path:"/currentState/toolAreaItems",factory:S}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(y.ToolArea,"only")})}.bind(this))},createFloatingActions:function(){sap.ui.require(["sap/ushell/ui/shell/ShellFloatingActions"],function(e){var t=new e({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:S}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(y.FloatingActions,"only")})}.bind(this))},initAllMyAppsView:function(){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){if(e.isEnabled()){return this.createAllMyAppsView()}}.bind(this))},createAllMyAppsView:function(){return u.create({id:"allMyAppsView",viewName:"sap.ushell.renderer.allMyApps.AllMyApps"}).then(function(e){e.setModel(this.getShellModel());e.setModel(l.i18nModel,"i18n");e.addCustomData(new a({key:"aria-label",value:l.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.addDanglingControl(e);this.getShellHeader().getAppTitle().setAllMyApps(e)}.bind(this))},createPostCoreExtControls:function(){var e=this.getShellModel();sap.ui.require(["sap/ui/core/Popup"],function(e){e.setInitialZIndex(11)});this.bindFactory({model:e,factory:this.createRightFloatingContainer.bind(this),bindingPath:"/currentState/showRightFloatingContainer",bindingType:v.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSubHeader.bind(this),bindingPath:"/currentState/subHeader",bindingType:v.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createToolArea.bind(this),bindingPath:"/currentState/toolAreaVisible",bindingType:v.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSidePane.bind(this),bindingPath:"/currentState/showPane",bindingType:v.Property,valueCheck:function(e){return!!e}});(function(){this.bindFactory({model:e,factory:this.createFloatingActions.bind(this),bindingPath:"/currentState/floatingActions",bindingType:v.List,valueCheck:function(e){return!!e.length}})}).bind(this)();this.addPendingInitialization(this.initAllMyAppsView())},_allowUpToThreeActionInShellHeader:function(){var e=this.getViewDataConfig();if(Object.keys(e).length>3){var t=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"];var n=0;var i;for(var a=0;a<5;a++){i=t[a];if(n===3){e[i]=false}else if(e[i]){n++}}}},getShellHeader:function(){return this._oShellHeader},getRightFloatingContainer:function(){return this._oRightFloatingContainer},updateShellAggregation:function(e){var t=this.mBindingInfos[e];var n=this.getMetadata().getJSONKeys()[e];var i;this[n._sGetter]().forEach(function(e){this[n._sRemoveMutator](e)}.bind(this));t.binding.getContexts().forEach(function(e,a){i=t.factory(this.getId()+"-"+a,e)?t.factory(this.getId()+"-"+a,e).setBindingContext(e,t.model):"";this[n._sMutator](i)}.bind(this))},bindFactory:function(e){var t=e.model;var n=e.factory;var i=e.bindingPath;var a=e.bindingType;var o=e.valueCheck;var l=t.getProperty(i);if(o(l)){n()}else{var r;switch(a){case v.List:r=t.bindList(i);break;default:r=t.bindProperty(i)}this.addDanglingBinding(r);r.attachChange(function(){l=r.getModel().getProperty(r.getPath());if(o(l)){this.removeDanglingBinding(r);r.destroy();n()}},this)}},addDanglingBinding:function(e){this.getController().addDanglingBinding(e)},removeDanglingBinding:function(e){this.getController().removeDanglingBinding(e)},addDanglingControl:function(e){this.getController().addDanglingControl(e)},addPendingInitialization:function(e){return this.getController().addPendingInitialization(e)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/ShellLayout", ["sap/base/Log"],function(e){"use strict";var a={RootDomRef:"shellLayout",ShellHeader:"header-shellArea",RendererRootView:"canvas",SidePane:"sidePane-shellArea",Footer:"footer-shellArea",ToolArea:"toolArea-shellArea",SubHeader:"subHeader-shellArea",NavigationBar:"navigationBar-shellArea",FloatingActions:"floatingActions-shellArea",FloatingContainer:"floatingContainer-shellArea",FloatingContainerDockStart:"floatingContainerDockStart-shellArea",FloatingContainerDockEnd:"floatingContainerDockEnd-shellArea",ShellShapes:"shapes-shellArea",RightFloatingContainer:"rightFloatingContainer-shellArea",BackgroundImage:"backgroundImage-shellArea",HelpContent:"helpContent-shellArea"};function t(t){var l=document.getElementById(t);a.RendererRootView=t;var o=["<div id='shellLayout' class='sapUshellFlexRow'>","    <div id='backgroundImage-shellArea' data-sap-ui-root-content=true></div>","    <div id='shapes-shellArea' data-sap-ui-root-content=true></div>","    <div id='sapUshellPopupWithinArea' class='sapUshellFlexGrowShrink sapUshellFlexRow'>","        <div id='floatingContainerDockStart-shellArea' class='sapUshellFloatingContainerDock' data-sap-ui-root-content=true></div>","        <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>","            <div id='header-shellArea' data-sap-ui-root-content=true></div>","            <div id='subHeader-shellArea' data-sap-ui-root-content=true></div>","            <div class='sapUshellFlexGrowShrink sapUshellFlexRow'>","                <div id='toolArea-shellArea' class='sapUshellPositionRelative' data-sap-ui-root-content=true></div>","                <div id='sidePane-shellArea' data-sap-ui-root-content=true></div>","                <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>","                    <div id='navigationBar-shellArea' data-sap-ui-root-content=true></div>","                    <div class='sapUshellFlexGrowShrink sapUshellPositionRelative sapUshellOverflowHidden sapUshellFlexColumn'>","                        <div id='"+a.RendererRootView+"' class='sapUshellFlexGrowShrink sapUshellPositionRelative sapUshellShell' data-sap-ui-root-content=true></div>","                        <div id='floatingActions-shellArea' data-sap-ui-root-content=true></div>","                        <div id='rightFloatingContainer-shellArea' data-sap-ui-root-content=true></div>","                    </div>","                </div>","            </div>","            <footer id='footer-shellArea' class='sapUshellPositionStatic sapMPageFooter' data-sap-ui-root-content=true></footer>","        </div>","        <div id='floatingContainerDockEnd-shellArea' class='sapUshellFloatingContainerDock' data-sap-ui-root-content=true></div>","        <div id='floatingContainer-shellArea' data-sap-ui-root-content=true></div>","    </div>","    <div id='helpContent-shellArea' data-sap-ui-root-content=true></div>","</div>"].join("\n");var i=Object.keys(a).some(function(e){if(e==="RendererRootView"){return false}var t=a[e];return!!document.getElementById(t)});if(i){e.warning("Found a ShellArea element. Did not apply the layout","sap.ushell.renderer.ShellLayout");return}document.body.insertAdjacentHTML("afterbegin","<div id='tmp'>"+o+"</div>");var n=document.getElementById("tmp");l.replaceWith.apply(l,Array.from(n.childNodes));n.remove()}function l(){var e=document.getElementById(a.RootDomRef);if(e){document.getElementById(a.RootDomRef).remove()}}return{applyLayout:t,destroyLayout:l,LAYOUT_MAPPING:a}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/utils", ["sap/ushell/EventHub","sap/ui/core/Core"],function(e,r){"use strict";function n(n){setTimeout(function(){r.getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"})},0);e.emit("RendererLoaded",{rendererName:"fiori2"})}function i(e,n){setTimeout(function(){r.getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",e,n)},0)}return{publishExternalEvent:i,init:n}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/History", ["sap/ushell/renderer/History"],function(e){"use strict";return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/LogonFrameProvider", ["sap/ushell/renderer/LogonFrameProvider"],function(e){"use strict";return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Renderer", ["sap/ushell/renderer/Renderer"],function(t){"use strict";const e=t.extend("sap.ushell.renderers.fiori2.Renderer");e.prototype.showHeaderItem=function(e,o,p){return t.prototype.showHeaderItem.apply(this,arguments)};e.prototype.showToolAreaItem=function(e,o,p){return t.prototype.showToolAreaItem.apply(this,arguments)};e.prototype.showActionButton=function(e,o,p){return t.prototype.showActionButton.apply(this,arguments)};e.prototype.showFloatingActionButton=function(e,o,p){return t.prototype.showFloatingActionButton.apply(this,arguments)};e.prototype.showHeaderEndItem=function(e,o,p){return t.prototype.showHeaderEndItem.apply(this,arguments)};e.prototype.setHeaderVisibility=function(e,o,p){return t.prototype.setHeaderVisibility.apply(this,arguments)};e.prototype.showSubHeader=function(e,o,p){return t.prototype.showSubHeader.apply(this,arguments)};e.prototype.setFooter=function(e){return t.prototype.setFooter.apply(this,arguments)};e.prototype.setShellFooter=function(e){return t.prototype.setShellFooter.apply(this,arguments)};e.prototype.setFooterControl=function(e,o){return t.prototype.setFooterControl.apply(this,arguments)};e.prototype.hideHeaderItem=function(e,o,p){return t.prototype.hideHeaderItem.apply(this,arguments)};e.prototype.removeToolAreaItem=function(e,o,p){return t.prototype.removeToolAreaItem.apply(this,arguments)};e.prototype.hideActionButton=function(e,o,p){return t.prototype.hideActionButton.apply(this,arguments)};e.prototype.hideLeftPaneContent=function(e,o,p){return t.prototype.hideLeftPaneContent.apply(this,arguments)};e.prototype.hideFloatingActionButton=function(e,o,p){return t.prototype.hideFloatingActionButton.apply(this,arguments)};e.prototype.hideHeaderEndItem=function(e,o,p){return t.prototype.hideHeaderEndItem.apply(this,arguments)};e.prototype.hideSubHeader=function(e,o,p){return t.prototype.hideSubHeader.apply(this,arguments)};e.prototype.removeFooter=function(){return t.prototype.removeFooter.apply(this,arguments)};e.prototype.getCurrentViewportState=function(){return t.prototype.getCurrentViewportState.apply(this,arguments)};e.prototype.addShellSubHeader=function(e){return t.prototype.addShellSubHeader.apply(this,arguments)};e.prototype.addSubHeader=function(e,o,p,r,n){return t.prototype.addSubHeader.apply(this,arguments)};e.prototype.addUserAction=function(e){return t.prototype.addUserAction.apply(this,arguments)};e.prototype.addActionButton=function(e,o,p,r,n){return t.prototype.addActionButton.apply(this,arguments)};e.prototype.addFloatingButton=function(e){return t.prototype.addFloatingButton.apply(this,arguments)};e.prototype.addFloatingActionButton=function(e,o,p,r,n){return t.prototype.addFloatingActionButton.apply(this,arguments)};e.prototype.addSidePaneContent=function(e){return t.prototype.addSidePaneContent.apply(this,arguments)};e.prototype.addLeftPaneContent=function(e,o,p,r,n){return t.prototype.addLeftPaneContent.apply(this,arguments)};e.prototype.addHeaderItem=function(e,o,p,r,n){return t.prototype.addHeaderItem.apply(this,arguments)};e.prototype.addToolAreaItem=function(e,o,p,r){return t.prototype.addToolAreaItem.apply(this,arguments)};e.prototype.addHeaderEndItem=function(e,o,p,r,n){return t.prototype.addHeaderEndItem.apply(this,arguments)};e.prototype.addEndUserFeedbackCustomUI=function(e,o){return t.prototype.addEndUserFeedbackCustomUI.apply(this,arguments)};e.prototype.addUserPreferencesEntry=function(e){return t.prototype.addUserPreferencesEntry.apply(this,arguments)};e.prototype.setHeaderTitle=function(e){return t.prototype.setHeaderTitle.apply(this,arguments)};e.prototype.setLeftPaneVisibility=function(e,o){return t.prototype.setLeftPaneVisibility.apply(this,arguments)};e.prototype.showToolArea=function(e,o){return t.prototype.showToolArea.apply(this,arguments)};e.prototype.LaunchpadState=t.prototype.LaunchpadState;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/RendererExtensions", ["sap/ui/core/Core","sap/base/Log"],function(e,r){"use strict";function n(e,r,n){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.getId(),false,[r,n])}function s(e,r,n){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.getId(),false,[r,n])}function i(e,r,n){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.getId(),false,[r,n])}function t(e,r,n){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(e.getId(),false,[r,n])}function o(e,r){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[e,r])}function a(e,r,n){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(e.getId(),false,[r,n])}function d(e,r,n){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(e.getId(),false,[r,n])}function l(e,r,n){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.getId(),false,[r,n])}function u(e,r,n){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.getId(),false,[r,n])}function f(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration()}function h(){r.info("Application calls sap.ushell.Renderer.addEndUserFeedbackCustomUI. This function is deprecated. The call has no effect.")}function p(e){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(e)}function c(e){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesGroupedEntry(e)}function g(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e)}function R(e,r){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(e,r)}function C(e){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(e)}function E(e){sap.ushell.Container.getRenderer("fiori2").setFooter(e)}function P(){sap.ushell.Container.getRenderer("fiori2").removeFooter()}function I(){this.addHeaderItem=function(e,n,s){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.getId(),false,[n,s])};this.setHeaderItemVisibility=function(n,s,i,t){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");var o=e.byId(n);if(t){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(o.getId(),i,[s])}};this.addSubHeader=function(e,n,s){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");sap.ushell.Container.getRenderer("fiori2").showSubHeader(e.getId(),false,[n,s])};this.removeSubHeader=function(e,n,s){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");sap.ushell.Container.getRenderer("fiori2").hideSubHeader(e.getId(),false,[n,s])};this.addHeaderEndItem=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");l(...e)};this.removeHeaderItem=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");n(...e)};this.removeHeaderEndItem=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");u(...e)};this.addEndUserFeedbackCustomUI=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");h(...e)};this.addOptionsActionSheetButton=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");s(...e)};this.removeOptionsActionSheetButton=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");i(...e)};this.setFooter=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");E(...e)};this.removeFooter=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");P(...e)};this.addUserPreferencesEntry=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");p(...e)};this.addUserPreferencesGroupedEntry=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");c(...e)};this.setHeaderTitle=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");g(...e)};this.setHeaderHiding=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");C(...e)};this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");a(...e)};this.removeFloatingActionButton=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");d(...e)};this.setLeftPaneContent=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");t(...e)};this.removeLeftPaneContent=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");o(...e)};this.setLeftPaneVisibility=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");R(...e)};this.getConfiguration=function(...e){r.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");return f(...e)}}var m=new I;return m},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.controller", ["sap/ushell/renderer/Shell.controller"],function(e){"use strict";return e.extend("sap.ushell.renderers.fiori2.Shell")});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.view", ["sap/base/Log","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView","sap/ui/core/Core","sap/ushell/renderer/ShellLayout"],function(e,t,n,i,a,o,l,r,s,h,u,d,g){"use strict";var c=g.LAYOUT_MAPPING;var p={Property:"Property",List:"List"};function f(e,t){return sap.ui.getCore().byId(t.getObject())}sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell"},waitForShellLayout:function(){if(!this._oShellLayoutPromise){this._oShellLayoutPromise=new Promise(function(e){this.getController().addDoable(o.once("ShellLayoutApplied").do(e))}.bind(this))}return this._oShellLayoutPromise},getShellModel:function(){return this.getViewData().shellModel},getHelperModel:function(){return this.getViewData().helperModel},getViewDataConfig:function(){var e=this.getViewData()||{};var t=e.config||{};return t},createContent:function(){this._allowUpToThreeActionInShellHeader();this.initBackgroundImage();this.createShellHeaderSync();this.setNavigationBarMinHeight();var e=this.createRendererRootViewSync();this.initCanvasShapesManager();this.setDisplayBlock(true);r.setPerformanceMark("FLP - Shell.view rendering started!");return e},initBackgroundImage:function(){this.waitForShellLayout().then(function(){var e=document.getElementById(c.BackgroundImage);var t=["<div class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapContrastPlus'></div>","<div class='sapMShellBG sapUiGlobalBackgroundImage'></div>"].join("\n");e.insertAdjacentHTML("afterbegin",t)})},createRendererRootViewSync:function(){var e=this.getController();var t=sap.ui.xmlfragment("sap.ushell.ui.RendererRootView",e);t.updateAggregation=this.updateShellAggregation;sap.ui.getCore().byId("viewPortContainer");return t},createShellHeaderSync:function(){var e=this.getViewDataConfig();var t=this.getShellModel();var a=s.createModel("/core/shellHeader",h);var o=new i;o.onInit();var r=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",o);r.updateAggregation=this.updateShellAggregation;n.init(e,o,t);if(e.appState==="embedded"){r.setNoLogo()}r.setModel(a);r.setModel(l.i18nModel,"i18n");this.addDanglingControl(r);this._oShellHeader=r;this.waitForShellLayout().then(function(){r.placeAt(c.ShellHeader,"only")});return r},setNavigationBarMinHeight:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.isMenuEnabled()}).then(function(e){if(!e){return}this.waitForShellLayout().then(function(){var e=document.getElementById(c.NavigationBar);e.classList.add("sapUshellMenuBarHeight")})}.bind(this)).catch(function(t){e.info("Could not apply min-height of the navigationBar",t)})},createRightFloatingContainer:function(){sap.ui.require(["sap/ushell/ui/shell/RightFloatingContainer"],function(e){var t=new e({id:"right-floating-container",top:"2",hideItemsAfterPresentation:true,visible:"{/currentState/showRightFloatingContainer}",floatingContainerItems:{path:"/currentState/RightFloatingContainerItems",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this._oRightFloatingContainer=t;this.waitForShellLayout().then(function(){t.placeAt(c.RightFloatingContainer,"only")})}.bind(this))},initCanvasShapesManager:function(){this.bindFactory({model:this.getShellModel(),factory:this.createCanvasShapesManager.bind(this),bindingPath:"/enableBackGroundShapes",bindingType:p.Property,valueCheck:function(e){return!!e}})},createCanvasShapesManager:function(){var e=setInterval(function(){if(d.isThemeApplied()){clearInterval(e);sap.ui.require(["sap/ushell/CanvasShapesManager"],function(e){e.drawShapes()})}},200)},createSubHeader:function(){sap.ui.require(["sap/ushell/ui/shell/SubHeader"],function(e){var t=new e({id:"subhdr",content:{path:"/currentState/subHeader",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.SubHeader,"only")})}.bind(this))},createFloatingContainer:function(){return new Promise(function(e,n){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ui/util/Storage"],function(n,i){var o=new n({id:"shell-floatingContainer",visible:"{helper>/shell/floatingContainerVisible}",content:{path:"/currentState/floatingContainerContent",factory:f}});o.updateAggregation=this.updateShellAggregation;if(t.system.desktop){o.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}))}o.setModel(this.getShellModel());o.setModel(this.getHelperModel(),"helper");this.addDanglingControl(o);this.waitForShellLayout().then(function(){o.placeAt(c.FloatingContainer,"only");var t=new i(i.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");var n=document.getElementById(c.FloatingContainer);var a=!n.classList.contains("sapUshellFloatingContainerWrapper");var l=t.get("floatingContainerStyle");if(a&&!l){var r=jQuery(".sapUshellShellHeadItm").position()?jQuery(".sapUshellShellHeadItm").position().left:0;var s=(jQuery(window).width()-jQuery("#shell-floatingContainer").width()-r)*100/jQuery(window).width();var h=jQuery(".sapUshellShellHeader").height()*100/jQuery(window).height();n.style.left=s+"%";n.style.top=h+"%";n.style.position="absolute";t.put("floatingContainerStyle",n.style.cssText)}else if(l){n.style.cssText=l}n.classList.add("sapUshellFloatingContainerWrapper");e()})}.bind(this))}.bind(this))},createSidePane:function(){sap.ui.require(["sap/ushell/ui/shell/SidePane"],function(e){var t=new e({id:"shell-sidePane",visible:"{/currentState/showPane}",content:{path:"/currentState/paneContent",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.SidePane,"only")})}.bind(this))},createToolArea:function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",visible:"{/currentState/toolAreaVisible}",toolAreaItems:{path:"/currentState/toolAreaItems",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.ToolArea,"only")})}.bind(this))},createFloatingActions:function(){sap.ui.require(["sap/ushell/ui/shell/ShellFloatingActions"],function(e){var t=new e({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:f}});t.updateAggregation=this.updateShellAggregation;t.setModel(this.getShellModel());this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(c.FloatingActions,"only")})}.bind(this))},initAllMyAppsView:function(){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){if(e.isEnabled()){return this.createAllMyAppsView()}}.bind(this))},createAllMyAppsView:function(){return u.create({id:"allMyAppsView",viewName:"sap.ushell.renderer.allMyApps.AllMyApps"}).then(function(e){e.setModel(this.getShellModel());e.setModel(l.i18nModel,"i18n");e.addCustomData(new a({key:"aria-label",value:l.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.addDanglingControl(e);this.getShellHeader().getAppTitle().setAllMyApps(e)}.bind(this))},createPostCoreExtControls:function(){var e=this.getShellModel();sap.ui.require(["sap/ui/core/Popup"],function(e){e.setInitialZIndex(11)});this.bindFactory({model:e,factory:this.createRightFloatingContainer.bind(this),bindingPath:"/currentState/showRightFloatingContainer",bindingType:p.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSubHeader.bind(this),bindingPath:"/currentState/subHeader",bindingType:p.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createToolArea.bind(this),bindingPath:"/currentState/toolAreaVisible",bindingType:p.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSidePane.bind(this),bindingPath:"/currentState/showPane",bindingType:p.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createFloatingActions.bind(this),bindingPath:"/currentState/floatingActions",bindingType:p.List,valueCheck:function(e){return!!e.length}});this.addPendingInitialization(this.initAllMyAppsView())},_allowUpToThreeActionInShellHeader:function(){var e=this.getViewDataConfig();if(Object.keys(e).length>3){var t=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"];var n=0;var i;for(var a=0;a<5;a++){i=t[a];if(n===3){e[i]=false}else if(e[i]){n++}}}},getShellHeader:function(){return this._oShellHeader},getRightFloatingContainer:function(){return this._oRightFloatingContainer},updateShellAggregation:function(e){var t=this.mBindingInfos[e];var n=this.getMetadata().getJSONKeys()[e];var i;this[n._sGetter]().forEach(function(e){this[n._sRemoveMutator](e)}.bind(this));t.binding.getContexts().forEach(function(e,a){i=t.factory(this.getId()+"-"+a,e)?t.factory(this.getId()+"-"+a,e).setBindingContext(e,t.model):"";this[n._sMutator](i)}.bind(this))},bindFactory:function(e){var t=e.model;var n=e.factory;var i=e.bindingPath;var a=e.bindingType;var o=e.valueCheck;var l=t.getProperty(i);if(o(l)){n()}else{var r;switch(a){case p.List:r=t.bindList(i);break;default:r=t.bindProperty(i)}this.addDanglingBinding(r);r.attachChange(function(){l=r.getModel().getProperty(r.getPath());if(o(l)){this.removeDanglingBinding(r);r.destroy();n()}},this)}},addDanglingBinding:function(e){this.getController().addDanglingBinding(e)},removeDanglingBinding:function(e){this.getController().removeDanglingBinding(e)},addDanglingControl:function(e){this.getController().addDanglingControl(e)},addPendingInitialization:function(e){return this.getController().addPendingInitialization(e)}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/resources", ["sap/ui/core/Configuration","sap/ui/model/resource/ResourceModel"],function(e,r){"use strict";var o={};o.getTranslationModel=function(e){if(!this._oResourceModel){this._oResourceModel=new r({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderer/resources/resources.properties"),bundleLocale:e})}return this._oResourceModel};o.i18nModel=o.getTranslationModel(e.getLanguage());o.i18n=o.i18nModel.getResourceBundle();return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppConfiguration", ["sap/base/i18n/ResourceBundle","sap/base/Log","sap/base/util/ObjectPath","sap/m/library","sap/ui/core/Configuration","sap/ui/core/IconPool","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/util/Mobile","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/Config"],function(t,e,n,i,a,r,s,jQuery,o,u,p,c,l,f){"use strict";var h=i.ButtonType;function g(){var i={},g=true,m=null,d=[],y=[];u.on("AppRendered").do(I.bind(this));function I(){g=false;while(y.length>0){y.shift()()}}this.addActivity=function(t){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserRecents").then(function(n){n.addActivity(t).then(e.resolve).catch(e.reject)}).catch(e.reject);return e.promise()};this.setApplicationInInitMode=function(){g=true};this.getApplicationRequestQueue=function(){return y};this.getCurrentApplication=function(){return m};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(t){if(!t){t=m}if(t){var e=s&&s.getHash?s.getHash():"";var n=this._getMemoizationKey(e);return this._getMetadata(t,n)}return{}};this._getMemoizationKey=function(t){var e=t.split("?");var n=e[0];var i=e[1];i=this._processParams(i);if(i){return n+i}var a=c.parseShellHash(t);n=a?a.semanticObject+"-"+a.action:"";return n};this._processParams=function(t){if(t){var e="";var n={};t.split("&").forEach(function(t){var e=t.split("=");n[e[0]]=e[1]});var i=Object.keys(n).sort();var a="";i.forEach(function(t,i){e=i?"&":"?";a+=e+t+"="+n[t]});return a}return""};this._getMetadata=function(t,e){if(!i.hasOwnProperty(e)||!i[e].complete){this.addMetadata(t,e)}if(!i[e]){i[e]={complete:false}}if(!i[e].title){i[e].title=t.text||p.i18n.getText("default_app_title")}return i[e]};this.setCurrentApplication=function(t){m=t;y.splice(0)};this.setHeaderHiding=function(){e.warning("Application configuration headerHiding property is deprecated and has no effect")};this.addApplicationSettingsButtons=function(t){if(g){y.push(function(){v(t)})}else{v(t)}};function v(t){var e,n=[],i=sap.ushell.Container.getRenderer("fiori2");for(e=0;e<t.length;e++){var a=t[e];n.push(a.getId());a.setIcon(a.getIcon()||r.getIconURI("customize"));if(p.i18n.getText("userSettings")===a.getProperty("text")){a.setProperty("text",p.i18n.getText("userAppSettings"))}a.setType(h.Unstyled)}if(sap.ushell.Container&&i){if(d.length){i.hideActionButton(d,true)}d=n;i.showActionButton(n,true,undefined,true)}}this.setWindowTitle=function(t){window.document.title=t};this.setIcons=function(t){o.setIcons(t)};this.setApplicationFullWidth=function(t){this.setApplicationFullWidthInternal(t)};this.setApplicationFullWidthInternal=function(t){u.emit("setApplicationFullWidth",{bValue:t,date:Date.now()})};this.getApplicationName=function(t){var e,n=t&&t.additionalInformation||null;if(n){e=/^SAPUI5\.Component=(.+)$/i.exec(n);if(e){return e[1]}}return null};this.getApplicationUrl=function(t){var e=t&&t.url||null,n="P_TCODE",i;if(e){if(t.applicationType==="NWBC"&&e.indexOf(n)){return e}i=e.indexOf("?");if(i>=0){e=e.slice(0,i)}if(e.slice(-1)!=="/"){e+="/"}}return e};this.getPropertyValueFromConfig=function(t,e,n){var i;if(n&&t.hasOwnProperty(e+"Resource")){i=n.getText(t[e+"Resource"])}else if(t.hasOwnProperty(e)){i=t[e]}return i};this.getPropertyValueFromManifest=function(t,e,i){var a=e[i].manifestEntryKey,r=e[i].path,s=t.getManifestEntry(a);return n.get(r||"",s)};this.addMetadata=function(n,r){try{var s=this.getApplicationName(n),o=this.getApplicationUrl(n),u,p,c={fullWidth:{manifestEntryKey:"sap.ui",path:"fullWidth"},hideLightBackground:{manifestEntryKey:"sap.ui",path:"hideLightBackground"},title:{manifestEntryKey:"sap.app",path:"title"},icon:{manifestEntryKey:"sap.ui",path:"icons.icon"},favIcon:{manifestEntryKey:"sap.ui",path:"icons.favIcon"},homeScreenIconPhone:{manifestEntryKey:"sap.ui",path:"icons.phone"},"homeScreenIconPhone@2":{manifestEntryKey:"sap.ui",path:"icons.phone@2"},homeScreenIconTablet:{manifestEntryKey:"sap.ui",path:"icons.tablet"},"homeScreenIconTablet@2":{manifestEntryKey:"sap.ui",path:"icons.tablet@2"},startupImage320x460:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x920:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x1096:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x1096"},startupImage768x1004:{manifestEntryKey:"sap.ui",path:"icons.startupImage768x1004"},startupImage748x1024:{manifestEntryKey:"sap.ui",path:"icons.startupImage748x1024"},startupImage1536x2008:{manifestEntryKey:"sap.ui",path:"icons.startupImage1536x2008"},startupImage1496x2048:{manifestEntryKey:"sap.ui",path:"icons.startupImage1496x2048"},compactContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.compact"},cozyContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.cozy"}},f,h,g,m,d,y,I,v=n&&n.componentHandle;if(r){if(!i.hasOwnProperty(r)){i[r]={complete:false}}if(!i[r].complete){if(v){u=v.getMetadata()}else if(s){e.warning("No component handle available for '"+s+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return}if(u){p=u.getConfig();m=u.getManifest()!==undefined;i[r].complete=true;if(p){y=p.resourceBundle||"";if(y){if(y.slice(0,1)!=="/"){y=o+y}I=t.create({url:y,locale:a.getLanguage()})}}for(d in c){if(c.hasOwnProperty(d)){if(m){i[r][d]=this.getPropertyValueFromManifest(u,c,d)}if(p&&i[r][d]===undefined){i[r][d]=this.getPropertyValueFromConfig(p,d,I)}}}i[r].version=u.getVersion();i[r].technicalName=u.getComponentName();this._setTitleFromNavResult(i[r],n)}else if(l.isApplicationTypeEmbeddedInIframe(n.applicationType)){var x="/~canvas;window=app/wda/",A=n.url.indexOf(x),b="/sap/bc/webdynpro/sap/",E="/bc/gui/sap/its/webgui",w=n.url.indexOf(E);if(A>=0){i[r].technicalName=n.url.substring(A+x.length,n.url.indexOf("/",A+x.length))}if(n.url.indexOf(b)>=0){i[r].technicalName=new RegExp(b+"(.*)[?]").exec(n.url)[1]}i[r].complete=true;if(w>=0){var P="etransaction=",C=n.url.indexOf(P,w+E.length),K=n.url.indexOf("&",C),T=K>=0?K:n.url.length;i[r].technicalName=decodeURIComponent(n.url.substring(C+P.length,T))+" (TCODE)"}}else{e.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration")}}f=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];h=o&&o[o.length-1]==="/"?o.substring(0,o.length-1):o;g=function(t){if(t.match(/^https?:\/\/.*/)){return false}return t&&t[0]!=="/"};f.forEach(function(t){var e=i[r][t],n=null;if(e){n=g(e)?h+"/"+e:e}i[r][t]=n})}}catch(t){e.warning("Application configuration could not be parsed")}};this._setTitleFromNavResult=function(t,e){var n=e&&e.text;var i=t.technicalName;var a=f.last("/core/shell/useAppTitleFromNavTargetResolution")||[];if(n&&a.includes(i)){t.title=n}}}return new g},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppLifeCycle", ["sap/base/Log","sap/ui/base/EventProvider","sap/ui/core/Core","sap/ui/thirdparty/hasher","sap/ushell/AppInfoParameters","sap/ushell/EventHub","sap/ushell/TechnicalParameters","sap/ui/core/Component","sap/ushell/services/AppConfiguration","sap/ushell/utils/UrlParsing","sap/ui/thirdparty/URI","sap/ushell/Config"],function(e,t,n,a,i,r,o,p,s,l,u,f){"use strict";var c="appLoaded";function h(l,h,g,d){var m;var A;var v;this.getCurrentApplication=function(){return m};this.attachAppLoaded=function(e,t,n){v.attachEvent(c,e,t,n)};this.detachAppLoaded=function(e,t){v.detachEvent(c,e,t)};this.prepareCurrentAppObject=function(e,t,n,a,i){w(e,t,n,a,i)};this.reloadCurrentApp=function(){r.emit("reloadCurrentApp",{sAppContainerId:A.getId(),sCurrentHash:a.getHash(),date:Date.now()})};this.setAppInfo=function(e,t){i.setCustomAttributes(e);if(f.last("/core/shell/enableMessageBroker")){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){m.getAllAppInfo(true).then(function(n){e.publish("flp-app-info","FLP",Date.now().toString(),t===true?"new-app-info":"app-info-update","*",n)})})}};function C(e,t,n,a,i){if(n==="flp-app-info"&&a==="get-current-app-info"&&m){m.getAllAppInfo(true).then(function(n){e.publish("flp-app-info","FLP",Date.now().toString(),a,[t],n)})}}if(window.QUnit===undefined&&sap.ushell.Container.inAppRuntime()===false){if(f.last("/core/shell/enableMessageBroker")){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){e.subscribe("FLP",[{channelId:"flp-app-info",version:"1.0"}],C.bind(undefined,e),function(){})})}}v=new t;if(sap.ushell.Container&&sap.ushell.Container.inAppRuntime()===false){if(sap.ushell.Container.getRenderer()){P()}else{var I=function(){P();sap.ushell.Container.detachRendererCreatedEvent(I)};sap.ushell.Container.attachRendererCreatedEvent(I)}}function P(){var t=n.byId("viewPortContainer");if(!t||typeof t.attachAfterNavigate!=="function"){e.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return}t.attachAfterNavigate(function(e){var t;var n;var a;var i;var r;var o=false;if(e.mParameters.toId.indexOf("applicationShellPage")===0){n=e.mParameters.to.getApp()}else if(e.mParameters.toId.indexOf("application")===0){n=e.mParameters.to}if(n&&typeof n.getComponentHandle==="function"&&n.getComponentHandle()){i=n.getComponentHandle().getInstance()}else if(n){t=n.getAggregation("child");if(t){i=t.getComponentInstance()}}else{i=p.get(e.mParameters.to.getComponent())}if(i){r=i.getId();o=r.indexOf("Shell-home-component")!==-1||r.indexOf("pages-component")!==-1||r.indexOf("workPageRuntime-component")!==-1||r.indexOf("Shell-appfinder-component")!==-1||r.indexOf("homeApp-component")!==-1||r.indexOf("runtimeSwitcher-component")!==-1}a=n&&typeof n.getApplicationType==="function"&&n.getApplicationType();if((!a||a==="URL")&&i){a="UI5"}w(a,i,o,n)})}function y(e){var t=a.getHash();var n;if(!t){return Promise.reject("Could not identify current application hash")}var i=sap.ushell.Container.getServiceAsync("URLParsing");return i.then(function(a){n=a.parseShellHash(t);if(e===true&&A&&typeof A.getCurrentAppUrl==="function"){var i=A.getCurrentAppUrl();if(i){var r=new u(i).search(true);if(r.hasOwnProperty("sap-remote-intent")){n.semanticObject=r["sap-remote-intent"].split("-")[0];n.action=r["sap-remote-intent"].split("-")[1];delete n.params["sap-shell-so"];delete n.params["sap-shell-action"]}}}return n})}function b(){if(i.setCustomAttributes){i.setCustomAttributes()}}function w(e,t,n,a,p){if(!p){p=a&&typeof a.getFrameworkId==="function"&&a.getFrameworkId()||""}b();A=a;m={applicationType:e,applicationFramework:p,componentInstance:t,homePage:n,getTechnicalParameter:function(n){return o.getParameterValue(n,t,a,e)},getIntent:y,getInfo:function(e){return i.getInfo(e,m)},getAllAppInfo:function(n){return i.getAllAppInfo(n,m,t,a,e).then(function(e){if(n===true){e.applicationType=m.applicationType;e.homePage=m.homePage}else{e.applicationType={value:m.applicationType};e.homePage={value:m.homePage}}return e})},getSystemContext:function(){var e=s.getCurrentApplication()||{};var t=e.contentProviderId||"";return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)})},disableKeepAliveAppRouterRetrigger:function(e){y().then(function(t){r.emit("disableKeepAliveRestoreRouterRetrigger",{disable:e,intent:t,componentId:m.componentInstance.oContainer.sId,date:Date.now()})})}};setTimeout(function(){v.fireEvent(c,m);if(window.QUnit===undefined&&sap.ushell.Container.inAppRuntime()===false){if(f.last("/core/shell/enableMessageBroker")){sap.ushell.Container.getServiceAsync("MessageBroker").then(function(e){m.getAllAppInfo(true).then(function(t){e.publish("flp-app-info","FLP",Date.now().toString(),"new-app-info","*",t)})})}}},0)}}h.hasNoAdapter=true;return h},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppState", ["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/services/appstate/AppState","sap/ushell/services/appstate/AppStatePersistencyMethod","sap/ushell/services/appstate/Sequentializer","sap/ushell/services/appstate/SequentializingAdapter","sap/ushell/services/appstate/WindowAdapter","sap/ushell/utils"],function(e,jQuery,t,n,s,i,r,a){"use strict";function o(e){return a.isDefined(e)&&a.isDefined(e.transient)?!!e.transient:true}function p(e,t,n,s){this._oConfig=s&&s.config;this._sSessionKey="";this._oAdapter=new i(e);this._oAdapter=new r(this,this._oAdapter,s)}p.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey()}return this._sSessionKey};p.prototype.getAppState=function(e){var n=new jQuery.Deferred;var s=this;var i;this._loadAppState(e).done(function(e,r,a,o){i=new t(s,e,false,r,undefined,undefined,undefined,a,o);n.resolve(i)}).fail(function(){i=new t(s,e);n.resolve(i)});return n.promise()};p.prototype._getGeneratedKey=function(e){var t=a.generateRandomKey();if(e){t=("TAS"+t).substring(0,41)}else{t=("AS"+t).substring(0,40)}return t};p.prototype.createEmptyAppState=function(s,i,r,a){var p;var d="";var f="";var u=i||o(this._oConfig);var h=this._getGeneratedKey(u);if(r!==undefined&&!this.isPersistencyMethodSupported(r)){r=undefined;a=undefined}if(s){if(!e.isA(s,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}if(s.getMetadata&&s.getMetadata()&&typeof s.getMetadata().getName==="function"){d=s.getMetadata().getName()||""}if(!d&&s.getMetadata&&s.getMetadata().getComponentName){d=s.getMetadata().getComponentName()}if(s.getMetadata&&s.getMetadata()&&typeof s.getMetadata().getManifest==="function"&&typeof s.getMetadata().getManifest()==="object"&&typeof s.getMetadata().getManifest()["sap.app"]==="object"){f=s.getMetadata().getManifest()["sap.app"].ach||""}}if(u===true){r=a=undefined}else if(r===undefined&&this.isPersistencyMethodSupported(n.PersonalState)){r=n.PersonalState;a=undefined}p=new t(this,h,true,undefined,d,f,u,r,a);return p};p.prototype.createEmptyUnmodifiableAppState=function(){var e=this._getGeneratedKey();var n=new t(this,e,false);return n};p.prototype._saveAppState=function(e,t,s,i,r,p,d){var f=this._getSessionKey();var u=a.isDefined(r)?r:o(this._oConfig);if(u){p=undefined;d=undefined}else if(p!==undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(n.PersonalState)){p=n.PersonalState}else{p=undefined}d=undefined}}return this._oAdapter.saveAppState(e,f,t,s,i,u,p,d)};p.prototype._keyIsJson=function(e){if(typeof e==="string"&&e.indexOf("{")===0){try{JSON.parse(e);return true}catch(e){return false}}return false};p.prototype._loadAppState=function(e){if(this._keyIsJson(e)){return(new jQuery.Deferred).resolve(e,e).promise()}return this._oAdapter.loadAppState(e)};p.prototype.deleteAppState=function(e){return this._oAdapter.deleteAppState(e)};p._getSequentializer=function(){return new s};p.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods()}return[]};p.prototype.isPersistencyMethodSupported=function(e){var t=this.getSupportedPersistencyMethods();if(t.length>0&&e!==undefined){return t.indexOf(e)>=0}return false};p.prototype.setAppStateToPublic=function(e){var t=d(e,"sap-xapp-state");var s=d(e,"sap-iapp-state");var i=(new jQuery.Deferred).resolve();var r=(new jQuery.Deferred).resolve();var a=new jQuery.Deferred;var o;var p;if(t!==undefined){i=this.makeStatePersistent(t,n.PublicState).done(function(n){if(t!==n){e=e.replace(t,n);o=n}}).fail(a.reject)}if(s!==undefined){r=this.makeStatePersistent(s,n.PublicState).done(function(t){if(s!==t){e=e.replace(s,t);p=t}}).fail(a.reject)}jQuery.when(i,r).done(function(){a.resolve(e,t,s,o,p)});return a.promise()};function d(e,t){var n=new RegExp("(?:"+t+"=)([^&/]+)");var s=n.exec(e);var i;if(s&&s.length===2){i=s[1]}return i}p.prototype.makeStatePersistent=function(e,t,n){var s=new jQuery.Deferred;if(this.getSupportedPersistencyMethods().length===0){return s.resolve(e)}if(this._keyIsJson(e)){return s.resolve(e)}if(this.isPersistencyMethodSupported(t)){this.getAppState(e).done(function(i){if(i._iPersistencyMethod!==t){i.bTransient=false;i._iPersistencyMethod=t;i._oPersistencySettings=n;if(e.startsWith("TAS")){e=e.substring(1,e.length)}this._saveAppState(e,i._sData,i._sAppName,i._sACHComponent,false,t,n).done(function(){s.resolve(e)}).fail(s.reject)}else{s.resolve(e)}}.bind(this)).fail(s.reject)}else{s.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+t)}return s.promise()};p.prototype.getPersistentWhenShared=function(){return this._oConfig&&this._oConfig.persistentWhenShared===true?true:false};p.WindowAdapter=r;p.hasNoAdapter=false;return p},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution", ["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/extend","sap/ui/thirdparty/jquery","sap/ushell/ApplicationType","sap/ushell/navigationMode","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/SystemContext","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,n,r,jQuery,i,s,a,o,l,u,c,d,f,p,v,g,h,m,b,y){"use strict";function S(e,t,n,r){this._init.apply(this,arguments)}S.prototype._init=function(t,n,r,i){this._iLogId=0;if(!this._implementsServiceInterface(t)){e.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return}this._oInboundProvider=new l(t.getInbounds.bind(t));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=i;this._oAdapter=t};S.prototype._implementsServiceInterface=function(e){if(typeof e.getInbounds==="function"){return true}return false};S.prototype._extractInboundFilter=function(e){if(!this._oAdapter.hasSegmentedAccess){return undefined}if(typeof e!=="string"){return undefined}var t=e.indexOf("#")===0?e:"#"+e;var n=y.parseShellHash(t);if(!n||!n.semanticObject||!n.action){return undefined}return[{semanticObject:n.semanticObject,action:n.action}]};S.prototype.resolveHashFragment=function(e){var t=this;var n=new jQuery.Deferred;var r=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter);var i=this._extractInboundFilter(e);this._oInboundProvider.getInbounds(i).then(function(i){t._resolveHashFragment(e,r,i).done(function(e){return n.resolve(e)}).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};S.prototype.resolveTileIntent=function(e){var t=this;var n=new jQuery.Deferred;var r=this._extractInboundFilter(e);this._oInboundProvider.getInbounds(r).then(function(r){t._resolveTileIntent(e,undefined,r).done(n.resolve.bind(n)).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};S.prototype.resolveTileIntentInContext=function(e,t){var n=new jQuery.Deferred;var r=o.createIndex(e.concat(g.getInbounds()));this._resolveTileIntent(t,undefined,r).done(n.resolve.bind(n)).fail(n.reject.bind(n));return n.promise()};S.prototype._resolveHashFragment=function(t,n,r){var i=this;var s=new jQuery.Deferred;var a=t.indexOf("#")===0?t:"#"+t;var o=y.parseShellHash(a);if(o===undefined){e.error("Could not parse shell hash '"+t+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return s.reject().promise()}o.formFactor=b.getFormFactor();this._getMatchingInbounds(o,r,{bExcludeTileInbounds:true}).fail(function(n){e.error("Could not resolve "+t,"_getMatchingInbounds promise rejected with: "+n,"sap.ushell.services.ClientSideTargetResolution");s.reject(n)}).done(function(r){var l;if(r.length===0){e.warning("Could not resolve "+t,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");s.reject("Could not resolve navigation target");return}r=i._applySapNavigationScopeFilter(r,o);l=r[0];if(e.getLevel()>=e.Level.DEBUG){var u=function(e,t){return this[e]===undefined?"<undefined>":t};var c=function(e,t){return e==="_original"?undefined:u.call(this,e,t)};var d=JSON.stringify(l,c,"   ");e.debug("The following target will now be resolved",d,"sap.ushell.services.ClientSideTargetResolution")}i._resolveSingleMatchingTarget(l,n,a).done(s.resolve.bind(s)).fail(s.reject.bind(s))});return s.promise()};S.prototype._applySapNavigationScopeFilter=function(e,t){var r=t&&t.params&&t.params["sap-navigation-scope-filter"];if(!r){return e}var i=e.filter(function(e){var t=n.get("inbound.signature.parameters",e);var i=t&&t["sap-navigation-scope"];if(i){return r[0]===i.defaultValue.value}return undefined});return i.length>0?i:e};S.prototype._resolveSingleMatchingTarget=function(t,r,a){var o=this;var l=new jQuery.Deferred;var d=y.parseShellHash(a);var f=[d.semanticObject,d.action].join("-");var p=(t.inbound.resolutionResult||{}).applicationType;var v;if(this._oAdapter.resolveSystemAlias){v=this._oAdapter.resolveSystemAlias.bind(this._oAdapter)}var g=!!t.inbound.templateContext;var m=i.getEasyAccessMenuResolver(f,p);if(m&&!g){m(d,t,v,i.WDA.enableWdaCompatibilityMode).then(function(e){var n=s.getNavigationMode(e,(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0]);b.shallowMergeObject(e,n);e.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;l.resolve(e)},function(e){l.reject(e)});return l.promise()}var S=this._getReservedParameters(t);u.mapParameterNamesAndRemoveObjects(t);sap.ushell.Container.getServiceAsync("AppState").then(function(u){h.mixAppStateIntoResolutionResultAndRename(t,u).done(function(t){var u=function(){return o._constructFallbackResolutionResult(t,r,a)};if(i[p]){u=i[p].generateResolutionResult}delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-tag"});var d=n.get("inbound.resolutionResult.url",t);c.executePrelaunchOperations(t,S["sap-prelaunch-operations"]).then(function(){return u(t,d,v)}).then(function(n){var r=s.getNavigationMode(n,(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0]);b.shallowMergeObject(n,r);n.reservedParameters=S;n.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;e.debug("Intent was resolved to the following target",JSON.stringify(n,null,3),"sap.ushell.services.ClientSideTargetResolution");b.shallowMergeObject(t.resolutionResult,n);l.resolve(t.resolutionResult)},function(e){if(typeof e==="string"&&e.indexOf("fallback:")>=0){o._constructFallbackResolutionResult.call(this,t,r,a).then(function(e){b.shallowMergeObject(t.resolutionResult,e);l.resolve(t.resolutionResult)},l.reject.bind(l))}else{l.reject(e)}})})});return l.promise()};S.prototype._getReservedParameters=function(e){var t=m.getParameters({injectFrom:"startupParameter"}).map(function(e){return e.name});var n=v.extractParameters(t,e.intentParamsPlusAllDefaults);m.getParameters({injectFrom:"inboundParameter"}).forEach(function(t){var r=t.name;var i=e.inbound&&e.inbound.signature&&e.inbound.signature.parameters;if(i&&Object.keys(i).length>0){var s=i[r];var a=s&&s.defaultValue&&s.defaultValue.hasOwnProperty("value");var o=s&&s.filter&&s.filter.hasOwnProperty("value");if(s&&(o||a)){if(a){n[r]=s.defaultValue.value}else{n[r]=s.filter.value}}else{delete n[r]}delete e.intentParamsPlusAllDefaults[r];var l=e.defaultedParamNames.indexOf(r);if(l>=0){e.defaultedParamNames.splice(l,1)}}});return n};S.prototype._resolveTileIntent=function(t,n,r){var i=this;var s=new jQuery.Deferred;var a=t.indexOf("#")===0?t:"#"+t;var o=y.parseShellHash(a);if(o===undefined){e.error("Could not parse shell hash '"+t+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return s.reject("Cannot parse shell hash").promise()}o.formFactor=b.getFormFactor();this._getMatchingInbounds(o,r,{bExcludeTileInbounds:false}).fail(function(n){e.error("Could not resolve "+t,"_getMatchingInbounds promise rejected with: "+n,"sap.ushell.services.ClientSideTargetResolution");s.reject(n)}).done(function(r){var o;if(r.length===0){e.warning("Could not resolve "+t,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");s.reject("No matching targets found");return}o=r[0];i._resolveSingleMatchingTileIntent(o,n,a).done(s.resolve.bind(s)).fail(s.reject.bind(s))});return s.promise()};S.prototype._resolveSingleMatchingTileIntent=function(t,a,o){var l=new jQuery.Deferred;var c=(t.inbound.resolutionResult||{}).applicationType;var d=this;var f;if(this._oAdapter.resolveSystemAlias){f=this._oAdapter.resolveSystemAlias.bind(this._oAdapter)}u.mapParameterNamesAndRemoveObjects(t);sap.ushell.Container.getServiceAsync("AppState").then(function(u){h.mixAppStateIntoResolutionResultAndRename(t,u).done(function(t){var u=function(){return d._constructFallbackResolutionResult(t,a,o)};if(i[c]){u=i[c].generateResolutionResult}delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-tag"});var p=n.get("inbound.resolutionResult.url",t);u(t,p,f).then(function(n){b.shallowMergeObject(t.resolutionResult,n);var i=r({},t.inbound.tileResolutionResult);i.startupParameters=t.effectiveParameters;var a=s.getNavigationMode(n,(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0]);b.shallowMergeObject(i,a);l.resolve(i);e.debug("Tile Intent was resolved to the following target",JSON.stringify(i,null,3),"sap.ushell.services.ClientSideTargetResolution")},function(e){l.reject(e)})})});return l.promise()};S.prototype._constructFallbackResolutionResult=function(t,n,i){var s={};Object.keys(t.intentParamsPlusAllDefaults).forEach(function(e){if(Array.isArray(t.intentParamsPlusAllDefaults[e])){s[e]=t.intentParamsPlusAllDefaults[e]}});var a=t.mappedDefaultedParamNames||t.defaultedParamNames;if(a.length>0){s["sap-ushell-defaultedParameterNames"]=[JSON.stringify(a)]}if(typeof n!=="function"){e.error("Cannot resolve hash fragment",i+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.")}e.warning("Cannot resolve hash fragment client side",i+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(e,a){n(i,r({},t.inbound),s).done(function(t){var n={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(e){if(t.hasOwnProperty(e)){n[e]=t[e]}});e(n)}).fail(a.bind(null))})};S.prototype.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(t){var n={};t.getAllInbounds().forEach(function(e){if(typeof e.semanticObject==="string"&&e.semanticObject!=="*"&&!e.hideIntentLink&&e.semanticObject.length>0){n[e.semanticObject]=true}});e.resolve(Object.keys(n).sort())},function(){e.reject.apply(e,arguments)});return e.promise()};S.prototype.getLinks=function(n){var i=this;var s=new jQuery.Deferred;var a;if(arguments.length===1&&t(arguments[0])){var o=arguments[0];a=r({},o);["action","semanticObject"].forEach(function(e){if(o.hasOwnProperty(e)){a[e]=o[e]}});if(a.appStateKey){a.params=a.params||{};a.params["sap-xapp-state"]=[a.appStateKey];delete a.appStateKey}}else if(arguments.length<=3){e.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");var l=arguments[0];var u=arguments[1];var c=arguments[2];a={semanticObject:l,params:u,ignoreFormFactor:c}}else{return s.reject("invalid arguments for getLinks").promise()}this._oInboundProvider.getInbounds().then(function(e){i._getLinks(a,e).done(s.resolve.bind(s)).fail(s.reject.bind(s))},function(){s.reject.apply(s,arguments)});return s.promise()};S.prototype._validateGetSemanticObjectLinksArgs=function(t){var n=t.semanticObject;var r=t.action;var i=!t.hasOwnProperty("action");if(typeof n!=="undefined"||i){if(typeof n!=="string"){e.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(n)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(i&&n.match(/^\s+$/)){e.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+n+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(!i&&n.length===0){e.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+n+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}}if(typeof r!=="undefined"){if(typeof r!=="string"){e.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(r)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action"}if(r.length===0){e.error("invalid input for _getLinks","the action must not be an empty string, got '"+r+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action"}}return undefined};S.prototype._getLinks=function(t,r){var i=t.semanticObject;var s=t.action;var a=t.params;var o=!!t.withAtLeastOneUsedParam;var l=!!t.treatTechHintAsFilter;var u=t.ignoreFormFactor;var c=t.hasOwnProperty("sortResultsBy")?t.sortResultsBy:"intent";if(t.hasOwnProperty("sortResultOnTexts")){e.warning("the parameter 'sortResultOnTexts' was experimental and is no longer supported","getLinks results will be sorted by '"+c+"'","sap.ushell.services.ClientSideTargetResolution")}var d={bExcludeTileInbounds:true};var f=this._validateGetSemanticObjectLinksArgs(t);if(t.tags){d.tags=t.tags}if(f){return(new jQuery.Deferred).reject(f).promise()}if(i==="*"){return jQuery.when([])}function p(e){var t=y.paramsToString(e);return t?"?"+t:""}var g=new jQuery.Deferred;var h=b.getFormFactor();var m=y.parseParameters(p(a));var S={semanticObject:i===""?undefined:i,action:s,formFactor:u?undefined:h,params:m};if(l){S.treatTechHintAsFilter=true}this._getMatchingInbounds(S,r,d).done(function(r){var s={};var a=r.map(function(e){var r=i||e.inbound.semanticObject;var a="#"+r+"-"+e.inbound.action;var l;if(r==="*"){return undefined}if(e.inbound.action==="*"){return undefined}if(e.inbound&&e.inbound.hasOwnProperty("hideIntentLink")&&e.inbound.hideIntentLink===true){return undefined}if(!s.hasOwnProperty(a)){s[a]={matchingInbound:e.inbound,count:1};if(e.inbound.signature.additionalParameters==="ignored"){l=v.filterObjectKeys(m,function(t){return t.indexOf("sap-")===0||e.inbound.signature.parameters.hasOwnProperty(t)},false)}else{l=m}if(o){var u=Object.keys(l).some(function(e){return e.indexOf("sap-")!==0});if(!u){s[a].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined}}var c=v.inboundSignatureMeetsParameterOptions(e.inbound.signature.parameters,t.paramsOptions||[]);if(!c){s[a].hideReason="inbound signature does not meet the requested parameter filter options";return undefined}var d={intent:a+p(l),text:e.inbound.title};if(e.inbound.icon){d.icon=e.inbound.icon}if(e.inbound.subTitle){d.subTitle=e.inbound.subTitle}if(e.inbound.shortTitle){d.shortTitle=e.inbound.shortTitle}var f=n.get("inbound.signature.parameters.sap-tag.defaultValue.value",e);if(f){d.tags=[f]}return d}s[a].count++;return undefined}).filter(function(e){return typeof e==="object"});if(c!=="priority"){a.sort(function(e,t){return e[c]<t[c]?-1:1})}if(a.length===0){e.debug("_getLinks returned no results")}else if(e.getLevel()>=e.Level.DEBUG){if(e.getLevel()>=e.Level.TRACE){var l=[];var u=[];a.forEach(function(e){var t=e.intent.split("?")[0];if(s[t].hideReason){u.push(["-",t+"("+s[t].hideReason+")\n"," text:",e.text+"\n"," full intent:",e.intent].join(" "))}else{l.push(["-",t,s[t].count>1?"("+(s[t].count-1)+" others matched)\n":"\n","text:",e.text+"\n","full intent:",e.intent].join(" "))}});e.debug("_getLinks filtered to the following unique intents:","\n"+l.join("\n"),"sap.ushell.services.ClientSideTargetResolution");e.debug("_getLinks would have also returned the following unique intents, but something prevented this:",u.join("\n"),"sap.ushell.services.ClientSideTargetResolution")}else{e.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(s).join("\n - "),"sap.ushell.services.ClientSideTargetResolution")}}g.resolve(a)}).fail(g.reject.bind(g));return g.promise()};S.prototype._getMatchingInbounds=function(t,n,r){var i=this;var s;var o;var l;var u;var c=new jQuery.Deferred;if(r){s=r.tags;l=r.bExcludeTileInbounds}if(e.getLevel()>=e.Level.DEBUG){o=++i._iLogId}f.begin(function(){function e(e){var t=e.action||(typeof e.action==="undefined"?"<any>":"<invalid-value>");var n=e.semanticObject||(typeof e.semanticObject==="undefined"?"<any>":"<invalid-value>");return y.constructShellHash({semanticObject:n,action:t,params:e.params})}var n=e(t);return{logId:o,title:"Matching Intent '"+n+"' to inbounds (form factor: "+(t.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]}});var p=t.semanticObject;var v=t.action;this._oShellHash=t;var g=s?n.getSegmentByTags(s):n.getSegment(p,v);if(l){u=g.filter(function(e){return!e.tileResolutionResult||!e.tileResolutionResult.isCustomTile})}else{u=g}var h=null;if(this._oAdapter.getContentProviderDataOriginsLookup){h=this._oAdapter.getContentProviderDataOriginsLookup.bind(this._oAdapter)}d.match(t,u,{},h,e.getLevel()>=e.Level.DEBUG).then(function(e){f.log(function(){return{logId:o,stage:1,prefix:"✘",lines:Object.keys(e.noMatchReasons||{}).map(function(t){return t+" "+e.noMatchReasons[t]})}});f.log(function(){var t=e.matchResults.map(function(e){return a.formatInbound(e.inbound)});return{logId:o,stage:1,prefix:t.length>0?"✅":"✘",lines:t.length>0?t:["No inbound was matched"]}});var t={};var n=false;var r=Object.keys(e.missingReferences);r.forEach(function(r){var i=Object.keys(e.missingReferences[r]);n=n||i.length>0;t[r]=i});r=r.filter(function(e){if(t[e].length>0){return true}delete t[e];return false});if(!n){f.log(function(){return{logId:o,stage:2,prefix:"✅",line:"No need to resolve references"}});return(new jQuery.Deferred).resolve({matchResults:e.matchResults,referencesToInclude:null}).promise()}r.forEach(function(e){f.log(function(){return{logId:o,stage:2,line:'@ Must resolve the following references with contentProviderId = "'+e+'":',prefix:"•",lines:t[e]}})});var i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(e){var n=r.map(function(e){return this.getSystemContext(e)}.bind(this));return Promise.all(n).then(function(n){var i=r.map(function(r,i){return new Promise(function(s,a){e.resolveReferences(t[r],n[i]).done(s).fail(a)})});return Promise.all(i)})}.bind(this)).then(function(t){var n={matchResults:e.matchResults,referencesToInclude:{}};r.forEach(function(e,r){var i=t[r];n.referencesToInclude[e]=i;if(Object.keys(i).length>0){f.log(function(){return{logId:o,stage:2,line:'✅ resolved references with contentProviderId = "'+e+'" to the following values:',prefix:"•",lines:Object.keys(i).map(function(e){return e+": '"+i[e]+"'"})}})}});i.resolve(n)}).catch(function(e){f.log(function(){return{logId:o,stage:2,prefix:"❌",line:"Failed to resolve references: "+e}});c.resolve([])});return i.promise()}.bind(this)).then(function(e){var n=e.referencesToInclude;if(!n){f.log(function(){return{logId:o,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"✅"}});return(new jQuery.Deferred).resolve(e).promise()}var r=e.matchResults;var i=r.map(function(e){return e.inbound});return d.match(t,i,n,h,0).then(function(e){f.log(function(){var t=e.matchResults||[];if(t.length>=1){return{logId:o,stage:3,line:"The following inbounds re-matched:",lines:t.map(function(e){return a.formatInbound(e.inbound)}),prefix:"✅"}}return{logId:o,stage:3,line:"No inbounds re-matched",prefix:"-"}});return e})}).then(function(e){var t=e.matchResults||[];if(t.length<=1){f.log(function(){return{logId:o,stage:4,line:"Nothing to sort"}});c.resolve(t);return}var n=d.sortMatchingResultsDeterministic(e.matchResults||[]);f.log(function(){var e=n.map(function(e){return a.formatInbound(e.inbound||{})+(e.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+e["sap-priority"]+"'"+"\n * 2 * Sort string: '"+e.priorityString+"\n * 3 * Deterministic blob: '"+d.serializeMatchingResult(e)+"'"});return{logId:o,stage:4,line:"Sorted inbounds as follows:",lines:e,prefix:".",number:true}});c.resolve(n)});return c.promise().then(function(e){f.end(function(){return{logId:o}});return e})};S.prototype._isIntentSupportedOne=function(e,t){var n=new jQuery.Deferred;var r=y.parseShellHash(e);if(e==="#"){n.resolve(true);return n.promise()}if(r===undefined){return n.reject("Could not parse shell hash '"+e+"'").promise()}r.formFactor=b.getFormFactor();this._getMatchingInbounds(r,t,{bExcludeTileInbounds:true}).done(function(e){n.resolve(e.length>0)}).fail(function(){n.reject()});return n.promise()};S.prototype.isIntentSupported=function(e){var t=this;var n=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(r){t._isIntentSupported(e,r).done(n.resolve.bind(n)).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};S.prototype._isIntentSupported=function(e,t){var n=this;var r=new jQuery.Deferred;var i={};r.resolve();function s(e,t){i[e]={supported:t}}var a=[];e.forEach(function(e){var i=n._isIntentSupportedOne(e,t);i.fail(function(e){a.push(e)});i.done(function(t){s(e,t)});r=jQuery.when(r,i)});var o=new jQuery.Deferred;r.done(function(){o.resolve(i)}).fail(function(){o.reject("One or more input intents contain errors: "+a.join(", "))});return o.promise()};S.prototype.getUserDefaultParameterNames=function(e){var t=this;var n=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(r){t._getUserDefaultParameterNames(r.getAllInbounds(),e).then(function(e){n.resolve(e)},function(e){n.reject("Cannot get user default parameters from inbounds: "+e)})},function(){n.reject.apply(n,arguments)});return n.promise()};S.prototype._getUserDefaultParameterNames=function(e,t){var n={simple:{},extended:{}};e=e.filter(function(e){if(e.contentProviderId===undefined&&t.id===""){return true}return e.contentProviderId===t.id});return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(t){e.forEach(function(e){var r=e.signature&&e.signature.parameters||[];Object.keys(r).forEach(function(e){var i=r[e];var s;if(i){if(i.filter&&i.filter.format==="reference"){s=i.filter.value}else if(i.defaultValue&&i.defaultValue.format==="reference"){s=i.defaultValue.value}if(typeof s==="string"){var a=t.extractUserDefaultReferenceName(s);if(typeof a==="string"){n.simple[a]={}}var o=t.extractExtendedUserDefaultReferenceName(s);if(typeof o==="string"){n.extended[o]={}}}}})});return n})};S.prototype.getEasyAccessSystems=function(r){var s={};r=r||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[r]){return this._oHaveEasyAccessSystemsDeferreds[r].promise()}this._oHaveEasyAccessSystemsDeferreds[r]=new jQuery.Deferred;var o=this._oHaveEasyAccessSystemsDeferreds[r];function l(e,t,n){if(!e){return false}var i=[e.semanticObject,e.action].join("-");return n[r][i]&&e.deviceTypes&&t!==undefined&&e.deviceTypes[t]}var u=i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent.split("-")[1];e[n]={appType:t.type,priority:t.easyAccessMenu.systemSelectionPriority};return e},{});var c={userMenu:i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInUserMenu;return e},{}),sapMenu:i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInSapMenu;return e},{})};this._oInboundProvider.getInbounds().then(function(r){var i={};r.getAllInbounds().filter(function(e){return l(e,b.getFormFactor(),c)}).forEach(function(r){var o;if(t(r.signature.parameters["sap-system"])&&r.signature.parameters["sap-system"].hasOwnProperty("filter")){o=n.get("signature.parameters.sap-system.filter.value",r)}if(typeof o==="string"){var l=u[r.action].priority;var c=u[r.action].appType;if(!s[o]){i[o]=-1;s[o]={appType:{}}}if(i[o]<l){s[o].text=r.title;i[o]=l}s[o].appType[c]=true}else{e.warning("Cannot extract sap-system from easy access menu inbound: "+a.formatInbound(r),"This parameter is supposed to be a string. Got '"+o+"' instead.","sap.ushell.services.ClientSideTargetResolution")}});o.resolve(s)},function(){o.reject.apply(o,arguments)});return o.promise()};S.prototype.getSystemContext=function(e){var t=e===undefined?"":e;return new Promise(function(e,n){var r;this._oAdapter.resolveSystemAlias(t).done(function(t){r=p.createSystemContextFromSystemAlias(t);e(r)}).fail(function(e){n(e)})}.bind(this))};S.hasNoAdapter=false;return S},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel", ["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/deepExtend","sap/base/util/extend","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes","sap/base/util/values","sap/ushell/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log","sap/ui/core/Manifest"],function(e,t,jQuery,i,n,r,o,s,a,l,u,p,h,c,f,d,g,P){"use strict";var v=c.DisplayFormat;var _=c.ContentNodeType;var m="sap.ushell.services.CommonDataModel";var y={STATIC_LAUNCHER:"sap.ushell.StaticAppLauncher",DYNAMIC_LAUNCHER:"sap.ushell.DynamicAppLauncher",CARD:"sap.ushell.Card"};function z(t,i,r,o){this._oAdapter=t;this._oPersonalizationProcessor=new e;this._oSiteDeferred=new jQuery.Deferred;this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new n;this._oPersonalizationDeltas={};this._bLoadPersonalization=f.isFlpHomeIntent();this._oManifestCache={};this._bPersonalizationLoadingFailed=false;this._mGetPagesPromises={};this._oGetSitePromise=t.getSite().then(function(e){this._oOriginalSite=s({},e);if(this._bLoadPersonalization){this._loadAndApplyPersonalization(e)}return e}.bind(this)).fail(function(e){this._oSiteDeferred.reject(e);this._bLoadPersonalization=true}.bind(this))}z.prototype._loadAndApplyPersonalization=function(e){var t=new l(e._version);if(t.compareTo("3.1.0")<0){this._getPersonalization(t).then(function(t){if(t){this._oPersonalizationDeltas=o(t)}else{this._oPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"}}this._triggerMixinPersonalisationInSite(e,t)}.bind(this)).catch(this._oSiteDeferred.reject)}else{this._oPersonalizedPages={};this._ensureStandardVizTypesPresent(this._oOriginalSite).then(function(e){this._oOriginalSite=e;this._oOriginalSite=this._ensureProperDisplayFormats(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite)}.bind(this))}};z.prototype._applyPagePersonalization=function(e,t){var i=e.identification.id;if(Object.keys(t).length){var n=t.classicHomePage;if(n&&n.version==="3.1.0"){Object.keys(n).forEach(function(e){if(!t[e]){t[e]=n[e]}});delete t.classicHomePage;t._version=t.version}var r=new l(t._version||t.version);if(r.compareTo("3.1.0")<0){t={classicHomePage:t,_version:"3.1.0",version:"3.1.0"}}}this._oPersonalizationDeltas=t;var s=o(t[i],20)||{};var a=this._oSiteConverter.convertTo("3.0.0",o(e,20));return this._triggerMixinPersonalisationInSite(a,s).then(function(e){this._oPersonalizedPages[i]=this._oSiteConverter.convertTo("3.1.0",o(e,20));return this._oPersonalizedPages[i]}.bind(this))};z.prototype._migratePersonalizedPages=function(e){if(typeof this._oAdapter.migratePersonalizedPages!=="function"){return Promise.resolve(e)}return this._oAdapter.migratePersonalizedPages(e).then(function(e){if(e.length===0){return null}return this.save(e)}.bind(this)).then(function(){return e})};z.prototype._triggerMixinPersonalisationInSite=function(e,t){return new Promise(function(i,n){this._oPersonalizationProcessor.mixinPersonalization(e,t).done(function(e){this._oPersonalizedSite=this._ensureCompleteSite(e);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._ensureStandardVizTypesPresent(this._oPersonalizedSite).then(function(e){this._oPersonalizedSite=e;this._oPersonalizedSite=this._ensureProperDisplayFormats(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);i(this._oPersonalizedSite)}.bind(this)).catch(n)}.bind(this)).fail(function(e){this._oSiteDeferred.reject(e);n()}.bind(this))}.bind(this))};z.prototype.getHomepageGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=t&&t.site&&t.site.payload&&t.site.payload.groupsOrder?t.site.payload.groupsOrder:[];e.resolve(i)});return e.promise()};z.prototype.getGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=[];Object.keys(t.groups).forEach(function(e){i.push(t.groups[e])});e.resolve(i)});return e.promise()};z.prototype.getGroup=function(e){var t=new jQuery.Deferred;this.getSite().then(function(i){var n=i.groups[e];if(n){t.resolve(n)}else{t.reject("Group "+e+" not found")}});return t.promise()};z.prototype.getSite=function(){if(!this._bLoadPersonalization){this.getSiteWithoutPersonalization().then(this._loadAndApplyPersonalization.bind(this));this._bLoadPersonalization=true}return this._oSiteDeferred.promise()};z.prototype.getSiteWithoutPersonalization=function(){return this._oGetSitePromise};z.prototype.getPage=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var n=u.last("/core/spaces/myHome/myHomePageId");var r=u.last("/core/stableIDs/enabled");var o=u.last("/core/stableIDs/migratePersonalization");return Promise.resolve(this._oGetSitePromise).then(function(){if(this._oPersonalizedPages[e]){return this._oPersonalizedPages[e]}if(t||i&&e===n){return Promise.all([this._getPageFromAdapter(e),this._getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get page "+e)}).then(function(e){return this._applyPagePersonalization(e[0],e[1]).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this)).then(function(e){if(r&&o){return this._migratePersonalizedPages([e]).then(function(e){return e[0]})}return e}.bind(this))}return this._getPageFromAdapter(e)}.bind(this))};z.prototype._getPageFromAdapter=function(e){if(!this._oAdapter.getPage){return Promise.resolve(o(this._oOriginalSite.pages[e],20))}return this._oAdapter.getPage(e).then(function(t){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(i){var n=i[0];var r=i[1];this._oOriginalSite.pages[e]=t;this._oOriginalSite.visualizations=n;this._oOriginalSite.vizTypes=r;return o(t,20)}.bind(this))}.bind(this))};z.prototype._filterForProperPages=function(e){return e.filter(function(e){return!!e})};z.prototype.getPages=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var n=u.last("/core/spaces/myHome/myHomePageId");var r=u.last("/core/stableIDs/enabled");var o=u.last("/core/stableIDs/migratePersonalization");var s;if(this._mGetPagesPromises[e.toString()]){s=this._mGetPagesPromises[e.toString()]}else{s=Promise.resolve(this._oGetSitePromise).then(function(){if(t||i){return Promise.all([this._getPagesFromAdapter(e),this._getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get pages")}).then(function(e){var i=e[0];var s=e[1];return Promise.all(Object.keys(i).map(function(e){if(this._oPersonalizedPages[e]){return Promise.resolve(this._oPersonalizedPages[e])}if(!t&&e!==n){return Promise.resolve(i[e])}return this._applyPagePersonalization(i[e],s).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this))).then(function(e){if(r&&o){return this._migratePersonalizedPages(e)}return e}.bind(this)).then(function(e){return this._filterForProperPages(e)}.bind(this))}.bind(this))}return this._getPagesFromAdapter(e).then(function(e){return this._filterForProperPages(h(e))}.bind(this))}.bind(this));this._mGetPagesPromises[e.toString()]=s}return s};z.prototype._getPagesFromAdapter=function(e){if(!this._oAdapter.getPages){var t={};for(var i in this._oOriginalSite.pages){if(p(e,this._oOriginalSite.pages[i].identification.id)){t[i]=this._oOriginalSite.pages[i]}}return Promise.resolve(o(t,20))}return this._oAdapter.getPages(e).then(function(e){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(t){var i=t[0];var n=t[1];this._oOriginalSite.visualizations=i;this._oOriginalSite.vizTypes=n;Object.keys(e).forEach(function(t){this._oOriginalSite.pages[t]=e[t]}.bind(this));return o(e,20)}.bind(this))}.bind(this))};z.prototype.getAllPages=function(e){if(e&&e.personalizedPages){return this._getAllPersonalizedPages()}return this._getAssignedPageIds().then(function(e){return this.getPages(e)}.bind(this))};z.prototype._getAssignedPageIds=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getContentNodes()}).then(function(e){var t=[];e.forEach(function(e){this._collectPageIds(e,t)}.bind(this));return t}.bind(this))};z.prototype._collectPageIds=function(e,t){if(e.type===_.Page){if(t.indexOf(e.id)===-1){t.push(e.id)}}if(e.children!==undefined){e.children.forEach(function(e){this._collectPageIds(e,t)}.bind(this))}};z.prototype._getAllPersonalizedPages=function(){return Promise.resolve(this._oGetSitePromise).then(function(){return Promise.all([this._getAssignedPageIds(),this._getPersonalization(this._oOriginalSite._version)])}.bind(this)).then(function(e){var t=e[0];var i=e[1];var n=[];Object.keys(i).forEach(function(e){if(e==="version"||e==="_version"){return}if(!t.includes(e)){return}var r=i[e];if(Object.keys(r).length>1){n.push(e)}});if(n.length>0){return this.getPages(n)}return[]}.bind(this))};z.prototype.getApplications=function(){return new Promise(function(e,t){this.getSite().then(function(i){var n=i.applications;if(n){e(n)}else{t("CDM applications not found.")}}).fail(t)}.bind(this))};z.prototype.getVizTypes=function(){if(typeof this._oAdapter.getVizTypes==="function"){return Promise.all([this._getSiteProperty("vizTypes"),this._oAdapter.getVizTypes()]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})}return this.getCachedVizTypes()};z.prototype.getCachedVizTypes=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVizTypes==="function"){e=this._oAdapter.getCachedVizTypes()}return Promise.all([this._getSiteProperty("vizTypes"),e]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})};z.prototype.getVizType=function(e){var t=Promise.resolve();if(typeof this._oAdapter.getVizType==="function"){t=this._oAdapter.getVizType(e)}return Promise.all([this._getSiteProperty("vizTypes"),t]).then(function(t){var i=t[0];var n=t[1];if(n){i[e]=n}return i[e]})};z.prototype.getVisualizations=function(){if(typeof this._oAdapter.getVisualizations==="function"){return Promise.all([this._getSiteProperty("visualizations"),this._oAdapter.getVisualizations()]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})}return this.getCachedVisualizations()};z.prototype.getCachedVisualizations=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVisualizations==="function"){e=this._oAdapter.getCachedVisualizations()}return Promise.all([this._getSiteProperty("visualizations"),e]).then(function(e){var t=e[0];var i=e[1];return a(t,i)})};z.prototype._getSiteProperty=function(e){return new Promise(function(i,n){this.getSite().then(function(r){var o=t.get(e,r);if(o){i(o)}else{var s=e.toString();n("CDM "+s+" not found.")}}).fail(n)}.bind(this))};z.prototype.getGroupFromOriginalSite=function(e){var t=new jQuery.Deferred;if(typeof e==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[e]){t.resolve(s({},this._oOriginalSite.groups[e]))}else{t.reject("Group does not exist in original site.")}return t.promise()};z.prototype.getOriginalPage=function(e){return o(this._oOriginalSite.pages[e],20)};z.prototype.save=function(e){var t=new jQuery.Deferred;if(this._bPersonalizationLoadingFailed){var i="Prior personalization loading failed, cancelling save to prevent data loss. Saving this personalization will only be possible after reloading the FLP again.";g.error(i,null,m);t.reject(i);return t.promise()}if(this._oOriginalSite._version==="3.1.0"){if(!e){return t.reject("No page id was provided").promise()}if(typeof e==="string"){e=[e]}this._saveCdmVersion31(e).then(t.resolve).catch(t.reject)}else{this._saveCdmVersion30().then(t.resolve).catch(t.reject)}return t.promise()};z.prototype._saveCdmVersion30=function(){var e=this._oOriginalSite;var t=this._oPersonalizedSite;return new Promise(function(i,n){this._oPersonalizationProcessor.extractPersonalization(o(t,20),o(e,20)).done(i).fail(n)}.bind(this)).catch(function(){return Promise.reject("Personalization Processor: Cannot extract personalization.")}).then(function(e){if(!r(e)){if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version}this._oPersonalizationDeltas=e;return this._setPersonalization(this._oPersonalizationDeltas)}return Promise.resolve()}.bind(this))};z.prototype._saveCdmVersion31=function(e){var t=e.map(function(e){var t=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[e]);var i=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[e]);return new Promise(function(n,r){this._oPersonalizationProcessor.extractPersonalization(o(i,20),o(t,20)).done(function(t){n({pageId:e,personalization:t})}).fail(function(t){g.error("Cannot extract personalization of page "+e+": "+t,null,m);n()})}.bind(this))}.bind(this));return Promise.all(t).then(function(e){var t=false;e.forEach(function(e){if(!e){return}if(!r(e.personalization)){t=true;if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version}this._oPersonalizationDeltas[e.pageId]=e.personalization}}.bind(this));if(t){return this._setPersonalization(this._oPersonalizationDeltas)}return Promise.resolve()}.bind(this))};z.prototype._getPersonalization=function(e){return f.promisify(this._oAdapter.getPersonalization(e)).catch(function(e){g.error("Could not get page personalization",e,m);this._bPersonalizationLoadingFailed=true;return{}}.bind(this))};z.prototype._setPersonalization=function(e,t){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]}}return new Promise(function(i,n){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,e,t);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:i,reject:n})}.bind(this))}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(e,t);return new Promise(function(e,t){this._oPendingPersonalizationDeferred.then(e).fail(t).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var e=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(e,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery}}.bind(this))}.bind(this))};z.prototype._cleanupPersonalizationQueuePromises=function(e,t){t.forEach(function(t){e.then(t.resolve).catch(t.reject)})};z.prototype.registerContentProvider=function(){g.error("CommonDataModel.registerContentProvider is obsolete and should not be used.")};z.prototype._ensureCompleteSite=function(e){if(e.groups){var t=e.groups;Object.keys(t).forEach(function(e){if(!t[e]){delete t[e]}else{if(!t[e].payload){t[e].payload={}}if(!t[e].payload.links){t[e].payload.links=[]}if(!t[e].payload.tiles){t[e].payload.tiles=[]}if(!t[e].payload.groups){t[e].payload.groups=[]}}})}return e};z.prototype._ensureGroupsOrder=function(e){var i=t.get("site.payload.groupsOrder",e);var n=e.groups;var r=0;if(!i){return e}while(r<i.length){var o=i[r];if(!n[o]){i.splice(r,1)}else{r++}}return e};z.prototype.getPlugins=function(){var e=function(e,i){var n=Object.keys(i).length;if(n===0){return{}}if(!i.hasOwnProperty("Shell-plugin")){g.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+e+"'","plugin startup configuration cannot be determined correctly",m);return{}}if(n>1){g.warning("Multiple inbounds are defined for plugin '"+e+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",m)}var r=t.get("signature.parameters",i["Shell-plugin"])||{};return Object.keys(r).reduce(function(e,i){var n=t.get(i+".defaultValue.value",r);if(typeof n==="string"){e[i]=n}return e},{})};var n=function(e){Object.keys(e).filter(function(t){return typeof e[t]==="object"}).forEach(function(t){e[t]=n(e[t])});return Object.freeze(e)};var r;return function(o){if(o!==undefined){r=o}if(r){return jQuery.when(r)}r={};return this.getSiteWithoutPersonalization().then(function(o){var s=o.applications||{};Object.keys(s).filter(function(e){return t.get("type",this[e]["sap.flp"])==="plugin"},s).forEach(function(n){var o;var s=this[n];var l={};if(!i(s["sap.platform.runtime"])){g.error("Cannot find 'sap.platform.runtime' section for plugin '"+n+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else if(!i(s["sap.platform.runtime"].componentProperties)){g.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+n+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else{l=s["sap.platform.runtime"].componentProperties}r[n]={url:l.url,component:s["sap.ui5"].componentName};var u=t.get("crossNavigation.inbounds",s["sap.app"])||{};o=e(n,u);var p=a(l.config||{},o);if(p){r[n].config=p}if(l.asyncHints){r[n].asyncHints=l.asyncHints}var h=t.get("deviceTypes",s["sap.ui"]);if(h){r[n].deviceTypes=h}},s);return n(r)},function(e){return e})}}();z.prototype._mapDisplayFormats=function(e){var t={tile:v.Standard,standard:v.Standard,link:v.Compact,compact:v.Compact,flat:v.Flat,flatWide:v.FlatWide,tileWide:v.StandardWide,standardWide:v.StandardWide};var i=Object.keys(t).filter(function(t){return e.indexOf(t)>-1});return i.map(function(e){return t[e]})};z.prototype._ensureProperDisplayFormats=function(e){if(e.vizTypes){Object.keys(e.vizTypes).forEach(function(i){if(e.vizTypes[i]["sap.flp"]&&e.vizTypes[i]["sap.flp"].vizOptions){var n=e.vizTypes[i];var r=t.get("vizOptions.displayFormats.supported",n["sap.flp"]);var o=t.get("vizOptions.displayFormats.default",n["sap.flp"]);if(r){e.vizTypes[i]["sap.flp"].vizOptions.displayFormats.supported=this._mapDisplayFormats(r)}if(o){e.vizTypes[i]["sap.flp"].vizOptions.displayFormats.default=this._mapDisplayFormats([o])[0]}}}.bind(this))}if(e.hasOwnProperty("pages")){Object.keys(e.pages).forEach(function(t){var i=e.pages[t];if(i.payload&&i.payload.sections){var n=i.payload.sections;Object.keys(n).forEach(function(e){var t=n[e];Object.keys(t.viz).forEach(function(e){var i=t.viz[e];if(i.displayFormatHint){var n=this._mapDisplayFormats([i.displayFormatHint])[0];i.displayFormatHint=n||i.displayFormatHint}}.bind(this))}.bind(this))}}.bind(this))}else if(e.hasOwnProperty("groups")){Object.keys(e.groups).forEach(function(t){var i=e.groups[t];i.payload.tiles.forEach(function(e){if(e.displayFormatHint){var t=this._mapDisplayFormats([e.displayFormatHint])[0];e.displayFormatHint=t||e.displayFormatHint}}.bind(this))}.bind(this))}return e};z.prototype._ensureStandardVizTypesPresent=function(e){if(!(e._version&&e._version.startsWith("3."))){return Promise.resolve(e)}if(!e.vizTypes){e.vizTypes={}}var t=[];var i={};i[y.STATIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncher/manifest.json";i[y.DYNAMIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json";i[y.CARD]="sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json";Object.keys(i).forEach(function(n){if(!e.vizTypes[n]){var r=i[n];var o=this._loadManifest(r).then(function(t){e.vizTypes[n]=t});t.push(o)}}.bind(this));if(t.length===0){return Promise.resolve(e)}return Promise.all(t).then(function(){return e})};z.prototype._loadManifest=function(e){if(!this._oManifestCache[e]){var t=sap.ui.require.toUrl(e);this._oManifestCache[e]=P.load({manifestUrl:t,async:true}).then(function(e){return e.getRawJson()})}return this._oManifestCache[e].then(function(e){return o(e)})};z.prototype.getMenuEntries=function(e){return new Promise(function(i,n){this.getSite().then(function(n){var r=t.get("menus."+e+".payload.menuEntries",n);i(o(r)||[])})}.bind(this))};z.prototype.getContentProviderIds=function(){return new Promise(function(e,t){this.getSite().then(function(t){var i=Object.keys(t.systemAliases);var n={};h(t.applications).forEach(function(e){var t=d.getContentProviderId(e);if(p(i,t)){n[t]=true}});e(Object.keys(n))})}.bind(this))};z.hasNoAdapter=false;return z},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ContentExtensionAdapterFactory", ["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery"],function(e,r,jQuery){"use strict";var n={};n.getAdapters=function(r){var t=n._getConfigAdapters(r);var a={};var i=t.map(function(r){var t=e.last(r.configSwitch);if(!t){return Promise.resolve()}var i=n._getAdapter(r);i.then(function(e){a[r.contentProviderName]=e});return i});return new Promise(function(e){jQuery.when.apply(jQuery,i).then(function(){e(a)})})};n._getConfigAdapters=function(e){if(!e){e=r._getConfigAdapters()}if(!Array.isArray(e)){e=[e]}return e};n._getAdapter=function(e){var r=new jQuery.Deferred;var t=e.configHandler?e.configHandler():{};var a=e.adapter.replace(/\./g,"/");sap.ui.require([a],function(){var a=n._getAdapterInstance(e.adapter,e.system,null,t);r.resolve(a)});return r.promise()};n._getAdapterInstance=function(e,r,n,t){var a=sap.ui.require(e.replaceAll(".","/"));if(a){var i={config:t||{}};return new a(r,n,i)}return null};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CrossApplicationNavigation", ["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/UI5ComponentType","sap/base/Log","sap/ushell/utils/UrlParsing","sap/base/util/deepClone","sap/ui/base/Object"],function(e,t,n,a,r,i,s,jQuery,o,p,c,l,u,f,h,v,g){"use strict";function m(m,d,A){var y;if(A&&A.config){y=A.config}function S(a,r){var i;var o;var p;if(typeof a!=="string"&&!s(a)&&a!==undefined){f.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(a===undefined){return undefined}var c=e.getCurrentApplication();if(r){if(typeof r.getComponentData!=="function"||!s(r.getComponentData())||!r.getComponentData().startupParameters||!s(r.getComponentData().startupParameters)){f.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation")}else{var l=r.getComponentData().startupParameters;if(l.hasOwnProperty("sap-system")){i=l["sap-system"][0]}if(l.hasOwnProperty("sap-ushell-next-navmode")){o=l["sap-ushell-next-navmode"][0]}}}else{if(c&&c["sap-system"]){i=c["sap-system"]}else if(c&&c.url){i=new URL(c.url,window.location.href).searchParams.get("sap-system")}if(c&&c["sap-ushell-next-navmode"]){o=c["sap-ushell-next-navmode"]}else if(c&&c.url){o=new URL(c.url,window.location.href).searchParams.get("sap-ushell-next-navmode")}}if(c){p=c.contentProviderId}var u=t._injectParameters({type:n,inject:{"sap-system":i,"sap-ushell-navmode":o,"sap-app-origin-hint":p},injectEmptyString:{"sap-app-origin-hint":true},args:a});return u}function C(e){if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return e}if(!y||!y["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return e}}if(typeof e!=="string"&&!s(e)&&e!==undefined){f.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(e===undefined){return undefined}if(s(e)){var t=i({},e);if(t.target&&t.target.shellHash){if(typeof t.target.shellHash==="string"){if(t.target.shellHash!=="#"&&t.target.shellHash!==""){t.target.shellHash=C(t.target.shellHash)}}return t}t.params=t.params||{};t.params["sap-ushell-enc-test"]=["A B%20C"];return t}var n=e;if(!/[?&]sap-system=/.test(n)){var a=n.indexOf("?")>-1?"&":"?";n+=a+"sap-ushell-enc-test="+encodeURIComponent("A B%20C")}return n}this._extractInnerAppRoute=function(e){var t=this;if(typeof e==="string"){var n=e.split("&/");var a=n.shift();return{intent:a,innerAppRoute:n.length>0?"&/"+n.join("&/"):""}}if(Object.prototype.toString.apply(e)==="[object Object]"){var r=o.get("target.shellHash",e);if(typeof r==="string"){var i=t._extractInnerAppRoute(r);e.target.shellHash=i.intent;return{intent:e,innerAppRoute:i.innerAppRoute}}if(e.hasOwnProperty("appSpecificRoute")){var s=e.appSpecificRoute;delete e.appSpecificRoute;var p=typeof s==="string"&&s.indexOf("&/")!==0&&s.length>0;return{innerAppRoute:p?"&/"+s:s,intent:e}}return{intent:e,innerAppRoute:""}}f.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:e}};this._injectInnerAppRoute=function(e,t){var n=this;if(!t){return e}if(typeof e==="string"){return e+t}if(Object.prototype.toString.apply(e)==="[object Object]"){var a=o.get("target.shellHash",e);if(typeof a==="string"){e.target.shellHash=n._injectInnerAppRoute(a,t);return e}e.appSpecificRoute=t}return e};this.hrefForExternal=function(e,i,s){if(typeof i!=="object"&&i!==undefined&&i!==null){s=i;i=undefined}if(s){var o=new jQuery.Deferred;this.hrefForExternalAsync(e,i).then(o.resolve).catch(o.reject);return o.promise()}f.error("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");var c=p({},e);var l=this._extractInnerAppRoute(c);var u=l.intent;t.addXAppStateFromParameter(u,"sap-xapp-state-data");c=S(u,i);c=t.injectStickyParameters({args:c,appLifeCycle:r,technicalParameters:a,type:n});c=C(c);c=this._injectInnerAppRoute(c,l.innerAppRoute);var h=sap.ushell.Container.getService("ShellNavigation");if(!h){f.debug("Shell not available, no Cross App Navigation");return""}return h.hrefForExternalSync(c,undefined,i)};this.hrefForExternalAsync=function(e,i){var s=p({},e);var o=this._extractInnerAppRoute(s);var c=o.intent;return Promise.resolve().then(function(){return t.addXAppStateFromParameterAsync(c,"sap-xapp-state-data")}).then(function(){s=S(c,i);return t.injectStickyParametersAsync({args:s,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){s=e;s=C(s);s=this._injectInnerAppRoute(s,o.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigation")}.bind(this)).then(function(e){return new Promise(function(t,n){e.hrefForExternal(s,undefined,i).then(t).catch(n)})}).catch(function(){f.debug("Shell not available, no Cross App Navigation");return""})};this.expandCompactHash=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.expandCompactHash(e).done(t.resolve).fail(t.reject)});return t.promise()};this.backToPreviousApp=function(){return this.isInitialNavigationAsync().then(function(e){if(e){return this.toExternal({target:{shellHash:"#"},writeHistory:false})}this.historyBack();return undefined}.bind(this))};this.historyBack=function(e){var t=-1;if(e&&typeof e==="number"){if(e<=0){f.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack")}t=e*-1}window.history.go(t)};this.isInitialNavigation=function(){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=o.get("sap.ushell.Container");var t=e&&typeof e.getService==="function"&&e.getService("ShellNavigation");if(!t){f.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true}var n=t.isInitialNavigation();if(typeof n==="undefined"){return true}return n};this.isInitialNavigationAsync=function(){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){var t=e.isInitialNavigation();if(typeof t==="undefined"){return true}return t}).catch(function(){f.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true})};this.toExternal=function(e,i){var s=e.writeHistory;var o=p({},e);var c=p({},o);this._processShellHashWithParams(o);var l=this._extractInnerAppRoute(o);var u=l.intent;var h;var v;return Promise.all([sap.ushell.Container.getServiceAsync("AppLifeCycle"),sap.ushell.Container.getServiceAsync("ShellNavigation")]).then(function(e){var t=e[0];h=e[1];v=t.getCurrentApplication();return v&&v.getIntent()}).then(function(e){this._checkIfAppNeedsToBeReloaded(c,v,e,h.hashChanger);return t.addXAppStateFromParameterAsync(u,"sap-xapp-state-data")}.bind(this)).then(function(){o=S(u,i);return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;o=C(o);delete o.writeHistory;o=this._injectInnerAppRoute(o,l.innerAppRoute);return h.toExternal(o,i,s)}.bind(this)).catch(function(e){f.error("CrossAppNavigation.toExternal failed",e,"sap.ushell.services.CrossApplicationNavigation")})};this._checkIfAppNeedsToBeReloaded=function(e,t,n,a){if(!t||!n||!e||!e.target){return}if(e.target.shellHash){var r=h.parseShellHash(e.target.shellHash)||{};e.target={semanticObject:r.semanticObject,action:r.action,contextRaw:r.contextRaw};e.appSpecificRoute=r.appSpecificRoute;e.params=Object.assign({},e.params,r.params)}if(e.appSpecificRoute){return}if(t.applicationType!=="UI5"){return}if(e.target.semanticObject!==n.semanticObject){return}if(e.target.action!==n.action){return}var i={params:{}};if(e.params){Object.keys(e.params).forEach(function(t){var n=e.params[t];var a=Array.isArray(n)?n:[n];i.params[t]=a.map(function(e){return e.toString()})})}if(!h.haveSameIntentParameters(i,n)){return}a.setReloadApplication(true)};this.hrefForAppSpecificHash=function(e){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var t=o.get("sap.ushell.Container");if(t&&typeof t.getService==="function"){var n=t.getService("ShellNavigation");if(n){return n.hrefForAppSpecificHash(e)}}f.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)};this.hrefForAppSpecificHashAsync=function(e){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){return t.hrefForAppSpecificHash(e)}).catch(function(){f.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)})};this.getPrimaryIntent=function(e,t){var n={};var a;var r=/^#\w+-displayFactSheet(?:$|\?.)/;n.tags=["primaryAction"];n.semanticObject=e;if(t){n.params=t}return this.getLinks(n).then(function(e){if(e.length===0){delete n.tags;n.action="displayFactSheet";a=function(e,t){var n;if(e.intent===t.intent){return 0}n=r.test(e.intent)^r.test(t.intent);if(n){return r.test(e.intent)?-1:1}return e.intent<t.intent?-1:1};return this.getLinks(n)}a=function(e,t){if(e.intent===t.intent){return 0}return e.intent<t.intent?-1:1};return e}.bind(this)).then(function(e){return e.length===0?null:e.sort(a)[0]})};this.getSemanticObjectLinks=function(e,i,s,o,p,l){var u=new jQuery.Deferred;Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:{params:i},appLifeCycle:r,technicalParameters:a,type:n})}).then(function(t){t=S(t,o).params;t=C({params:t}).params;var n;if(Array.isArray(e)){n=[];e.forEach(function(e){n.push([{semanticObject:e[0],params:e[1],ignoreFormFactor:!!e[2],ui5Component:e[3],appStateKey:e[4],compactIntents:!!e[5]}])})}else{n={semanticObject:e,params:t,ignoreFormFactor:s,ui5Component:o,appStateKey:p,compactIntents:!!l}}return Promise.all([sap.ushell.Container.getServiceAsync("NavTargetResolution"),n])}).then(function(e){var t=e[0];var n=e[1];c.invokeUnfoldingArrayArguments(t.getLinks.bind(t),[n]).done(u.resolve).fail(u.reject)});return u.promise()};this.getLinks=function(e){var t;t=c.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[e]);return t};this._getLinks=function(e){var s=new jQuery.Deferred;if(typeof e==="undefined"){e={}}var o=i({},e);o.compactIntents=!!o.compactIntents;o.action=o.action||undefined;o.paramsOptions=t.extractGetLinksParameterOptions(o.params);Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;var n;if(o.params){n=t.extractGetLinksParameterDefinition(o.params)}else{n=o.params}var a=S({params:n},o.ui5Component).params;a=C({params:a}).params;if(o.appStateKey){a["sap-xapp-state"]=[o.appStateKey];delete o.appStateKey}o.params=a;return sap.ushell.Container.getServiceAsync("NavTargetResolution")}).then(function(e){e.getLinks(o).done(s.resolve).fail(s.reject)});return s.promise()};this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(t){t.getDistinctSemanticObjects().done(e.resolve).fail(e.reject)});return e.promise()};this.isIntentSupported=function(e,t){var n=new jQuery.Deferred;var a={};var r=e.map(function(e){var n=S(e,t);a[n]=e;return n});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.isIntentSupported(r).done(function(e){var t={};Object.keys(e).forEach(function(n){t[a[n]]=e[n]});n.resolve(t)}).fail(n.reject.bind(n))});return n.promise()};this.isNavigationSupported=function(e,t){var n=new jQuery.Deferred;var a=v(e).map(function(e){var n=this._extractInnerAppRoute(e);return S(n.intent,t)}.bind(this));sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.isNavigationSupported(a).done(n.resolve).fail(n.reject)});return n.promise()};this.isUrlSupported=function(e){return new Promise((t,n)=>{if(typeof e!=="string"){n()}if(h.isIntentUrl(e)){const a=h.getHash(e);const r={target:{shellHash:a}};this.isNavigationSupported([r]).done(e=>{if(e[0].supported){t()}else{n()}}).fail(()=>{n()})}else{t()}})};this.createComponentInstance=function(e,t,n){var a=new jQuery.Deferred;var r=sap.ushell.Container;var i;this.createComponentData(e,t).then(function(e){r.getServiceAsync("Ui5ComponentLoader").then(function(t){return t.modifyComponentProperties(e,u.Application).then(function(e){i=e;return t})}).then(function(e){if(n){n.runAsOwner(function(){t(i)})}else{t(i)}function t(t){t.loadDefaultDependencies=false;e.instantiateComponent(t).then(function(e){a.resolve(e.componentHandle.getInstance())},function(e){e=e||"";f.error("Cannot create UI5 component: "+e,e.stack,"sap.ushell.services.CrossApplicationNavigation");a.reject(e)})}})},function(e){a.reject(e)});return a.promise()};this.createComponentData=function(e,t){return new Promise(function(n,a){var r=sap.ushell.Container;if(!t){t={}}else{var s=Object.keys(t).length;if(s>1||s===1&&!t.componentData){a("`oConfig` argument should either be an empty object or contain only the `componentData` property.");return}}if(t.componentData){delete t.componentData.startupParameters;delete t.componentData.config;delete t.componentData["sap-xapp-state"]}var o=h.constructShellHash(h.parseShellHash(e));if(!o){a("Navigation intent invalid!");return}r.getServiceAsync("NavTargetResolution").then(function(s){s.resolveHashFragment("#"+o).then(function(s){function o(e){e=i({},e,t);if(!e.ui5ComponentName){if(e.additionalInformation){e.ui5ComponentName=e.additionalInformation.replace(/^SAPUI5\.Component=/,"")}else if(e.name){e.ui5ComponentName=e.name}}return e}if(s.applicationType===l.URL.type&&s.appCapabilities&&s.appCapabilities.appFrameworkId==="UI5"&&sap.ushell.Container.inAppRuntime()){sap.ui.require(["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"],function(t){let n;try{const e=new URL(s.url);const t=new URLSearchParams(e.search);n=t.get("sap-ui-app-id")}catch(e){n=s.url.match(/[?&]sap-ui-app-id=([^&]+)/)[1]}t.getAppInfo(n).then(function(t){if(t.hasOwnProperty("oResolvedHashFragment")){t=t.oResolvedHashFragment}t=o(t);if(t.url&&e.indexOf("?")>0){t.url+="?"+e.split("?")[1]}p({ui5ComponentName:n,applicationDependencies:t,url:t.url})})})}else if(s.applicationType!==l.URL.type&&!/^SAPUI5\.Component=/.test(s.additionalInformation)){a("The resolved target mapping is not of type UI5 component.")}else{p(s)}function p(e){r.getServiceAsync("Ui5ComponentLoader").then(function(t){e=o(e);e.loadDefaultDependencies=false;t.createComponentData(e).then(function(e){n(e)},function(e){e=e||"";f.error("Cannot get UI5 component data: "+e,e.stack,"sap.ushell.services.CrossApplicationNavigation");a(e)})})}})})})};this.createEmptyAppState=function(e,t,n,a){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var r=sap.ushell.Container.getService("AppState");if(!g.isA(e,"sap.ui.core.UIComponent")){throw new Error("The passed oAppComponent must be a UI5 Component.")}return r.createEmptyAppState(e,t,n,a)};this.createEmptyAppStateAsync=function(e,t,n,a){if(!g.isA(e,"sap.ui.core.UIComponent")){return Promise.reject("The passed oAppComponent must be a UI5 Component.")}return sap.ushell.Container.getServiceAsync("AppState").then(function(r){return r.createEmptyAppState(e,t,n,a)})};this.getStartupAppState=function(e){this._checkComponent(e);var t=e.getComponentData()&&e.getComponentData()["sap-xapp-state"]&&e.getComponentData()["sap-xapp-state"][0];return this.getAppState(e,t)};this._checkComponent=function(e){if(!g.isA(e,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}};this.getAppState=function(e,t){var n;var a=new jQuery.Deferred;this._checkComponent(e);sap.ushell.Container.getServiceAsync("AppState").then(function(r){if(typeof t!=="string"){if(t!==undefined){f.error("Illegal Argument sAppStateKey ")}setTimeout(function(){n=r.createEmptyUnmodifiableAppState(e);a.resolve(n)},0);return}r.getAppState(t).done(a.resolve).fail(a.reject)});return a.promise()};this.getAppStateData=function(e){return c.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[e])};this._getAppStateData=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){if(typeof e!=="string"){if(e!==undefined){f.error("Illegal Argument sAppStateKey ")}setTimeout(function(){t.resolve(undefined)},0)}else{n.getAppState(e).done(function(e){t.resolve(e.getData())}).fail(t.resolve.bind(t,undefined))}});return t.promise()};this.saveMultipleAppStates=function(e){var t=[];var n=new jQuery.Deferred;e.forEach(function(e){t.push(e.save())});jQuery.when.apply(this,t).done(function(){n.resolve(t)}).fail(function(){n.reject("save failed")});return n.promise()};this._processShellHashWithParams=function(e){if(e&&e.processParams===true&&e.target&&e.target.shellHash&&e.params){var t=h.parseShellHash(e.target.shellHash);e.target={semanticObject:t.semanticObject,action:t.action,contextRaw:t.contextRaw};e.appSpecificRoute=t.appSpecificRoute;e.params=Object.assign({},e.params,t.params)}};this.getSupportedAppStatePersistencyMethods=function(){f.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=sap.ushell.Container.getService("AppState");return e.getSupportedPersistencyMethods()};this.getSupportedAppStatePersistencyMethodsAsync=function(){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){return e.getSupportedPersistencyMethods()})};this.makeStatePersistent=function(e,t,n){var a=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.makeStatePersistent(e,t,n).done(a.resolve).fail(a.reject)});return a.promise()};this.resolveIntent=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.resolveHashFragment(e).then(function(e){t.resolve({url:e.url})}).fail(function(e){t.reject(e)})});return t.promise()}}m.hasNoAdapter=true;return m},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/DarkModeSupport", ["sap/base/Log","sap/ui/core/Configuration","sap/ui/core/Core","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub"],function(e,t,i,a,r,n){"use strict";var s="(prefers-color-scheme: dark)";function o(){this.channel=n.createChannel({mode:undefined});this.darkMediaQueryList=window.matchMedia(s);this.doables=[];this.themeChangedCallback=null;this.darkMediaQueryListListener=null}o.Mode={LIGHT:"light",DARK:"dark"};o.prototype.setup=function(){if(this.initialized){return}this.initialized=true;this.themeChangedCallback=function(){this.channel.emit("/mode",this.getCurrentThemeMode())}.bind(this);i.attachThemeChanged(this.themeChangedCallback);this.themeChangedCallback();if(this.canAutomaticallyToggleDarkMode()&&sap.ushell.Container.getUser().getDetectDarkMode()){this.enableDarkModeBasedOnSystem()}};o.prototype.destroy=function(){this.channel.emit("/mode",null);this.doables.forEach(function(e){e.off()});this.doables=[];if(this.initialized){i.detachThemeChanged(this.themeChangedCallback);this.themeChangedCallback=null;this.disableDarkModeBasedOnSystem();this.initialized=false}};o.prototype.attachModeChanged=function(e){var t=this.channel.on("/mode").do(function(t){e(t)});this.doables.push(t)};o.prototype.canAutomaticallyToggleDarkMode=function(){var e=this.darkMediaQueryList.media===s;return e&&!new URLSearchParams(window.location.search).get("sap-theme")};o.prototype.isThemeSupportDarkMode=function(e){e=e||this._getCurrentTheme();return!!this._findSupportedThemePair(e)};o.prototype._toggleDarkModeBasedOnSystemColorScheme=function(){var e=this._getCurrentTheme();if(this.darkMediaQueryList&&this.isThemeSupportDarkMode(e)){var t=this._findSupportedThemePair(e);var i=this.darkMediaQueryList.matches;var a=i?t.dark:t.light;sap.ushell.Container.getUser().applyTheme(a)}};o.prototype._applyDefaultUserTheme=function(){var e=sap.ushell.Container.getUser();if(e.constants&&e.constants.themeFormat){e.applyTheme(e.getTheme(e.constants.themeFormat.ORIGINAL_THEME))}};o.prototype.toggleModeChange=function(){var e=this._getCurrentTheme();var t=this._findSupportedThemePair(e);if(t){var i=e===t.light?t.dark:t.light;sap.ushell.Container.getUser().applyTheme(i)}};o.prototype.enableDarkModeBasedOnSystem=function(){if(!this.initialized){e.warning("Automatic dark mode detection cannot be enabled, because the DarkModeSupport service was not setup.");return}if(!this.canAutomaticallyToggleDarkMode()){e.warning("Automatic dark mode detection cannot be enabled, because your browser does not support dark mode detection");return}if(this.darkMediaQueryListListener){e.warning("Automatic dark mode detection was already enabled");return}if(a.support.matchmedialistener){this.darkMediaQueryListListener=this._toggleDarkModeBasedOnSystemColorScheme.bind(this);this.darkMediaQueryList.addListener(this.darkMediaQueryListListener)}this._toggleDarkModeBasedOnSystemColorScheme()};o.prototype.disableDarkModeBasedOnSystem=function(){if(this.darkMediaQueryListListener){this.darkMediaQueryList.removeListener(this.darkMediaQueryListListener);this.darkMediaQueryListListener=null}this._applyDefaultUserTheme()};o.prototype.getCurrentThemeMode=function(){var e=this._getCurrentTheme();var t=this._findSupportedThemePair(e);if(t){return e===t.light?o.Mode.LIGHT:o.Mode.DARK}return null};o.prototype._getCurrentTheme=function(){return t.getTheme()};o.prototype._findSupportedThemePair=function(e){var t=r.last("/core/darkMode/supportedThemes");return t.filter(function(t){return t.dark===e||t.light===e})[0]};o.hasNoAdapter=true;return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension", ["sap/ui/core/Element","./Extension/FloatingContainer","./Extension/Footer","./Extension/Item","./Extension/Header","./Extension/SidePane","./Extension/ToolArea","sap/ushell/Container","sap/ushell/utils"],function(e,t,n,r,o,i,s,a,d){"use strict";function c(){}c.prototype._createItemVisibilityHandler=function(e,t,n){return async function r(o,i,s){const a=s?[s]:undefined;if(o){await d.promisify(t(e,i,a));return}await d.promisify(n(e,i,a))}};c.prototype._createControl=async function(e,t){return d.promisify(e(...t))};c.prototype.getHeader=async function(){return new o};c.prototype.createHeaderItem=async function(e,t={}){const{position:n}=t;const r=["begin","end",undefined];if(!r.includes(n)){throw new Error(`Unexpected Input: '${n}' is not a valid position!`)}if(n==="begin"){return this._createHeaderStartItem(e)}return this._createHeaderEndItem(e)};c.prototype._createHeaderStartItem=async function(t){const n=a.getRendererInternal();const o=[t,false,undefined,undefined];const i=n.addHeaderItem.bind(n);const s=n.showHeaderItem.bind(n);const d=n.hideHeaderItem.bind(n);const c=!!e.getElementById(t.id);const u=await this._createControl(i,o);const l=this._createItemVisibilityHandler(u.getId(),s,d);return new r(u,l,c)};c.prototype._createHeaderEndItem=async function(t){const n=a.getRendererInternal();const o=[t,false,undefined,undefined];const i=n.addHeaderEndItem.bind(n);const s=n.showHeaderEndItem.bind(n);const d=n.hideHeaderEndItem.bind(n);const c=!!e.getElementById(t.id);const u=await this._createControl(i,o);const l=this._createItemVisibilityHandler(u.getId(),s,d);return new r(u,l,c)};c.prototype.createSubHeader=async function(t,n={}){const o=a.getRendererInternal();const i=[{controlType:n.controlType||"sap.m.Bar",oControlProperties:t,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const s=o.addShellSubHeader.bind(o);const d=o.showSubHeader.bind(o);const c=o.hideSubHeader.bind(o);const u=!!e.getElementById(t.id);const l=await this._createControl(s,i);const p=this._createItemVisibilityHandler(l.getId(),d,c);return new r(l,p,u)};c.prototype.getSidePane=async function(){return new i};c.prototype.getToolArea=async function(){return new s};c.prototype.createUserAction=async function(t,n={}){const o=a.getRendererInternal();const i=[{controlType:n.controlType||"sap.m.Button",oControlProperties:t,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const s=o.addUserAction.bind(o);const d=o.showActionButton.bind(o);const c=o.hideActionButton.bind(o);const u=!!e.getElementById(t.id);const l=await this._createControl(s,i);const p=this._createItemVisibilityHandler(l.getId(),d,c);return new r(l,p,u)};c.prototype.createFooter=async function(e,t={}){const r=a.getRendererInternal();const o=[{controlType:t.controlType||"sap.m.Bar",oControlProperties:e}];const i=r.setShellFooter.bind(r);const s=await this._createControl(i,o);return new n(s)};c.prototype.addUserSettingsEntry=async function(e){const t=a.getRendererInternal();await d.promisify(t.addUserPreferencesEntry(e))};c.prototype.addGroupedUserSettingsEntry=async function(e){const t=a.getRendererInternal();await d.promisify(t.addUserPreferencesGroupedEntry(e))};c.prototype.getFloatingContainer=async function(){return new t};c.hasNoAdapter=true;return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/FloatingContainer", ["sap/ushell/Container"],function(e){"use strict";class t{#e=e.getRendererInternal();#t=null;setContent(e,t){this.#e.setFloatingContainerContent(e);this.#t={onAfterRendering:()=>{this.#e.setFloatingContainerDragSelector(t)}};e.addEventDelegate(this.#t,this);return this}show(){this.#e.setFloatingContainerVisibility(true);return this}hide(){this.#e.setFloatingContainerVisibility(false);return this}async isDocked(){const e=this.#e.getFloatingContainerState()||"";return e.startsWith("docked")}async isVisible(){return this.#e.getFloatingContainerVisiblity()}}return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/Footer", ["sap/ushell/Container"],function(r){"use strict";class e{#r=r.getRendererInternal();#e=null;constructor(r){this.#e=r}async getControl(){return this.#e}async destroy(){this.#r.removeFooterById(this.#e.getId())}}return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/Header", ["sap/base/Log","sap/ushell/Config","sap/ushell/Container","sap/ushell/utils"],function(t,e,i,s){"use strict";class r{#t=i.getRendererInternal();#e={};#i=async(t,e,i)=>{const r=i?[i]:undefined;await s.promisify(this.#t.setHeaderVisibility(t,e,r))};setTitle(t){this.#t.setHeaderTitle(t);return this}setVisibilityForCurrentApp(e){if(!e&&this.#e[this.#s()]){t.warning("The header was set to 'visible' for the current launchpad state and cannot be turned off for this app")}this.#i(e,true,undefined)}setVisibilityForLaunchpadState(t,e){this.#e[t]=e;this.#i(e,false,t)}showForCurrentApp(){this.setVisibilityForCurrentApp(true);return this}hideForCurrentApp(){if(this.#e[this.#s()]){t.warning("The extension was set visible for the current launchpad state and cannot be turned off for this app")}this.setVisibilityForCurrentApp(false);return this}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}#s(){const t=e.last("/core/shell/model/currentState/stateName");return t}}return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/Item", ["sap/base/Log","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config"],function(t,e,i){"use strict";class s{#t=null;#e={};#i=async(t,e,i,s)=>{throw new Error("Shall be implemented by item")};constructor(i,s,r){this.#t=i;this.#i=s;if(!r){const t=e.getElementsModel();t.addElementToManagedQueue(this.#t)}else{t.warning("The control was pre-created and the application is responsible for the control life cycle")}}#s(){const t=e.getElementsModel();t.removeElementFromManagedQueue(this.#t)}async getControl(){return this.#t}async destroy(){this.#t.destroy()}setVisibilityForCurrentApp(e){if(!e&&this.#e[this.#r()]){t.warning("The item was set to 'visible' for the current launchpad state and cannot be turned off for this app")}this.#i(e,true,undefined)}setVisibilityForLaunchpadState(t,e){if(e){this.#s()}this.#e[t]=e;this.#i(e,false,t)}showForCurrentApp(){this.setVisibilityForCurrentApp(true);return this}hideForCurrentApp(){if(this.#e[this.#r()]){t.warning("The extension was set visible for the current launchpad state and cannot be turned off for this app")}this.setVisibilityForCurrentApp(false);return this}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}#r(){const t=i.last("/core/shell/model/currentState/stateName");return t}}return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/SidePane", ["sap/ui/core/Element","./Item","sap/ushell/Container","sap/ushell/utils"],function(e,t,i,n){"use strict";class s{#e=i.getRendererInternal();#t=async(e,t,i)=>{const s=[i,e];await n.promisify(this.#e.setLeftPaneVisibility(...s))};async createItem(i,s){const r=[{controlType:s.controlType,oControlProperties:i,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const a=this.#e.addSidePaneContent.bind(this.#e);const o=this.#e.showLeftPaneContent.bind(this.#e);const d=this.#e.hideLeftPaneContent.bind(this.#e);const h=!!e.getElementById(i.id);const l=await n.promisify(a(...r));async function u(e,t,i){const s=i?[i]:undefined;if(e){await n.promisify(o(l.getId(),t,s));return}await n.promisify(d(l.getId(),t,s))}return new t(l,u,h)}setVisibilityForLaunchpadState(e,t){this.#t(t,false,e)}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}}return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/ToolArea", ["sap/ui/core/Element","./Item","sap/ushell/Container","sap/ushell/utils"],function(e,t,i,r){"use strict";class s{#e=i.getRendererInternal();#t=async(e,t,i)=>{const s=[i,e];await r.promisify(this.#e.showToolArea(...s))};async createItem(i){const s=[i,null,undefined,undefined];const n=this.#e.addToolAreaItem.bind(this.#e);const a=this.#e.showToolAreaItem.bind(this.#e);const o=this.#e.removeToolAreaItem.bind(this.#e);const d=!!e.getElementById(i.id);const h=await r.promisify(n(...s));async function l(e,t,i){const s=i?[i]:undefined;if(e){await r.promisify(a(h.getId(),t,s));return}await r.promisify(o(h.getId(),t,s))}return new t(h,l,d)}setVisibilityForLaunchpadState(e,t){this.#t(t,false,e)}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}}return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/LaunchPage", ["sap/base/Log","sap/base/util/extend","sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/appstate/AppStatePersistencyMethod","sap/ushell/Config","sap/m/library","sap/m/GenericTile"],function(e,t,r,jQuery,i,o,n,a,s){"use strict";var u=a.LoadState;function l(o){var a=this,l=[],d=r.getAdapters();this.oAdapters={default:o};d.then(function(e){t(this.oAdapters,e)}.bind(this));this.getGroups=function(){if(n.last("/core/spaces/enabled")){return(new jQuery.Deferred).resolve([]).promise()}var t=new jQuery.Deferred;d.then(function(){var r=Object.keys(a.oAdapters).map(function(e){return a._getAdapter(e).getGroups()});jQuery.when.apply(jQuery,r).done(function(){var e=[].concat.apply([],arguments);t.resolve(e)}).fail(function(){e.error("getGroups failed")})});return t.promise()};this.getGroupsForBookmarks=function(t){var r=new jQuery.Deferred;this.getGroups().then(function(o){this.getDefaultGroup().then(function(e){if(o.length>0){o=o.filter(function(e){if(t===true){return this.isGroupVisible(e)}return!this.isGroupLocked(e)&&this.isGroupVisible(e)}.bind(this));o=o.map(function(t){return{title:t===e&&i.i18n.getText("my_group")||this.getGroupTitle(t),object:t}}.bind(this))}r.resolve(o)}.bind(this),function(t){e.error("getGroupsForBookmarks - getDefaultGroup - failed: "+t.message)})}.bind(this),function(t){e.error("getGroupsForBookmarks - getGroups - failed: "+t.message)});return r.promise()};this.getGroupTilesForSearch=function(e){var t=this._getAdapter(e.contentProvider);if(t.getGroupTileClones){return t.getGroupTileClones(e)}return Promise.resolve(this.getGroupTiles(e))};this.getDefaultGroup=function(){var t=this._getAdapter().getDefaultGroup();t.fail(function(){e.error("getDefaultGroup failed")});return t};this.getGroupTitle=function(e){return this._getAdapter(e.contentProvider).getGroupTitle(e)};this.getGroupId=function(e){return this._getAdapter(e.contentProvider).getGroupId(e)};this.getGroupById=function(e){var t=new jQuery.Deferred;this.getGroups().then(function(r){t.resolve(r.find(function(t){return this.getGroupId(t)===e}.bind(this)))}.bind(this));return t.promise()};this.getGroupTiles=function(e){return this._getAdapter(e.contentProvider).getGroupTiles(e)};this.getTilesByGroupId=function(e){var t=new jQuery.Deferred,r=this;this.getGroupById(e).then(function(i){if(i){var o=r._getAdapter(i.contentProvider).getGroupTiles(i);if(o){o=o.map(function(t){return{id:r.getTileId(t),title:r.getTileTitle(t),subtitle:r.getCatalogTilePreviewSubtitle(t),url:r.getCatalogTileTargetURL(t),icon:r.getCatalogTilePreviewIcon(t),groupId:e}})}else{o=[]}t.resolve(o)}else{t.resolve([])}});return t.promise()};this.getLinkTiles=function(e){return this._getAdapter(e.contentProvider).getLinkTiles(e)};this.addGroupAt=function(t,r){var i,o=r,n=this._getAdapter();if(n.addGroupAt){i=n.addGroupAt(t,r);i.fail(function(){e.error("addGroup "+t+" failed")})}else{var a=new jQuery.Deferred;i=n.addGroup(t);i.done(function(e){var t=this.moveGroup(e,o),r=e;t.done(function(){a.resolve(r)});t.fail(function(){a.reject()})}.bind(this));i.fail(function(){e.error("addGroup "+t+" failed");a.reject()});return a.promise()}return i};this.addGroup=function(t){var r=this._getAdapter().addGroup(t);r.fail(function(){e.error("addGroup "+t+" failed")});return r};this.removeGroup=function(t,r){var i=this._getAdapter(t.contentProvider).removeGroup(t,r);i.fail(function(){e.error("Fail to removeGroup "+a.getGroupTitle(t))});return i};this.resetGroup=function(t,r){var i=this._getAdapter(t.contentProvider).resetGroup(t,r);i.fail(function(){e.error("Fail to resetGroup "+a.getGroupTitle(t))});return i};this.isGroupRemovable=function(e){return this._getAdapter(e.contentProvider).isGroupRemovable(e)};this.isGroupLocked=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupLocked==="function"){return t.isGroupLocked(e)}return false};this.isGroupFeatured=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupFeatured==="function"){return t.isGroupFeatured(e)}return false};this.moveGroup=function(t,r){var i=this._getAdapter(t.contentProvider).moveGroup(t,r);i.fail(function(){e.error("Fail to moveGroup "+a.getGroupTitle(t))});return i};this.setGroupTitle=function(t,r){var i=this._getAdapter(t.contentProvider).setGroupTitle(t,r);i.fail(function(){e.error("Fail to set Group title: "+a.getGroupTitle(t))});return i};this.hideGroups=function(t){var r=new jQuery.Deferred,i=this._getAdapter();if(typeof i.hideGroups!=="function"){r.reject("hideGroups() is not implemented in the Adapter.")}else{i.hideGroups(t).done(function(){r.resolve()}).fail(function(t){e.error("Fail to store groups visibility."+t);r.reject()})}return r.promise()};this.isGroupVisible=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupVisible==="function"){return t.isGroupVisible(e)}return true};this.addTile=function(t,r){return this._getAdapter(r.contentProvider).addTile(t,r).fail(function(r,i){e.error("Fail to add Tile: "+a.getCatalogTileId(t),i,"sap.ushell.services.LaunchPage")})};this.removeTile=function(t,r,i){var o=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){this._getAdapter(t.contentProvider).removeTile(t,r,i).done(function(){var e=this.getCatalogTileTargetURL(r);this.deleteURLStatesPersistentData(e,n);o.resolve()}.bind(this)).fail(function(t){e.error("Fail to remove Tile: "+this.getTileId(r));o.reject(t)}.bind(this))}.bind(this)).catch(o.reject);return o.promise()};this.moveTile=function(t,r,i,o,n,s){var u=this._getAdapter().moveTile(t,r,i,o,n,s);u.fail(function(){e.error("Fail to move Tile: "+a.getTileId(t))});return u};this.isLinkPersonalizationSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isLinkPersonalizationSupported==="function"){return r.isLinkPersonalizationSupported(e)}return false};this.getTileId=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileId(e)};this.getTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTitle(e)};this.getTileType=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getTileType){return r.getTileType(e)}return"tile"};this.getTileView=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t).getTileView(e);if(!jQuery.isFunction(r.promise)){r=(new jQuery.Deferred).resolve(r).promise()}return r};this.getCardManifest=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCardManifest(e)};this.getAppBoxPressHandler=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getAppBoxPressHandler){return r.getAppBoxPressHandler(e)}return undefined};this.getTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileSize(e)};this.getTileTarget=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTarget(e)};this.getTileDebugInfo=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.getTileDebugInfo==="function"){return r.getTileDebugInfo(e)}return undefined};this.isTileIntentSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isTileIntentSupported==="function"){return r.isTileIntentSupported(e)}return true};this.refreshTile=function(e){var t=e&&e.contentProvider;this._getAdapter(t).refreshTile(e)};this.setTileVisible=function(e,t){var r=e&&e.contentProvider;this._getAdapter(r).setTileVisible(e,t)};this.registerTileActionsProvider=function(e){if(typeof e!=="function"){throw new Error("Tile actions Provider is not a function")}l.push(e)};this.getTileActions=function(e){var t=[],r,i=e&&e.contentProvider,o=this._getAdapter(i);if(typeof o.getTileActions==="function"){r=o.getTileActions(e);if(r&&r.length){t.push.apply(t,r)}}for(var n=0;n<l.length;n++){r=l[n](e);if(r&&r.length){t.push.apply(t,r)}}return t};this.getCatalogs=function(){return this._getAdapter().getCatalogs()};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid()};this.getCatalogData=function(t){var r=this._getAdapter();if(typeof r.getCatalogData!=="function"){e.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(t)}}return r.getCatalogData(t)};this.getCatalogError=function(e){return this._getAdapter().getCatalogError(e)};this.getCatalogId=function(e){return this._getAdapter().getCatalogId(e)};this.getCatalogTitle=function(e){return this._getAdapter().getCatalogTitle(e)};this.getCatalogTiles=function(t){var r=this._getAdapter().getCatalogTiles(t);r.fail(function(){e.error("Fail to get Tiles of Catalog: "+a.getCatalogTitle(t))});return r};this.getCatalogTileId=function(e){return this._getAdapter(e.contentProvider).getCatalogTileId(e)};this.getStableCatalogTileId=function(e){var t=this._getAdapter(e.contentProvider);if(t&&!t.getStableCatalogTileId){return null}return t.getStableCatalogTileId(e)};this.getCatalogTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTitle(e)};this.getCatalogTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileSize(e)};this.getCatalogTileViewControl=function(e,t){var r=e&&e.contentProvider;var i=this._getAdapter(r);if(typeof i.getCatalogTileViewControl==="function"){return i.getCatalogTileViewControl(e,t)}var o=new jQuery.Deferred;var n=this.getCatalogTileView(e,t);o.resolve(n);return o.promise()};this.getCatalogTileView=function(t,r){e.error("Deprecated API call of 'sap.ushell.LaunchPage.getCatalogTileView'. Please use 'getCatalogTileViewControl' instead",null,"sap.ushell.services.LaunchPage");var i=t&&t.contentProvider;var o=this._getAdapter(i);if(o.getCatalogTileView){return o.getCatalogTileView(t,r)}var n=this.getTileTitle(t)||this.getCatalogTileTitle(t);return this._createErrorTile(n,"The LaunchPageAdapter does not support getCatalogTileView")};this._createErrorTile=function(e,t){var r=new s({state:u.Failed,header:e,subheader:t||""}).addStyleClass("sapUshellTileError");return r};this.getCatalogTileTargetURL=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTargetURL(e)};this.getCatalogTileTags=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileTags==="function"){return r.getCatalogTileTags(e)}return[]};this.getCatalogTileKeywords=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileKeywords(e)};this.getCatalogTileTechnicalAttributes=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileTechnicalAttributes==="function"){return r.getCatalogTileTechnicalAttributes(e)}return[]};this.getCatalogTilePreviewTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewTitle(e)};this.getCatalogTilePreviewInfo=function(e){var t=e&&e.contentProvider;if(this._getAdapter(t).getCatalogTilePreviewInfo){return this._getAdapter(t).getCatalogTilePreviewInfo(e)}return""};this.getCatalogTilePreviewSubtitle=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(r.getCatalogTilePreviewSubtitle){return r.getCatalogTilePreviewSubtitle(e)}return undefined};this.getCatalogTilePreviewIcon=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewIcon(e)};this.addBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}this.changeURLStatesToPersistent(t.url).done(function(n){var a=r&&r.contentProvider;t.url=n;this._getAdapter(a).addBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}.bind(this)).fail(function(r){e.error(r||"Fail to change url states to persistent: "+t.url);o.reject()})}return o.promise()};this.addCustomBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}this.changeURLStatesToPersistent(t.url).done(function(n){var a=r&&r.contentProvider;t.url=n;this._getAdapter(a).addCustomBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}.bind(this)).fail(function(r){e.error(r||"Fail to change url states to persistent: "+t.url);o.reject()})}return o.promise()};this._hasRequiredBookmarkParameters=function(t){if(!t.title){e.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration")}if(!t.url){e.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration")}return true};this.countBookmarks=function(t,r){if(!t||typeof t!=="string"){e.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL")}var i=this._getAdapter().countBookmarks(t,r);i.fail(function(){e.error("Fail to count bookmarks")});return i};this.countCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().countCustomBookmarks(e)};this.deleteBookmarks=function(t,r){var i=new jQuery.Deferred;if(!t||typeof t!=="string"){return i.reject(new Error("Missing URL")).promise()}sap.ushell.Container.getServiceAsync("AppState").then(function(o){this._getAdapter().deleteBookmarks(t,undefined,r).done(function(e){this.deleteURLStatesPersistentData(t,o);i.resolve(e)}.bind(this)).fail(function(r){e.error("Fail to delete bookmark for: "+t);i.reject(r)})}.bind(this)).catch(i.reject);return i.promise()};this.deleteCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().deleteCustomBookmarks(e)};this.updateBookmarks=function(t,r,i){if(!t||typeof t!=="string"){e.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL")}if(!r||typeof r!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+t);throw new Error("Missing parameters")}var o=new jQuery.Deferred;this.changeURLStatesToPersistent(r.url).done(function(n){r.url=n;this._getAdapter().updateBookmarks(t,r,undefined,i).done(o.resolve).fail(function(){e.error("Fail to update bookmark for: "+t);o.reject()})}.bind(this)).fail(function(t){e.error(t||"Fail to change url states to persistent: "+r.url);o.reject()});return o.promise()};this.updateCustomBookmarks=function(e,t){if(!e.url||!e.vizType||!t){return Promise.reject("updateCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().updateCustomBookmarks(e,t)};this.onCatalogTileAdded=function(e){this._getAdapter().onCatalogTileAdded(e)};this.changeURLStatesToPersistent=function(t){var r=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(i){var o=i.getPersistentWhenShared();if(i.getSupportedPersistencyMethods().length===0&&o!==true){r.resolve(t);return}if(t&&t.length>0){try{i.setAppStateToPublic(t).done(r.resolve).fail(r.reject)}catch(t){e.error("error in converting transient state to personal persistent when bookmark is added",t,"sap.ushell.services.LaunchPage");r.reject()}}else{r.resolve(t)}});return r.promise()};this.deleteURLStatesPersistentData=function(t,r){if(r.getSupportedPersistencyMethods().length===0){return}if(t&&t.length>0){try{var i=g(t,"sap-xapp-state"),o=g(t,"sap-iapp-state");if(i!==undefined||o!==undefined){this.countBookmarks(t).done(function(e){if(e===0){if(i!==undefined){r.deleteAppState(i)}if(o!==undefined){r.deleteAppState(o)}}})}}catch(t){e.error("error in deleting persistent state when bookmark is deleted",t,"sap.ushell.services.LaunchPage")}}};function g(e,t){var r=new RegExp("(?:"+t+"=)([^&/]+)"),i=r.exec(e),o;if(i&&i.length===2){o=i[1]}return o}}l.prototype._getAdapter=function(e){return this.oAdapters[e]||this.oAdapters.default};l.hasNoAdapter=false;return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Menu", ["sap/ushell/Config","sap/ushell/library","sap/ushell/utils","sap/ui/model/json/JSONModel","sap/base/util/deepClone","sap/base/Log","sap/ushell/resources"],function(e,t,n,r,i,o,a){"use strict";var s=t.ContentNodeType;function u(){this._init.apply(this,arguments)}u.prototype._init=function(e){this.oAdapter=e;this.oModel=new r([]);this.oModel.setSizeLimit(1e3);this.bIsMenuModelFilled=false;this._aBlockedList=[]};u.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled()};u.prototype.getMenuEntries=function(){return this.oAdapter.getMenuEntries().then(function(t){if(e.last("/core/homeApp/enabled")){var n={id:e.last("/core/spaces/myHome/myHomeSpaceId"),title:a.i18n.getText("HomeApp.Menu.Title"),"help-id":"homeApp-menuEntry",description:"",icon:undefined,type:"IBN",target:{semanticObject:"Shell",action:"home",parameters:[],innerAppRoute:undefined},isHomeEntry:true,menuEntries:[]};t.splice(0,0,n)}return t}).then(function(e){return e.map(function(e){e.uid=n.generateUniqueId([]);if(e.menuEntries){e.menuEntries.forEach(function(e){e.uid=n.generateUniqueId([])})}return e})})};u.prototype.getSpacesPagesHierarchy=function(){var e;if(this.oAdapter.getContentNodeEntries){e=this.oAdapter.getContentNodeEntries()}else{e=this.getMenuEntries()}return e.then(function(e){return{spaces:e.reduce(function(e,t){var n;if(t.menuEntries&&t.menuEntries.length){n=this._getAccessiblePages(t.menuEntries)}else{n=this._getAccessiblePages([t])}if(n.length){e.push({title:t.title,id:n[0].spaceId,pages:n.map(function(e){return{title:e.title,id:e.id}})})}return e}.bind(this),[])}}.bind(this)).catch(function(){return{spaces:[]}})};u.prototype.getContentNodes=function(e,t){if(!e){e=Object.values(s)}t=!!t;return this.oAdapter.getContentNodes().then(function(n){n=i(n);var r=this._filterContentNodes(n,e,t);return r}.bind(this))};u.prototype._filterContentNodes=function(e,t,n){if(!Array.isArray(e)){return[]}return e.reduce(function(e,r){r.children=this._filterContentNodes(r.children,t,n);var i=t.includes(r.type);if(i||n&&r.children.length){e.push(r)}return e}.bind(this),[])};u.prototype.getDefaultSpace=async function(){const t=await this.getContentNodes([s.Space,s.Page]);if(e.last("/core/menu/personalization/enabled")){const e=await this.getMenuModel();const n=e.getData().filter(function e(t){return t.type!=="separator"&&t.pinned}).filter(function e(n){return t.some(function e(t){return n.id===t.id&&t.children.length})}).reduce(function e(t,n){return t.pinnedSortOrder<n.pinnedSortOrder?t:n},{});const r=t.find(function e(t){return n.id===t.id});if(r){return r}}const n=t.find(function(e){return e.children.length});return n};u.prototype.getMyHomeSpace=function(){if(!e.last("/core/spaces/myHome/enabled")){return Promise.resolve(null)}var t=e.last("/core/spaces/myHome/myHomeSpaceId");return this.getContentNodes([s.Space,s.Page]).then(function(e){return e.find(function(e){return e.type===s.Space&&e.id===t})||null})};u.prototype._getAccessiblePages=function(e){return e.filter(function(e){return e&&e.type==="IBN"&&e.target&&e.target.semanticObject==="Launchpad"&&e.target.action==="openFLPPage"}).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="spaceId"});var n=e.target.parameters.find(function(e){return e.name==="pageId"});return{title:e.title,id:n&&n.value,spaceId:t&&t.value}})};u.prototype.hasMultiplePages=function(e){return this.getContentNodes([s.Space,s.Page]).then(function(t){var n=t.find(function(t){return t.type===s.Space&&t.id===e});return n&&n.children.length>1})};u.prototype.isSpacePageAssigned=function(e,t){return this.getContentNodes([s.Space,s.Page]).then(function(n){var r=n.find(function(t){return t.type===s.Space&&t.id===e});if(!r){return false}var i=r.children.find(function(e){return e.type===s.Page&&e.id===t});return!!i})};u.prototype.getSpaceAndPageTitles=function(e,t){return this.getContentNodes([s.Space,s.Page]).then(function(n){var r;var i=n.find(function(t){return t.type===s.Space&&t.id===e});if(i){r=i.children.find(function(e){return e.type===s.Page&&e.id===t})}if(r){return{spaceTitle:i.label,pageTitle:r.label}}return null})};u.prototype.getMenuModel=function(){if(this.bIsMenuModelFilled){return Promise.resolve(this.oModel)}var t;if(e.last("/core/menu/personalization/enabled")){t=this._getMenuEntriesWithPersonalizationData()}else{t=this.getMenuEntries()}return t.then(function(e){var t=e;this.oModel.setData(t);this.bIsMenuModelFilled=true;return this.oModel}.bind(this))};u.prototype._getMenuEntriesWithPersonalizationData=function(){return Promise.all([this.getMenuEntries(),this.oAdapter.getMenuPersonalization()]).then(function(e){var t=e[0];var n=e[1];var r;var i={type:"separator",pinned:true};if(t[0]&&t[0].isHomeEntry){t.splice(1,0,i)}else{t.splice(0,0,i)}if(!n){r=t.map(function e(t,n){t.pinned=true;t.pinnedSortOrder=n;return t})}else{var o=1;if(t[0].isHomeEntry){o=2}r=t.map(function e(t){t.pinned=n.pinnedSpaces.includes(t.id);t.pinnedSortOrder=n.pinnedSpaces.indexOf(t.id);if(t.pinnedSortOrder>-1){t.pinnedSortOrder=t.pinnedSortOrder+o}return t});t[0].pinned=true;t[0].pinnedSortOrder=0;if(t[0].isHomeEntry){t[1].pinned=true;t[1].pinnedSortOrder=1}}return r})};u.prototype._extractPersonalization=function(){var e={version:"1.0.0",pinnedSpaces:[]};var t=this.oModel.getData();e.pinnedSpaces=t.filter(function e(t){return!t.isHomeEntry&&t.type!=="separator"&&t.pinned}).sort(function(e,t){return e.pinnedSortOrder-t.pinnedSortOrder}).map(function(e){return e.id});return e};u.prototype.savePersonalization=function(){var e=this._extractPersonalization();return sap.ushell.Container.getServiceAsync("PersonalizationV2").then(async function(t){var n;n={container:"sap.ushell.menuPersonalization",item:"data"};var r={validity:"Infinity",keyCategory:t.constants.keyCategory.FIXED_KEY,writeFrequency:t.constants.writeFrequency.HIGH,clientStorageAllowed:false};const i=await t.getPersonalizer(n,r);return i.setPersData(e)})};u.prototype.moveMenuEntry=function(e,t){var n=this.oModel.getData();var r=n.find(function(t){return t.pinnedSortOrder===e});r.pinnedSortOrder=t-.5;n.map(function(e){return e}).filter(function(e){return e.pinned}).sort(function(e,t){return e.pinnedSortOrder-t.pinnedSortOrder}).forEach(function(e,t){e.pinnedSortOrder=t});this.oModel.refresh(true)};u.prototype.isPinned=function(t){if(e.last("/core/menu/personalization/enabled")===false){return Promise.resolve(true)}return this.getMenuModel().then(function(e){return e.getData().some(function(e){return e.id===t&&e.pinned})})};u.prototype.isWorkPage=function(e){if(this.oAdapter.isWorkPage){return this.oAdapter.isWorkPage(e)}return Promise.resolve(false)};u.prototype._getNodeInfo=function(e,t,n,r){var i;for(var o=0;o<t.length;o++){if(!n){r=this._getManagerIdInNodeTree(e,t[o])}if(t[o].id===e){return{node:t[o],isRootNode:!n,managerId:r||null}}if(t[o].menuEntries&&t[o].menuEntries.length>0){i=this._getNodeInfo(e,t[o].menuEntries,true,r);if(i.node){return i}}}return{node:null,isRootNode:false,managerId:null}};u.prototype._nodeManagementPermitted=function(e,t,n){var r=this._getNodeInfo(e,t);if(!r.node){o.error("Node with id "+e+" cannot be found and will be skipped.");return false}if(r.managerId&&r.managerId!==n){o.error("Node with id "+e+" cannot be managed by '"+n+"'"+" because it is already managed by '"+r.managerId+"'.");return false}return true};u.prototype._getManagerIdInNodeTree=function(e,t,n){if(t.id===e){return n||t.managerId}if(t.managerId){n=t.managerId}if(t.menuEntries&&t.menuEntries.length>0){for(var r=0;r<t.menuEntries.length;++r){n=this._getManagerIdInNodeTree(e,t.menuEntries[r],n)}return n}return null};u.prototype._updateNode=function(e,t,r){var o=i(r||{});function a(e){if(e){e.uid=e.uid||n.generateUniqueId([]);(e.menuEntries||[]).forEach(a)}}a(o);return t.map(function(t){if(t.id===e){return o}if(t.menuEntries&&t.menuEntries.length>0){t.menuEntries=this._updateNode(e,t.menuEntries,o)}return t}.bind(this))};u.prototype._createEntryProviders=function(e,t,n){var r=n.getData();var i={};var o;for(var a=0;a<t.length;++a){o=t[a];if(!this._nodeManagementPermitted(o,r,e)){continue}i[o]={setData:function(e,t){var i=this._updateNode(e,r,t);n.setData(i)}.bind(this,o)}}return i};u.prototype._isManagerBlocked=function(e){return this._aBlockedList.indexOf(e)>-1};u.prototype._setManagerBlocked=function(e){this._aBlockedList.push(e)};u.prototype.getEntryProvider=function(e,t){if(this._isManagerBlocked(e)){o.error("ManagerId '"+e+"' is already listed as an entry manager.");return Promise.reject("ManagerId "+e+" is already listed as an entry manager.")}this._setManagerBlocked(e);return this.getMenuModel().then(function(n){return this._createEntryProviders(e,t,n)}.bind(this))};u.hasNoAdapter=false;return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/MessageBroker", ["sap/ushell/services/_MessageBroker/MessageBrokerEngine","sap/base/Log"],function(e,n){"use strict";var t={};var r=function(r,i,o){t=o&&o.config||{};e.setEnabled(this.isEnabled());if(!this.isEnabled()){n.warning("FLP's message broker service is disabled by shell configuration")}};r.prototype.isEnabled=function(){if(t.enabled===undefined||t.enabled===true){return true}return false};r.prototype.connect=function(n){return e.connect(n)};r.prototype.disconnect=function(n){return e.disconnect(n)};r.prototype.subscribe=function(n,t,r,i){return e.subscribe(n,t,r,i)};r.prototype.unsubscribe=function(n,t){return e.unsubscribe(n,t)};r.prototype.publish=function(n,t,r,i,o,s){return e.publish(n,t,r,i,o,s)};r.prototype.addAcceptedOrigin=function(n){e.addAcceptedOrigin(n)};r.prototype.removeAcceptedOrigin=function(n){e.removeAcceptedOrigin(n)};r.prototype.getAcceptedOrigins=function(){return e.getAcceptedOrigins()};r.hasNoAdapter=true;return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavTargetResolution", ["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/UrlShortening","sap/ushell/utils/HttpClient","sap/ushell/navigationMode","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/Log"],function(e,t,n,i,r,a,jQuery,s,o,l,u){"use strict";function c(e,c,p,f){var h=f&&f.config;var d=function(t){var n=this._isClientSideTargetResolutionEnabled()?this._resolveHashFragmentClientSide(t):e.resolveHashFragment(t);return n}.bind(this);var v;var g=[{name:"DefaultAdapter",isApplicable:function(){return true},resolveHashFragment:d.bind(this)}];var m;var S=new r;this._isClientSideTargetResolutionEnabled=function(){return!!(h&&h.enableClientSideTargetResolution)};this._nextResolveHashFragment=function(e,t){var n=e.pop();if(n.isApplicable(t)){u.info("NavTargetResolution: custom resolver "+n.name+" resolves "+t);var i=this._nextResolveHashFragment.bind(this,e);return n.resolveHashFragment(t,i)}return this._nextResolveHashFragment(e,t)};this._resolveHashFragmentClientSide=function(e){var t=this._validateHashFragment(e);if(!t.success){return(new jQuery.Deferred).reject(e+" is not a valid hash fragment").promise()}var n=t.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(n)};this._resolveHashFragmentClientSideAndFixApplicationType=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(n){n.resolveHashFragment(e).done(function(e){if(e&&e.applicationType==="SAPUI5"){e.applicationType="URL"}t.resolve(e)}).fail(t.reject)}).catch(t.reject);return t.promise()};this._validateHashFragment=function(e){var n="";var i={success:false};if(e&&e.charAt(0)!=="#"){throw new t.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution")}n=e.substring(1);if(n){i.success=true}i.hashFragmentWithoutHash=n;return i};this.expandCompactHash=function(e){var t=new jQuery.Deferred;var r=n.parseShellHash(e);if(r&&r.params&&r.params["sap-intent-param"]){sap.ushell.Container.getServiceAsync("AppState").then(function(n){n.getAppState(r.params["sap-intent-param"][0]).done(function(n){var r=n.getData("sap-intent-param");var a=e;if(r){a=i.expandParamGivenRetrievalFunction(e,"sap-intent-param",function(){return r})}t.resolve(a)}).fail(function(){t.resolve(e)})}).catch(t.reject)}else{t.resolve(e)}return t.promise()};var b=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(e){if(typeof e!=="object"){return}delete e["sap.platform.runtime"];if(e&&e.applicationType&&e.applicationType==="SAPUI5"){e.applicationType="URL"}if(e.applicationType==="URL"){var t=/^SAPUI5\.Component=(.*)/.exec(e.additionalInformation);var n=t&&t[1];if(n){e.ui5ComponentName=n}}};this._getSapSystem=function(e,t){var n;if(t&&t["sap-system"]){return t["sap-system"]}if(t&&t.url){n=new URL(t.url,window.location.href).searchParams.get("sap-system");if(n){return n}}if(b.indexOf(t.applicationType)>=0&&e&&e.substring(1)){n=new URL(e.substring(1),window.location.href).searchParams.get("sap-system");if(n){return n}}return undefined};this.resolveTarget=function(e){var i;var r=o({},e);var a=new jQuery.Deferred;s.average("sap.ushell.navigation.resolveTarget");t.storeSapSystemToLocalStorage(r);i=n.constructShellHash(r);sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.resolveHashFragment("#"+i).done(function(e){s.end("sap.ushell.navigation.resolveTarget");a.resolve({url:e.url,text:e.text,externalNavigationMode:e.targetNavigationMode==="explace"})}).fail(a.reject)}).catch(a.reject);return a.promise()};this.resolveHashFragment=function(t){var n=new jQuery.Deferred;s.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(t).done(function(i){var r=jQuery.when();if(i.indexOf("sap-ushell-enc-test")>=0){var o=/sap-ushell-enc-test=([^&]*)(&.*)?$/.exec(i);if(o){var c=o[1];if(c!=="A%20B%2520C"){r=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Message").then(function(e){e.error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");r.resolve()}).catch(r.reject)}i=i.replace(/sap-ushell-enc-test=([^&]*)&/,"");i=i.replace(/[&?]sap-ushell-enc-test=([^&]*)$/,"")}}var p=this._invokeResolveHashChain(i);if(typeof e.processPostResolution==="function"){p=e.processPostResolution(i,p)}jQuery.when(p,r).done(function(e){this._adjustResolutionResultForUi5Components(e);if(e&&e.navigationMode!==undefined){e.targetNavigationMode=a.getExternalNavigationMode(e.navigationMode)}else{u.error("Resolution Result doesn't contain mandatory navigationMode!","sap.ushell.services.NavTargetResolution")}if(l(e)&&!e.hasOwnProperty("sap-system")){var i=this._getSapSystem(t,e);if(i){e["sap-system"]=i}}s.end("sap.ushell.navigation.resolveHashFragment");n.resolve(e)}.bind(this)).fail(n.reject)}.bind(this)).fail(n.reject);return n.promise().done(function(e){return this._recordNavigation("resolveHashFragment",{sHashFragment:t},e)}.bind(this))};this._invokeResolveHashChain=function(e){var t=g.map(function(e){return e});return this._nextResolveHashFragment(t,e).done(function(e){m=e})};this.baseResolveHashFragment=d.bind(this);this._getGetLinksResolver=function(t){var n;if(this._isClientSideTargetResolutionEnabled()){n=this._getLinksClientSide.bind(this);return{resolver:n,warning:undefined,isGetSemanticObjectLinksCall:false}}if(Object.prototype.toString.apply(t.paramsOptions)==="[object Array]"&&t.paramsOptions.length>0){u.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(t.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution")}n=e&&e.getLinks&&e.getLinks.bind(e);if(n){return{resolver:n,warning:undefined,isGetSemanticObjectLinksCall:false}}n=e&&e.getSemanticObjectLinks&&e.getSemanticObjectLinks.bind(e);if(n){return{resolver:n,warning:t.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true}}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined}};this.getLinks=function(e){var t=e.semanticObject;var n=e.params;var i=e.ignoreFormFactor;var r=e.ui5Component;var a=e.appStateKey;var s=e.compactIntents;var o=new jQuery.Deferred;if(/\?/.test(t)){throw new Error("Parameter must not be part of semantic object")}var l=n===undefined?undefined:JSON.parse(JSON.stringify(n));if(a){l=l||{};l["sap-xapp-state"]=encodeURIComponent(a)}var c=this._getGetLinksResolver(e);if(c.warning){u.warning("A problem occurred while determining the resolver for getLinks",c.warning,"sap.ushell.services.NavTargetResolution")}var p=c.resolver;if(p){var f=function(e){if(s){this._shortenGetSemanticObjectLinksResults(e,r).done(o.resolve)}else{o.resolve(e)}}.bind(this);if(c.isGetSemanticObjectLinksCall){var h={target:{semanticObject:t,action:"dummyAction"},params:l};sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hrefForExternal(h,true,r).then(function(e){var n=e.params||l;p(t,n,i).then(f).catch(o.reject)}).catch(o.reject)})}else{p(e).done(f).fail(o.reject)}}else{o.resolve([])}return o.promise().done(function(t){return this._recordNavigation("getLinks",{oArgs:e},t)}.bind(this))};this.getDistinctSemanticObjects=function(){var t=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){e.getDistinctSemanticObjects().done(t.resolve).fail(t.reject)}).catch(t.reject);return t.promise().done(function(e){return this._recordNavigation("getDistinctSemanticObjects",{},e)}.bind(this))}if(e&&e.getDistinctSemanticObjects){return e.getDistinctSemanticObjects()}u.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return t.reject("Cannot execute getDistinctSemanticObjects").promise()};this._getLinksClientSide=function(e){var t=new jQuery.Deferred;var i=new jQuery.Deferred;if((e.params||{}).hasOwnProperty("sap-intent-param")){var r="#"+e.semanticObject+"-dummyAction?"+n.paramsToString(e.params);this.expandCompactHash(r).done(function(e){var t=n.parseShellHash(e);i.resolve(t.params)}).fail(t.reject)}else{i.resolve(e.params)}i.done(function(){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(n){n.getLinks(e).done(t.resolve).fail(t.reject)}).catch(t.reject)});return t.promise()};this._shortenGetSemanticObjectLinksResults=function(e,t){var i=[];var r=0;var a=e.length;var s=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(o){e.forEach(function(e){var l=n.parseShellHash(e.intent);var c=o.compactParams(l.params,undefined,t);i.push(c);i[r].done(function(t,r){i[t]={text:e.text,intent:"#"+l.semanticObject+"-"+l.action+"?"+n.paramsToString(r)}}.bind(null,r)).fail(function(t,n){u.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+n+"; intent had title ''"+e.title+"'' and link ''"+e.intent+"'","sap.ushell.services.NavTargetResolution");i[t]={text:e.text,intent:e.intent}}.bind(null,r)).always(function(){a--;if(a===0){s.resolve(i)}});r++})}).catch(s.reject);return s.promise()};this.isIntentSupported=function(t){var n={};var i=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){e.isIntentSupported(t).done(i.resolve).fail(i.reject)}).catch(i.reject);return i.promise()}if(e.isIntentSupported){return e.isIntentSupported(t)}t.forEach(function(e){n[e]={supported:undefined}});return i.resolve(n).promise()};this._isIntentSupported=function(t){var n={};var i=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){e.isIntentSupported(t).done(i.resolve).fail(i.reject)}).catch(i.reject);return i.promise()}if(e.isIntentSupported){return e.isIntentSupported(t)}t.forEach(function(e){n[e]={supported:undefined}});return i.resolve(n).promise()};this.isNavigationSupported=function(e){var t=new jQuery.Deferred;var i=[];i=e.map(function(e){if(typeof e==="string"){return e}return"#"+n.constructShellHash(e)});this._isIntentSupported(i).done(function(e){var n=i.map(function(t){return e[t]||{supported:false}});t.resolve(n)}).fail(t.reject.bind(t));return t.promise().done(function(t){return this._recordNavigation("isNavigationSupported",{aIntents:e},t)}.bind(this))};this._recordNavigation=function(e,t,n){var i=h&&h.usageRecorder||{};if(i.enabled){var r=i.serviceUrl||"/navigation/api/v2/record";S.post(r,{headers:{"content-type":"application/json; charset=utf-8"},data:{function:e,parameters:JSON.stringify(t),result:JSON.stringify(n)}})}return n};this.registerCustomResolver=function(e){if(typeof e.name!=="string"){u.error("NavTargetResolution: Custom Resolver must have name {string} member");return false}if(typeof e.isApplicable!=="function"){u.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false}if(typeof e.resolveHashFragment!=="function"){u.error('NavTargetResolution: Custom Resolver must have "resolveHashFragment" member');return false}g.push(e);return true};if(h&&Array.isArray(h.resolveLocal)){v=h.resolveLocal.map(function(e){return e.linkId});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(e){if(e===""){return"#"}var t=n.parseShellHash(e.substring(1));if(!t){return"#"}e="#"+t.semanticObject+"-"+t.action;return e},_getIndex:function(e){var t=this.cleanHash(e);return v.indexOf(t.substring(1))},isApplicable:function(e){return this._getIndex(e)>=0},resolveHashFragment:function(e){var t=this._getIndex(e);var i=new jQuery.Deferred;var r=JSON.parse(JSON.stringify(h.resolveLocal[t].resolveTo));var a=n.parseShellHash(e);if(a&&a.params){var s=n.paramsToString(a.params);if(s){var o=r.url.indexOf("?")>=0;r.url=r.url+(o?"&":"?")+s}}i.resolve(r);return i.promise()}})}this.registerCustomResolver({name:"LocalResolver",aElement:undefined,cleanHash:function(e){if(e===""){return undefined}var t=n.parseShellHash(e.substring(1));if(!t){return undefined}e="#"+t.semanticObject+"-"+t.action;return e},isApplicable:function(e){e=this.cleanHash(e);if(!e){return false}return e==="#Test-url"||e==="#Test-local1"||e==="#Test-local2"||e==="#Test-config"||e==="#Test-clear"},parseUrl:function(e){if(!this.aElement){this.aElement=window.document.createElement("a")}this.aElement.href=e;return this.aElement},resolveHashFragment:function(e){var n=new jQuery.Deferred;var i;var r;var a=this;e=this.cleanHash(e);if(!e){return false}var s={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp",navigationMode:"embedded"},none:{applicationType:"URL",url:"",additionalInformation:""}};function o(e){if(localStorage){return localStorage[e]}return undefined}function l(e){if(t.calculateOrigin(a.parseUrl(e))!==t.calculateOrigin(window.location)){return undefined}return e}function c(e){return new URLSearchParams(window.location.search).get(e)}function p(e,t){if(localStorage){localStorage[e]=t}}if(s[e]){i=s[e]}else if(e==="#Test-clear"){p("sap.ushell.#Test-local1",undefined);p("sap.ushell.#Test-local2",undefined);u.info("NavTargetResolution: Local storage keys for #Test have been cleared");i=s["#Test-config"]}else if(e==="#Test-local1"||e==="#Test-local2"||e==="#Test-url"){i=o("sap.ushell."+e);if(!i||i==="undefined"){r={applicationType:"URL",navigationMode:"embedded"}}else{r=JSON.parse(i)}if(window.location.hostname==="localhost"||h&&h.allowTestUrlComponentConfig){var f="sap-ushell-test-"+e.substring(6);var d=c(f+"-additionalInformation");if(d){r.additionalInformation=d}var v=c(f+"-url");if(v){r.url=l(v)}}if(!r.url){u.info("NavTargetResolution: No configured app for "+e+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");u.info("NavTargetResolution: Defaulting to config app ...\n");n.reject("URL is not resolvable");return n.promise()}r.url=l(r.url);i=r}if(i.url===undefined){n.reject("URL is not resolvable");return n.promise()}u.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent(i&&i.url||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent(i&&i.additionalInfo||"")+"#Test-local1");u.info("NavTargetResolution: Resolving "+e+" to "+JSON.stringify(i));n.resolve(i);return n.promise()}});this.getCurrentResolution=function(){return m}}c.hasNoAdapter=false;return c},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Navigation", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/ui/base/Object","sap/ui/thirdparty/hasher","sap/ushell/ApplicationType","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Container","sap/ushell/services/Navigation/utils","sap/ushell/services/AppConfiguration","sap/ushell/TechnicalParameters","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/utils/type","sap/ushell/utils/UrlParsing"],function(t,e,a,n,i,s,r,o,p,c,l,u,h,f,m,g,y){"use strict";function d(d,S,A){let v;if(A&&A.config){v=A.config}this._getTargetWithCurrentSystem=function(e,a){if(typeof e!=="string"&&!n(e)&&e!==undefined){t.error("Unexpected input type",null,"sap.ushell.services.Navigation");return undefined}if(e===undefined){return undefined}let i;let s;const r=u.getCurrentApplication();if(a){let e;try{e=a.getComponentData().startupParameters}catch(t){}if(!n(e)){t.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.Navigation")}else{if(e.hasOwnProperty("sap-system")){i=e["sap-system"][0]}if(e.hasOwnProperty("sap-ushell-next-navmode")){s=e["sap-ushell-next-navmode"][0]}}}else{if(r&&r["sap-system"]){i=r["sap-system"]}else if(r&&r.url){i=new URL(r.url,window.location.href).searchParams.get("sap-system")}if(r&&r["sap-ushell-next-navmode"]){s=r["sap-ushell-next-navmode"]}else if(r&&r.url){s=new URL(r.url,window.location.href).searchParams.get("sap-ushell-next-navmode")}}let o;if(r){o=r.contentProviderId}const p=l.injectParameters({type:g,inject:{"sap-system":i,"sap-ushell-navmode":s,"sap-app-origin-hint":o},injectEmptyString:{"sap-app-origin-hint":true},args:e});return p};this._amendTargetWithSapUshellEncTestParameter=function(e){if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return e}if(!v||!v["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return e}}if(typeof e!=="string"&&!n(e)&&e!==undefined){t.error("Unexpected input type",null,"sap.ushell.services.Navigation");return undefined}if(e===undefined){return undefined}if(n(e)){const t=a({},e);if(t.target&&t.target.shellHash){if(typeof t.target.shellHash==="string"){if(t.target.shellHash!=="#"&&t.target.shellHash!==""){t.target.shellHash=this._amendTargetWithSapUshellEncTestParameter(t.target.shellHash)}}return t}t.params=t.params||{};t.params["sap-ushell-enc-test"]=["A B%20C"];return t}let i=e;if(!/[?&]sap-system=/.test(i)){const t=i.indexOf("?")>-1?"&":"?";i+=t+"sap-ushell-enc-test="+encodeURIComponent("A B%20C")}return i};this._extractInnerAppRoute=function(e){if(typeof e==="string"){const t=e.split("&/");const a=t.shift();return{intent:a,innerAppRoute:t.length>0?"&/"+t.join("&/"):""}}if(n(e)){const t=i.get("target.shellHash",e);if(typeof t==="string"){const{intent:a,innerAppRoute:n}=this._extractInnerAppRoute(t);e.target.shellHash=a;return{intent:e,innerAppRoute:n}}if(e.hasOwnProperty("appSpecificRoute")){const t=e.appSpecificRoute;delete e.appSpecificRoute;const a=typeof t==="string"&&t.indexOf("&/")!==0&&t.length>0;return{innerAppRoute:a?"&/"+t:t,intent:e}}return{intent:e,innerAppRoute:""}}t.error("Invalid input parameter","expected string or object","sap.ushell.services.Navigation");return{intent:e}};this._injectInnerAppRoute=function(t,e){if(!e){return t}if(typeof t==="string"){return t+e}if(n(t)){const a=i.get("target.shellHash",t);if(typeof a==="string"){t.target.shellHash=this._injectInnerAppRoute(a,e);return t}t.appSpecificRoute=e}return t};this.getHref=async function(a={},n){try{let i=e(a);if(!i.target){t.debug("Navigation.getHref: No target provided using current hash as fallback","sap.ushell.services.Navigation");const e=y.parseShellHash(r.getHash());i.target={semanticObject:e.semanticObject,action:e.action,contextRaw:e.contextRaw};i.params=e.params;if(e.appSpecificRoute&&!i.appSpecificRoute){i.appSpecificRoute=e.appSpecificRoute}}const{intent:s,innerAppRoute:o}=this._extractInnerAppRoute(i);await l.addXAppStateFromParameter(s,"sap-xapp-state-data");i=this._getTargetWithCurrentSystem(s,n);i=await l.injectStickyParameters({args:i,appLifeCycle:p,technicalParameters:h,type:g});i=this._amendTargetWithSapUshellEncTestParameter(i);i=this._injectInnerAppRoute(i,o);const u=await c.getServiceAsync("ShellNavigation");return u.hrefForExternal(i,undefined,n)}catch(e){t.error("href could not be calculated",e,"sap.ushell.services.Navigation")}};this.backToPreviousApp=async function(){const t=await this.isInitialNavigation();if(t){return this.navigate({target:{shellHash:"#"},writeHistory:false})}this.historyBack();return undefined};this.historyBack=function(e){let a=-1;if(e&&typeof e==="number"){if(e<=0){t.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.Navigation#historyBack")}a=e*-1}window.history.go(a)};this.isInitialNavigation=async function(){try{const t=await c.getServiceAsync("ShellNavigation");const e=t.isInitialNavigation();if(typeof e==="undefined"){return true}return e}catch(e){t.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.Navigation");return true}};this.navigate=async function(a,n){try{let t=e(a);const i=a.writeHistory;this._processShellHashWithParams(t);const{intent:s,innerAppRoute:r}=this._extractInnerAppRoute(t);const o=await c.getServiceAsync("AppLifeCycle");const u=await c.getServiceAsync("ShellNavigation");const f=o.getCurrentApplication();const m=await(f&&f.getIntent());const y=e(a);this._checkIfAppNeedsToBeReloaded(y,f,m,u.hashChanger);await l.addXAppStateFromParameter(s,"sap-xapp-state-data");t=this._getTargetWithCurrentSystem(s,n);t=await l.injectStickyParameters({args:t,appLifeCycle:p,technicalParameters:h,type:g});t=this._amendTargetWithSapUshellEncTestParameter(t);delete t.writeHistory;t=this._injectInnerAppRoute(t,r);await u.toExternal(t,n,i)}catch(e){t.error("Navigation.navigate failed",e,"sap.ushell.services.Navigation")}};this._checkIfAppNeedsToBeReloaded=function(t,e,a,n){if(!e||!a||!t||!t.target){return}if(t.target.shellHash){const e=y.parseShellHash(t.target.shellHash)||{};t.target={semanticObject:e.semanticObject,action:e.action,contextRaw:e.contextRaw};t.appSpecificRoute=e.appSpecificRoute;t.params=Object.assign({},t.params,e.params)}if(t.appSpecificRoute){return}if(e.applicationType!=="UI5"){return}if(t.target.semanticObject!==a.semanticObject){return}if(t.target.action!==a.action){return}const i={params:{}};if(t.params){Object.keys(t.params).forEach(e=>{const a=t.params[e];const n=Array.isArray(a)?a:[a];i.params[e]=n.map(t=>t.toString())})}if(!y.haveSameIntentParameters(i,a)){return}n.setReloadApplication(true)};this.getPrimaryIntent=async function(t,e){const a={};a.tags=["primaryAction"];a.semanticObject=t;if(e){a.params=e}const n=await this.getLinks([a]);if(n.length===0){delete a.tags;a.action="displayFactSheet";const t=await this.getLinks([a]);return t.length===0?null:t.sort((t,e)=>{const a=/^#\w+-displayFactSheet(?:$|\?.)/;if(t.intent===e.intent){return 0}const n=a.test(t.intent)^a.test(e.intent);if(n){return a.test(t.intent)?-1:1}return t.intent<e.intent?-1:1})[0]}return n.length===0?null:n.sort((t,e)=>{if(t.intent===e.intent){return 0}return t.intent<e.intent?-1:1})[0]};this.getLinks=async function(t=[]){if(!Array.isArray(t)){throw new Error("Unexpected Input: aLinkFilter has to be an array with plain objects!")}const e=t.every(t=>{if(Array.isArray(t)){return false}if(n(t)){return true}return false});if(!e){throw new Error("Unexpected Input: aLinkFilter has to be an array with plain objects!")}if(t.length===0){t.push({})}return Promise.all(t.map(async t=>{let e=a({},t);e.compactIntents=!!e.compactIntents;e.action=e.action||undefined;e.paramsOptions=l.extractGetLinksParameterOptions(e.params);e=await l.injectStickyParameters({args:e,appLifeCycle:p,technicalParameters:h,type:g});let n;if(e.params){n=l.extractGetLinksParameterDefinition(e.params)}else{n=e.params}let i=this._getTargetWithCurrentSystem({params:n},e.ui5Component).params;i=this._amendTargetWithSapUshellEncTestParameter({params:i}).params;if(e.appStateKey){i["sap-xapp-state"]=[e.appStateKey];delete e.appStateKey}e.params=i;const s=await c.getServiceAsync("NavTargetResolution");return m.promisify(s.getLinks(e))}))};this.getSemanticObjects=async function(){const t=await c.getServiceAsync("NavTargetResolution");return m.promisify(t.getDistinctSemanticObjects())};this.isNavigationSupported=async function(t,a){const n=e(t).map(t=>{const{intent:e}=this._extractInnerAppRoute(t);return this._getTargetWithCurrentSystem(e,a)});const i=await c.getServiceAsync("NavTargetResolution");return m.promisify(i.isNavigationSupported(n))};this.isUrlSupported=async function(t){if(typeof t!=="string"){return Promise.reject()}if(y.isIntentUrl(t)){const e=y.getHash(t);const a={target:{shellHash:e}};const n=await this.isNavigationSupported([a]);if(!n[0].supported){return Promise.reject()}}};this.createComponentInstance=async function(e,a,n){const i=await c.getServiceAsync("Ui5ComponentLoader");let s=await this.createComponentInstantiationData(e,a);s=await i.modifyComponentProperties(s,f.Application);async function r(e){try{e.loadDefaultDependencies=false;const t=await i.instantiateComponent(e);return t.componentHandle.getInstance()}catch(e){t.error(`Cannot create UI5 component: ${e.toString()}`,e.stack,"sap.ushell.services.Navigation");return Promise.reject(e)}}if(n){return new Promise((t,e)=>{n.runAsOwner(function(){r(s).then(t).catch(e)})})}return r(s)};this.createComponentInstantiationData=async function(e,n){const i={componentData:n};if(i.componentData){delete i.componentData.startupParameters;delete i.componentData.config;delete i.componentData["sap-xapp-state"]}const s=y.constructShellHash(y.parseShellHash(e));if(!s){return Promise.reject("Navigation intent invalid!")}const r=await c.getServiceAsync("NavTargetResolution");const p=await r.resolveHashFragment("#"+s);function l(t){t=a({},t,i);if(!t.ui5ComponentName){if(t.additionalInformation){t.ui5ComponentName=t.additionalInformation.replace(/^SAPUI5\.Component=/,"")}else if(t.name){t.ui5ComponentName=t.name}}return t}async function u(e){try{const t=await c.getServiceAsync("Ui5ComponentLoader");e=l(e);e.loadDefaultDependencies=false;return t.createComponentData(e)}catch(e){t.error("Cannot get UI5 component data: "+e,e.stack,"sap.ushell.services.Navigation");return Promise.reject(e)}}if(p.applicationType===o.URL.type&&p.appCapabilities&&p.appCapabilities.appFrameworkId==="UI5"&&c.inAppRuntime()){const[t]=await m.requireAsync(["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"]);let a=await t.getAppInfo(p.appCapabilities.technicalAppComponentId);if(a.hasOwnProperty("oResolvedHashFragment")){a=a.oResolvedHashFragment}a=l(a);if(a.url&&e.indexOf("?")>0){a.url+="?"+e.split("?")[1]}return u({ui5ComponentName:p.appCapabilities.technicalAppComponentId,applicationDependencies:a,url:a.url})}else if(p.applicationType!==o.URL.type&&!/^SAPUI5\.Component=/.test(p.additionalInformation)){return Promise.reject("The resolved target mapping is not of type UI5 component.")}return u(p)};this.createEmptyAppState=async function(t,e,a,n){if(!s.isA(t,"sap.ui.core.UIComponent")){return Promise.reject("The passed oAppComponent must be a UI5 Component.")}const i=await c.getServiceAsync("AppState");return i.createEmptyAppState(t,e,a,n)};this.getStartupAppState=function(t){this._checkComponent(t);const e=t.getComponentData()&&t.getComponentData()["sap-xapp-state"]&&t.getComponentData()["sap-xapp-state"][0];return this.getAppState(t,e)};this._checkComponent=function(t){if(!s.isA(t,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}};this.getAppState=async function(e,a){this._checkComponent(e);const n=await c.getServiceAsync("AppState");if(typeof a!=="string"){if(a!==undefined){t.error("Illegal Argument sAppStateKey ")}return n.createEmptyUnmodifiableAppState(e)}return m.promisify(n.getAppState(a))};this.getAppStateData=async function(e){if(!Array.isArray(e)){throw new Error("Unexpected Input: aAppStateKeys has to be an array with app state keys!")}const a=await c.getServiceAsync("AppState");return Promise.all(e.map(e=>{if(typeof e!=="string"){if(e!==undefined){t.error("Illegal Argument sAppStateKey ")}return Promise.resolve({})}return m.promisify(a.getAppState(e)).then(t=>t.getData()).catch(()=>({}))}))};this.saveAppStates=function(t){const e=t.map(t=>m.promisify(t.save()));return Promise.all(e)};this._processShellHashWithParams=function(t){if(n(t)){const e=!!t.processParams;const a=i.get("target.shellHash",t);const s=t.params;if(e&&a&&n(s)){const e=y.parseShellHash(a);t.target={semanticObject:e.semanticObject,action:e.action,contextRaw:e.contextRaw};t.appSpecificRoute=e.appSpecificRoute;t.params=Object.assign({},s,e.params)}}};this.getSupportedAppStatePersistencyMethods=async function(){const t=await c.getServiceAsync("AppState");return t.getSupportedPersistencyMethods()};this.updateAppStatePersistencyMethodAndSave=async function(t,e,a){const n=await c.getServiceAsync("AppState");return m.promisify(n.makeStatePersistent(t,e,a))};this.resolveIntent=async function(t){const e=await c.getServiceAsync("NavTargetResolution");return m.promisify(e.resolveHashFragment(t)).then(t=>({url:t.url}))}}d.hasNoAdapter=true;return d});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Navigation/utils", ["sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/Container","sap/ushell/utils/UrlParsing"],function(e,t,r,a,n){"use strict";var i={};i.extractGetLinksParameterOptions=function(e){return i._parseGetLinksParameters(e).filter(function(e){return Object.keys(e.options).length>0}).map(function(e){return{name:e.name,options:e.options}})};i.extractGetLinksParameterDefinition=function(e){return i._parseGetLinksParameters(e).reduce(function(e,t){e[t.name]=t.value;return e},{})};i._parseGetLinksParameters=function(e){if(Object.prototype.toString.apply(e)!=="[object Object]"){return[]}var t=JSON.parse(JSON.stringify(e));return Object.keys(t).map(function(e){var r=t[e];var a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete t[e].value;a=t[e]}return{name:e,value:r,options:a}})};i._safeParseToObject=function(e){try{return JSON.parse(e)}catch(t){r.error("Cannot parse the given string to object",e)}return null};i._createAppStateFromData=function(e){return a.getServiceAsync("AppState").then(function(t){var r=t.createEmptyAppState(null);r.setData(e);r.save();return r.getKey()})};i._extractParameter=function(a,s){var c;var p=null;if(typeof a==="string"){if(a.indexOf(s+"=")===-1){return{intent:a,data:null}}var u=n.parseShellHash(a);if(!u){return{intent:a,data:null}}p=u.params[s];delete u.params[s];c=n.constructShellHash(u);return{intent:c,data:p}}if(e(a)){var o=t.get("target.shellHash",a);if(typeof o==="string"){var l=i._extractParameter(o,s);a.target.shellHash=l.intent;return{intent:a,data:l.data}}var f=a.params;if(f&&f[s]){const e=f[s];p=typeof e==="string"?[e]:e;delete f[s]}return{intent:a,data:p}}r.error("Invalid input parameter","expected string or object");return{intent:a}};i.addXAppStateFromParameter=function(e,t){var r=i._extractParameter(e,t);var a=r.intent;var n=r.data&&r.data[0];if(!n){return Promise.resolve()}var s=i._safeParseToObject(n);if(!s){return Promise.resolve()}return i._createAppStateFromData(s).then(function(e){i._injectParameter(a,"sap-xapp-state",e)})};i._injectParameter=function(e,r,a){if(typeof e==="string"){var s=n.parseShellHash(e);s.params[r]=a;return n.constructShellHash(s)}if(Object.prototype.toString.apply(e)==="[object Object]"){var c=t.get("target.shellHash",e);if(typeof c==="string"){e.target.shellHash=i._injectParameter(c,r,a);return e}if(!e.params){e.params={}}e.params[r]=a}return e};i.injectParameters=function(e){var t=e.inject;var r=e.injectEmptyString||{};var a=e.type;var n=e.args;function s(e,t){return e||e===""&&t}if(a.isPlainObject(n)){if(n.target&&n.target.shellHash){if(typeof n.target.shellHash==="string"){n.target.shellHash=i.injectParameters({inject:t,injectEmptyString:r,type:e.type,args:n.target.shellHash})}return n}var c=Object.keys(t).reduce(function(e,a){var n=t[a];var i=r[a]===true;if(s(n,i)&&typeof e==="string"){var c=new RegExp("[&]"+a);var p=!c.test(e);if(p){var u=e?"&":"";e+=u+a+"="+n}}else if(s(n,i)&&!e.hasOwnProperty(a)){e[a]=n}return e},n.params||{});if(c&&Object.keys(c).length>0){n.params=c}return n}var p=n;if(p){Object.keys(t).forEach(function(e){var a=t[e];var n=r[e]===true;var i=new RegExp("[?&]"+e);var c=!i.test(p);if(s(a,n)&&c){var u=p.indexOf("?")>-1?"&":"?";p+=u+e+"="+a}})}return p};i.injectStickyParameters=function(e){return a.getServiceAsync("AppLifeCycle").then(function(t){return i._injectStickyParameters(e,t)})};i._injectStickyParameters=function(e,t){if(!t||Object.keys(t).length<=0){return e.args}var r=t.getCurrentApplication();if(!r||Object.keys(r).length<=0){return e.args}var a=e.appLifeCycle;var n=e.technicalParameters;var s=n.getParameters({sticky:true}).reduce(function(e,t){var i=t.name;var s=r.componentInstance;var c=r.applicationType;var p;if(c==="UI5"){p={}}else{p=a.getCurrentApplication().container}var u=n.getParameterValueSync(i,s,p,c);var o=t.stickyName||i;e[o]=u;return e},{});var c={type:e.type,inject:s,args:e.args};return i.injectParameters(c)};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavigationDataProvider", ["sap/ushell/resources"],function(t){"use strict";function i(){this.S_COMPONENT_NAME="sap.ushell.services.NavigationDataProvider";this._init.apply(this,arguments)}i.prototype._init=function(t,i){this.oAdapter=t};i.prototype.getNavigationData=function(){return new Promise(function(i,e){var s=this.oAdapter.getSystemAliases&&this.oAdapter.getSystemAliases()||{};this.oAdapter.getInbounds().then(function(t){i({systemAliases:s,inbounds:t})}).fail(function(i){var s={component:this.S_COMPONENT_NAME,description:t.i18n.getText("NavigationDataProvider.CannotLoadData"),detail:i};e(s)}.bind(this))}.bind(this))};i.hasNoAdapter=false;return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PageBuilding", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(e,t){this.getFactory=function(){return e.getFactory()};this.getPage=function(t){return e.getFactory().createPage(t)};this.getPageSet=function(t){var r=new jQuery.Deferred;e.getFactory().createPageSet(t,r.resolve.bind(r),r.reject.bind(r));return r.promise()}}e.hasNoAdapter=false;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PagePersistence", [],function(){"use strict";function t(){this._init.apply(this,arguments)}t.prototype._init=function(t,e){this._oServiceConfiguration=e;this.oAdapter=t;this._pagesCache=[]};t.prototype.getPage=function(t){if(!this._pagesCache[t]){this._pagesCache[t]=this.oAdapter.getPage(t)}return this._pagesCache[t]};t.prototype.getPages=function(t){return this.oAdapter.getPages(t)};t.hasNoAdapter=false;return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Pages", ["sap/base/Log","sap/ushell/utils/RestrictedJSONModel","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/base/util/ObjectPath"],function(e,i,t,n,r,a,o,s,d,c,u,l){"use strict";var h=function(){this.COMPONENT_NAME="sap/ushell/services/Pages";this._oCdmServicePromise=sap.ushell.Container.getServiceAsync("CommonDataModel");this._oCSTRServicePromise=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");this._oPagesModel=new i({pages:[]});this._bImplicitSaveEnabled=true;this._aPagesToBeSaved=[]};h.prototype._generateId=function(e){var i=[];var t=this.getModel().getProperty(this.getPagePath(e));t.sections.forEach(function(e){i.push(e.id);e.visualizations.forEach(function(e){i.push(e.id)})});return o.generateUniqueId(i)};h.prototype.getModel=function(){return this._oPagesModel};h.prototype.enableImplicitSave=function(e){this._bImplicitSaveEnabled=e};h.prototype.getPageIndex=function(e){var i=this._oPagesModel.getProperty("/pages");for(var t=0;t<i.length;++t){if(i[t].id===e){return t}}return undefined};h.prototype.getPagePath=function(e){var i=this.getPageIndex(e);if(typeof i==="undefined"){return""}return"/pages/"+i};h.prototype.loadPage=function(i){var t=this.getPagePath(i);if(t){return Promise.resolve(t)}o.setPerformanceMark(["FLP-Pages-Service-loadPage-start[",i,"]"].join(""));return this._oCdmServicePromise.catch(function(i){e.error("Pages - loadPage: Couldn't resolve CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){return Promise.all([e.getPage(i),e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes()])}).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];return this._getModelForPage(i,t,n,r)}.bind(this)).then(function(e){var t=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+t;this._oPagesModel._setProperty(n,e);o.setPerformanceMark(["FLP-Pages-Service-loadPage-end[",i,"]"].join(""));return n}.bind(this)).catch(function(i){e.error("Pages - loadPage: Failed to gather site data.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))};h.prototype.loadPages=function(e){return this._oCdmServicePromise.then(function(i){return i.getPages(e)}).then(function(){return Promise.all(e.map(function(e){return this.loadPage(e)}.bind(this)))}.bind(this)).then(function(i){var t={};e.forEach(function(e,n){t[e]=i[n]});return t})};h.prototype.findVisualization=function(i,t,n,r){return this._oCdmServicePromise.catch(function(i){e.error("Pages - findVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(a){return Promise.all([this.loadPage(i),a.getCachedVisualizations(),a.getApplications()]).then(function(e){var a=e[0];var o=this.getModel().getProperty(a+"/sections")||[];return o.reduce(function(e,a,o){if(t&&a.id!==t){return e}var s=a.visualizations.reduce(function(e,i,t){if(n&&i.vizId===n||r&&i.id===r){e.push(t)}return e},[]);if(s.length){e.push({pageId:i,sectionIndex:o,vizIndexes:s})}return e},[])}.bind(this)).catch(function(i){e.error("Pages - findVisualization: Couldn't load page, get visualizations or applications.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))}.bind(this))};h.prototype.moveVisualization=function(i,n,r,a,o){if(n===a&&r===o){return Promise.resolve({visualizationIndex:o})}this.setPersonalizationActive(true);var s=this._oPagesModel.getProperty("/pages/"+i);var d=s.id;var c=s.sections;var u=c[n];var l=c[a];var h=u.id;var v=l.id;var f=u.visualizations[r];var g=f.id;u.visualizations=u.visualizations.concat([]);l.visualizations=l.visualizations.concat([]);u.visualizations.splice(r,1);if(o===-1){o=l.visualizations.length}l.visualizations.splice(o,0,f);var P;if(l.visualizations[o]){P=o-1}else{P=l.visualizations.length-2}var p;if(l.visualizations[P]){p=l.visualizations[P].id}if(u.default&&!u.visualizations.length){c.splice(n,1)}this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(d)}).catch(function(i){e.error("Pages - moveVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[h];var r=i.layout.vizOrder;var a=i.viz;var o=e.payload.sections[v];var s=o.layout.vizOrder;var c=o.viz;var u=t(a[g]);var l=r.indexOf(g);r.splice(l,1);var f=p?s.indexOf(p)+1:0;s.splice(f,0,g);if(h!==v){delete a[g];c[g]=u}if(i.default&&!Object.keys(a).length){delete e.payload.sections[h];e.payload.layout.sectionOrder.splice(n,1)}return this._conditionalSavePersonalization(d)}.bind(this)).then(function(){return{visualizationIndex:o}}).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.deleteVisualization=function(i,t,n){var r=this._oPagesModel.getProperty("/pages/"+i);var a=r.sections[t];if(a.default&&a.visualizations.length<2){return this.deleteSection(i,t)}this.setPersonalizationActive(true);var o=a.visualizations;var s=o[n];o.splice(n,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r.id)}).catch(function(i){e.error("Pages - deleteVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[a.id].layout.vizOrder;var t=e.payload.sections[a.id].viz;var n=i.indexOf(s.id);delete t[s.id];if(n>-1){i.splice(n,1)}return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype._getSectionIndex=function(e,i){var t=this.getModel().getProperty(e+"/sections")||[];var n=0;for(;n<t.length;n+=1){if(t[n].id===i){return n}}};h.prototype._getVisualizationData=function(e,i,t,n,r,a,o){var s=n||{vizId:i};var d={applications:r,visualizations:t,vizTypes:a};var u=c.getVizData(d,s,o);if(!u.id){u.id=this._generateId(e)}return u};h.prototype.addVisualization=function(i,t,n,r){return this._oCdmServicePromise.catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(o){return Promise.all([this.loadPage(i),o.getVisualizations(),o.getApplications(),o.getVizTypes()]).catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to load page, get visualizations or get applications.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(s){var d=s[0];var c=s[1];var u=s[2];var l=s[3];var h=this._getSectionIndex(d,t);var v=this.getModel().getProperty(d+"/sections")||[];var f=this._getVisualizationData(i,n,c,null,u,l);if(r){f.displayFormatHint=r}var g;for(var P=0;P<v.length;P++){if(v[P].default){g=P}}if(h!==undefined||g!==undefined){this.setPersonalizationActive(true);var p=h!==undefined?h:g||0;var z=d+"/sections/"+p+"/visualizations";this.getModel().getProperty(z).push(f);this.getModel().refresh();return o.getPage(i).catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to get page.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var a=e.payload.sections[t||e.payload.layout.sectionOrder[0]];a.layout.vizOrder.push(f.id);a.viz[f.id]={id:f.id,vizId:n};if(r){a.viz[f.id].displayFormatHint=r}return this._conditionalSavePersonalization(i)}.bind(this))}var m=parseInt(d.split("/")[2],10);return this.addSection(m,0,{title:a.i18n.getText("DefaultSection.Title"),default:true,visualizations:[f]})}.bind(this))}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.copyVisualization=function(e,i,t){var n=t.isBookmark;if(!n){return this.addVisualization(e,i,t.vizId,t.displayFormatHint)}return this.addBookmarkToPage(e,{title:t.title,subtitle:t.subtitle,url:t.targetURL,icon:t.icon,info:t.info,serviceUrl:t.indicatorDataSource?t.indicatorDataSource.path:"",serviceRefreshInterval:t.indicatorDataSource?t.indicatorDataSource.refresh:"",numberUnit:t.numberUnit,vizType:t.vizType,vizConfig:t.vizConfig},i)};h.prototype.moveSection=function(i,t,n){if(t===n){return Promise.resolve()}this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections");var o=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t);var s=o.id;a.splice(t,1);if(t<n){n--}a.splice(n,0,o);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(i){e.error("Pages - moveSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.layout.sectionOrder;i.splice(i.indexOf(s),1);i.splice(n,0,s);return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.addSection=function(i,t,n){this.setPersonalizationActive(true);var r=n||{};var a=this._oPagesModel.getProperty("/pages/"+i+"/sections");var o=this._oPagesModel.getProperty("/pages/"+i+"/id");var s={id:r.id!==undefined?r.id:this._generateId(o),title:r.title!==undefined?r.title:"",visible:r.visible!==undefined?r.visible:true,preset:r.preset!==undefined?r.preset:false,locked:r.locked!==undefined?r.locked:false,default:r.default!==undefined?r.default:false,visualizations:r.visualizations!==undefined?r.visualizations:[]};a.splice(t,0,s);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(o)}).catch(function(i){e.error("Pages - addSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i={id:s.id,title:s.title,visible:s.visible,preset:s.preset,locked:s.locked,default:s.default,layout:{vizOrder:[]},viz:{}};if(s.visualizations){var n=0;var r;for(;n<s.visualizations.length;n++){r=s.visualizations[n];i.layout.vizOrder.push(r.id);if(r.isBookmark){i.viz[r.id]=c.getVizRef(r)}else{i.viz[r.id]={id:r.id,vizId:r.vizId};if(r.displayFormatHint){i.viz[r.id].displayFormatHint=r.displayFormatHint}}}}e.payload.layout.sectionOrder.splice(t,0,s.id);e.payload.sections[s.id]=i;return this._conditionalSavePersonalization(o)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.deleteSection=function(i,t){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+i+"/id");var r=this._oPagesModel.getProperty("/pages/"+i+"/sections");var a=r[t].id;r.splice(t,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(n)}).catch(function(i){e.error("Pages - deleteSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){delete e.payload.sections[a];e.payload.layout.sectionOrder.splice(t,1);return this._conditionalSavePersonalization(n)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.setSectionVisibility=function(i,t,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t+"/id");var o=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t);if(o.visible===n){return Promise.resolve()}o.visible=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(i){e.error("Pages - setSectionVisibility: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){e.payload.sections[a].visible=n;return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.renameSection=function(i,t,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i);var a=r.sections[t];a.title=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r.id)}).catch(function(i){e.error("Pages - renameSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){e.payload.sections[a.id].title=n;return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.resetSection=function(i,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+n+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(r),e.getOriginalPage(r),e.getCachedVizTypes()])}).catch(function(i){e.error("Pages - resetSection: Personalization cannot be saved: Failed to gather data from CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];var a=e[4];return Promise.all([this._getModelForPage(r,i,t,a),n,r])}.bind(this)).then(function(e){var o=e[0];var s=e[1];var d=e[2];var c=t(o.sections.find(function(e){return e.id===a}),20);var u=c.visualizations.map(function(e){return e.id});var l=this._oPagesModel.getProperty("/pages/"+i);l.sections.forEach(function(e){if(c.id!==e.id){e.visualizations.forEach(function(i){if(u.indexOf(i.id)!==-1){var n=this._generateId(r);var a=t(s.payload.sections[e.id].viz[i.id]);delete s.payload.sections[e.id].viz[i.id];var o=s.payload.sections[e.id].layout.vizOrder.indexOf(a.id);a.id=n;s.payload.sections[e.id].viz[n]=a;s.payload.sections[e.id].layout.vizOrder[o]=n;i.id=n}}.bind(this))}}.bind(this));this._oPagesModel._setProperty("/pages/"+i+"/sections/"+n,c);s.payload.sections[c.id]=d.payload.sections[c.id];return this._conditionalSavePersonalization(s.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.resetPage=function(i){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+i+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(n),e.getOriginalPage(n),e.getCachedVizTypes()])}).catch(function(i){e.error("Pages - resetPage: Personalization cannot be saved: Failed to gather data from CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];var a=e[4];return Promise.all([this._getModelForPage(r,i,t,a),n,r])}.bind(this)).then(function(e){var n=e[0];var r=e[1];var a=e[2];this._oPagesModel._setProperty("/pages/"+i,n);r.payload=t(a.payload);return this._conditionalSavePersonalization(r.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype.setPersonalizationActive=function(e){if(!this._bDirtyState&&e===true){this._bDirtyState=true;this._oCopiedModelData=t(this._oPagesModel.getProperty("/"),20)}else if(this._bDirtyState&&e===false){this._oPagesModel._setData(this._oCopiedModelData);this._bDirtyState=false}};h.prototype.savePersonalization=function(i){var n;if(!i){n=t(this._aPagesToBeSaved)}else{n=[i]}return this._oCdmServicePromise.then(function(e){return Promise.all(n.map(function(i){var t=this._aPagesToBeSaved.indexOf(i);this._aPagesToBeSaved.splice(t,1);return new Promise(function(t,n){e.save(i).then(t,n)}).catch(function(e){if(this._aPagesToBeSaved.indexOf(i)===-1){this._aPagesToBeSaved.push(i)}return Promise.reject(e)}.bind(this))}.bind(this)))}.bind(this)).then(function(){this._bDirtyState=false}.bind(this)).catch(function(i){e.error("Pages - savePersonalization: Personalization cannot be saved: CDM Service cannot be retrieved or the save process encountered an error.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))};h.prototype._conditionalSavePersonalization=function(e){if(this._bImplicitSaveEnabled){return this.savePersonalization(e)}if(this._aPagesToBeSaved.indexOf(e)===-1){this._aPagesToBeSaved.push(e)}return Promise.resolve()};h.prototype._getModelForPage=function(i,t,n,r){var d={id:i&&i.identification&&i.identification.id||"",title:i&&i.identification&&i.identification.title||"",description:"",sections:[]};o.setPerformanceMark(["FLP-Pages-Service-getModelForPage-start[",d.id,"]"].join(""));return Promise.all([this._oCSTRServicePromise]).catch(function(e){return Promise.reject(e)}).then(function(c){var u=c[0];var l=s.last("/core/catalog/enableHideGroups");return Promise.all(i.payload.layout.sectionOrder.map(function(o){var s=i.payload.sections[o];var c={id:s.id||"",title:s.default?a.i18n.getText("DefaultSection.Title"):s.title||"",visualizations:[],visible:!l||(s.visible!==undefined?s.visible:true),locked:s.locked!==undefined?s.locked:false,preset:s.preset!==undefined?s.preset:true,default:s.default!==undefined?s.default:false};d.sections.push(c);return Promise.all(s.layout.vizOrder.map(function(a){var o=s.viz[a];var d=o.vizId;return u.getSystemContext(o.contentProviderId).then(function(a){var s=this._getVisualizationData(i.identification.id,d,t,o,n,r,a);c.visualizations.push(s);return this._isIntentSupported(s,u).then(function(i){if(!i){var t=c.visualizations.findIndex(function(e){return e.id===s.id});c.visualizations.splice(t,1);e.warning("The visualization "+s.vizId+" is filtered out, because it does not have a supported intent.")}})}.bind(this))}.bind(this)))}.bind(this))).then(function(){o.setPerformanceMark(["FLP-Pages-Service-getModelForPage-end[",d.id,"]"].join(""));return d})}.bind(this))};h.prototype.removeUnsupportedVisualizations=function(e,i){return this._oCSTRServicePromise.then(function(t){var n=this.getModel().getProperty("/pages/"+e+"/sections/"+i+"/visualizations/");var r=[];for(var a=n.length-1;a>=0;--a){r.push(this._isIntentSupported(n[a],t).then(function(e,i){if(!i){n.splice(e,1)}return i}.bind(this,a)))}return Promise.all(r).then(function(e){if(e.indexOf(false)!==-1){this.getModel().refresh()}}.bind(this))}.bind(this))};h.prototype._isIntentSupported=function(e,i){if(e.target===undefined){return Promise.resolve(false)}if(e.target.type==="URL"){if(u.isStandardVizType(e.vizType)){return Promise.resolve(!!e.target.url)}return Promise.resolve(true)}return new Promise(function(t,n){i.isIntentSupported([e.targetURL]).then(function(i){t(i[e.targetURL].supported)}).fail(function(){t(false)})})};h.prototype.addBookmarkToPage=function(i,t,n,r){if(!i){return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: No page id is provided.")}var o=c.getBookmarkVizTypeIds(t);this.setPersonalizationActive(true);return Promise.all([this._oCdmServicePromise,this._oCSTRServicePromise]).then(function(e){var t=e[0];var n=e[1];var a=o.map(function(e){return t.getVizType(e)});return Promise.all(a).then(function(e){var t={};e.forEach(function(e,i){t[o[i]]=e;return t});return Promise.all([this.loadPage(i),t,n.getSystemContext(r)])}.bind(this))}.bind(this)).catch(function(i){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: Could not load page.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(o){var s=o[0];var u=o[1];var h=o[2];var v={id:this._generateId(i),vizType:t.vizType,title:t.title,subTitle:t.subtitle,icon:t.icon,info:t.info,numberUnit:t.numberUnit,target:d.toTargetFromHash(t.url),indicatorDataSource:{path:t.serviceUrl,refresh:t.serviceRefreshInterval},vizConfig:t.vizConfig,isBookmark:true};if(t.dataSource){v.dataSource={type:t.dataSource.type,settings:{odataVersion:l.get(["dataSource","settings","odataVersion"],t)}}}if(r){v.contentProviderId=r}var f=this._getVisualizationData(i,undefined,{},v,{},u,h);var g=parseInt(/pages\/(\d+)/.exec(s)[1],10);var P=this._oPagesModel.getProperty(s);var p;if(n){p=P.sections.find(function(e){return e.id===n});if(!p){e.error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.")}}else{p=P.sections.find(function(e){return e.default});if(!p){return this.addSection(g,0,{title:a.i18n.getText("DefaultSection.Title"),default:true,visualizations:[f]})}}p.visualizations.push(f);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(i)}).catch(function(i){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var t=e.payload.sections[p.id];t.layout.vizOrder.push(f.id);t.viz[f.id]=c.getVizRef(f);return this._conditionalSavePersonalization(i)}.bind(this))}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype._visitPages=function(e){return this._oCdmServicePromise.then(function(e){return e.getAllPages()}).then(function(i){i=i||[];i.forEach(function(i){e(i)})})};h.prototype._visitSections=function(e){return this._visitPages(function(i){var t=i.payload&&i.payload.sections||{};Object.keys(t).forEach(function(n){e(t[n],i)})})};h.prototype._visitVizReferences=function(e){return this._visitSections(function(i,t){var n=i.viz||{};Object.keys(n).forEach(function(r){e(n[r],i,t)})})};h.prototype._findBookmarks=function(e){var i=[];return Promise.resolve().then(function(){var t=d.toTargetFromHash(e.url);t=c.harmonizeTarget(t);return this._visitVizReferences(function(n,r,a){if(n.isBookmark&&e.vizType===n.vizType&&(n.contentProviderId||"")===(e.contentProviderId||"")&&d.isSameTarget(t,n.target)){i.push({vizRefId:n.id,sectionId:r.id,pageId:a.identification.id})}}).then(function(){return i})}.bind(this))};h.prototype.countBookmarks=function(e){return this._findBookmarks(e).then(function(e){return e.length})};h.prototype.deleteBookmarks=function(e,i,t){var n=0;return this._findBookmarks(e).then(function(e){return e.reduce(function(e,r){if(i&&r.pageId!==i){return e}if(t&&r.sectionId!==t){return e}return e.then(function(){return this.findVisualization(r.pageId,r.sectionId,null,r.vizRefId)}.bind(this)).then(function(e){var i=e[0];var t=this.getPageIndex(i.pageId);return this.deleteVisualization(t,i.sectionIndex,i.vizIndexes[0])}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};h.prototype.updateBookmarks=function(i,t){if(!i||!i.url||typeof i.url!=="string"){e.error("Fail to update bookmark. No valid URL");return Promise.reject("Invalid URL provided")}if(!t||typeof t!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+i.url);return Promise.reject("Missing parameters")}var n=0;return Promise.all([this._findBookmarks(i)]).then(function(e){var i=e[0];return i.reduce(function(e,i){return e.then(function(){return this.findVisualization(i.pageId,i.sectionId,null,i.vizRefId)}.bind(this)).then(function(e){var i=e[0];var n=this.getPageIndex(i.pageId);var r={subtitle:t.subtitle,icon:t.icon,info:t.info,numberUnit:t.numberUnit,indicatorDataSource:{path:t.serviceUrl,refresh:t.serviceRefreshInterval},vizConfig:t.vizConfig};if(t.title){r.title=t.title}if(t.url){r.target=c.harmonizeTarget(d.toTargetFromHash(t.url))}return this.updateVisualization(n,i.sectionIndex,i.vizIndexes[0],r)}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};h.prototype.updateVisualization=function(e,i,a,o){return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes()])}).then(function(s){var u=s[0];var l=s[1];var h=s[2];var v=this._oPagesModel.getProperty("/pages/"+e);var f=v.sections[i];var g=f.visualizations;var P=g[a];var p={};this.setPersonalizationActive(true);if(this._isPropertyChanged(P.title,o.title)){p.title=o.title}if(o.target&&!d.isSameTarget(P.target,o.target)){p.target=o.target}if(this._isPropertyChanged(P.subtitle,o.subtitle)){p.subtitle=o.subtitle}if(this._isPropertyChanged(P.icon,o.icon)){p.icon=o.icon}if(this._isPropertyChanged(P.info,o.info)){p.info=o.info}if(this._isPropertyChanged(P.numberUnit,o.numberUnit)){p.numberUnit=o.numberUnit}if(this._isPropertyChanged(P.displayFormatHint,o.displayFormatHint)){p.displayFormatHint=o.displayFormatHint}if(o.indicatorDataSource&&P.indicatorDataSource&&(this._isPropertyChanged(P.indicatorDataSource.path,o.indicatorDataSource.path)||this._isPropertyChanged(P.indicatorDataSource.refresh,o.indicatorDataSource.refresh))){p.indicatorDataSource=t(P.indicatorDataSource);n(p.indicatorDataSource,o.indicatorDataSource)}if(o.vizConfig){P.vizConfig=r({},P.vizConfig,o.vizConfig);p.vizConfig=P.vizConfig}n(P,p);var z=c.getVizRef(P);P=this._getVisualizationData(v.id,z.vizId,u,z,l,h);g[a]=P;this._oPagesModel.refresh();return this._updateVisualizationCDMData(v.id,f.id,P.id,p).then(function(){return{pageId:v.id,sectionId:f.id,vizRefId:P.id}})}.bind(this))};h.prototype._updateVisualizationCDMData=function(i,t,r,a){return this._oCdmServicePromise.then(function(e){return e.getPage(i)}).catch(function(i){e.error("Pages - updateVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[t].viz[r];var o=c.getVizRef(a);o.vizConfig=a.vizConfig;n(i,o);return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};h.prototype._isPropertyChanged=function(e,i){if((i||i==="")&&e!==i){return true}return false};h.hasNoAdapter=true;return h},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Personalization", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/base/Object","sap/ui/core/Core","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/PersonalizationV2/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/PersonalizationV2/WindowAdapterContainer"],function(e,t,n,r,jQuery,a,i,o,s,p,d,u,c,l,f,h,_){"use strict";function v(e,t,n,r){this._oConfig=r&&r.config||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new p(this,e)};this._oAdapterWindowOnly={lazy:false,instance:new p(this,undefined)};this._oContainerMap=new a.Map;this._oPendingOperationsMap=new a.Map}v.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseded by subsequent save";v.prototype.constants=o;v.prototype._configureAppVariantStorage=function(e){var t=this;var n="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!e){e={adapter:{module:n}}}if(Object.keys(e).length===0||e.enabled===false){return}var r=e.adapter&&e.adapter.module||n;var a=r.split(".").join("/");var i=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||function(){var e=new jQuery.Deferred;try{sap.ui.require([a],n)}catch(t){e.reject(t)}function n(n){try{var r=new n;var a=new p(t,r);e.resolve(a)}catch(t){e.reject(t)}}return e.promise()}();return t._oAppVariantAdapterLoadPromise};return{lazy:true,create:i}};v.prototype.getGeneratedKey=function(){return a.generateRandomKey()};v.prototype.getPersonalizer=function(e,t,n){n=n||this._getApplicationComponent();return new c(this,this._oAdapterWithBackendAdapter.instance,e,t,n)};v.prototype._getApplicationComponent=function(){var e=t._sOwnerId;if(e){var a=r.getComponent(e);if(n.isA(a,"sap.ui.core.UIComponent")){return a}}return undefined};v.prototype.getTransientPersonalizer=function(){return new d};v.prototype.getContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,false,n)};v.prototype.createEmptyContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,true,n)};v.prototype._createContainer=function(e,t,n,r){var o=this;var p=new jQuery.Deferred;if(typeof e!=="string"){throw new a.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}var d=!!(i.isAppVariant(r)&&(!t||!t.shared)&&this._oAppVariantAdapterWithBackendAdapter);var u=i.adjustScope(t);var c=i.addContainerPrefix(e);if(d){var l=r.getManifestObject();u.component=r;u.appVarId=l.getEntry("/sap.ui5/appVariantId");u.appVersion=l.getEntry("/sap.app/applicationVersion/version");c+="#"+l.getEntry("/sap.ui5/appVariantId")}var f=d?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;var h=o._oAdapterWindowOnly;var _=i.pickAdapter(t,h,f);i.loadAdapter(_).then(function(e){var t;var a=new s(o,e,c,u,r);var i=e&&e.supportsGetWithoutSubsequentLoad===true;if(n&&i){t=new jQuery.Deferred;t.resolve(a)}else{t=a.load()}t.fail(function(){p.reject()}).done(function(){if(n||a._isExpired()){a.clear()}p.resolve(a)})},function(e){p.reject(e)});return p.promise()};v.prototype.delContainer=function(e,t){var n={};var r="";var a=this;t=a._adjustScope(t);r=i.addContainerPrefix(e);n=new jQuery.Deferred;var o=a._pendingContainerOperations_cancelAddNext(e,null);o.always(function(){a.getContainer(e,t).fail(function(){a._pendingContainerOperations_cancelAddNext(e,n);n.reject()}).done(function(){var o;a._pendingContainerOperations_cancelAddNext(e,n);o=t.validity===0?a._oAdapterWindowOnly:a._oAdapterWithBackendAdapter;i.loadAdapter(o).then(function(e){e.delAdapterContainer(r,t).fail(function(){n.reject()}).done(function(){n.resolve()})},function(){n.reject()})})});return n.promise()};v.prototype._pendingContainerOperations_flushAddNext=function(e,t){var n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;if(typeof n._sapFnSave==="function"){var r=n._sapFnSave;n._sapFnSave=undefined;r()}return n};v.prototype._pendingContainerOperations_cancelAddNext=function(e,t){var n;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}if(n._sapTimeoutId){clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;n.resolve(v.prototype.SAVE_DEFERRED_DROPPED)}return n};v.prototype.getPersonalizationContainer=function(e){var t="";var n={};var r={};if(typeof e!=="string"){throw new a.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}t=i.addContainerPrefix(e);if(this._oContainerMap.containsKey(t)){return this._oContainerMap.get(t).promise()}r=new jQuery.Deferred;n=new u(this._oAdapterWithBackendAdapter.instance,t);n.done(function(e){r.resolve(e)}).fail(function(e){r.reject(e)});this._oContainerMap.put(t,r);return r.promise()};v.prototype.delPersonalizationContainer=function(e){var t={};var n="";var r=this;n=i.addContainerPrefix(e);t=new jQuery.Deferred;this.getPersonalizationContainer(e).fail(function(){t.reject()}).done(function(){r._oAdapterWithBackendAdapter.instance.delAdapterContainer(n).fail(function(){t.reject()}).done(function(){r._oContainerMap.remove(n);t.resolve()})});return t.promise()};v.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter};v.prototype.resetEntirePersonalization=function(){var e=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(t){if(t){return e.resetEntirePersonalization()}return Promise.reject()})};v.prototype.isResetEntirePersonalizationSupported=function(){var t=this._getBackendAdapter();if(typeof t.resetEntirePersonalization!=="function"){return Promise.resolve(false)}if(typeof t.isResetEntirePersonalizationSupported==="function"){return t.isResetEntirePersonalizationSupported().then(function(e){return e}).catch(function(t){e.error("isResetEntirePersonalizationSupported failed with error: "+t.toString());return Promise.reject(t)})}return Promise.resolve(true)};v.prototype._adjustScope=i.adjustScope;v.hasNoAdapter=false;v.ContextContainer=s;v.Variant=f;v.VariantSet=h;v.VariantSetAdapter=l;v.WindowAdapter=p;v.WindowAdapterContainer=_;return v},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2", ["sap/base/Log","sap/base/util/Deferred","sap/ui/base/ManagedObject","sap/ui/base/Object","sap/ui/core/Core","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/PersonalizationV2/utils","sap/ushell/services/PersonalizationV2/constants","sap/ushell/services/PersonalizationV2/ContextContainer","sap/ushell/services/PersonalizationV2/WindowAdapter","sap/ushell/services/PersonalizationV2/TransientPersonalizer","sap/ushell/services/PersonalizationV2/Personalizer","sap/ushell/services/PersonalizationV2/VariantSetAdapter","sap/ushell/services/PersonalizationV2/Variant","sap/ushell/services/PersonalizationV2/VariantSet","sap/ushell/services/PersonalizationV2/WindowAdapterContainer"],function(e,t,n,a,r,jQuery,i,o,s,p,d,u,c,l,f,h,A){"use strict";function _(e,t,n,a){this._oConfig=a&&a.config||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new d(this,e)};this._oAdapterWindowOnly={lazy:false,instance:new d(this,undefined)};this._oContainerMap=new i.Map;this._oPendingOperationsMap=new i.Map}_.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseded by subsequent save";_.prototype.constants=s;_.prototype._configureAppVariantStorage=function(e){var n=this;var a="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!e){e={adapter:{module:a}}}if(Object.keys(e).length===0||e.enabled===false){return}var r=e.adapter&&e.adapter.module||a;var i=r.split(".").join("/");var o=function(){n._oAppVariantAdapterLoadPromise=n._oAppVariantAdapterLoadPromise||function(){var e=new t;try{sap.ui.require([i],a)}catch(t){e.reject(t)}function a(t){try{var a=new t;var r=new d(n,a);e.resolve(r)}catch(t){e.reject(t)}}return e.promise}();return n._oAppVariantAdapterLoadPromise};return{lazy:true,create:o}};_.prototype.getGeneratedKey=async function(){return i.generateRandomKey()};_.prototype.getPersonalizer=async function(e,t,n){n=n||this._getApplicationComponent();return new c(this,this._oAdapterWithBackendAdapter.instance,e,t,n)};_.prototype._getApplicationComponent=function(){var e=n._sOwnerId;if(e){var t=r.getComponent(e);if(a.isA(t,"sap.ui.core.Component")){return t}}return undefined};_.prototype.getTransientPersonalizer=async function(){return new u};_.prototype.getContainer=async function(e,t,n){n=n||this._getApplicationComponent();const a=await this._createContainer(e,t,false,n);return a};_.prototype.createEmptyContainer=async function(e,t,n){n=n||this._getApplicationComponent();const a=await this._createContainer(e,t,true,n);return a};_.prototype._createContainer=async function(e,t,n,a){if(typeof e!=="string"){throw new i.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}var r=!!(o.isAppVariant(a)&&(!t||!t.shared)&&this._oAppVariantAdapterWithBackendAdapter);var s=o.adjustScope(t);var d=o.addContainerPrefix(e);if(r){var u=a.getManifestObject();s.component=a;s.appVarId=u.getEntry("/sap.ui5/appVariantId");s.appVersion=u.getEntry("/sap.app/applicationVersion/version");d+="#"+u.getEntry("/sap.ui5/appVariantId")}var c=r?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;var l=this._oAdapterWindowOnly;var f=o.pickAdapter(t,l,c);const h=await o.loadAdapter(f);var A=new p(this,h,d,s,a);var _=h&&h.supportsGetWithoutSubsequentLoad===true;if(!(n&&_)){await A.load()}if(n||A.isExpired()){A.clearData()}return A};_.prototype.deleteContainer=function(t,n){var a="";var r=this;n=r._adjustScope(n);a=o.addContainerPrefix(t);const s=new jQuery.Deferred;var p=r._pendingContainerOperations_cancelAddNext(t,null);p.always(function(){r.getContainer(t,n).then(function(){var i;r._pendingContainerOperations_cancelAddNext(t,s);i=n.validity===0?r._oAdapterWindowOnly:r._oAdapterWithBackendAdapter;o.loadAdapter(i).then(function(t){t.delAdapterContainer(a,n).fail(function(t){e.error("Delete failed",t);s.reject()}).done(function(){s.resolve()})},function(t){e.error("Delete failed",t);s.reject()})}).catch(function(n){e.error("Delete failed",n);r._pendingContainerOperations_cancelAddNext(t,s);s.reject()})});return i.promisify(s.promise())};_.prototype._pendingContainerOperations_flushAddNext=function(e,t){var n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;if(typeof n._sapFnSave==="function"){var a=n._sapFnSave;n._sapFnSave=undefined;a()}return n};_.prototype._pendingContainerOperations_cancelAddNext=function(e,t){var n;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}if(n._sapTimeoutId){clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;n.resolve(_.prototype.SAVE_DEFERRED_DROPPED)}return n};_.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter};_.prototype.resetEntirePersonalization=function(){var e=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(t){if(t){return e.resetEntirePersonalization()}return Promise.reject()})};_.prototype.isResetEntirePersonalizationSupported=function(){var t=this._getBackendAdapter();if(typeof t.resetEntirePersonalization!=="function"){return Promise.resolve(false)}if(typeof t.isResetEntirePersonalizationSupported==="function"){return t.isResetEntirePersonalizationSupported().then(function(e){return e}).catch(function(t){e.error("isResetEntirePersonalizationSupported failed with error:",t);return Promise.reject(t)})}return Promise.resolve(true)};_.prototype._adjustScope=o.adjustScope;_.hasNoAdapter=false;_.ContextContainer=p;_.Variant=f;_.VariantSet=h;_.VariantSetAdapter=l;_.WindowAdapter=d;_.WindowAdapterContainer=A;return _});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/ContextContainer", ["sap/ushell/utils","sap/ushell/services/PersonalizationV2/utils","sap/ushell/services/PersonalizationV2/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(t,e,n,i,o,jQuery,r){"use strict";function a(){this._init.apply(this,arguments)}a.prototype._init=function(t,n,i,r,a){this._oService=t;this._sContainerKey=i;this._oAdapterContainer={};this._oScope=r||e.adjustScope(r);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;let s;if(!(a instanceof o)&&a!==undefined){throw new Error("oComponent passed is not a UI5 Component and not undefined")}if(a&&a.getMetadata&&a.getMetadata().getComponentName){s=a.getMetadata().getComponentName()}this.clearData();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new Error("Invalid container key: sap.ushell.services.PersonalizationV2")}this._oAdapterContainer=n.getAdapterContainer(this._sContainerKey,this._oScope,s);return this};a.prototype._getValidity=function(){return this._oScope.validity};a.prototype.clearData=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new t.Map};a.prototype.load=function(){const e=new jQuery.Deferred;if(!this._sContainerKey){throw new Error("Invalid container key: sap.ushell.services.PersonalizationV2")}this.clearData();const n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);const i=this;n.always(()=>{i._oAdapterContainer.load().fail(function(){e.reject()}).done(()=>{i._copyFromAdapter();if(i.isExpired()){i.clearData()}e.resolve()})});return t.promisify(e.promise())};a.prototype._copyFromAdapter=function(){const t=this._oAdapterContainer.getItemKeys().splice(0);t.forEach(t=>{this._oItemMap.put(t,JSON.stringify(this._oAdapterContainer.getItemValue(t)))});this._aLoadedItemKeys=this._oItemMap.keys().splice(0)};a.prototype.isExpired=function(){if(this._getValidity()===Infinity||this._getValidity()===0){return false}const t=this._getItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);const e=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});const o=e.format(new Date,true);return t&&o>t};a.prototype._copyToAdapterUpdatingValidity=function(){let t=[];if(this._clear){t=this._oAdapterContainer.getItemKeys().splice(0);t.forEach(t=>{this._oAdapterContainer.delItem(t)});this._clear=false}if(this._getValidity()===Infinity||this._getValidity()===0){this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE)}else{const t=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});const e=new Date;const o=t.format(e,true);const r=t.format(new Date(e.getTime()+this._getValidity()*6e4),true);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE,r);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE,o)}t=this._oItemMap.keys();t.forEach(t=>{this._oAdapterContainer.setItemValue(t,e.cloneToObject(this._oItemMap.get(t)))});const o=this._aLoadedItemKeys.filter(function(e){return!(t.indexOf(e)>-1)});o.forEach(t=>{this._oAdapterContainer.delItem(t)})};a.prototype.save=function(e){this._copyToAdapterUpdatingValidity();const n=new jQuery.Deferred;const i=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,n);const o=this;function r(){i.always(function(){try{o._oAdapterContainer.save().fail(function(){n.reject()}).done(function(){n.resolve()})}catch(t){n.reject()}})}n._sapFnSave=r;n._sapTimeoutId=setTimeout(r,e);return t.promisify(n.promise())};a.prototype.flushPendingRequests=function(){this._copyToAdapterUpdatingValidity();const e=new jQuery.Deferred;const n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);n.fail(function(){e.reject()}).done(function(){e.resolve()});return t.promisify(e.promise())};a.prototype.getItemKeys=function(){const t=this._oItemMap.keys().filter(function(t){return t.startsWith(n.S_ITEM_PREFIX)});return t.map(function(t){return t.replace(n.S_ITEM_PREFIX,"","")})};a.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};a.prototype.getItemValue=function(t){return this._getItemValueInternal(n.S_ITEM_PREFIX,t)};a.prototype._getItemValueInternal=function(t,n){if(typeof n!=="string"||typeof t!=="string"){return undefined}return e.cloneToObject(this._oItemMap.get(t+n))};a.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+t)};a.prototype.setItemValue=function(t,e){this._setItemValueInternal(n.S_ITEM_PREFIX,t,e)};a.prototype._setItemValueInternal=function(t,e,n){if(typeof e!=="string"||typeof t!=="string"){throw Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.PersonalizationV2")}if(e.length>40){r.error('Personalization Service item key/variant set name ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}this._oItemMap.put(t+e,JSON.stringify(n))};a.prototype.deleteItem=function(t){this._delItemInternal(n.S_ITEM_PREFIX,t)};a.prototype._delItemInternal=function(t,e){if(typeof e!=="string"){return undefined}if(typeof t!=="string"){return undefined}this._oItemMap.remove(t+e)};a.prototype.getKey=function(){return this._sContainerKey.substring(n.S_CONTAINER_PREFIX.length)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/Personalizer", ["sap/ushell/utils","sap/base/Log"],function(e,t){"use strict";function r(e,t,r,i,n){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=t;this._oPersonalizationService=e;this._oScope=i;this._oComponent=n;if(!r||!r.container||!r.item||typeof r.container!=="string"||typeof r.item!=="string"){throw new Error("Invalid input for oPersId: sap.ushell.services.Personalization")}this._sPersContainer=r.container;this._sPersItem=r.item}r.prototype._getContainer=function(e){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oPersonalizationService.getContainer(e,this._oScope,this._oComponent)}return this._oGetContainerPromise};r.prototype.getPersData=function(){return this._getContainer(this._sPersContainer).then(e=>e.getItemValue(this._sPersItem)).catch(e=>{t.error("Failed to get personalization data for Personalizer container: "+this._sPersContainer,e);return Promise.reject()})};r.prototype.setPersData=function(r){return this._getContainer(this._sPersContainer).then(t=>{t.setItemValue(this._sPersItem,r);return e.promisify(t.save())}).catch(e=>{t.error("Failed to get personalization data for Personalizer container: "+this._sPersContainer,e);return Promise.reject()})};r.prototype.deletePersData=function(){return this._getContainer(this._sPersContainer).then(t=>{t.deleteItem(this._sPersItem);return e.promisify(t.save())}).catch(e=>{t.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer,e);return Promise.reject()})};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/TransientPersonalizer", [],function(){"use strict";function t(){this._oValue=undefined}t.prototype.getPersData=async function(){return this._oValue};t.prototype.setPersData=async function(t){this._oValue=t};t.prototype.deletePersData=async function(){this._oValue=undefined};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/Variant", ["sap/ushell/services/PersonalizationV2/utils"],function(t){"use strict";function a(t,a,e){if(typeof a!=="string"){throw new Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof e!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}this._oVariantSet=t;this._sVariantKey=a;this._sVariantName=e}a.prototype.getVariantKey=function(){return this._sVariantKey};a.prototype.getVariantName=function(){return this._sVariantName};a.prototype.setVariantName=function(t){const a=this._oVariantSet._getVariantSet();if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this._oVariantSet.getVariantKeyByName(t)!==undefined){throw new Error(`Variant with name '${t}' already exists in variant set '${this._oVariantSet._sVariantSetKey}': sap.ushell.services.Personalization"`)}if(Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,this._sVariantKey)){const e=a.variants[this._sVariantKey];e.name=t;this._sVariantName=t;this._oVariantSet._serialize()}else{throw new Error("Variant does not longer exist")}};a.prototype.getItemValue=function(a){if(typeof a!=="string"){return}const e=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;if(!Object.hasOwn(e,a)){return}return t.clone(e[a])};a.prototype.setItemValue=function(a,e){if(typeof a!=="string"){throw new Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization")}const i=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!i){throw new Error("Variant does not longer exist")}if(!i.variantData){i.variantData={}}const r=i.variantData;r[a]=t.clone(e);this._oVariantSet._serialize()};a.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}const a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.hasOwn(a,t)};a.prototype.getItemKeys=function(){const t=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;let a;const e=[];for(a in t){if(Object.hasOwn(t,a)){e.push(a)}}e.sort();return e};a.prototype.deleteItem=function(t){if(typeof t!=="string"){return}const a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[t];this._oVariantSet._serialize()};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/VariantSet", ["sap/ushell/utils","sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/services/PersonalizationV2/Variant"],function(t,a,e){"use strict";function n(e,n){let r;const i=new t.Map;this._oContextContainer=n;this._sVariantSetKey=e;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.hasOwn(this._oVariantSetData,"currentVariant")){throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}if(Object.hasOwn(this._oVariantSetData,"variants")){for(r in this._oVariantSetData.variants){if(Object.hasOwn(this._oVariantSetData.variants,r)){const t=this._oVariantSetData.variants[r].name;const a=this._oVariantSetData.variants[r].variantData;if(i.containsKey(t)){throw new Error("Variant name already exists: sap.ushell.services.Personalization")}else{if(typeof r!=="string"){throw new Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(a&&typeof a!=="object"){throw Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}i.put(t,r)}}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return this}n.prototype._getVariantSet=function(){return this._oVariantSetData};n.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};n.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};n.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};n.prototype.getVariantKeys=function(){const a=new t.Map;const e=this._getVariantSet(this._sVariantSetKey);let n;if(Object.hasOwn(e,"variants")){for(n in e.variants){if(Object.hasOwn(e.variants,n)){a.put(n,"dummy")}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return a.keys()};n.prototype.getVariantNamesAndKeys=function(){const a=new t.Map;const e=new t.Map;const n=this._getVariantSet(this._sVariantSetKey);let r;if(Object.hasOwn(n,"variants")){for(r in n.variants){if(Object.hasOwn(n.variants,r)){const t=n.variants[r].name;if(a.containsKey(t)){throw new Error("Variant name already exists: sap.ushell.services.Personalization")}else{a.put(t,r)}e.put(r,"dummy")}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return a.entries};n.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}const a=this._getVariantSet(this._sVariantSetKey);if(Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,t)){const n=a.variants[t].name;const r=a.variants[t].variantData;const i=new e(this,t,n,r);return i}return undefined};n.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}const a=this._getVariantSet(this._sVariantSetKey);let e;if(Object.hasOwn(a,"variants")){for(e in a.variants){if(Object.hasOwn(a.variants,e)){if(t===a.variants[e].name){return e}}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return undefined};n.prototype.containsVariant=function(t){const a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,t)};n.prototype.addVariant=function(t){const a=this.getVariantKeys();const n=parseInt(a.sort(function(t,a){return t-a}).reverse()[0],10);const r=isNaN(n)?"0":(n+1).toString();if(a.indexOf(r)>=0){throw new Error(`Variant key '${r}' already exists in variant set '${this._sVariantSetKey}': sap.ushell.services.Personalization`)}if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this.getVariantKeyByName(t)!==undefined){const a=`(Old key: '${this.getVariantKeyByName(t)}' New key: '${r}')`;throw new Error(`Variant name '${t}' already exists in variant set '${this._sVariantSetKey}' ${a}: sap.ushell.services.Personalization`)}const i=new e(this,r,t);this._getVariantSet(this._sVariantSetKey).variants[r]={name:t,variantData:{}};this._serialize();return i};n.prototype.deleteVariant=function(t){if(typeof t!=="string"){return}const a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/VariantSetAdapter", ["sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/services/PersonalizationV2/VariantSet"],function(t,n){"use strict";function e(t){this._oContextContainer=t}e.prototype.save=function(){return this._oContextContainer.save()};e.prototype.getVariantSetKeys=function(){const n=this._oContextContainer._getInternalKeys();const e=n.map(function(n){return n.replace(t.S_VARIANT_PREFIX,"","")});return e};e.prototype.containsVariantSet=function(t){return this.getVariantSetKeys().indexOf(t)>=0};e.prototype.getVariantSet=function(e){const o=this._oContextContainer._getItemValueInternal(t.S_VARIANT_PREFIX,e);if(!o){return}return new n(e,this._oContextContainer)};e.prototype.addVariantSet=function(e){if(this.containsVariantSet(e)){throw new Error(`Container already contains a variant set with key '${e}': sap.ushell.services.Personalization`)}const o={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(t.S_VARIANT_PREFIX,e,o);const r=new n(e,this._oContextContainer);return r};e.prototype.deleteVariantSet=function(n){this._oContextContainer._delItemInternal(t.S_VARIANT_PREFIX,n)};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/WindowAdapter", ["sap/ui/thirdparty/jquery","sap/ushell/services/PersonalizationV2/WindowAdapterContainer"],function(jQuery,e){"use strict";function t(e,t){this._oBackendAdapter=t;if(t){this.supportsGetWithoutSubsequentLoad=t.supportsGetWithoutSubsequentLoad}}t.prototype.data={};t.prototype.getAdapterContainer=function(n,o,r){const a=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(n,o,r);return new e(n,o,a,t)};t.prototype.delAdapterContainer=function(e,n){const o=new jQuery.Deferred;delete t.prototype.data[e];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(e,n).done(function(){o.resolve()}).fail(function(e){o.reject(e)})}else{o.resolve()}return o.promise()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/WindowAdapterContainer", ["sap/ushell/utils","sap/ushell/services/PersonalizationV2/utils","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";function n(t,n,o,i){this._oBackendContainer=o;this._oItemMap=new e.Map;this._sContainerKey=t;this.WindowAdapter=i}function o(e){let t;const n=e.getItemKeys();for(t=0;t<n.length;t=t+1){e.delItem(n[t])}}n.prototype.load=function(){const e=new jQuery.Deferred;let n,i;if(this.WindowAdapter.prototype.data[this._sContainerKey]){this._oItemMap.entries=t.clone(this.WindowAdapter.prototype.data[this._sContainerKey]);if(this._oBackendContainer){o(this._oBackendContainer);i=this.getItemKeys();for(n=0;n<i.length;n=n+1){this._oBackendContainer.setItemValue(i[n],this._oItemMap.get(i[n]))}}e.resolve()}else if(this._oBackendContainer){const o=this;this._oBackendContainer.load().done(function(){i=o._oBackendContainer.getItemKeys();for(n=0;n<i.length;n=n+1){o.setItemValue(i[n],o._oBackendContainer.getItemValue(i[n]))}this.WindowAdapter.prototype.data[o._sContainerKey]=t.clone(o._oItemMap.entries);e.resolve()}.bind(this)).fail(function(t){e.reject(t)})}else{this.WindowAdapter.prototype.data[this._sContainerKey]={};e.resolve()}return e.promise()};n.prototype.save=function(){const e=new jQuery.Deferred;this.WindowAdapter.prototype.data[this._sContainerKey]=t.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){e.resolve()}).fail(function(t){e.reject(t)})}else{e.resolve()}return e.promise()};n.prototype.getItemKeys=function(){return this._oItemMap.keys()};n.prototype.containsItem=function(e){this._oItemMap.containsKey(e)};n.prototype.getItemValue=function(e){return this._oItemMap.get(e)};n.prototype.setItemValue=function(e,t){this._oItemMap.put(e,t);if(this._oBackendContainer){this._oBackendContainer.setItemValue(e,t)}};n.prototype.delItem=function(e){this._oItemMap.remove(e);if(this._oBackendContainer){this._oBackendContainer.delItem(e)}};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/constants", [],function(){"use strict";return{keyCategory:{FIXED_KEY:"FIXED_KEY",GENERATED_KEY:"GENERATED_KEY"},writeFrequency:{HIGH:"HIGH",LOW:"LOW"}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/constants.private", [],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/utils", ["sap/ushell/services/PersonalizationV2/constants","sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,jQuery,i){"use strict";function r(e,t){let n;for(n in t){if(typeof t[n]!=="function"){if(t.hasOwnProperty(n)){if(n===e){return true}}}}return false}function a(e){if(e.length>40){i.error('Personalization Service container key ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}return t.S_CONTAINER_PREFIX+e}function l(e,t,n){if(e&&e.validity===0){return t}return n}function o(t){const n={validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false};if(t){n.validity=t.validity;if(n.validity===null||n.validity===undefined||typeof n.validity!=="number"){n.validity=Infinity}if(!(typeof n.validity==="number"&&(n.validity>=0&&n.validity<1e3||n.validity===Infinity))){n.liftime=Infinity}n.keyCategory=r(t.keyCategory,e.keyCategory)?t.keyCategory:n.keyCategory;n.writeFrequency=r(t.writeFrequency,e.writeFrequency)?t.writeFrequency:n.writeFrequency;if(typeof t.clientStorageAllowed==="boolean"&&(t.clientStorageAllowed===true||t.clientStorageAllowed===false)){n.clientStorageAllowed=t.clientStorageAllowed}}return n}function u(e){if(!e.lazy){return n.promisify(jQuery.when(e.instance))}try{return n.promisify(e.create.call(null))}catch(e){return Promise.reject(e)}}function f(e){if(!e){return false}const t=e.getManifestObject();if(!t){return false}const n=t.getEntry("/sap.ui5/appVariantId");if(!n){return false}const i=t.getComponentName();if(n===i){return false}return true}function c(e){if(e===undefined){return undefined}try{return JSON.parse(e)}catch(e){return undefined}}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}return{adjustScope:o,cloneToObject:c,clone:y,addContainerPrefix:a,pickAdapter:l,isAppVariant:f,loadAdapter:u}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager", ["sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ushell/services/_PluginManager/Extensions","sap/ushell/UI5ComponentType","sap/ushell/utils"],function(e,jQuery,n,i,t,o){"use strict";var r="sap.ushell.services.PluginManager";var a="sap-ushell-plugin-type";var s="RendererExtensions";var l="sap.ushell.components.shell.defaults";var u=[s,"UserDefaults","UserImage","AppWarmup"];function g(g,c,f){var p=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=f&&f.config||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false}u.forEach(function(e){p._oPluginCollection[e]={};p._oCategoryLoadingProgress[e]=new jQuery.Deferred});this._handlePluginCreation=function(n,i,t,a){var s=this;var l=s._oPluginCollection[n][i];o.setPerformanceMark("FLP -- PluginManager.loadPlugin["+n+"]["+i+"]");try{if(l.hasOwnProperty("component")){if(s._mInitializedComponentPromise.hasOwnProperty(l.component)){s._mInitializedComponentPromise[l.component].then(function(){s._instantiateComponent(l,t,a)},function(){s._instantiateComponent(l,t,a)})}else{s._mInitializedComponentPromise[l.component]=s._instantiateComponent(l,t,a)}}else{e.error("Invalid plugin configuration. The plugin "+i+" must contain a <component> key",r)}}catch(n){e.error("Error while loading bootstrap plugin: "+l.component||"",r);if(t){t.reject(n)}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js"};this._handleXhrAuthentication=function(n,i){var t;if(n&&["true",true,"X"].indexOf(n["sap-ushell-xhr-authentication"])>-1){if(!i){e.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,r);return jQuery.when()}if(n.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){t=parseInt(n["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(t)){e.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",i,"': '",n["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,r)}else{sap.ushell.Container.setXhrLogonTimeout(i,t)}}return jQuery.ajax(i+"/"+this._getFileNameForXhrAuth(),{dataType:"text"})}return jQuery.when()};this._instantiateComponent=function(n,o,a){var s=new jQuery.Deferred;var l=JSON.parse(JSON.stringify(n));var u={ui5ComponentName:l.component,url:l.url,getExtensions:i.bind(null,n.component)};function g(n){return function(i){n=n||"Cannot create UI5 plugin component: (componentId/appdescrId :"+u.ui5ComponentName+")\n"+i+" properties "+JSON.stringify(u)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";i=i||"";e.error(n,i.stack,r);if(o){o.reject.apply(this,arguments)}s.reject.apply(this,arguments)}}l.name=l.component;delete l.component;u.applicationDependencies=l;if(l.config){u.applicationConfiguration=l.config;delete l.config}u.loadDefaultDependencies=false;if(a!==undefined){u.oPostMessageInterface=a}sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){this._handleXhrAuthentication(u.applicationConfiguration,l.url).done(function(){e.createComponent(u,{},[],t.Plugin).done(function(e){if(o){o.resolve(e)}s.resolve.apply(this,arguments)}).fail(g())}).fail(g("XHR logon for FLP plugin failed"))}.bind(this)).catch(g());return s.promise()};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(u))};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection))};this.registerPlugins=function(n){var i=this;var t=[];var o;if(!n){return}if(this._oConfig.isBlueBox===true){o=new URLSearchParams(window.location.search).get("sap-plugins");if(o&&o.length>0){o=","+o+","}else{o=undefined}}Object.keys(n).sort().forEach(function(l){var g=n[l]||{};var c=g.config||{};var f=c[a]||"";if(g.enabled===false){return}if(!i._isFormFactorSupported(g)){e.info("Plugin '"+l+"' filtered from result: form factor not supported");return}if(i._oConfig.isBlueBox===true){if(g.config&&g.config["sap-plugin-agent"]===true){var p=g.config["sap-plugin-agent-id"]||l;if(o){if(o.indexOf(","+p+",")<0){return}}else{return}}}if(g.enabled===undefined){g.enabled=true}if(g.hasOwnProperty("module")){var h=(g.module||"").replace(/\./g,"/");e.error("Plugin "+l+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",r);try{sap.ui.requireSync(h)}catch(n){e.error("Plugin module "+h+" is not found.")}return}if(c&&c.hasOwnProperty(a)){if(u&&Array.prototype.indexOf.call(u,f)!==-1){if(t.indexOf(f)===-1){t.push(f)}i._oPluginCollection[f][l]=JSON.parse(JSON.stringify(g))}else{e.warning("Plugin "+l+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+f,r)}}else{i._oPluginCollection[s][l]=JSON.parse(JSON.stringify(g));if(t.indexOf(s)===-1){t.push(s)}}});try{if(i._oConfig.isBlueBox!==true){i._buildNamesOfPluginsWithAgents()}}catch(n){e.error("failed to build plugin agents names list",n.message||n.toString(),"sap.ushell.services.PluginManager")}t.forEach(function(e){if(i._oCategoryLoadingProgress.hasOwnProperty(e)&&i._oCategoryLoadingProgress[e].state()==="resolved"){i.loadPlugins(e)}})};this._isFormFactorSupported=function(e){var n=e.deviceTypes;var i=o.getFormFactor();if(n&&n[i]===false){return false}return true};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise()}};this.loadPlugins=function(i){var t=this;var a;o.setPerformanceMark("FLP -- PluginManager.startLoadPlugins["+i+"]");if(i===s){a=n.getInterface()}if(u&&Array.prototype.indexOf.call(u,i)!==-1){if(t._oCategoryLoadingProgress[i].pluginLoadingTriggered===undefined){t._oCategoryLoadingProgress[i].pluginLoadingTriggered=true}if(Object.keys(t._oPluginCollection[i]).length>0){var g=[];var c=Object.keys(t._oPluginCollection[i]);if(new URLSearchParams(window.location.search).get("sap-ushell-xx-pluginmode")==="discard"&&(i==="RendererExtensions"||i==="AppWarmup")){c=c.filter(function(e){return t._oPluginCollection[i][e].component===l})}c.forEach(function(e){var n=t._oPluginCollection[i][e];if(!n.loaded){n.loaded=true;var o=new jQuery.Deferred;g.push(o.promise());t._handlePluginCreation(i,e,o,a)}});if(g.length>0){Promise.allSettled(g.map(function(e,n){return new Promise(function(i){var t={pluginName:c[n],success:true};e.done(function(){i(t)}).fail(function(e){t.success=false;t.error=e;i(t)})})})).then(function(e){o.setPerformanceMark("FLP -- PluginManager.endLoadPlugins["+i+"]");t._oCategoryLoadingProgress[i].resolve(e.map(function(e){return e.value}))})}}else{t._oCategoryLoadingProgress[i].resolve()}}else{e.error("Plugins with category "+i+" cannot be loaded by the PluginManager",r);t._oCategoryLoadingProgress[i].reject("Plugins with category "+i+" cannot be loaded by the PluginManager")}return t._oCategoryLoadingProgress[i].promise()};this._buildNamesOfPluginsWithAgents=function(){var e=this;var n="";Object.keys(e._oPluginCollection).forEach(function(i){Object.keys(e._oPluginCollection[i]).forEach(function(t){var o=e._oPluginCollection[i][t];if(o&&o.enabled&&o.enabled===true){if(o.config&&o.config["sap-plugin-agent"]===true){n+=(o.config["sap-plugin-agent-id"]||t)+","}}})});if(n.endsWith(",")){n=n.slice(0,-1)}this._sPluginAgentsNames=n};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames}}g.hasNoAdapter=true;return g},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ReferenceResolver", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ui/core/CalendarType","sap/ui/core/Configuration","sap/ui/core/format/DateFormat","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/v4/ODataUtils","sap/ui/thirdparty/jquery","sap/ushell/User"],function(e,r,t,a,n,s,i,l,jQuery,u){"use strict";var o="sap.ushell.services.ReferenceResolver";function f(){this.getValue=function(e){var r=new jQuery.Deferred;var t;if(e==="User.env.sap-ui-legacy-date-format"){t=n.getFormatSettings().getLegacyDateFormat()}if(e==="User.env.sap-ui-legacy-number-format"){t=n.getFormatSettings().getLegacyNumberFormat()}if(e==="User.env.sap-ui-legacy-time-format"){t=n.getFormatSettings().getLegacyTimeFormat()}if(e==="User.env.sap-language"){t=sap.ushell.Container.getUser().getLanguage()}if(e==="User.env.sap-languagebcp47"){t=sap.ushell.Container.getUser().getLanguageBcp47()}if(e==="User.env.sap-accessibility"){t=sap.ushell.Container.getUser().getAccessibilityMode()?"X":undefined}if(e==="User.env.sap-statistics"){t=n.getStatisticsEnabled()?"true":undefined}if(e==="User.env.sap-theme"){t=sap.ushell.Container.getUser().getTheme(u.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}if(e==="User.env.sap-theme-name"){t=sap.ushell.Container.getUser().getTheme()}if(e==="User.env.sap-theme-NWBC"){t=sap.ushell.Container.getUser().getTheme(u.prototype.constants.themeFormat.NWBC)}r.resolve({value:t});return r.promise()}}function c(n,u,c){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new f}return this.oUserEnvReferenceResolver};this.resolveReferences=function(r,a){var n=this;var s=new jQuery.Deferred;var i=[];var l=true;var u={};var f={};var c=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var d;var v;if(!a){v=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext()})}else{v=Promise.resolve(a)}var m=r.map(function(r){var t;if(r.indexOf("User.env.")===0){t=r;f[t]=1}if(r.indexOf("UserDefault.")===0){t=n._extractAnyUserDefaultReferenceName(r);u[t]=1}if(typeof t!=="string"){l=false;e.error("'"+r+"' is not a legal reference name",null,o)}return{full:r,name:t}});if(!l){return s.reject("One or more references could not be resolved").promise()}Promise.all([v,c]).then(function(e){var r=e[0];var a=e[1];Object.keys(u).forEach(function(e){i.push(a.getValue(e,r))});Object.keys(f).forEach(function(e){d=d||n._getUserEnvReferenceResolver();i.push(d.getValue(e))});jQuery.when.apply(jQuery,i).done(function(){var e={};var r=0;var a=arguments;Object.keys(u).forEach(function(e){u[e]=a[r];r=r+1});Object.keys(f).forEach(function(e){f[e]=a[r];r=r+1});m.forEach(function(r){var a;if(r.full.indexOf("UserDefault.extended.")===0){a=n.mergeSimpleAndExtended(u[r.name]);if(!t(a)){e[r.full]=a}else{e[r.full]=undefined}}else if(r.full.indexOf("UserDefault.")===0){e[r.full]=u[r.name].value}else if(r.full.indexOf("User.env.")===0){e[r.full]=f[r.name].value}});s.resolve(e)})});return s.promise()};this._extractAnyUserDefaultReferenceName=function(e){var r=this.extractExtendedUserDefaultReferenceName(e);if(typeof r==="string"){return r}return this.extractUserDefaultReferenceName(e)};this.extractExtendedUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.extended.")!==0){return undefined}return e.replace(/^UserDefault[.]extended[.]/,"")};this.extractUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.")!==0||e.indexOf("UserDefault.extended.")===0){return undefined}return e.replace(/^UserDefault[.]/,"")};this.mergeSimpleAndExtended=function(e){var t=r({},e.extendedValue);if(typeof e.value==="string"){if(!Array.isArray(t.Ranges)){t.Ranges=[]}t.Ranges.push({Sign:"I",Option:"EQ",Low:e.value,High:null})}return t};function d(e){var r=/{([^}%]*%%[^%]+%%)}?/g;var t=/([^%]*)%%/;var a=/%%([^%]+)%%/;var n=[];var s=r.exec(e);while(s){var i=t.exec(s[1]);var l=a.exec(s[1]);n.push({edmType:i[1],name:l[1]});s=r.exec(e)}return n}this._extractUrlPlaceholders=function(e,r){var t;var a;var n=[];t=/[^(?]*/.exec(e);a=t===null?[]:d(t[0]);a.forEach(function(e){n.push(e.name)});t=/[(?][^]*/.exec(e);a=t===null?[]:d(t[0]);var s=a.filter(function(e){var t=e.name;if(r.test(t)){return true}n.push(t);return false});return{extractedReferences:s,ignoredReferences:n}};this._replaceUrlPlaceholders=function(e,r,t){var a=e;var n=[];var s=t?l.formatLiteral.bind(l):i.formatValue.bind(i);r.forEach(function(e){var r=e.name;var t=null;var i=false;while(t!==a){t=a;if(e.value!==undefined){var l=s(e.value,e.edmType);a=a.replace("{"+e.edmType+"%%"+r+"%%}",window.encodeURIComponent(l))}else{i=true;a=a.replace("{"+e.edmType+"%%"+r+"%%}","")}}if(i){n.push(r)}});return{resolvedUrl:a,placeholdersWithoutValue:n}};this.resolveUserDefaultParameters=function(e,r){var t=new jQuery.Deferred;var a=this._extractUrlPlaceholders(e,/^UserDefault\.(?!extended\.).+/);var n=a.extractedReferences;var s=a.ignoredReferences;if(n.length===0){t.resolve({url:e,defaultsWithoutValue:[],ignoredReferences:s});return t.promise()}var i=n.map(function(e){return e.name});this.resolveReferences(i,r).done(function(r){n.forEach(function(e){e.value=r[e.name]});var a=this._replaceUrlPlaceholders(e,n);t.resolve({url:a.resolvedUrl,defaultsWithoutValue:a.placeholdersWithoutValue,ignoredReferences:s})}.bind(this));return t.promise()};this._loadDynamicDateRange=function(){return sap.ui.getCore().loadLibrary("sap.ui.unified",{async:true}).then(function(){return new Promise(function(e){sap.ui.require(["sap/m/DynamicDateRange"],function(r){e(r)})})})};this._rSemanticDateRangeRegex=/^DynamicDate\..+/;this.resolveSemanticDateRanges=function(r,t){var a=this._extractUrlPlaceholders(r,this._rSemanticDateRangeRegex);var n=a.extractedReferences;var s=a.ignoredReferences;if(n.length===0){return Promise.resolve({url:r,hasSemanticDateRanges:false,invalidSemanticDates:[],ignoredReferences:s})}var i=["2.0","4.0"];if(!t||!i.includes(t)){return Promise.reject("Invalid OData version: "+t)}var l=t==="4.0";return this._resolveSemanticDateRanges(n,l).then(function(a){var i=this._replaceUrlPlaceholders(r,a,l);if(e.getLevel()>=e.Level.DEBUG){var u=a.filter(function(e){return"value"in e});e.debug("Resolving semantic date ranges \n"+"- OData Version: "+t+"\n"+"- URL: "+r+"\n"+"- ignoring references: "+JSON.stringify(s,null,4)+"\n"+"- resolved semantic date ranges: "+JSON.stringify(u,null,4)+"\n"+"- invalid semantic date ranges:"+JSON.stringify(i.placeholdersWithoutValue,null,4)+"\n"+"- final URL: "+i.resolvedUrl,null,o)}return{url:i.resolvedUrl,hasSemanticDateRanges:n.length>0,invalidSemanticDates:i.placeholdersWithoutValue,ignoredReferences:s}}.bind(this))};this._resolveSemanticDateRanges=function(e,r){var t=this._getDateTimeFormatters();return this._loadDynamicDateRange().then(function(a){return e.map(function e(n){var s={name:n.name,edmType:n.edmType};var i=n.name.split(".");var l={operator:i[1],values:[]};var u;if(i.length===3){u=i[2]}else if(i.length===4){l.values.push(i[2]);u=i[3]}else if(i.length===5){l.values=i.slice(2,4);u=i[4]}var o;try{o=a.toDates(l)}catch(e){return s}if(i.length>=3&&u!=="start"&&u!=="end"){return s}var f;if(u==="end"){f=o[1]}else{f=o[0]}if(!f){return s}switch(n.edmType){case"Edm.String":s.value=t.string.format(f);break;case"Edm.Date":s.value=t.date.format(f);break;case"Edm.DateTime":f.setUTCFullYear(f.getFullYear(),f.getMonth(),f.getDate());f.setUTCHours(0,0,0,0);s.value=f;break;case"Edm.DateTimeOffset":if(r){s.value=t.dateTimeOffsetV4.format(f,true)}else{s.value=f}break;default:break}return s})})};this._getDateTimeFormatters=function(){if(!this._oDateTimeFormatters){this._oDateTimeFormatters={string:s.getDateInstance({pattern:"yyyyMMdd",calendarType:a.Gregorian}),date:s.getDateInstance({pattern:"yyyy-MM-dd",calendarType:a.Gregorian}),dateTimeOffsetV4:s.getDateInstance({pattern:"yyyy-MM-dd'T'HH:mm:ss'Z'",calendarType:a.Gregorian})}}return this._oDateTimeFormatters};this.hasSemanticDateRanges=function(e){var r=this._extractUrlPlaceholders(e,this._rSemanticDateRangeRegex);return r.extractedReferences.length>0}}c.hasNoAdapter=true;return c},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigation", ["sap/ushell/services/ShellNavigationHashChanger","sap/m/MessageBox","sap/ui/core/routing/HashChanger"],function(t,i,e){"use strict";var a=i.Action;var n=i.Icon;function s(i,s,h){function r(){sap.ui.require(["sap/m/MessageBox"],function(t){t.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:n.ERROR,title:"Client out of sync with server.",actions:[a.YES,a.NO],onClose:function(t){if(t===a.YES){window.setTimeout(function(){window.location.reload()},0)}}})})}var o=h&&h.config;this.hashChanger=new t(o);this._navigationFilterForForwardingToRegisteredRouters=function(t,i){var e=this._aRouters.some(function(t){return t.match(i)});if(e){var a=t.getCurrentApplication();var n=a&&a.componentInstance&&!a.homePage;if(n){var s=a.componentInstance.getRouter();if(s){s.stop()}}return this.NavigationFilterStatus.Keep}return this.NavigationFilterStatus.Continue};this.getNavigationContext=function(){var t=this.hashChanger.getCurrentNavigationState();var i=!this.hashChanger.isInnerAppNavigation(t.oldHash,t.newHash);return{status:t.status,isCrossAppNavigation:i,innerAppRoute:this.hashChanger.getHash()}};this.isInitialNavigation=function(){return this._bIsInitialNavigation};this.setIsInitialNavigation=function(t){this._bIsInitialNavigation=t};this.hrefForExternal=function(t,i,e){return this.hashChanger.hrefForExternal(t,i,e)};this.hrefForExternalSync=function(t,i,e){return this.hashChanger.hrefForExternalSync(t,i,e)};this.hrefForAppSpecificHash=function(t){return this.hashChanger.hrefForAppSpecificHash(t)};this.compactParams=function(t,i,e,a){return this.hashChanger.compactParams(t,i,e,a)};this.toExternal=function(t,i,e){return this.hashChanger.toExternal(t,i,e)};this.toAppHash=function(t,i){this.hashChanger.toAppHash(t,i)};this.init=function(t){this._bIsInitialNavigation=true;hasher.prependHash="";e.replaceHashChanger(this.hashChanger);var i=sap.ui.getCore().getEventBus();i.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(t);this._enableHistoryEntryReplacedDetection();return this};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments)}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments)}.bind(this)};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash"};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null};this.replaceHashWithoutNavigation=function(t){hasher.changed.active=false;this._fnOriginalSetHash(t);hasher.changed.active=true};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(t){this.hashChanger.registerNavigationFilter(t)};this._aRouters=[];this.registerExtraRouter=function(t){this._aRouters.push(t)};this.unregisterNavigationFilter=function(t){this.hashChanger.unregisterNavigationFilter(t)};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced()}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue}.bind(this));this.registerPrivateFilters=function(t){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,t))}}s.hasNoAdapter=true;return s},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigationHashChanger", ["sap/ushell/library","sap/ushell/utils/UrlShortening","sap/ushell/utils/UrlParsing","sap/ui/core/routing/HashChanger","sap/ui/performance/trace/Interaction","sap/ui/thirdparty/hasher","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,a,i,r,n,s,jQuery,o){"use strict";var h=e.NavigationState;var p={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};const l="ShellNavigationHashChanger";const u="[FesrFlp]";var c=i.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(e){this.oServiceConfig=e;this._oNavigationState={};i.apply(this);this._initializedByShellNav=false;this._bReloadApplication=false;this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection}).map(function(e){var t={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){t.updateHashOnly=e.updateHashOnly}return t})}}});c.prototype.privgetCurrentShellHash=function(){var e=this.privsplitHash(n.getHash());return{hash:"#"+(e&&e.shellPart?e.shellPart:"")}};c.prototype.privconstructHash=function(e){var t=this.privgetCurrentShellHash();t.hash+=e;return t};c.prototype.privconstructShellHash=function(e){return a.constructShellHash(e)};c.prototype.privsplitHash=function(e){if(e===undefined||e===null||e===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null}}var t=a.parseShellHash(e);if(t===undefined||t===null){return null}var i=t.params&&!s(t.params)?t.params:null;var r=t.appSpecificRoute;t.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(t))||null,appSpecificRoute:r||null,intent:t.semanticObject&&t.action&&t.semanticObject+"-"+t.action+(t.contextRaw||"")||null,params:i}};c.prototype.privsetHash=function(e,t,a){n.prependHash="";e=this.privstripLeadingHash(e);t=t||"";if(a===undefined){a=true}if(a){this.fireEvent(p.HASH_SET.name,{sHash:t});n.setHash(e)}else{this.fireEvent(p.HASH_REPLACED.name,{sHash:t});n.replaceHash(e)}};c.prototype.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};c.prototype.registerNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters.push(e)};c.prototype.unregisterNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters=this.aNavigationFilters.filter(function(t){return t!==e})};function f(e,t,a){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred).resolve();this.getNextKey=function(){this.oAppState=e.createEmptyAppState(t,a);return this.oAppState.getKey()};this.store=function(e){var t;this.oAppState.setData(e);t=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,t)};this.getPromise=function(){return this.oPromise}}c.prototype.compactParams=function(e,i,r,n){var s=new jQuery.Deferred;var o=a.constructShellHash({target:{semanticObject:"SO",action:"action"},params:e});if(e===undefined||Object.keys(e).length===0){return s.resolve(e).promise()}sap.ushell.Container.getServiceAsync("AppState").then(function(e){var h=new f(e,r,n);var p=t.compactHash(o,i,h);var l=a.parseParameters(p.hash.match(/\?.*/)[0]);var u=h.getPromise();u.done(function(){s.resolve(l)}).fail(function(e){s.reject(e)})});return s.promise()};c.prototype.hrefForExternal=function(e,t){function a(e,t){if(t===true){e.hash=encodeURI(e.hash)}else{e=encodeURI(e)}return e}return this.hrefForExternalNoEncAsync(e,t).then(function(e){return a(e,t)})};c.prototype.hrefForExternalSync=function(e,t,a){function i(e,t){if(t===true){e.hash=encodeURI(e.hash)}else{e=encodeURI(e)}return e}var r=this.hrefForExternalNoEnc(e,t,a);return i(r,t)};c.prototype.hrefForExternalNoEnc=function(e,t,a,i){o.error("Deprecated API call of 'sap.ushell.services.ShellNavigationHashChanger.hrefForExternalNoEnc'. Please use 'hrefForExternalNoEncAsync' instead",null,"sap.ushell.services.ShellNavigationHashChanger");if(i){var r=new jQuery.Deferred;this.hrefForExternalNoEncAsync(e,t).then(r.resolve).catch(r.reject);return r.promise()}var n=this.privhrefForExternalNoEnc(e);if(t===true){return{hash:n.hash,params:n.params,skippedParams:n.skippedParams}}return n.hash};c.prototype.hrefForExternalNoEncAsync=function(e,t){var a;var i=this.privhrefForExternalNoEnc(e);if(t===true){a={hash:i.hash,params:i.params,skippedParams:i.skippedParams}}else{a=i.hash}return new Promise(function(e){e(a)})};c.prototype.privhrefForExternalNoEnc=function(e){if(e===undefined){return this.privgetCurrentShellHash()}if(e&&e.target&&(typeof e.target.semanticObject==="string"||typeof e.target.shellHash==="string")){return{hash:"#"+this.privconstructShellHash(e)}}return this.privgetCurrentShellHash()};c.prototype.privgetAppHash=function(e){var t;if(e&&e.target&&typeof e.target.shellHash==="string"){var i=a.parseShellHash(e.target.shellHash);t=i&&i.appSpecificRoute;t=t&&t.substring(2)}return t};c.prototype.hrefForAppSpecificHash=function(e){return encodeURI(this.privconstructHash(this.privappHashPrefix+e).hash)};c.prototype.toExternal=function(e,t,a){var i=this.privhrefForExternalNoEnc(e).hash;var r=this.privgetAppHash(e);this.privsetHash(i,r,a);return Promise.resolve()};c.prototype.toAppHash=function(e,t){var a=this.privconstructHash(this.privappHashPrefix+e).hash;this.privsetHash(a,e,t)};c.prototype.initShellNavigation=function(e){if(this._initializedByShellNav){o.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false}this.privfnShellCallback=e;n.changed.add(this.treatHashChanged,this);if(!n.isActive()){n.initialized.addOnce(this.treatHashChanged,this);n.init()}else{this.treatHashChanged(n.getHash())}this._initializedByShellNav=true;return true};c.prototype.init=function(){if(this._initialized){o.info("init already called on this ShellNavigationHashChanger instance.");return false}var e=this.privsplitHash(n.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);var a=t?"&/":"";var i=e&&e.shellPart||"";this.fireEvent(p.HASH_CHANGED.name,{newHash:t,fullHash:i+a+t});this._initialized=true;return true};c.prototype._removeInnerAppSeparator=function(e){return(e||"").replace("&/","")};c.prototype._setNavigationStatus=function(e){if(e===h.InProgress&&!this._fnResolveInteraction){o.debug(`${u} Interaction Start`,null,l);this._fnResolveInteraction=r.notifyAsyncStep()}else if(e===h.Finished&&this._fnResolveInteraction){o.debug(`${u} Interaction End`,null,l);this._fnResolveInteraction();this._fnResolveInteraction=null}this._oNavigationState.status=e};c.prototype._trackNavigation=function(e,t){this._oNavigationState.newHash=e;this._oNavigationState.oldHash=t};c.prototype.getCurrentNavigationState=function(){return this._oNavigationState};c.prototype.treatHashChanged=function(e,i){this._trackNavigation(e,i);this._setNavigationStatus(h.InProgress);if(this.inAbandonFlow){this._setNavigationStatus(h.Finished);this.setReloadApplication(false);return}var r;e=t.expandHash(e);i=t.expandHash(i);var s=this.privsplitHash(e);var l=this.privsplitHash(i);if(!s){var u=new Error("Illegal new hash - cannot be parsed: '"+e+"'");this.fireEvent(p.SHELL_HASH_CHANGED.name,{newShellHash:e,newAppSpecificRoute:null,fullHash:e,oldShellHash:l?l.shellPart:i,error:u});this.privfnShellCallback(e,null,l?l.shellPart:i,l?l.appSpecificRoute:null,u);this._setNavigationStatus(h.Finished);this.setReloadApplication(false);return}if(!l){l={shellPart:i,appSpecificRoute:null}}for(var c=0;c<this.aNavigationFilters.length;c++){try{var f;var v=this.aNavigationFilters[c].call(undefined,e,i);var H=v;if(typeof v!=="string"){H=v.status;f=v.hash}if(H===this.NavigationFilterStatus.Custom){if(f&&f.length>0){this.inAbandonFlow=true;n.replaceHash(f);this.inAbandonFlow=false}this._setNavigationStatus(h.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;n.replaceHash(i);this.inAbandonFlow=false;this._setNavigationStatus(h.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Keep){r=true}}catch(e){o.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation")}}if(r){this.fireEvent(p.HASH_CHANGED.name,{newHash:e,oldHash:i,fullHash:e});this._setNavigationStatus(h.Finished);this.setReloadApplication(false);return}var g=i===undefined;var S=a.compareHashes(e,i);S.sameIntent=S.sameIntent&&!g;var d=S.sameIntent&&S.sameParameters&&S.sameAppSpecificRoute;if(d){o.info("Navigation happened but hash stayed the same",null,"sap.ushell.services.ShellNavigation");this.fireEvent(p.HASH_CHANGED.name,{newHash:this._removeInnerAppSeparator(s.appSpecificRoute),oldHash:this._removeInnerAppSeparator(l.appSpecificRoute),fullHash:e});this._setNavigationStatus(h.Finished);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");this.setReloadApplication(false);return}var m=S.sameIntent&&S.sameParameters;if(m){if(this.getReloadApplication()){this.setReloadApplication(false)}else{var A=this._removeInnerAppSeparator(s.appSpecificRoute);var y=this._removeInnerAppSeparator(l.appSpecificRoute);o.info("Inner App Hash changed from '"+y+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(p.HASH_CHANGED.name,{newHash:A,oldHash:y,fullHash:e});this._setNavigationStatus(h.Finished);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");return}}if(S.sameIntent&&this.hasListeners(p.SHELL_HASH_PARAMETER_CHANGED.name)){var E=a.paramsToString(s.params);var N=a.paramsToString(l.params);o.info("Shell hash parameters changed from '"+N+"' to '"+E+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(p.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:s.params,oOldParameters:l.params});this._setNavigationStatus(h.Finished);this.setReloadApplication(false);return}o.info("Outer shell hash changed from '"+i+"' to '"+e+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(p.SHELL_HASH_CHANGED.name,{newShellHash:s.shellPart,newAppSpecificRoute:s.appSpecificRoute,fullHash:e,oldShellHash:l.shellPart,oldAppSpecificRoute:l.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(l.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(s.appSpecificRoute)});this.privfnShellCallback(s.shellPart,s.appSpecificRoute,l.shellPart,l.appSpecificRoute);if(S.sameIntent){sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation")}this._setNavigationStatus(h.Finished);this.setReloadApplication(false)};c.prototype.setHash=function(e){this.toAppHash(e,true)};c.prototype.replaceHash=function(e){this.toAppHash(e,false)};c.prototype.getHash=function(){return this.getAppHash()};c.prototype.getAppHash=function(){var e=this.privsplitHash(n.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);return t};c.prototype.destroy=function(){n.changed.remove(this.treatHashChanged,this);i.prototype.destroy.apply(this,arguments)};c.prototype._getAllEvents=function(){return Object.keys(p).map(function(e){return p[e]})};c.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false}).map(function(e){return e.name})};c.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true}).map(function(e){return e.name})};c.prototype.isInnerAppNavigation=function(e,t){var i=a.parseShellHash(e);var r=a.parseShellHash(t);var n=t===undefined;var s=a.haveSameIntent(i,r)&&!n;var o=a.haveSameIntentParameters(i,r);return s&&o};c.prototype.getReloadApplication=function(){return this._bReloadApplication};c.prototype.setReloadApplication=function(e){this._bReloadApplication=e};return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SpaceContent", ["sap/ushell/Config","sap/base/util/deepClone","sap/ushell/library","sap/ui/thirdparty/hasher","sap/ushell/utils/WindowUtils","sap/base/Log","sap/ushell/EventHub"],function(e,t,n,a,i,r,o){"use strict";var u=n.AppType;var s=function(){};s.prototype.isPersonalizationEnabled=function(){return e.last("/core/shell/enablePersonalization")};s.prototype.getPage=function(e){var n;return sap.ushell.Container.getServiceAsync("Pages").then(function(t){n=t;return n.loadPage(e)}).then(function(e){return t(n.getModel().getProperty(e),20)})};s.prototype.getPages=function(e){var n;return sap.ushell.Container.getServiceAsync("Pages").then(function(t){n=t;return n.loadPages(e)}).then(function(e){var a={};Object.keys(e).forEach(function(i){a[i]=t(n.getModel().getProperty(e[i]),20)});return a})};s.prototype.addSection=function(e,t,n){return sap.ushell.Container.getServiceAsync("Pages").then(function(a){var i=a.getPageIndex(e);return a.addSection(i,t,n)})};s.prototype.addVisualization=function(e,t,n){return sap.ushell.Container.getServiceAsync("Pages").then(function(a){return a.addVisualization(e,t,n)})};s.prototype.moveVisualization=function(e,t,n,a,i){return sap.ushell.Container.getServiceAsync("Pages").then(function(r){var o=r.getPageIndex(e);return r.moveVisualization(o,t,n,a,i)})};s.prototype.updateVisualization=function(e,t,n,a){var i={displayFormatHint:a.displayFormatHint,title:a.title,subtitle:a.subtitle,info:a.info};return sap.ushell.Container.getServiceAsync("Pages").then(function(a){var r=a.getPageIndex(e);return a.updateVisualization(r,t,n,i)})};s.prototype.deleteVisualization=function(e,t,n){return sap.ushell.Container.getServiceAsync("Pages").then(function(a){var i=a.getPageIndex(e);return a.deleteVisualization(i,t,n)})};s.prototype.instantiateVisualization=function(e){return sap.ushell.Container.getServiceAsync("VisualizationInstantiation").then(function(t){return t.instantiateVisualization(e)})};s.prototype.launchTileTarget=function(t,n){if(typeof t!=="string"){r.error("Invalid target URL",null,"sap.ushell.services.SpaceContent");return}o.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:t}});if(t.indexOf("#")===0){a.setHash(t)}else{if(n){var s=e.last("/core/shell/enableRecentActivity")&&e.last("/core/shell/enableRecentActivityLogging");if(s){var l={title:n,appType:u.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(l)}}i.openURL(t,"_blank")}};s.prototype.getUserDefaultParameter=function(e){var t;var n;return Promise.all([sap.ushell.Container.getServiceAsync("ClientSideTargetResolution"),sap.ushell.Container.getServiceAsync("UserDefaultParameters")]).then(function(e){n=e[0];t=e[1];return n.getSystemContext("")}).then(function(n){return new Promise(function(a,i){t.getValue(e,n).done(a).fail(i)})}).then(function(e){if(!e.value&&!e.extendedValue){return null}var t={};if(e.value){t.value=e.value}if(e.extendedValue){t.extendedValue=e.extendedValue}return t})};s.hasNoAdapter=true;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SupportTicket", ["sap/ushell/Config"],function(e){"use strict";function t(t,n,i,r){this.createTicket=function(e){return t.createTicket(e)};this.isEnabled=function(){return e.last("/core/extension/SupportTicket")}}t.hasNoAdapter=false;return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLParsing", ["sap/base/Log","sap/ui/base/Object","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(t,e,s,r){"use strict";function n(){this.getShellHash=function(t){return r.getShellHash(t)};this.getHash=function(t){return r.getHash(t)};this.isIntentUrl=function(e){t.error("Deprecated API call of 'sap.ushell.URLParsing.isIntentUrl'. Please use 'isIntentUrlAsync' instead",null,"sap.ushell.services.URLParsing");return r.isIntentUrl(e)};this.isIntentUrlAsync=function(t){return r.isIntentUrlAsync(t)};this.parseParameters=function(t){return r.parseParameters(t)};this.paramsToString=function(t){return r.paramsToString(t)};this.privparamsToString=function(t,e,s){return r.privparamsToString(t,e,s)};this.parseShellHash=function(t){return r.parseShellHash(t)};this.privstripLeadingHash=function(t){return r.privstripLeadingHash(t)};this.splitHash=function(t){return r.splitHash(t)};this.constructShellHash=function(t){return r.constructShellHash(t)};this.addSystemToServiceUrl=function(t,r){var n=r;if(!t||t.indexOf("/")!==0||t.indexOf("//")===0){throw new s.Error("Invalid URL: "+t,"sap.ushell.services.URLParsing")}if(e.isA(r,"sap.ui.core.Component")){var a=typeof r.getComponentData==="function"&&r.getComponentData();n=a&&a.startupParameters&&a.startupParameters["sap-system"]&&a.startupParameters["sap-system"][0]}var i=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!n&&!r&&i&&i.url){n=new URL(i.url,window.location.href).searchParams.get("sap-system")}if(/^[^?]*(;mo([/;?]|$))/.test(t)){}else if(/^[^?]*(;o=([/;?]|$))/.test(t)){t=t.replace(/;o=([/;?]|$)/,(n?";o="+n:"")+"$1")}else if(!/^[^?]*;o=/.test(t)&&n){t=t.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+n+"$2")}sap.ushell.Container.addRemoteSystemForServiceUrl(t);return t}}n.hasNoAdapter=true;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLShortening", ["sap/ushell/utils/UrlShortening"],function(n){"use strict";function e(){this.compactHash=n.compactHash.bind(n);this.checkHashLength=n.checkHashLength.bind(n);this.expandHash=n.expandHash.bind(n);this.expandParamGivenRetrievalFunction=n.expandParamGivenRetrievalFunction.bind(n)}e.hasNoAdapter=true;return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentHandle", function(){"use strict";var t=function(t){this._oComponent=t};t.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){})};t.prototype.getInstance=function(){return this._oComponent};t.prototype.getMetadata=function(){return this._oComponent.getMetadata()};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentLoader", ["sap/ushell/Config","sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(e,o,t,n,r,jQuery){"use strict";function s(s,a,i,c){this._oServiceConfig=c&&c.config||{};this._oAdapter=s;this._logStackTrace=function(e,o){var t=JSON.stringify(e,null,4);n.logInstantiateComponentError(e.name,o+"",o.status,o.stack,t);return Promise.reject(o)};this.modifyComponentProperties=function(e,o){if(!this._oAdapter.modifyComponentProperties){return Promise.resolve(e)}return this._oAdapter.modifyComponentProperties(e.componentProperties,o).then(function(o){e.componentProperties=o;return e})};this.createComponent=function(e,o,t,n){var r=new jQuery.Deferred;var s=this;this.createComponentData(e,o,t).then(function(e){return s.modifyComponentProperties(e,n)}).then(function(e){s.instantiateComponent(e).then(r.resolve,r.reject)},function(){r.resolve(e)});return r.promise()};this.createComponentData=function(t,r,s){var a=this;return new Promise(function(i,c){var l={};var u=t||{};var p=n.shouldLoadCoreExt(u);var m=e.last("/core/customPreload/enabled");var d=p&&m;var C=n.shouldLoadDefaultDependencies(u,a._oServiceConfig);var f=o.getParameterValueBoolean("sap-ushell-nocb");var h=u.applicationDependencies||{};var v=n.constructAppComponentId(r||{});var P=e.last("/core/customPreload/coreResourcesComplement");var g;var R;n.logAnyApplicationDependenciesMessages(h.name,h.messages);if(!u.ui5ComponentName){c();return}delete u.loadCoreExt;delete u.loadDefaultDependencies;g=n.createComponentData(u.componentData||{},u.url,u.applicationConfiguration,u.reservedParameters);if(u.getExtensions){g.getExtensions=u.getExtensions;delete u.getExtensions}if(u.oPostMessageInterface){g.oPostMessageInterface=u.oPostMessageInterface;delete u.oPostMessageInterface}R=n.createComponentProperties(d,C,f,s,u.applicationDependencies||{},u.ui5ComponentName,u.url,v,P);l.componentData=g;l.componentProperties=R;l.appPropertiesSafe=u;l.loadCoreExt=p;i(l)})};this.instantiateComponent=function(e){var o=e.componentProperties;var s=e.componentData;var a=e.appPropertiesSafe;var i=e.loadCoreExt;t.onBeforeApplicationInstanceCreated.call(null,o);var c=new jQuery.Deferred;n.createUi5Component(o,s).then(function(e){var o=new t(e);a.componentHandle=o;var n=i;if(n){a.coreResourcesFullyLoaded=n;r.emit("CoreResourcesComplementLoaded",{status:"success"})}c.resolve(a)}).fail(this._logStackTrace.bind(this,o)).catch(c.reject);return c.promise()};this.getCoreResourcesComplementBundle=function(){return e.last("/core/customPreload/enabled")?e.last("/core/customPreload/coreResourcesComplement"):[]};this.loadCoreResourcesComplement=function(){if(!this.loadCoreResourcesComplementPromise){this.loadCoreResourcesComplementPromise=new Promise(function(e,o){n.loadBundle(this.getCoreResourcesComplementBundle()).then(function(){r.emit("CoreResourcesComplementLoaded",{status:"success"});e()}).catch(function(){r.emit("CoreResourcesComplementLoaded",{status:"failed"});o()})}.bind(this));this.loadCoreResourcesComplementPromise.finally(function(){this.loadCoreResourcesComplementPromise=undefined}.bind(this))}return this.loadCoreResourcesComplementPromise};r.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement()}.bind(this))}s.hasNoAdapter=false;return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameterPersistence", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(e,t,r,jQuery){"use strict";var n=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];function i(e){this._oAdapter=e;this._oData={}}i.prototype._cleanseValue=function(e){var r=t({},e);for(var i in r){if(r.hasOwnProperty(i)&&n.indexOf(i)<0){delete r[i]}}return r};i.prototype._getSystemContextPromise=function(t){if(!t){e.warning("UserDefaultParameterPersistence: The systemContext was not provided, using defaultSystemContext as fallback");return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext()})}return Promise.resolve(t)};i.prototype.loadParameterValue=function(t,n){var i=new jQuery.Deferred;this._getSystemContextPromise(n).then(function(n){var s=r.get([n.id,t],this._oData);if(s!==undefined){i.resolve(s)}else{this._oAdapter.loadParameterValue(t,n).done(function(s){var a=this._cleanseValue(s);r.set([n.id,t],a,this._oData);e.debug('[UserDefaults] Fetched "'+t+'" for SystemContext='+n.id+" from Persistence",JSON.stringify(a,null,2));i.resolve(a)}.bind(this)).fail(i.reject.bind(this))}}.bind(this));return i.promise()};i.prototype.saveParameterValue=function(t,n,i){var s=new jQuery.Deferred;var a;this._getSystemContextPromise(i).then(function(i){if(!n){return this.deleteParameter(t,i).done(s.resolve).fail(s.reject)}a=this._cleanseValue(n);if(n&&n.noStore===true){e.debug('[UserDefaults] Skipped Save "'+t+'" for SystemContext='+i.id,"noStore=true");return s.resolve()}e.debug('[UserDefaults] Saving "'+t+'" for SystemContext='+i.id+" to Persistence",JSON.stringify(a,null,2));r.set([i.id,t],a,this._oData);return this._oAdapter.saveParameterValue(t,a,i).done(s.resolve).fail(s.reject)}.bind(this));return s.promise()};i.prototype.deleteParameter=function(t,r){var n=new jQuery.Deferred;this._getSystemContextPromise(r).then(function(r){if(this._oData[r.id]){e.debug('[UserDefaults] Deleting "'+t+'" for SystemContext='+r.id+" from Persistence");delete this._oData[r.id][t]}return this._oAdapter.deleteParameter(t,r).done(n.resolve).fail(n.reject)}.bind(this));return n.promise()};i.prototype.getStoredParameterNames=function(e){var t=new jQuery.Deferred;this._getSystemContextPromise(e).then(function(e){this._oAdapter.getStoredParameterNames(e).done(function(e){e.sort();t.resolve(e)}).fail(t.reject.bind(t))}.bind(this));return t.promise()};i.hasNoAdapter=false;return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameters", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/deepEqual","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ui/base/EventProvider","sap/ui/thirdparty/jquery","sap/ushell/utils"],function(e,t,a,n,r,i,jQuery,s){"use strict";var o="valueStored";var u=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];function l(s,l,f,d){this._aPlugins=[];this._oUserDefaultParametersNames={};this._oWasParameterPersisted={};var h=this;var c=new i;function m(e){var t=typeof e.getComponentData==="function"&&e.getComponentData()&&e.getComponentData().config&&e.getComponentData().config["sap-priority"]||0;if(typeof t!=="number"||isNaN(t)){return 0}return t}this._insertPluginOrdered=function(e,t){var a=m(t);for(var n=0;n<e.length&&t;++n){var r=m(e[n]);if(t&&a>r){e.splice(n,0,t);t=undefined}}if(t){e.push(t)}return e};this.registerPlugin=function(e){this._aPlugins=this._insertPluginOrdered(this._aPlugins,e)};this._getUserDefaultValueFromPlugin=function(t,a,n,r){var i;if(typeof t.getUserDefault==="function"){i=new Promise(function(i,s){t.getUserDefault(a,r,n).done(function(s){var o=s||r;var u=this._getComponentNameOfPlugin(t);e.debug('[UserDefaults] Fetched "'+a+'" for SystemContext='+n.id+" from Plugin="+u,JSON.stringify(o,null,2));i(o)}.bind(this)).fail(function(){e.error('invocation of getUserDefault("'+a+'") for plugin '+h._getComponentNameOfPlugin(t)+" rejected.",null,"sap.ushell.services.UserDefaultParameters");i(r)})}.bind(this))}else{i=Promise.resolve(r)}return i};this._iterateOverPluginsToGetDefaultValue=function(t,a,n){return new Promise(function(r,i){sap.ushell.Container.getServiceAsync("PluginManager").then(function(s){s.loadPlugins("UserDefaults").done(function(){var e=this._aPlugins.reduce(function(e,a){var r=e.then(this._getUserDefaultValueFromPlugin.bind(this,a,t,n));return r}.bind(this),Promise.resolve(a));e.then(r)}.bind(this)).fail(function(){e.error("Cannot get value for "+t+". One or more plugins could not be loaded.");i("Initialization of plugins failed")})}.bind(this))}.bind(this))};this._getStoreDate=function(){return(new Date).toString()};this._storeValue=function(e,t,a,n){if(a&&t.extendedValue){return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(r){return new Promise(function(i){r.getUserDefaultParameterNames(n).done(function(r){var s=this._extractKeyArrays(r);var o=s.extended.indexOf(e)<0;this._saveParameterValue(e,t,a,o,n).then(i)}.bind(this)).fail(function(){this._saveParameterValue(e,t,a,false,n).then(i)}.bind(this))}.bind(this))}.bind(this))}return this._saveParameterValue(e,t,a,false,n)};this._saveParameterValue=function(e,a,r,i,s){if(i){a.extendedValue=undefined}if(r&&this._valueIsEmpty(a)){a=undefined;this._oWasParameterPersisted[e]=false}else{a._shellData=n({storeDate:this._getStoreDate()},a._shellData)}return sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(n){return new Promise(function(r){n.saveParameterValue(e,a,s).always(function(){var n={parameterName:e,parameterValue:t(a||{}),systemContext:s};c.fireEvent(o,n);r(e)})})})};this._getPersistedValue=function(e,t){return new Promise(function(a,n){sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(r){r.loadParameterValue(e,t).done(a).fail(n)})})};this._valueIsEmpty=function(e){return!e||!e.value&&!e.extendedValue};this._haveSameMembersValue=function(e,t,n){return n.every(function(n){return e[n]===t[n]||a(e[n],t[n])})};this._getUserDefaultParameterNames=function(e){if(!this._oUserDefaultParametersNames[e.id]){this._oUserDefaultParametersNames[e.id]=new Promise(function(t){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.getUserDefaultParameterNames(e).done(function(e){var a=this._extractKeyArrays(e);var n=a.extended;var r=a.allParameters;var i=this._arrayToObject(r);t({aAllParameterNames:r,aExtendedParameterNames:n,oMetadataObject:i})}.bind(this))}.bind(this))}.bind(this))}return this._oUserDefaultParametersNames[e.id]};this._isRelevantParameter=function(e,t){return this._getUserDefaultParameterNames(t).then(function(t){if(!t.aAllParameterNames||t.aAllParameterNames.indexOf(e)===-1){throw new Error('The given parameter "'+e+'" is not part of the list of parameters for the given system context.')}})};this.hasRelevantMaintainableParameters=function(e){var t=false;var a=[];return new Promise(function(n){this._getUserDefaultParameterNames(e).then(function(i){if(!r(i)&&i.aAllParameterNames){i.aAllParameterNames.forEach(function(n){var r=this.getValue(n,e);a.push(r);r.done(function(e){if(e&&!e.hasOwnProperty("noEdit")){t=true}})}.bind(this));jQuery.when.apply(undefined,a).done(function(){n(t)}).fail(function(){n()})}else{n()}}.bind(this))}.bind(this))};this.getValue=function(e,a){var n=new jQuery.Deferred;this._isRelevantParameter(e,a).then(function(){return this._getPersistedValue(e,a).then(function(t){this._oWasParameterPersisted[e]=true;return t||{}}.bind(this)).catch(function(){return{value:undefined}})}.bind(this)).then(function(r){var i=t(r);var s=!r._shellData&&this._valueIsEmpty(r)||r.noStore||r.alwaysAskPlugin;if(!s){n.resolve(r);return}return this._iterateOverPluginsToGetDefaultValue(e,r,a).then(function(t){if(!this._oWasParameterPersisted[e]||!this._haveSameMembersValue(i,t,u)){this._oWasParameterPersisted[e]=true;this._storeValue(e,t,false,a).then(function(){n.resolve(t)})}else{n.resolve(t)}}.bind(this)).catch(n.reject)}.bind(this)).catch(function(){n.resolve({value:undefined})});return n.promise()};this._addParameterValuesToParameters=function(e,t,a){var n=new jQuery.Deferred;var r=[];t.forEach(function(t){var n=this.getValue(t,a);r.push(n);n.done(function(a){e[t].valueObject=a})}.bind(this));jQuery.when.apply(jQuery,r).done(n.resolve.bind(n,e)).fail(n.reject.bind(n,e));return n.promise()};this._arrayToObject=function(e){var t={};e.forEach(function(e){t[e]={}});return t};this._getComponentNameOfPlugin=function(e){try{return e.getMetadata().getComponentName()||""}catch(e){return"'name of plugin could not be determined'"}};this._getEditorDataAndValue=function(t,a,r,i,s){var o=this;var u=[];var l=[];this._aPlugins.forEach(function(t){if(typeof t.getEditorMetadata==="function"){var a=new jQuery.Deferred;u.push(a);try{var n=u.length-1;t.getEditorMetadata(i,s).done(function(e){l[n]=e}).always(a.resolve).fail(function(){e.error("EditorMetadata for plugin "+o._getComponentNameOfPlugin(t)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");a.resolve()})}catch(t){e.error("Error invoking getEditorMetaData on plugin: "+t+t.stack,null,"sap.ushell.services.UserDefaultParameters");a.resolve()}}});jQuery.when.apply(jQuery,u).done(function(){var u=[];var f=l.reverse().reduce(function(e,t){a.forEach(function(a){if(t[a]&&t[a].editorMetadata){e[a].editorMetadata=t[a].editorMetadata}});return e},i);a.forEach(function(e){if(!(f[e]&&f[e].editorMetadata)){u.push(e)}});o._addParameterValuesToParameters(f,a,s).done(function(a){var i=n({},a);r.forEach(function(e){if(i[e]){i[e].editorMetadata=i[e].editorMetadata||{};i[e].editorMetadata.extendedUsage=true}});var s=Object.keys(i).splice(0);s.forEach(function(e){var t;if(i[e].valueObject&&i[e].valueObject.noEdit===true){delete i[e];t=u.indexOf(e);if(t>=0){u.splice(t,1)}}});if(u.length>0){e.error('The following parameter names have no editor metadata and thus likely no configured plugin:\n"'+u.join('",\n"')+'".')}t.resolve(i)}).fail(t.reject.bind(t))})};this.editorGetParameters=function(t){var a=new jQuery.Deferred;Promise.all([sap.ushell.Container.getServiceAsync("PluginManager"),this._getUserDefaultParameterNames(t)]).then(function(n){var r=n[0];var i=n[1];if(i.oMetadataObject.length===0){a.resolve({})}else{r.loadPlugins("UserDefaults").done(function(){this._getEditorDataAndValue(a,i.aAllParameterNames,i.aExtendedParameterNames,i.oMetadataObject,t)}.bind(this)).fail(function(){e.error("One or more plugins could not be loaded");a.reject("Initialization of plugins failed")})}}.bind(this));return a.promise()};this._extractKeyArrays=function(e){var t={simple:e&&e.simple&&Object.keys(e.simple).sort()||[],extended:e&&e.extended&&Object.keys(e.extended).sort()||[]};var a=t.extended.filter(function(e){return t.simple.indexOf(e)<0});t.allParameters=t.simple.concat(a).sort();return t};this.editorSetValue=function(e,t,a){var n=new jQuery.Deferred;this._storeValue(e,t,true,a).then(n.resolve);return n.promise()};this.attachValueStored=function(e){c.attachEvent(o,e)};this.detachValueStored=function(e){c.detachEvent(o,e)}}l.hasNoAdapter=true;return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserInfo", ["sap/base/Log","sap/ushell/Config","sap/ushell/User","sap/ushell/Container"],function(e,t,r,i){"use strict";var s={themeList:null,languageList:null,userSettingList:null};function n(t,r){this.getId=function(){return i.getUser().getId()};this.getFirstName=function(){return i.getUser().getFirstName()};this.getLastName=function(){return i.getUser().getLastName()};this.getFullName=function(){return i.getUser().getFullName()};this.getEmail=function(){return i.getUser().getEmail()};this.getUser=function(){return i.getUser()};this.getShellUserInfo=function(){return Promise.resolve({id:this.getId(),email:this.getEmail(),firstName:this.getFirstName(),lastName:this.getLastName(),fullName:this.getFullName()})};this.getCalendarWeekNumberingList=function(){return t.getCalendarWeekNumberingList?.()};this.getThemeList=function(){if(s.themeList){return s.themeList}var r=t.getThemeList();s.themeList=r;r.fail(function(){e.error("getThemeList failed")});return r};this.updateUserPreferences=function(){var r=t.updateUserPreferences(i.getUser());r.fail(function(){e.error("updateAttributes: ")});return r};this.getLanguageList=function(){if(s.languageList){return s.languageList}var r=t.getLanguageList();s.languageList=r;r.fail(function(){e.error("getLanguageList failed")});return r};this.getUserSettingList=function(){if(s.userSettingList){return s.userSettingList}var r=t.getUserProfilePropertyValueLists();s.userSettingList=r;r.fail(function(){e.error("getUserProfilePropertyValueLists failed")});return r};this.getUserSettingListEditSupported=function(){if(typeof t.getUserProfilePropertyValueLists!=="undefined"){return true}return false}}n.hasNoAdapter=false;return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents", ["sap/ushell/utils","sap/base/util/ObjectPath","sap/ushell/services/_UserRecents/RecentsList","sap/ushell/services/_UserRecents/RecentActivity","sap/ushell/services/_UserRecents/RecentAppsUsage"],function(e,t,c,n,o){"use strict";function a(){this.oRecentSearches=new c("RecentSearches",10,a._compareSearchItems);this.oRecentDataSources=new c("RecentDataSources",6,a._compareDataSources);this.oRecentApps=new c("RecentApps",6,a._compareApps);this.oRecentActivity=new n(500);this.oAppsUsage=new o}a._compareSearchItems=function(e,t){var c=false;if(e.oDataSource&&t.oDataSource){if(e.oDataSource.objectName&&t.oDataSource.objectName){c=e.sTerm===t.sTerm&&e.oDataSource.objectName.value===t.oDataSource.objectName.value}if(!e.oDataSource.objectName&&!t.oDataSource.objectName){c=e.sTerm===t.sTerm}}if(!e.oDataSource&&!t.oDataSource){c=e.sTerm===t.sTerm}return c};a._compareDataSources=function(e,t){if(e.objectName&&t.objectName){return e.objectName.value===t.objectName.value}return false};a._compareApps=function(e,t){return e.semanticObject===t.semanticObject&&e.action===t.action};a.prototype.addActivity=function(e){return new Promise((t,c)=>{this.oRecentActivity.newItem(e).then(()=>{this.oRecentActivity.getRecentItems().then(t).catch(c)}).catch(c)})};a.prototype.clearRecentActivities=function(){return this.oRecentActivity.clearAllActivities()};a.prototype.getRecentActivity=function(){return this.oRecentActivity.getRecentItems()};a.prototype.getFrequentActivity=function(){return this.oRecentActivity.getFrequentItems()};a.prototype.noticeDataSource=function(e){var c=t.get("objectName.value",e)||"";var n=t.get("objectName",e)||"";var o=c.toLowerCase()==="$$all$$";var a=n.toLowerCase()==="$$all$$";if(!o&&!a){this.oRecentDataSources.newItem(e).then(()=>new Promise((e,t)=>{this.oRecentDataSources.getRecentItems().then(e).catch(t)}))}return this.oRecentDataSources.getRecentItems()};a.prototype.addDataSourceActivity=function(e){const c=t.get("objectName.value",e)||"";const n=t.get("objectName",e)||"";const o=c.toLowerCase()==="$$all$$";const a=n.toLowerCase()==="$$all$$";if(!o&&!a){return new Promise((t,c)=>{this.oRecentDataSources.newItem(e).then(()=>{this.oRecentDataSources.getRecentItems().then(t).catch(c)}).catch(c)})}return this.oRecentDataSources.getRecentItems()};a.prototype.getRecentDataSources=function(){return this.oRecentDataSources.getRecentItems()};a.prototype.noticeSearch=function(e){return new Promise((t,c)=>{this.oRecentSearches.newItem(e).then(()=>{this.oRecentSearches.getRecentItems().then(t).catch(c)}).catch(c)})};a.prototype.addSearchActivity=function(e){return new Promise((t,c)=>{this.oRecentSearches.newItem(e).then(()=>{this.oRecentSearches.getRecentItems().then(t).catch(c)}).catch(c)})};a.prototype.getRecentSearches=function(){return this.oRecentSearches.getRecentItems()};a.prototype.noticeApp=function(e){return new Promise((t,c)=>{this.oRecentApps.newItem(e).then(()=>{this.oRecentApps.getRecentItems().then(t).catch(c)}).catch(c)})};a.prototype.addAppActivity=function(e){return new Promise((t,c)=>{this.oRecentApps.newItem(e).then(()=>{this.oRecentApps.getRecentItems().then(t).catch(c)}).catch(c)})};a.prototype.getRecentApps=function(){return this.oRecentApps.getRecentItems()};a.prototype.addAppUsage=function(t){var c=e.getBasicHash(t);return this.oAppsUsage.addAppUsage(c)};a.prototype.getAppsUsage=function(){return this.oAppsUsage.getAppsUsage()};a.hasNoAdapter=true;return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/VisualizationDataProvider", ["sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/base/Log","sap/ushell/Config"],function(i,jQuery,t,e,a,o){"use strict";var r=t.DisplayFormat;function n(){this.S_COMPONENT_NAME="sap.ushell.services.VisualizationDataProvider";this._init.apply(this,arguments)}n.prototype._init=function(i){this.oLaunchPageAdapter=i;this.oCatalogTilePromise=null};n.prototype._getCatalogTileIndex=function(){if(this._oCatalogTileIndexPromise){return this._oCatalogTileIndexPromise}var i=this.oLaunchPageAdapter;return i._getCatalogTileIndex()};n.prototype._getCatalogTiles=function(){if(this.oCatalogTilePromise){return this.oCatalogTilePromise}var i=this.oLaunchPageAdapter;this.oCatalogTilePromise=new Promise(function(t,e){i.getCatalogs().then(function(a){var r=[];var n=[];var l=[];var s={};for(var u=0;u<a.length;u++){if(typeof a[u].ui2catalog==="undefined"||a[u].ui2catalog.getType()!=="REMOTE"){r.push(i.getCatalogTiles(a[u]).then(function(i){n.push(i)}))}}jQuery.when.apply(null,r).done(function(){l=[].concat.apply([],n);for(var e=0;e<l.length;e++){var a=i.getCatalogTileId(l[e]);if(o.last("/core/stableIDs/enabled")){a=i.getStableCatalogTileId(l[e])}s[a]=l[e]}t(s)}).fail(e)}).fail(e)});return this.oCatalogTilePromise};n.prototype.getVisualizationData=function(){var t;var e=this.oLaunchPageAdapter;if(this._oVisualizationDataPromise){return this._oVisualizationDataPromise}this._oVisualizationDataPromise=Promise.all([this._getCatalogTiles(),this._getCatalogTileIndex()]).then(function(i){var a=i[0];t=i[1];var o=[];var r=[];Object.keys(a).forEach(function(i){var t=a[i];e.setTileVisible(t,false);r.push(e.isTileIntentSupportedAsync(t).then(function(t){if(t===true){o.push(i)}}))});return Promise.all(r).then(function(){var i=o.map(function(i){var t=a[i];if(!e.getCatalogTilePreviewTitle(t)){return new Promise(function(i,a){e.getCatalogTileViewControl(t).done(i).fail(a)}).then(function(e){return{id:i,catalogTile:t,view:e}})}return Promise.resolve({id:i,catalogTile:t})});return Promise.all(i)})}).then(function(i){return i.reduce(function(i,a){var o=a.id;var r=a.view;var n=a.catalogTile;var l=n.getChip().getBaseChipId();i.visualizations[o]={vizType:l,title:e.getCatalogTilePreviewTitle(n),subTitle:e.getCatalogTilePreviewSubtitle(n),icon:e.getCatalogTilePreviewIcon(n),info:e.getCatalogTilePreviewInfo(n),keywords:e.getCatalogTileKeywords(n),size:e.getCatalogTileSize(n),indicatorDataSource:e.getCatalogTilePreviewIndicatorDataSource(n),url:e.getCatalogTileTargetURL(n),numberUnit:e.getCatalogTileNumberUnit(n),isCustomTile:e.isCustomTile&&e.isCustomTile(n)};if(r){r.destroy()}if(t[o]){i.visualizations[o]._instantiationData={platform:"ABAP",simplifiedChipFormat:false,chip:t[o]}}if(i.visualizations[o].isCustomTile&&!i.vizTypes[l]){i.vizTypes[l]={id:l,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(n,i.visualizations[o].size)},tileSize:i.visualizations[o].size}}return i}.bind(this),{visualizations:{},vizTypes:{},page:{}})}.bind(this)).catch(function(t){var e={component:this.S_COMPONENT_NAME,description:i.i18n.getText("VisualizationDataProvider.CannotLoadData"),detail:t};return Promise.reject(e)}.bind(this));return this._oVisualizationDataPromise};n.prototype._getDisplayFormats=function(i,t){var e=["tile"];var a="tile";var o=i.getContract("types");if(o){e=o.getAvailableTypes();a=o.getDefaultType()}return{supported:this._mapDisplayFormats(e,t),default:this._mapDisplayFormats([a],t)[0]}};n.prototype._mapDisplayFormats=function(i,t){var e={tile:r.Standard,tilewide:r.StandardWide,link:r.Compact,flat:r.Flat,flatwide:r.FlatWide};return i.map(function(i){i=e[i];if(i===r.Standard&&t==="1x2"){return r.StandardWide}return i})};n.prototype.loadVizType=function(i){var t={chipId:i};return e.loadChipInstanceFromSimplifiedChip(t).then(function(t){var a=e.getTileSize(t);return{id:i,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(t,a)},tileSize:a}}.bind(this)).catch(function(t){a.error("The chipInstance '"+i+"' could not be loaded: ",t)})};n.hasNoAdapter=false;return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/VisualizationInstantiation", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap","sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm","sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage","sap/ushell/services/_VisualizationInstantiation/VizInstanceLink","sap/m/library","sap/ushell/library","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(t,e,a,i,n,s,o,r,d,c){"use strict";var l=s.LoadState;var u=o.DisplayFormat;function p(){}p.prototype.instantiateVisualization=function(s){var o;var p=r.get("_instantiationData.platform",s);var v={vizRefId:s.id,title:s.title,subtitle:s.subtitle,icon:s.icon,keywords:s.keywords,instantiationData:s._instantiationData,indicatorDataSource:s.indicatorDataSource,dataSource:s.dataSource,contentProviderId:s.contentProviderId,vizConfig:s.vizConfig,supportedDisplayFormats:s.supportedDisplayFormats,displayFormat:s.displayFormatHint,numberUnit:s.numberUnit,dataHelpId:s.vizId,preview:s.preview};if(v.indicatorDataSource){v.indicatorDataSource.ui5object=true}if((p==="ABAP"||p==="CDM")&&v.displayFormat===u.Compact){this._cleanInstantiationDataForLink(v);p="LINK"}switch(p){case"ABAP":o=new e(v);break;case"CDM":o=new a(v);break;case"LINK":o=new n(v);break;case"LAUNCHPAGE":o=new i(v);break;default:return new t({state:l.Failed})}o.setTargetURL(s.targetURL);if(p!=="LINK"){o.setInfo(s.info)}if(c.isStandardVizType(s.vizType)){try{o.load().then(function(){d.emit("VizInstanceLoaded",s.id)})}catch(t){o.setState(l.Failed);d.emit("VizInstanceLoaded",s.id)}}else{o.setState(l.Loading);d.once("CoreResourcesComplementLoaded").do(function(){try{o.load(true).then(function(){o.setState(l.Loaded)})}catch(t){o.setState(l.Failed)}})}return o};p.prototype._cleanInstantiationDataForLink=function(t){delete t.info;delete t.icon;delete t.keywords;delete t.instantiationData;delete t.dataSource;delete t.contentProviderId;delete t.vizConfig;delete t.numberUnit;delete t.indicatorDataSource;delete t.preview};p.hasNoAdapter=true;return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Formatter", [],function(){"use strict";function e(e){return"#"+e.semanticObject+"-"+e.action+"{"+n(e.signature)+"}"}function r(e){var r=e.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!r){throw"Cannot parse inbound"}var n={semanticObject:r[1],action:r[2],signature:{parameters:{}}};if(!r[3]){return n}n.signature=a(r[4]);return n}function n(e){var r=e||{},n=r.parameters||{},a={optional:"[FORMAT]",required:"FORMAT"},t={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},u={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var i=n&&Object.prototype.toString.apply(n)==="[object Object]"&&Object.keys(n).length>0;if(!i){return"<no params>"+(u[r.additionalParameters]||u._unknown)}var o=[];Object.keys(n).forEach(function(e){var r=n[e],u=r.required?"required":"optional",i=r.filter&&r.filter.value,l=r.defaultValue&&r.defaultValue.value,f=r.filter&&r.filter.format||"plain",s=r.defaultValue&&r.defaultValue.format||"plain";var c=[],p=t[f]||t._unknown,d=t[s]||t._unknown;if(i){c.push(a["required"].replace("FORMAT",p.replace("VALUE",i)))}if(l){c.push(a["optional"].replace("FORMAT",d.replace("VALUE",l)))}o.push(a[u].replace("FORMAT",e+":"+c.join("")))});return o.join(",")+(u[r.additionalParameters]||u._unknown)}function a(e){function r(e){var r=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,n){var a=e.match(n.re);if(r){return r}if(!a){return null}return{format:n.format,value:a[1]}},null);if(r){return r}return{value:e}}function n(e){var n,a,t,u,i,o,l,f,s,c,p,d;d="<no params>";n="[^\\]\\[]";p="("+n+"+?):("+n+"*)(.*)";c="\\["+p+"\\]";s=d+"|"+c+"|"+p;f=new RegExp("^"+s+"$");i={success:false,name:null,value:{}};l=e.match(f);if(!l){return i}o=l.shift();while(l.length>0){u=l.shift();t=l.shift();a=l.shift();if(u){i.name=u;if(t){i.value.filter=r(t)}if(a){i.value.defaultValue=r(a.replace(/\[(.+)\]/,"$1"))}i.value.required=o.charAt(0)!=="["}}i.success=true;return i}function a(e){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(r,n,a,t){if(r){return r}var u=Object.keys(n)[0];if(e===u){return n[u]}return null},null)}function t(e){var r=[];e.split(":").reduce(function(e,n,a,t){var u,i,o;if(a===0){return n}if(a<t.length-1){o=n.split(",");if(o.length>1){i=o.pop();u=o.join(",")}else{return e+":"+n}}else{u=n}r.push([e,u].join(":"));return i},"");return r}var u={parameters:{}};var i=e.substr(e.length-3,3);var o=!!i.match(/<[?o+-]>/);var l=e;if(o){l=e.substr(0,e.length-3)}var f=t(l);f.forEach(function(r){var a=n(r);if(!a.success){throw new Error("Cannot parse parameters from "+e)}if(a.name){u.parameters[a.name]=a.value}});if(o){var s=a(i);if(s){u.additionalParameters=a(i)}}else{u.additionalParameters="ignored"}return u}return{formatInboundSignature:n,parseInboundSignature:a,parseInbound:r,formatInbound:e}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/InboundIndex", ["sap/base/util/ObjectPath","sap/base/Log"],function(e,n){"use strict";function t(){return this.index.all}function i(e){if(e==="*"||e===undefined){return this.index.all}return(this.index.segment[e]||[]).concat(this.index.always)}function a(e){return e.map(function(e){return this.index.tag[e]||[]},this).reduce(function(e,n){Array.prototype.push.apply(e,n.filter(function(e){return e.isAlreadyInUnion?false:e.isAlreadyInUnion=true}));return e},[]).map(function(e){delete e.isAlreadyInUnion;return e})}var r={getSegment:i,getAllInbounds:t,getSegmentByTags:a};function u(n,t){var i=e.get("signature.parameters.sap-tag.defaultValue.value",n);if(!i){return}if(!t.tag[i]){t.tag[i]=[]}t.tag[i].push(n)}function s(e,n){var t=e.semanticObject;if(t==="*"){n.always.push(e)}else{if(!n.segment[t]){n.segment[t]=[]}n.segment[t].push(e)}}function o(e){var t={all:e,segment:{},always:[],tag:{}};e.forEach(function(e,i){if(!e){n.warning("Void inbound provided to indexer","the inbound will be skipped");return}u(e,t);s(e,t)});r.index=t;return r}return{createIndex:o,private:{tagInbound:u,createIndex:o,segmentInbound:s}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/InboundProvider", ["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(n,e){"use strict";function t(){this._init.apply(this,arguments)}t.prototype._init=function(n){this._fnRetrieveInbounds=n;this._oInboundsRetrievalPromise=null};t.prototype.getInbounds=function(n){if(n){return this._getSomeInbounds(n)}return this._getAllInbounds()};t.prototype._getSomeInbounds=function(t){var i=this;return new Promise(function(o,s){i._fnRetrieveInbounds(t).done(function(t){o(e.createIndex(t.concat(n.getInbounds())))}).fail(function(){s.apply(null,arguments)})})};t.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise}this._oInboundsRetrievalPromise=new Promise(function(i,o){t._fnRetrieveInbounds().done(function(t){i(e.createIndex((t||[]).concat(n.getInbounds())))}).fail(function(){o.apply(null,arguments)})});return this._oInboundsRetrievalPromise};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/ParameterMapping", ["sap/base/Log"],function(e){"use strict";function a(a){var t={},n=a.intentParamsPlusAllDefaults;Object.keys(n).sort().forEach(function(s){var i=r(s,a.inbound.signature,n[s]);if(Array.isArray(a.intentParamsPlusAllDefaults[s])){if(t[i]){e.error('collision of values during parameter mapping : "'+s+'" -> "'+i+'"')}else{t[i]=a.intentParamsPlusAllDefaults[s]}}});a.mappedIntentParamsPlusSimpleDefaults=t}function r(e,a,r){if(!r||!Array.isArray(r)){return e}if(a&&a.parameters&&a.parameters[e]&&a.parameters[e].renameTo){return a.parameters[e].renameTo}return e}return{mapParameterNamesAndRemoveObjects:a,getRenameParameterName:r}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations", ["sap/base/Log","sap/base/util/deepExtend","sap/fe/navigation/SelectionVariant"],function(e,t,r){"use strict";var a="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";function n(e){if(!e){return Promise.resolve(null)}return sap.ushell.Container.getServiceAsync("AppState").then(function(t){return new Promise(function(r,a){t.getAppState(e).done(function(e){r(e)}).fail(function(e){a(e)})})})}function i(e,t,r,a,n){if(e.startupParametersModified){t.mappedIntentParamsPlusSimpleDefaults=a}if(e.defaultedParameterNamesModified){t.mappedDefaultedParamNames=n}if(e.selectionVariantModified){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var a=e.createEmptyAppState(undefined,true);a.setData({selectionVariant:r.toJSONObject()});return new Promise(function(e,r){a.save().done(function(){t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[a.getKey()];e(t)}).fail(function(e){r(e)})})})}return Promise.resolve(t)}function o(e){var t=e.type;switch(t){case"merge":case"split":return t+" - source: "+e.source+" & target: "+e.target;case"delete":return t+" - target: "+e.target;default:return""}}function s(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].Low}return undefined}function u(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].High}return undefined}function l(e,t){if(t[e]){return t[e][0]}return undefined}function f(e,t,r){var a=e.source[0],n=e.source[1],i=s(a,t),o=s(n,t),u=l(a,r),f=l(n,r),d,p,c=e.target;function m(e,t){if(t===undefined||e===t){return e}return undefined}if(i&&o){d=m(i,u);p=m(o,f)}else if(u&&f){d=m(u,i);p=m(f,o)}if(d&&p&&!t.getSelectOption(c)&&!r.hasOwnProperty(c)){t.addSelectOption(c,"I","BT",d,p);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false}}return{}}function d(t,r,a){var n=t.target,i=t.source;if(!r.getSelectOption(i)){e.error("Invalid split operation: "+i+" does not exist in selection variant");return false}if(r.getSelectOption(n[0])){e.error("Invalid split operation: "+n[0]+" already exists in selection variant");return false}if(r.getSelectOption(n[1])){e.error("Invalid split operation: "+n[1]+" already exists in selection variant");return false}if(a[n[0]]){e.error("Invalid split operation: "+n[0]+" already exists in startup parameters");return false}if(a[n[1]]){e.error("Invalid split operation: "+n[1]+" already exists in startup parameters");return false}return true}function p(e,t,r){var a=e.target,n=e.source,i=d(e,t,r);if(i){var o=s(n,t),l=u(n,t);t.addSelectOption(a[0],"I","EQ",o,null);r[a[0]]=[o];t.addSelectOption(a[1],"I","EQ",l||o,null);r[a[1]]=[l||o];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false}}return{}}function c(t,r,a,n){var i=t.target,o={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var s=0;s<i.length;s++){var u=i[s];if(u==="sap-xapp-state"){e.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue}if(r.getParameter(u)){r.removeParameter(u);o.selectionVariantModified=true}if(r.getSelectOption(u)){r.removeSelectOption(u);o.selectionVariantModified=true}if(a[u]){delete a[u];o.startupParametersModified=true}var l=n.indexOf(u);if(l>-1){n.splice(l,1);o.defaultedParameterNamesModified=true}}return o}function m(t){var r;if(t===""){return[]}t=t.replaceAll("“",'"');t=t.replaceAll("”",'"');try{r=JSON.parse(t)}catch(t){e.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[]}if(!Array.isArray(r)){e.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[]}return r}function g(t){if(t.length===0){return null}var r={split:true,merge:true,delete:true};var a=t.filter(function(e){return!r[e.type]});if(a.length>0){e.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+a.join(", "));return null}var n=t.some(function(e){return e.type==="split"&&e.target[0]===e.target[1]});if(n){e.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null}var i=t.some(function(e){if(e.type==="split"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.source!=="string"||!Array.isArray(e.target)||Object.keys(e).length!==3||Object.keys(e.target).length!==2}if(e.type==="merge"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.target!=="string"||!Array.isArray(e.source)||Object.keys(e).length!==3||Object.keys(e.source).length!==2}if(e.type==="delete"){return!e.hasOwnProperty("target")||!Array.isArray(e.target)||Object.keys(e).length!==2}});if(i){e.error("Invalid operation: one or more operations are specified in an incorrect format.");return null}return t}function v(e){var t=m(e);return g(t)}function y(t,r,n,i){var s=e.getLevel()>=e.Level.DEBUG?[]:null,u={selectionVariantModified:false,startupParametersModified:false};r.forEach(function(r){var a={};switch(r.type){case"split":a=p(r,t,n);break;case"merge":a=f(r,t,n);break;case"delete":a=c(r,t,n,i);break;default:e.error("Invalid operation: "+r.type+" prelaunch operation type is not supported")}if(s){var l=Object.keys(a).length!==0?"✅":"❌";s.push(l+" "+o(r))}if(Object.keys(a).length===0){e.warning("Cannot execute "+o(r))}u.selectionVariantModified=u.selectionVariantModified||a.selectionVariantModified;u.startupParametersModified=u.startupParametersModified||a.startupParametersModified;u.defaultedParameterNamesModified=u.defaultedParameterNamesModified||a.defaultedParameterNamesModified});if(s){e.debug(a+"\n"+s.join("\n"))}return u}function P(e,a){if(!a){return Promise.resolve(e)}var o=e.mappedIntentParamsPlusSimpleDefaults,s=e.mappedDefaultedParamNames,u=o["sap-xapp-state"]&&o["sap-xapp-state"][0],l=v(a);if(!l||l.length===0){return Promise.resolve(e)}return n(u).then(function(a){var n=a?a.getData():{},u=t({},o),f=t([],s),d;if(n.selectionVariant){d=new r(JSON.stringify(n.selectionVariant))}else{d=new r}var p=y(d,l,u,f);return i(p,e,d,u,f)})}return{executePrelaunchOperations:P,parseAndValidateOperations:v}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Search", ["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,r,n,a,i,jQuery){"use strict";var u=[undefined,"GUI","WDA","UI5"];function s(e,t){var r=e.inbound.resolutionResult;if(!r){return""}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(e){if(t){return r.hasOwnProperty(e)?e+":"+r[e]:""}return r.hasOwnProperty(e)?r[e]:""}).join("")}function o(e){return e.sort(function(e,t){if((e["sap-priority"]||0)-(t["sap-priority"]||0)!==0){return-((e["sap-priority"]||0)-(t["sap-priority"]||0))}if(e.priorityString<t.priorityString){return 1}if(e.priorityString>t.priorityString){return-1}var r=s(e);var n=s(t);if(r<n){return 1}else if(r>n){return-1}return 0})}function l(e,t){var r;if(e&&e["sap-priority"]&&e["sap-priority"][0]){r=parseInt(e["sap-priority"][0],10);if(!isNaN(r)){t["sap-priority"]=r}}return}function f(e,t,r,n){var a;if(!t){return true}if(!e&&e!==""){return false}a=t.value;if(t.format==="reference"){if(/UserDefault\.extended\./.test(a)){i.error("Illegal inbound: extended user default '"+a+"' used as filter");return false}if(r.hasOwnProperty(a)){return e===r[a]}n[a]=true;return true}if(t.format==="value"||t.format==="plain"||t.format===undefined){return e===t.value}else if(t.format==="regexp"){return!!e.match("^"+t.value+"$")}i.error("Illegal oFilter format");return false}function c(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.ui"]&&e.inbound.resolutionResult["sap.ui"].technology}function d(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult.appId}function p(e,t,r,n,a){var i={},u={};Object.keys(e).forEach(function(t){if(t!=="sap-ushell-defaultedParameterNames"){i[t]=e[t]}});if(!t){return i}Object.keys(t).forEach(function(e){var a=t[e],s,o=false;if(!i[e]&&a.hasOwnProperty("defaultValue")){if(a.defaultValue.format&&a.defaultValue.format==="reference"){s=a.defaultValue.value;if(r.hasOwnProperty(s)){if(typeof r[s]==="string"){i[e]=[r[s]];o=true}else if(typeof r[s]==="object"){i[e]=r[s];o=true}}else{i[e]=[a.defaultValue];n.push(a.defaultValue.value)}}else{i[e]=[a.defaultValue.value];o=true}if(o){u[e]=true}}});Object.keys(u).sort().forEach(function(e){a.push(e)});return i}function m(e,t){e.resolutionResult={contentProviderId:t.contentProviderId};if(t&&t.resolutionResult&&t.resolutionResult.hasOwnProperty("sap.platform.runtime")){e.resolutionResult["sap.platform.runtime"]=t.resolutionResult["sap.platform.runtime"]}Object.keys(e.intentParamsPlusAllDefaults).slice(0).forEach(function(t){if(!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!e.resolutionResult.oNewAppStateMembers){e.resolutionResult.oNewAppStateMembers={}}e.resolutionResult.oNewAppStateMembers[t]=e.intentParamsPlusAllDefaults[t]}})}function h(e,t){e.forEach(function(e){t[e]=true})}function v(e){var t=e.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var r=e.defaultedParamNames&&e.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0;if(t&&c(e)===t){return r?1:2}return 0}function P(e){var t=e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(t&&t===d(e)){return 1}return 0}function g(e,t){function r(e){var t="000"+e;return t.substr(t.length-3)}return["AIDM="+P(e),"CURCP="+(t.isCurrentContentProvider?"1":"0"),e.genericSO?"g":"x","TECM="+v(e),"MTCH="+r(t.countMatchingParams),"MREQ="+r(t.countMatchingRequiredParams),"NFIL="+r(t.countMatchingFilterParams),"NDEF="+r(t.countDefaultedParams),"POT="+r(t.countPotentiallyMatchingParams),"RFRE="+r(999-t.countFreeInboundParams),"TECP="+y(e)].join(" ")}function y(e){var t=c(e);var r=u.indexOf(t);return Math.max(0,r)}function b(e,t){var r=false;if(e.signature.additionalParameters==="allowed"||e.signature.additionalParameters==="ignored"){return true}if(e.signature.additionalParameters==="notallowed"||e.signature.additionalParameters===undefined){r=Object.keys(t).every(function(t){return!(!e.signature.parameters[t]&&t.indexOf("sap-")!==0)})}else{i.error("Unexpected value of inbound for signature.additionalParameters")}return r}function R(e,t,r,a,i){function u(e,t,r){var a=n.formatInbound(r);e[a]=t.noMatchReason+(t.noMatchDebug?"| DEBUG: "+t.noMatchDebug:"")}var s=a?a():(new jQuery.Deferred).resolve(null).promise();return s.then(function(n){var a=t.reduce(function(t,a){var s=a.contentProviderId||"";var o=r[s]||{};if(!t.missingReferences[s]){t.missingReferences[s]={}}var l=M(e,a,o,t.missingReferences[s],n?n[s]:null);if(l.matches){t.matchResults.push(l)}else if(i){u(t.noMatchReasons,l,a)}return t},{matchResults:[],noMatchReasons:{},missingReferences:{}});return jQuery.when(a)})}function O(e,t,r,n,a,i){var u=Object.keys(e).every(function(r){var n=t[r],u=n&&n[0],s=e[r];if(s.required&&(u===null||u===undefined)){return false}if(s.filter){if(!f(u,s.filter,a,i)){return false}}return true});return u}function I(e,t,r,n,i){var u=e.signature.parameters,s=0,o=0,l=0,f=0,c=false,d={};function p(e){return!a.isTechnicalParameter(e)}var m=Object.keys(r).filter(p);var h=n.filter(p);Object.keys(u).filter(p).forEach(function(e){var n=t[e],a=n&&n[0],i=u[e],c=r.hasOwnProperty(e);if(c){++s;if(i.filter){++l}if(i.required){++o}}else if(a===null||a===undefined){++f}});if(i){d.countPotentiallyMatchingParams=m.filter(function(e){return u.hasOwnProperty(e)}).length}else{d.countPotentiallyMatchingParams=m.length}if(r&&r["sap-app-origin-hint"]&&(r["sap-app-origin-hint"][0]||r["sap-app-origin-hint"][0]==="")){var v=r["sap-app-origin-hint"][0];c=v===e.contentProviderId}d.countDefaultedParams=h.length;d.countMatchingParams=s;d.countMatchingRequiredParams=o;d.countMatchingFilterParams=l;d.countFreeInboundParams=f;d.isCurrentContentProvider=c;return d}function M(e,a,i,u,s){var o={inbound:a};function f(e,t,r){e.matches=false;e.noMatchReason=t;e.noMatchDebug=r;return e}function d(t){t.matches=true;t.matchesVirtualInbound=r.isVirtualInbound(a);t.parsedIntent=e;return t}var v=a.semanticObject==="*";o.genericSO=v;var P=e.semanticObject===undefined||e.semanticObject===a.semanticObject||v;if(!P){return f(o,'Semantic object "'+e.semanticObject+'" did not match')}var y=e.action===undefined||e.action===a.action;if(!y){return f(o,'Action "'+e.action+'" did not match')}var R=!a.deviceTypes||e.formFactor===undefined||a.deviceTypes[e.formFactor];if(!R){return f(o,'Form factor "'+e.formFactor+'" did not match',"Inbound: ["+Object.keys(a.deviceTypes).filter(function(e){return!!a.deviceTypes[e]}).join(", ")+"]")}var M=e.params&&e.params["sap-ui-tech-hint"]&&e.params["sap-ui-tech-hint"][0];if(e.treatTechHintAsFilter&&M){var D=c({inbound:a});if(D!==M){return f(o,'Tech Hint as filter "'+M+'" did not match',"Inbound: ["+D+"]")}}var j=[],A=[],w=e.params||{};var S=p(w,a.signature&&a.signature.parameters,i,j,A);var T=S["sap-system"]&&S["sap-system"][0],F=S["sap-app-origin"]&&S["sap-app-origin"][0],C=a.contentProviderId;if(F&&F!==C){return f(o,'Contetn provider as filter "'+F+'" did not match',"Inbound: ["+C+"]")}if(T&&typeof C==="string"&&s&&!s[T]){return f(o,'Data origin "'+T+'" is not compatible with the content provider "'+C+'"',"Inbound: ["+Object.keys(s).join(", ")+"]")}o.intentParamsPlusAllDefaults=S;o.defaultedParamNames=A;l(S,o);var N=O(a.signature.parameters,S,w,A,i,u);if(!N){return f(o,"Inbound parameter signature did not match",n.formatInboundSignature(a.signature))}var x=t.constructParameterDominatorMap(a.signature.parameters);var E=t.findDominatedDefaultParameters(S,A,x);var k=A.filter(function(e){return!E[e]});var V=t.filterObjectKeys(S,function(e){return!E[e]});if(!b(a,V)){return f(o,"Additional parameters not allowed",n.formatInboundSignature(a.signature))}var U=a.signature.additionalParameters==="ignored";if(U){t.filterObjectKeys(V,function(e){if(e.indexOf("sap-")===0){return true}if(a.signature.parameters.hasOwnProperty(e)){return true}return false},true)}var q=I(a,S,w,A,U);m(o,a);o.intentParamsPlusAllDefaults=V;o.defaultedParamNames=k;o.priorityString=g(o,q);h(j,u);return d(o)}return{match:R,matchOne:M,sortMatchingResultsDeterministic:o,matchesFilter:f,checkAdditionalParameters:b,addDefaultParameterValues:p,extractSapPriority:l,serializeMatchingResult:s}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/StagedLogger", ["sap/base/Log","sap/ushell/services/_ClientSideTargetResolution/Utils"],function(e,n){"use strict";var o={};function r(e){var n;var r;var t=e();if(!t.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.")}n=t.logId;if(o[n]){throw new Error("'cannot call #begin twice with same log id: '"+n+"'")}else{o[n]={}}r=o[n];r.title=t.title||null;r.moduleName=t.moduleName||null;var l=function(e,n){if(n===1){return e}return l(e,n-1)+e};r.stages=t.stages.map(function(e){return[e,l("-",e.length)]});return n}function t(e){var n,r,t,l,i,a,g,u;u=e();if(!u.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}n=u.logId;a=u.stage;i=u.prefix;l=u.lines;t=u.line;g=u.number;if(!l&&t&&i){t=i+" "+t}r=o[n].stages[a-1];if(t){r.push(t)}if(l){if(i){i=(t?" ":"")+i}var d=l.map(function(e,n){return(g?n+1:"")+(i?i+" ":"")+e});r.push.apply(r,d)}}function l(n){var r,t,l;r=n();if(!r.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}l=r.logId;t=o[l];if(typeof t!=="object"){throw new Error("Logger .end was called on an already ended logger")}var i=t.stages.map(function(e){return e.join("\n")}).join("\n\n");e.debug("[REPORT #"+l+"] "+t.title,"\n"+i+"\n",t.moduleName);delete o[l]}function i(){return o}return{begin:function(){if(e.getLevel()>=e.Level.DEBUG){r.apply(null,arguments)}},log:function(){if(e.getLevel()>=e.Level.DEBUG){t.apply(null,arguments)}},end:function(){if(e.getLevel()>=e.Level.DEBUG){l.apply(null,arguments)}},_getLogs:i}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/SystemContext", ["sap/base/util/ObjectPath","sap/ui/thirdparty/URI"],function(t,r){"use strict";var e={};e._getProtocol=function(){return new r(window.location.toString()).protocol()};e.createSystemContextFromSystemAlias=function(e){return{id:e.id,label:e.label||e.id,getFullyQualifiedXhrUrl:function(i){var n=new r(i).protocol();if(n==="http"||n==="https"){return i}var o=this._getProtocol();var a="";if(o==="https"){a=t.get("https.xhr.pathPrefix",e)||""}else if(o==="http"){a=t.get("http.xhr.pathPrefix",e)||""}if(a){if(i.indexOf("dynamic_dest")>-1){return i}return r.joinPaths(a,i).query(new r(i).query()).href()}return i}.bind(this),getProperty:function(r){var i=t.get("properties",e)||{};return i[r]}}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e,r,t){var n={};r.forEach(function(a){var i=t[a].dominatedBy;var u=i.some(function(t){var n=!!e[t];var i=t!==a;var u=r.indexOf(t)===-1;return n&&u&&i});if(u){n[a]=true}});return n}function t(e){var r={},t={};Object.keys(e).forEach(function(n){var a=e[n].renameTo||n;t[a]=t[a]||{renameTo:a,dominatedBy:[]};t[a].dominatedBy.push(n);t[a].dominatedBy=t[a].dominatedBy.sort();r[n]=t[a]});return r}function n(r,t,n){var a=n?r:e({},r);Object.keys(a).forEach(function(e){if(t(e)===false){delete a[e]}});return a}function a(e,r){var t;t=Object.keys(e).reduce(function(t,n){var a=e[n];if(r(n,a)){t[n]=a}return t},{});return t}function i(e,r){return r.every(function(r){var t,n,a;a=r.name;n=r.options;t=e[a];return Object.keys(n).every(function(e){var r=n[e];if(e==="required"){return!!(t||{}).required===r}return false})})}function u(e,r){var t={};e.forEach(function(e){if(r[e]){t[e]=r[e];delete r[e]}});return t}return{inboundSignatureMeetsParameterOptions:i,filterObjectKeys:n,filterObject:a,constructParameterDominatorMap:t,findDominatedDefaultParameters:r,extractParameters:u}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds", [],function(){"use strict";var e={};var a=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderer.search.searchComponent",additionalInformation:"SAPUI5.Component=sap.ushell.renderer.search.searchComponent",url:sap.ui.require.toUrl("sap/ushell/renderer/search/searchComponent"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPPageTemplate",action:"manage",deviceTypes:{desktop:true,tablet:false,phone:false},signature:{parameters:{pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"URL",ui5ComponentName:"nw.core.flp.pagecomposer.conf",additionalInformation:"SAPUI5.Component=nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man",applicationDependencies:{manifest:"/sap/bc/lrep/content/apps/nw.core.flp.pagecomposer.conf/app/sap/sui_paget_man/manifest.appdescr",name:"nw.core.flp.pagecomposer.conf",self:{name:"nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man"},asyncHints:{libs:[{name:"nw.core.flp.transport.cust",url:{final:false,url:"/sap/bc/ui5_ui5/sap/sui_tr_cust"}}]}},async:true,loadDefaultDependencies:false}}];e.isVirtualInbound=function(e){return a.some(function(a){return a===e})};e.getInbounds=function(){return a};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing", ["sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/fe/navigation/SelectionVariant","sap/base/Log"],function(e,jQuery,t,a,r,n,i){"use strict";function s(t,a){var r=new jQuery.Deferred,n,i=t.resolutionResult,s=t.inbound&&(t.inbound.signature||{}),m=f(i)||s.additionalParameters==="ignored"||c(t);if(!m){u(r,t);return r.promise()}var p=t.intentParamsPlusAllDefaults["sap-xapp-state"]&&t.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(p){b(a,p).then(S).then(function(m){if(f(i)){var p=e.constructParameterDominatorMap(s.parameters);Object.keys(i.oNewAppStateMembers).forEach(function(e){var t=p[e].dominatedBy;if(l(m,t)){delete i.oNewAppStateMembers[e]}})}var d=s.additionalParameters==="ignored";if(!f(i)&&!c(t)&&!d){u(r,t);return}n=a.createEmptyAppState(undefined,true);if(n){n.setData(m);o(n,t,r)}},function(){delete i.oNewAppStateMembers;u(r,t);return});return r.promise()}if(f(i)){var d=a.createEmptyAppState(undefined,true);o(d,t,r);return r.promise()}u(r,t);return r.promise()}function o(e,t,a){var r=e.getData()||{},i,s={},o=t.inbound.signature,m=t.resolutionResult;if(r.selectionVariant){i=new n(JSON.stringify(r.selectionVariant))}else{i=new n}if(f(m)){Object.keys(m.oNewAppStateMembers).forEach(function(e){i.massAddSelectOption(e,m.oNewAppStateMembers[e].Ranges)})}var l=o.additionalParameters==="ignored";i=p(i,s,o.parameters,l);if(i.getParameterNames().length!==0||i.getSelectOptionsPropertyNames().length!==0||s.deleted){r.selectionVariant=i.toJSONObject()}if(!s.changed&&!s.deleted&&!f(m)){u(a,t);return}e.setData(r);e.save().done(function(){t.intentParamsPlusAllDefaults["sap-xapp-state"]=[e.getKey()];t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[e.getKey()];u(a,t)})}function u(e,t){g(t);P(t);delete t.resolutionResult.oNewAppStateMembers;e.resolve(t)}function f(e){return e.oNewAppStateMembers&&!a(e.oNewAppStateMembers)}function m(e,t){return Array.isArray(e)&&e.some(function(e){return t.indexOf(e)!==-1})}function l(e,t){if(e&&e.selectionVariant){var a=new n(JSON.stringify(e.selectionVariant)),r=a.getSelectOptionsPropertyNames()||[],i=a.getParameterNames()||[];if(m(r,t)||m(i,t)){return true}}return false}function p(e,t,a,r){var s=new n,o=e.getParameterNames()||[],u=e.getSelectOptionsPropertyNames()||[],f,m;o.forEach(function(n){f=e.getParameter(n);if(r&&!a[n]){t.deleted=true;return}if(a[n]&&a[n].renameTo){if(s.getParameter(a[n].renameTo)===undefined&&s.getSelectOption(a[n].renameTo)===undefined){s.addParameter(a[n].renameTo,f);t.changed=true}else{i.error("renaming of appstate creates duplicates "+n+"->"+a[n].renameTo)}}else if(s.getParameter(n)===undefined&&s.getSelectOption(n)===undefined){s.addParameter(n,f)}});u.forEach(function(n){m=e.getSelectOption(n);if(r&&!a[n]){t.deleted=true;return}if(a[n]&&a[n].renameTo){if(s.getSelectOption(a[n].renameTo)===undefined&&s.getParameter(a[n].renameTo)===undefined){s.massAddSelectOption(a[n].renameTo,m);t.changed=true}else{i.error("renaming of appstate creates duplicates "+n+"->"+a[n].renameTo)}}else if(s.getSelectOption(n)===undefined&&s.getParameter(n)===undefined){s.massAddSelectOption(n,m)}});o.forEach(function(t){e.removeParameter(t)});u.forEach(function(t){e.removeSelectOption(t)});s.getParameterNames().forEach(function(t){e.addParameter(t,s.getParameter(t))});s.getSelectOptionsPropertyNames().forEach(function(t){e.massAddSelectOption(t,s.getSelectOption(t))});return e}function d(e){if(e===undefined||r(e)){return false}return true}function c(e){return e.inbound&&e.inbound.signature&&e.inbound.signature.parameters&&Object.keys(e.inbound.signature.parameters).some(function(t){return!!e.inbound.signature.parameters[t].renameTo})}function g(e){e.defaultedParamNames=e.defaultedParamNames.filter(function(t){if(e.intentParamsPlusAllDefaults[t]&&!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!(e.resolutionResult.oNewAppStateMembers&&e.resolutionResult.oNewAppStateMembers[t])){return false}}return true})}function P(e){var a=t.get("inbound.signature.parameters",e)||{},r={};e.defaultedParamNames.forEach(function(e){var t=a[e]&&a[e].renameTo||e;if(r[t]){i.error("renaming of defaultedParamNames creates duplicates"+e+"->"+t)}else{r[t]=true}});e.mappedDefaultedParamNames=Object.keys(r).sort()}function S(e){if(d(e)){return Promise.reject()}return Promise.resolve(e)}function b(e,t){return new Promise(function(a,r){e.getAppState(t).done(function(e){a(e.getData())}).fail(function(e){r(e)})})}return{mixAppStateIntoResolutionResultAndRename:s,_hasRenameTo:c}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CommonDataModel/PersonalizationProcessor", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(e,r,i,o,t,jQuery){"use strict";function a(){}a.prototype._getItemIndex=function(e,r){var i;for(i=0;i<e.length;i++){if(e[i].id===r){break}}i=i>=e.length?-1:i;return i};a.prototype._applyRenameGroup=function(e,r,i){var o,t=false;if(!r){return false}if(e&&i&&i.groups&&i.groups[e]){o=i.groups[e];if(o.identification&&o.identification.title){i.groups[e].identification.title=r;t=true}}return t};a.prototype._applyGroupVisibility=function(e,r,i){var o=false;if(r===undefined){return false}if(e&&i&&i.groups&&i.groups[e]){i.groups[e].identification.isVisible=r;o=true}return o};a.prototype.mixinPersonalization=function(e,r){var i=new jQuery.Deferred,t=this;if(!r||o(r)){return i.resolve(e).promise()}if(r.groups){Object.keys(r.groups).forEach(function(i){var o=r.groups[i];if(e.groups[i]){if(o.identification){if(o.identification.title){t._applyRenameGroup(i,o.identification.title,e)}if(o.identification.hasOwnProperty("isVisible")&&o.identification.isVisible===false){t._applyGroupVisibility(i,false,e)}}}})}this._applyAddGroups(e,r);if(r.removedGroups&&Array.isArray(r.removedGroups)){r.removedGroups.forEach(function(r){t._applyRemoveGroup(e,r)})}this._applyMoveGroup(e,r);this._applyItemChanges(e,r);this._applyTileSettings(e,r);return i.resolve(e).promise()};a.prototype._applyAddGroups=function(e,i){var o=[];e.site=e.site||{};e.site.payload=e.site.payload||{};e.site.payload.groupsOrder=e.site.payload.groupsOrder||[];e.groups=e.groups||{};if(Array.isArray(i.groupOrder)){e.site.payload.groupsOrder.forEach(function(e){if(i.groupOrder.indexOf(e)===-1){if(i.removedGroups&&i.removedGroups.indexOf(e)===-1||!i.removedGroups){o.push(e)}}})}if(Array.isArray(i.groupOrder)&&i.addedGroups&&Object.keys(i.addedGroups).length>0){Object.keys(i.addedGroups).forEach(function(o){e.groups[o]=r(i.addedGroups[o],20);e.groups[o].payload.isPreset=false});e.site.payload.groupsOrder=i.groupOrder}o.forEach(function(r){e.site.payload.groupsOrder.push(r)})};a.prototype._checkRenameGroup=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.title!==i[e].identification.title){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.title=r[e].identification.title}}}return o};a.prototype._applyTileSettings=function(e,r){var i,o;if(!r.modifiedTiles){return}i=Object.keys(e.groups).map(function(e){return this[e]},e.groups);o=Object.keys(r.modifiedTiles).map(function(e){return this[e]},r.modifiedTiles);i.some(function(e){["tiles","links"].forEach(function(r){if(e.payload[r]){e.payload[r].some(function(e){var r;o.some(function(i,o){if(i.id===e.id){if(i.title!==undefined){e.title=i.title}if(i.subTitle!==undefined){e.subTitle=i.subTitle}if(i.info!==undefined){e.info=i.info}if(i.displayFormatHint!==undefined){e.displayFormatHint=i.displayFormatHint}r=o;return true}return false});if(r!==undefined){o.splice(r,1)}return o.length===0})}});return o.length===0})};a.prototype._checkGroupVisibility=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.isVisible!==i[e].identification.isVisible&&typeof r[e].identification.isVisible==="boolean"){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.isVisible=r[e].identification.isVisible}}}return o};a.prototype._addGroupToPersonalizationDelta=function(e,r,o){var t=false,a,s;if(e&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&e.groups&&o&&e.groups[o]&&r){a=e.site.payload.groupsOrder;s=e.groups[o];r.addedGroups=r.addedGroups||{};r.addedGroups[o]={};r.addedGroups[o].identification=i({},s.identification);r.addedGroups[o].payload=i({},s.payload);r.addedGroups[o].payload.tiles=[];r.addedGroups[o].payload.links=[];r.groupOrder=a;t=true}return t};a.prototype.extractPersonalization=function(e,r){var i=new jQuery.Deferred,t,a={},s,p,n=this;if(e&&e.groups&&r&&r.groups){t=e.groups;s=r.groups;p=this._getExtractHelperObject(r,e,a);Object.keys(s).forEach(function(i){n._checkRemoveGroup(e,a,i);n._extractFromOriginalSiteOneGroup(r,p,i,"tiles");n._extractFromOriginalSiteOneGroup(r,p,i,"links")});Object.keys(t).forEach(function(r){if(s[r]){n._checkRenameGroup(r,t,s,a);n._checkGroupVisibility(r,t,s,a)}else{n._addGroupToPersonalizationDelta(e,a,r)}n._extractFromPersonalizedSiteOneGroup(e,p,r,"tiles");n._extractFromPersonalizedSiteOneGroup(e,p,r,"links")});this._checkMoveGroup(e,r,a);this._cleanupRemovedGroups(r,a);if(p.oPersonalizationDelta.movedTiles&&o(p.oPersonalizationDelta.movedTiles)){delete p.oPersonalizationDelta.movedTiles}if(p.oPersonalizationDelta.movedLinks&&o(p.oPersonalizationDelta.movedLinks)){delete p.oPersonalizationDelta.movedLinks}}if(r._version){a._version=r._version}return i.resolve(a).promise()};a.prototype._checkRemoveGroup=function(e,r,i){var o=false;if(e&&e.groups&&r&&i){if(!e.groups[i]){r.removedGroups=r.removedGroups||[];r.groupOrder=r.groupOrder||[];if(r.removedGroups.indexOf(i)===-1){r.removedGroups.push(i)}if(e.site&&e.site.payload&&e.site.payload.groupsOrder&&Array.isArray(e.site.payload.groupsOrder)){r.groupOrder=e.site.payload.groupsOrder.slice(0)}}o=true}return o};a.prototype._applyRemoveGroup=function(e,r){var i,o,t;if(e&&e.groups&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&r){i=e.groups;o=e.site.payload.groupsOrder;t=o.indexOf(r);if(!(t===-1)){o.splice(t,1);delete i[r];return true}}return false};a.prototype._checkMoveGroup=function(e,r,i){var o,t,a=false,s=false;if(e.site&&e.site.payload&&Array.isArray(e.site.payload.groupsOrder)&&r.site&&r.site.payload&&Array.isArray(r.site.payload.groupsOrder)){o=e.site.payload.groupsOrder;t=r.site.payload.groupsOrder;if(o.length===t.length){a=function(){var e=false,r;for(r=0;r<t.length;r++){if(t[r]!==o[r]){e=true;break}}return e}();if(a){i.groupOrder=o;s=true}}}return s};a.prototype._applyMoveGroup=function(e,r){var i=false;if(Array.isArray(r.groupOrder)){e.site=e.site||{};e.site.payload=e.site.payload||{};if(!Array.isArray(e.site.payload.groupsOrder)){e.site.payload.groupsOrder=[]}if(e.site.payload.groupsOrder.length===r.groupOrder.length){e.site.payload.groupsOrder=r.groupOrder;i=true}}return i};a.prototype._getHashedItemsFromSite=function(e){var r=null;if(e&&e.groups){if(Object.keys(e.groups).length>0){r={};Object.keys(e.groups).forEach(function(i){var o=e.groups[i],t;r[i]={};if(o.payload){["tiles","links"].forEach(function(e){r[i][e]={};if(Array.isArray(o.payload[e])){t=o.payload[e];t.forEach(function(o,t){var a;if(o&&o.id){a=o.id;r[i][e][a]={iIndex:t,sItemId:o}}})}})}})}}return r};a.prototype._getExtractHelperObject=function(e,r,i){var o=null;o={};o.oHashedItemsOriginal=this._getHashedItemsFromSite(e)||{};o.oHashedItemsPersonalized=this._getHashedItemsFromSite(r);o.oPersonalizationDelta=i;return o};a.prototype._extractFromOriginalSiteOneGroup=function(e,r,i,o){var t=false,a,s,p,n="movedTiles";o=o||"tiles";if(o!=="tiles"){n="movedLinks"}p=function(e,r){s[e]=s[e]?s[e]:{};s[e].fromGroup=r;s[e].toGroup=null};if(r&&r.oHashedItemsPersonalized&&r.oPersonalizationDelta&&e&&e.groups&&e.groups[i]&&e.groups[i].payload&&Array.isArray(e.groups[i].payload[o])){a=e.groups[i].payload[o];r.oPersonalizationDelta[n]=r.oPersonalizationDelta[n]?r.oPersonalizationDelta[n]:{};s=r.oPersonalizationDelta[n];if(r.oHashedItemsPersonalized[i]){a.forEach(function(e){if(!r.oHashedItemsPersonalized[i][o][e.id]){p(e.id,i)}});t=true}else{a.forEach(function(e){p(e.id,i)});t=true}}return t};a.prototype._extractPersonalizationDeltaForTile=function(e,r,i,a){var s=t.get(["oHashedItemsOriginal",i,a,e.id,"sItemId"],r);if(!s){return false}var p={};if(e.title!==s.title){p.title=e.title}if(e.subTitle!==s.subTitle){p.subTitle=e.subTitle}if(e.info!==s.info){p.info=e.info}if(e.displayFormatHint!==s.displayFormatHint&&!(e.displayFormatHint==="default"&&!s.displayFormatHint)){p.displayFormatHint=e.displayFormatHint}if(o(p)){return false}if(!r.oPersonalizationDelta.modifiedTiles){r.oPersonalizationDelta.modifiedTiles={}}var n=r.oPersonalizationDelta.modifiedTiles;p.id=e.id;n[e.id]=p;return true};a.prototype._extractFromPersonalizedSiteOneGroup=function(r,i,o,t){var a=false,s,p,n=false,l,u=this,d="movedTiles";t=t||"tiles";if(t!=="tiles"&&t!=="links"){return a}if(t!=="tiles"){d="movedLinks"}if(i&&i.oPersonalizationDelta&&r&&r.groups&&r.groups[o]&&r.groups[o].payload&&Array.isArray(r.groups[o].payload[t])){l=r.groups[o].payload[t];i.oPersonalizationDelta[d]=i.oPersonalizationDelta[d]?i.oPersonalizationDelta[d]:{};s=i.oPersonalizationDelta[d];p=[];l.forEach(function(r,a){if(!r){return}p.push(r.id);if(i.oHashedItemsOriginal[o]&&i.oHashedItemsOriginal[o][t][r.id]){if(s[r.id]){e.error("Extract personalization failed","The Tile ID "+r.id+" is not unique in the site","PersonalizationProcessor");delete s[r.id]}if(i.oHashedItemsOriginal[o][t][r.id].iIndex!==a){n=true}u._extractPersonalizationDeltaForTile(r,i,o,t)}else{n=true;if(s[r.id]){if(s[r.id].fromGroup&&s[r.id].fromGroup!==o){if(!s[r.id].toGroup){s[r.id].toGroup=o;u._extractPersonalizationDeltaForTile(r,i,s[r.id].fromGroup,t)}}}else{s[r.id]={};s[r.id].fromGroup=null;s[r.id].toGroup=o;s[r.id].item=r}}});if(n){i.oPersonalizationDelta.groups=i.oPersonalizationDelta.groups||{};i.oPersonalizationDelta.groups[o]=i.oPersonalizationDelta.groups[o]||{};i.oPersonalizationDelta.groups[o].payload=i.oPersonalizationDelta.groups[o].payload||{};if(t==="tiles"){i.oPersonalizationDelta.groups[o].payload.tileOrder=p}else{i.oPersonalizationDelta.groups[o].payload.linkOrder=p}}a=true}return a};a.prototype._cleanupRemovedGroups=function(e,r){var i,o;if(r.removedGroups&&r&&Array.isArray(r.removedGroups)&&r.removedGroups.length>0){r.removedGroups.forEach(function(t){if(e&&e.groups&&e.groups[t]&&e.groups[t].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(a){if(Array.isArray(e.groups[t].payload[a.sType])){i=e.groups[t].payload[a.sType];i.forEach(function(e){if(r[a.sPersonalizationDeltaType]){o=r[a.sPersonalizationDeltaType][e.id];if(o&&o.fromGroup&&o.fromGroup===t&&!o.toGroup){delete r[a.sPersonalizationDeltaType][e.id]}}})}})}})}};a.prototype._setItemOrderOnSiteCollection=function(e,r){var i=true,o=e.length,t,a={},s,p,n,l;if(!Array.isArray(e)||!Array.isArray(e)||e.length!==r.length){return false}t=e.splice(0,e.length);for(s=0;s<r.length;s++){n=r[s];p=t.shift();if(p&&n===p.id){e.push(p)}else if(a[n]){e.push(a[n]);delete a[n];if(p){a[p.id]=p}}else if(p){a[p.id]=p;l=false;while(t.length>0){p=t.shift();if(n===p.id){e.push(p);l=true;break}else{a[p.id]=p}}if(!l){i=false}}}if(e.length!==o){i=false}return i};a.prototype._setItemOrderOnSiteGroupForItemType=function(e,r,i){var o=true,t,a;if(i==="tiles"||i==="links"){a=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(r.payload&&Array.isArray(r.payload[a])&&r.payload[a].length>0){if(e.payload&&Array.isArray(e.payload[i])&&e.payload[i].length>0){t=this._setItemOrderOnSiteCollection(e.payload[i],r.payload[a]);if(!t){o=false}}else{o=false}}return o};a.prototype._setItemOrderOnSite=function(e,r){var i=true,o,t=this;if(e.groups&&r.groups){Object.keys(r.groups).forEach(function(a){if(r.groups[a]&&e.groups[a]){o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"tiles");if(!o){i=false}o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"links");if(!o){i=false}}})}return i};a.prototype._applyMoveItemsWithoutOrder=function(e,r,i){var t=true,a,s,p="tileOrder",n,l,u,d=[],f=this;function y(o,t){var a=true;if(e.groups[t]&&e.groups[t].payload&&r.groups&&r.groups[t]&&r.groups[t].payload&&Array.isArray(r.groups[t].payload[p])&&r.groups[t].payload[p].length>0){if(!Array.isArray(e.groups[t].payload[i])){e.groups[t].payload[i]=[]}e.groups[t].payload[i].push(o)}else{a=false}return a}if(i==="tiles"||i==="links"){s=i==="tiles"?"movedTiles":"movedLinks";p=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(!e||!e.groups||!e.site||!e.site.payload||!Array.isArray(e.site.payload.groupsOrder)||!r){return false}if(r[s]){Object.keys(r[s]).forEach(function(p){n=r[s][p];if(n.fromGroup){if(n.toGroup){if(n.fromGroup!==n.toGroup){if(e.groups[n.fromGroup]&&e.groups[n.fromGroup].payload&&Array.isArray(e.groups[n.fromGroup].payload[i])){d=e.groups[n.fromGroup].payload[i];l=f._getItemIndex(d,p);if(l>=0){u=d.splice(l,1);a=y(u[0],n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}}else{t=false}}else if(e.groups[n.fromGroup]&&e.groups[n.fromGroup].payload&&Array.isArray(e.groups[n.fromGroup].payload[i])){d=e.groups[n.fromGroup].payload[i];l=f._getItemIndex(d,p);if(l>=0){d.splice(l,1)}else{t=false}}else{t=false}}else if(n.toGroup){if(n.item&&!o(n.item)){a=y(n.item,n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}})}return t};a.prototype._applyItemChanges=function(e,r){var i=true,o;o=this._applyMoveItemsWithoutOrder(e,r,"tiles");if(!o){i=false}o=this._applyMoveItemsWithoutOrder(e,r,"links");if(!o){i=false}if(r.groups){o=this._setItemOrderOnSite(e,r);if(!o){i=false}}return i};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CommonDataModel/SiteConverter", ["sap/base/Log"],function(e){"use strict";var i=function(){};i.prototype.convertTo=function(i,t){if(t._version==="3.0.0"||t.identification&&t.payload){switch(i){case"3.0.0":return this._convertPageToSite(t);case"3.1.0":return this._convertSiteToPage(t);default:e.error("The received version for the site/page conversion is not supported");return{}}}else{e.error("The site converter did not receive a correct page/site object.");return{}}};i.prototype._convertPageToSite=function(e){var i={groups:{},_version:"3.0.0",site:{identification:e.identification,payload:{groupsOrder:e.payload.layout.sectionOrder}}};var t=e.payload.sections;for(var o=0;o<Object.keys(t).length;o++){var r=Object.keys(t)[o];var a=e.payload.sections[r];i.groups[r]={identification:{id:a.id,title:a.title},payload:{tiles:this._convertVizPayloadObjectToArray(a)}};if("visible"in a){i.groups[r].identification.isVisible=a.visible}if("preset"in a){i.groups[r].payload.isPreset=a.preset}if("locked"in a){i.groups[r].payload.locked=a.locked}if("default"in a){i.groups[r].payload.isDefaultGroup=a.default}}return i};i.prototype._convertSiteToPage=function(e){var i={identification:e.site.identification,payload:{layout:{sectionOrder:e.site.payload.groupsOrder},sections:{}}};var t=e.groups;var o;var r;var a;for(var n=0;n<Object.keys(t).length;n++){o=Object.keys(t)[n];r=e.groups[o];a=this._createVizPayloadObject(r.payload.tiles);i.payload.sections[o]={id:r.identification.id,title:r.identification.title,layout:a.layout,viz:a.viz};var s=i.payload.sections[o];if("isVisible"in r.identification){s.visible=r.identification.isVisible}if("isPreset"in r.payload){s.preset=r.payload.isPreset}if("locked"in r.payload){s.locked=r.payload.locked}if("isDefaultGroup"in r.payload){s.default=r.payload.isDefaultGroup}}return i};i.prototype._createVizPayloadObject=function(e){var i=[];var t={};var o=e.reduce(function(e,t){i.push(t.id);e[t.id]=t;return e},{});t.layout={vizOrder:i};t.viz=o;return t};i.prototype._convertVizPayloadObjectToArray=function(e){return e.layout.vizOrder.reduce(function(i,t){i.push(e.viz[t]);return i},[])};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig", ["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(e,t,r){"use strict";var a={};var n=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var t=e.last("/core/shell/enableRecentActivity")&&e.last("/core/shell/model/currentState/showRecentActivity"),a=t&&e.last("/core/home/featuredGroup/frequentCard"),n=t&&e.last("/core/home/featuredGroup/recentCard");return r.getMockAdapterConfig(a,n)}}];a._getConfigAdapters=function(){n.forEach(function(e){e.system=new t(e.system)});return n};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig", ["sap/ushell/resources"],function(e){"use strict";var t={},a=e.i18n.getText("featuredGroup.title"),i=e.i18n.getText("recentActivities"),n=e.i18n.getText("frequentActivities"),r=e.i18n.getText("top",[4]),s={_version:"3.0.0",site:{identification:{version:"3.0",id:"c9dcc1f3-dec0-4db4-91d3-639bf38d91ce",title:"Featured Group",description:"Sample site for featured group cards"},payload:{groupsOrder:["FeaturedGroupCards"]}},catalogs:{},vizTypes:{"sap.ushell.Card":{"sap.app":{id:"sap.ushell.Card",type:"card",applicationVersion:{version:"1.0.0"}},"sap.ui":{deviceTypes:{desktop:true,tablet:true,phone:true}}}},visualizations:{FrequentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"FrequentCard",type:"card"},"sap.card":{extension:"module:sap/ushell/ui/cards/FrequentActivitiesExtension",data:{extension:{method:"getData"}},type:"List",header:{title:n,status:{text:r},actions:[{type:"Navigation",parameters:{openUI:"FrequentActivities"}}]},content:{maxItems:4,item:{title:{value:"{Name}"},description:{value:"{Description}"},highlight:"{Highlight}",icon:{src:"{Icon}",label:"icon"},actions:[{type:"Navigation",enabled:"{Enabled}",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}},RecentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"RecentCard",type:"card"},"sap.card":{extension:"module:sap/ushell/ui/cards/RecentActivitiesExtension",type:"List",data:{extension:{method:"getData"}},header:{title:i,status:{text:r},actions:[{type:"Navigation",parameters:{openUI:"RecentActivities"}}]},content:{maxItems:4,item:{title:{label:"{{title_label}}",value:"{Name}"},description:{label:"{{description_label}}",value:"{Description}"},icon:{src:"{Icon}",label:"icon"},highlight:"{Highlight}",actions:[{type:"Navigation",enabled:"{Enabled}",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}}},applications:{},groups:{FeaturedGroupCards:{identification:{id:"FeaturedGroupCards",title:a},contentProvider:"featured",isFeatured:true,payload:{locked:true,tiles:[{id:"frequentCard",vizId:"FrequentCard",contentProvider:"featured"},{id:"recentCard",vizId:"RecentCard",contentProvider:"featured"}],links:[],groups:[]}}},systemAliases:{}};t.getMockAdapterConfig=function(e,t){var a=s.groups.FeaturedGroupCards.payload.tiles,i=s.visualizations;for(var n=0;n<a.length;n++){var r=a[n],p=!e&&r.vizId==="FrequentCard",o=!t&&r.vizId==="RecentCard";if(p||o){delete i[r.vizId];a.splice(n,1);n--}}return s};return t},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CrossApplicationNavigation/utils", ["sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,r,a){"use strict";var n={};n.extractGetLinksParameterOptions=function(e){return n.parseGetLinksParameters(e).filter(function(e){return Object.keys(e.options).length>0}).map(function(e){return{name:e.name,options:e.options}})};n.extractGetLinksParameterDefinition=function(e){return n.parseGetLinksParameters(e).reduce(function(e,t){e[t.name]=t.value;return e},{})};n.parseGetLinksParameters=function(e){if(Object.prototype.toString.apply(e)!=="[object Object]"){return[]}var t=JSON.parse(JSON.stringify(e));return Object.keys(t).map(function(e){var r=t[e];var a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete t[e].value;a=t[e]}return{name:e,value:r,options:a}})};n.safeParseToObject=function(e){try{return JSON.parse(e)}catch(t){r.error("Cannot parse the given string to object",e)}return null};n.createAppStateFromData=function(e){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.createAppStateFromData'. Please use 'createAppStateFromDataAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var t=sap.ushell.Container.getService("AppState");var a=t.createEmptyAppState(null);a.setData(e);a.save();return a.getKey()};n.createAppStateFromDataAsync=function(e){return sap.ushell.Container.getServiceAsync("AppState").then(function(t){var r=t.createEmptyAppState(null);r.setData(e);r.save();return r.getKey()})};n.extractParameter=function(i,s){var c;var p=null;if(typeof i==="string"){if(i.indexOf(s+"=")===-1){return{intent:i,data:null}}var o=a.parseShellHash(i);if(!o){return{intent:i,data:null}}p=o.params[s];delete o.params[s];c=a.constructShellHash(o);return{intent:c,data:p}}if(e(i)){var u=t.get("target.shellHash",i);if(typeof u==="string"){var l=n.extractParameter(u,s);i.target.shellHash=l.intent;return{intent:i,data:l.data}}var f=i.params;if(f&&f[s]){const e=f[s];p=typeof e==="string"?[e]:e;delete f[s]}return{intent:i,data:p}}r.error("Invalid input parameter","expected string or object");return{intent:i}};n.addXAppStateFromParameter=function(e,t){var r=n.extractParameter(e,t);var a=r.intent;var i=r.data&&r.data[0];if(!i){return}var s=n.safeParseToObject(i);if(!s){return}var c=n.createAppStateFromData(s);n.injectParameter(a,"sap-xapp-state",c)};n.addXAppStateFromParameterAsync=function(e,t){var r=n.extractParameter(e,t);var a=r.intent;var i=r.data&&r.data[0];if(!i){return Promise.resolve()}var s=n.safeParseToObject(i);if(!s){return Promise.resolve()}return n.createAppStateFromDataAsync(s).then(function(e){n.injectParameter(a,"sap-xapp-state",e)})};n.injectParameter=function(e,r,i){if(typeof e==="string"){var s=a.parseShellHash(e);s.params[r]=i;return a.constructShellHash(s)}if(Object.prototype.toString.apply(e)==="[object Object]"){var c=t.get("target.shellHash",e);if(typeof c==="string"){e.target.shellHash=n.injectParameter(c,r,i);return e}if(!e.params){e.params={}}e.params[r]=i}return e};n._injectParameters=function(e){var t=e.inject;var r=e.injectEmptyString||{};var a=e.type;var i=e.args;function s(e,t){return e||e===""&&t}if(a.isPlainObject(i)){if(i.target&&i.target.shellHash){if(typeof i.target.shellHash==="string"){i.target.shellHash=n._injectParameters({inject:t,injectEmptyString:r,type:e.type,args:i.target.shellHash})}return i}var c=Object.keys(t).reduce(function(e,a){var n=t[a];var i=r[a]===true;if(s(n,i)&&typeof e==="string"){var c=new RegExp("[&]"+a);var p=!c.test(e);if(p){var o=e?"&":"";e+=o+a+"="+n}}else if(s(n,i)&&!e.hasOwnProperty(a)){e[a]=n}return e},i.params||{});if(c&&Object.keys(c).length>0){i.params=c}return i}var p=i;if(p){Object.keys(t).forEach(function(e){var a=t[e];var n=r[e]===true;var i=new RegExp("[?&]"+e);var c=!i.test(p);if(s(a,n)&&c){var o=p.indexOf("?")>-1?"&":"?";p+=o+e+"="+a}})}return p};n.injectStickyParameters=function(e){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.injectStickyParameters'. Please use 'injectStickyParametersAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var t=sap.ushell.Container.getService("AppLifeCycle");return n._injectStickyParameters(e,t)};n.injectStickyParametersAsync=function(e){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){return n._injectStickyParameters(e,t)})};n._injectStickyParameters=function(e,t){if(!t||Object.keys(t).length<=0){return e.args}var r=t.getCurrentApplication();if(!r||Object.keys(r).length<=0){return e.args}var a=e.appLifeCycle;var i=e.technicalParameters;var s=i.getParameters({sticky:true}).reduce(function(e,t){var n=t.name;var s=r.componentInstance;var c=r.applicationType;var p;if(c==="UI5"){p={}}else{p=a.getCurrentApplication().container}var o=i.getParameterValueSync(n,s,p,c);var u=t.stickyName||n;e[u]=o;return e},{});var c={type:e.type,inject:s,args:e.args};return n._injectParameters(c)};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_MessageBroker/MessageBrokerEngine", ["sap/base/Log","sap/base/util/deepExtend","sap/ushell/components/applicationIntegration/application/PostMessageUtils"],function(e,s,n){"use strict";var r=true,t={},i={},a={},l={};t[window.location.origin]=true;var c=function(){this.setEnabled=function(e){r=e};this.processPostMessage=function(s){if(!r){return Promise.reject()}var n=s.oMessageData,t=n.body,i=s.oMessage,a=i.origin,l=i.source;t.requestId=n.request_id;if(!l){var c="Missing iframe object in PostMessage request";e.error(c,null,"sap.ushell.services.MessageBroker");return Promise.reject(c)}return this._handlePostMessageRequest(t,l,a)};this.connect=function(s){var n;if(!r){return Promise.reject()}if(typeof s!=="string"||!s.length){n="Missing required parameter client id"}else if(a[s]){n="Client is already connected"}else{a[s]=true;return Promise.resolve()}e.error(n,null,"sap.ushell.services.MessageBroker");return Promise.reject(n)};this.disconnect=function(s){var n;if(!r){return Promise.reject()}if(typeof s!=="string"||!s.length){n="Missing required parameter client id"}else if(!a[s]){n="Client is already disconnected"}else{for(var t in i){var c=i[t];for(var o in c){var u=c[o];if(u.clientId===s){c.splice(o,1);break}}}if(l[s]&&l[s].channels.length){this._emitEvent("clientUnsubscribed",s,l[s].channels);delete l[s]}delete a[s];return Promise.resolve()}e.error(n,null,"sap.ushell.services.MessageBroker");return Promise.reject(n)};this.subscribe=function(s,t,c,o,u,d){var h,f="clientSubscribed",g=[],v=false;if(!r){return Promise.reject()}if(typeof s!=="string"||!s.length||!t.length||typeof u!=="object"&&(typeof c!=="function"||typeof o!=="function")){h="Missing required parameter(s)"}else if(!a[s]){h="Client is not connected"}else{for(var p in t){var m=t[p];var b={clientId:s,subscribedChannels:t,messageCallback:c,clientConnectionCallback:o,iframe:u||{},origin:d||"",isUI5:!u};if(!i[m.channelId]){i[m.channelId]=[]}var I=i[m.channelId].find(function(e){return e.clientId===s});if(!I){i[m.channelId].push(b)}if(l[s]){var M=l[s].channels.find(function(e){return e.channelId===m.channelId});if(!M){l[s].channels.push(m)}}}if(!l[s]){v=true;var P={clientId:s,channels:t};l[s]=P;g=Object.values(l).filter(function(e){return e.clientId!==s})}if(Object.keys(l).length>1){this._emitEvent(f,s,t)}if(v){setTimeout(function(){if(g.length){g.forEach(function(e){if(!u){o(f,e.clientId,e.channels)}else{var s={clientId:e.clientId,channels:e.channels,channelId:"sap.ushell.MessageBroker",messageName:f};var r=this._buildPostMessageObject("event",s);n.postMessageToIframeObject(r,u,d,false)}}.bind(this))}}.bind(this),1e3)}return Promise.resolve()}e.error(h,null,"sap.ushell.services.MessageBroker");return Promise.reject(h)};this.unsubscribe=function(s,n){var t;if(!r){return Promise.reject()}if(typeof s!=="string"||!s.length||!Array.isArray(n)||!n.length){t="Missing required parameter(s)";e.error(t,null,"sap.ushell.services.MessageBroker");return Promise.reject(t)}if(!a[s]){t="Client is not connected";e.error(t,null,"sap.ushell.services.MessageBroker");return Promise.reject(t)}for(var c in n){var o=n[c];if(i[o.channelId]){var u=i[o.channelId];for(var d in u){var h=u[d];if(h.clientId===s){var f=l[s].channels;l[s].channels=f.filter(function(e){return e.channelId!==o.channelId});u.splice(d,1);break}}}else{var g="Unknown channel Id: "+o.channelId;e.warning(g,null,"sap.ushell.services.MessageBroker")}}this._emitEvent("clientUnsubscribed",s,n);return Promise.resolve()};this.publish=function(s,n,t,l,c,o){var u,d=[];if(!r){return Promise.reject()}if(!a[n]){u="Client is not connected";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}if(!i[s]){u="Unknown channel Id: "+s;e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}var h=i[s].find(function(e){return e.clientId===n});if(!h){u="Client is not subscribed to the provided channel";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}for(var f in c){var g=c[f];if(g==="*"){d=i[s].concat();break}else{var v=i[s].find(function(e){return e.clientId===g});if(v){d.push(this._deepCopy(v))}}}if(d.length){this._sendMessage(d,s,t,l,n,o);return Promise.resolve()}u="Target client(s) not found in the provided channel";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)};this.addAcceptedOrigin=function(s){if(!r){return}if(typeof s==="string"&&s.length>0){t[s]=true;if(s.startsWith("https:")&&s.endsWith(":443")){t[s.substring(0,s.length-4)]=true}}else{e.warning("Missing required parameter sOrigin",null,"sap.ushell.services.MessageBroker")}};this.removeAcceptedOrigin=function(e){if(!r){return}delete t[e]};this.getAcceptedOrigins=function(){if(!r){return}return Object.keys(t)};this.getSubscribedClients=function(){if(!r){return}return this._deepCopy(i)};this._emitEvent=function(e,s,r){var t={};for(var a in i){var l=i[a];for(var c in l){var o=l[c];if(o.clientId!==s&&!t[o.clientId]){var u={clientId:s,channels:r};if(o.isUI5!==false){o.clientConnectionCallback(e,s,r)}else{u.channelId="sap.ushell.MessageBroker";u.messageName=e;var d=this._buildPostMessageObject("event",u);n.postMessageToIframeObject(d,o.iframe,o.origin,false)}t[o.clientId]=true}}}};this._sendMessage=function(e,s,r,t,i,a){for(var l in e){var c=e[l];if(c.clientId!==i){if(c.isUI5!==false){c.messageCallback(i,s,t,a)}else{var o={clientId:i,channelId:s,messageName:t,data:a};var u=this._buildPostMessageObject("request",o);n.postMessageToIframeObject(u,c.iframe,c.origin,false)}}}};this._callApi=function(e,s){return this[e].apply(this,s)};this._handlePostMessageRequest=function(e,s,r){return new Promise(function(t,i){var a=e.clientId,l=e.channelId,c=e.requestId,o=e.messageName,u=e.subscribedChannels,d=e.targetClientIds,h=e.data;var f={connect:[a],disconnect:[a],subscribe:[a,u,null,null,s,r],unsubscribe:[a,u],publish:[l,a,c,o,d,h]};var g={channelId:l,clientId:a,messageName:o,requestId:c};var v=this._buildPostMessageObject("response",g);o=f[o]?o:"publish";this._callApi(o,f[o]).then(function(){if(o!=="publish"){v.body.status="accepted";n.postMessageToIframeObject(v,s,r,false)}t({_noresponse_:true})}).catch(function(e){i(e)})}.bind(this))};this._buildPostMessageObject=function(e,s){var r="sap.ushell.services.MessageBroker",t={request:{channelId:s.channelId,clientId:s.clientId,messageName:s.messageName},response:{channelId:s.channelId,clientId:s.clientId,correlationMessageId:s.requestId,messageName:s.messageName},event:{channelId:s.channelId,clientId:s.clientId,messageName:s.messageName}};switch(e){case"event":t.event.channels=s.channels;break;case"request":if(s.data){t[e].data=s.data}break}var i={request:[r,t.request],response:[r,s.requestId,t.response,true],event:[r,t.event]};var a=e==="response"?n.createPostMessageResponse:n.createPostMessageRequest;return a.apply(this,i[e])};this._buildFunctionName=function(e,s){s=s.charAt(0).toUpperCase()+s.substring(1);return e+s};this._deepCopy=function(e){return s(e)}};return new c},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/ContextContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,i,o,jQuery,r){"use strict";function a(){this._init.apply(this,arguments)}a.prototype._init=function(n,i,r,a,s){this._oService=n;this._sContainerKey=r;this._oAdapterContainer={};this._oScope=a||t.adjustScope(a);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var p;if(!(s instanceof o)&&s!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined")}if(s&&s.getMetadata&&s.getMetadata().getComponentName){p=s.getMetadata().getComponentName()}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=i.getAdapterContainer(this._sContainerKey,this._oScope,p);return this};a.prototype.getValidity=function(){return this._oScope.validity};a.prototype._getValidity=function(){return this._oScope.validity};a.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new e.Map};a.prototype.load=function(){var t={},n,i=this;t=new jQuery.Deferred;if(!this._sContainerKey){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this.clear();n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,t);n.always(function(){i._oAdapterContainer.load().fail(function(){t.reject()}).done(function(){i._copyFromAdapter();if(i._isExpired()){i.clear()}t.resolve()})});return t.promise()};a.prototype._copyFromAdapter=function(){var e=this,t;t=e._oAdapterContainer.getItemKeys().splice(0);t.forEach(function(t){e._oItemMap.put(t,JSON.stringify(e._oAdapterContainer.getItemValue(t)))});this._aLoadedItemKeys=e._oItemMap.keys().splice(0)};a.prototype._isExpired=function(){var e,t,o;if(this._getValidity()===Infinity||this._getValidity()===0){return false}t=this._getItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);e=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});o=e.format(this._getNow(),true);return t&&o>t};a.prototype._getNow=function(){return new Date};a.prototype._copyToAdapterUpdatingValidity=function(){var e=[],o=[],r=this,a,s,p,_;if(this._clear){e=this._oAdapterContainer.getItemKeys().splice(0);e.forEach(function(e){r._oAdapterContainer.delItem(e)});this._clear=false}if(this._getValidity()===Infinity||this._getValidity()===0){this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE)}else{s=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});a=this._getNow();_=s.format(a,true);p=s.format(new Date(a.getTime()+this._getValidity()*6e4),true);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE,p);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE,_)}e=this._oItemMap.keys();e.forEach(function(e){r._oAdapterContainer.setItemValue(e,t.cloneToObject(r._oItemMap.get(e)))});o=this._aLoadedItemKeys.filter(function(t){return!(e.indexOf(t)>-1)});o.forEach(function(e){r._oAdapterContainer.delItem(e)})};a.prototype.save=function(){var e,t,n=this;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,e);t.always(function(){try{n._oAdapterContainer.save().fail(function(){e.reject()}).done(function(){e.resolve()})}catch(t){e.reject()}});return e.promise()};a.prototype.saveDeferred=function(e){var t,n,i=this;this._copyToAdapterUpdatingValidity();t=new jQuery.Deferred;n=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,t);function o(){n.always(function(){try{i._oAdapterContainer.save().fail(function(){t.reject()}).done(function(){t.resolve()})}catch(e){t.reject()}})}t._sapFnSave=o;t._sapTimeoutId=setTimeout(o,e);return t.promise()};a.prototype.flush=function(){var e,t;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);t.fail(function(){e.reject()}).done(function(){e.resolve()});return e.promise()};a.prototype.getItemKeys=function(){var e=this._oItemMap.keys().filter(function(e){return e.indexOf(n.S_ITEM_PREFIX)===0});return e.map(function(e){return e.replace(n.S_ITEM_PREFIX,"","")})};a.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};a.prototype.getItemValue=function(e){return this._getItemValueInternal(n.S_ITEM_PREFIX,e)};a.prototype._getItemValueInternal=function(e,n){if(typeof n!=="string"||typeof e!=="string"){return undefined}return t.cloneToObject(this._oItemMap.get(e+n))};a.prototype.containsItem=function(e){if(typeof e!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+e)};a.prototype.setItemValue=function(e,t){this._setItemValueInternal(n.S_ITEM_PREFIX,e,t)};a.prototype._setItemValueInternal=function(t,n,i){if(typeof n!=="string"||typeof t!=="string"){throw new e.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ")}if(n.length>40){r.error('Personalization Service item key/variant set name ("'+n+'") should be less than 40 characters [current :'+n.length+"]")}this._oItemMap.put(t+n,JSON.stringify(i))};a.prototype.delItem=function(e){this._delItemInternal(n.S_ITEM_PREFIX,e)};a.prototype._delItemInternal=function(e,t){if(typeof t!=="string"){return undefined}if(typeof e!=="string"){return undefined}this._oItemMap.remove(e+t)};a.prototype.getKey=function(){return this._sContainerKey.substring(n.S_CONTAINER_PREFIX.length)};a.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=function(){var n={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(t){n[t]=function(t){throw new e.Error("Function "+t+" can't be called on unmodifiable container","ContextContainer"," ")}.bind(undefined,t)});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer"].forEach(function(e){if(t[e]){n[e]=t[e].bind(t)}});return n}()}return this._oUnmodifiableContainer};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet","sap/ui/thirdparty/jquery"],function(t,e,n,r,jQuery){"use strict";function i(e,n){this._sContainerKey=n;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var r={},i=this;this._init();r=new jQuery.Deferred;if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=e.getAdapterContainer(this._sContainerKey);this.load().fail(function(){r.reject()}).done(function(){r.resolve(i)});return r.promise()}i.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new t.Map;this._oItemMap=new t.Map};i.prototype.load=function(){var i={},a=[],o=[],s=[],p=[],u=this;function _(t){var r=[],i=[];r=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)!==0});if(r.length===0){return t}i=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)===0});r.forEach(function(t){var r={},a="";a=n.S_ITEM_PREFIX+t;r=e.clone(u._oAdapterContainer.getItemValue(t));u._oAdapterContainer.setItemValue(a,r);u._oAdapterContainer.delItem(t);if(i&&Array.prototype.indexOf.call(i,a)===-1){i.push(a)}});return i}i=new jQuery.Deferred;if(!this._sContainerKey){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._init();this._oAdapterContainer.load().fail(function(){i.reject()}).done(function(){a=u._oAdapterContainer.getItemKeys().splice(0);o=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)===0});o.forEach(function(t){var e={};e=new r(t,u._oAdapterContainer);u._oVariantSetMap.put(t,e)});s=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)!==0});p=_(s);p.forEach(function(t){u._oItemMap.put(t,e.clone(u._oAdapterContainer.getItemValue(t)))});u._aLoadedVariantSetKeys=u._oVariantSetMap.keys().splice(0);u._aLoadedItemKeys=u._oItemMap.keys().splice(0);i.resolve()});return i.promise()};i.prototype.save=function(){var t,e;this._serializeVariantSets();this._serializeItems();t=new jQuery.Deferred;function n(){t.resolve()}function r(){t.reject()}try{e=this._oAdapterContainer.save();e.fail(r);e.done(n)}catch(e){t.reject()}return t.promise()};i.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(t){return t.replace(n.S_ITEM_PREFIX,"","")})};i.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(n.S_ITEM_PREFIX+t)};i.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+t)};i.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}this._oItemMap.put(n.S_ITEM_PREFIX+e,r)};i.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}if(this.containsItem(t)){this._oItemMap.remove(n.S_ITEM_PREFIX+t)}};i.prototype._serializeItems=function(){var t=[],n=[],r=this;t=this._oItemMap.keys();t.forEach(function(t){r._oAdapterContainer.setItemValue(t,e.clone(r._oItemMap.get(t)))});n=this._aLoadedItemKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.getVariantSetKeys=function(){var t=[],e=[];e=this._oVariantSetMap.keys();t=e.map(function(t){return t.replace(n.S_VARIANT_PREFIX,"","")});return t};i.prototype.containsVariantSet=function(t){return this._oVariantSetMap.containsKey(n.S_VARIANT_PREFIX+t)};i.prototype.getVariantSet=function(t){var e,r={};e=n.S_VARIANT_PREFIX+t;r=this._oVariantSetMap.get(e);return r};i.prototype.addVariantSet=function(e){var i={},a={},o="";if(this.containsVariantSet(e)){throw new t.Error("Container already contains a variant set with key '"+e+"': sap.ushell.services.Personalization"," ")}o=n.S_VARIANT_PREFIX+e;i={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(o,i);a=new r(o,this._oAdapterContainer);this._oVariantSetMap.put(o,a);return a};i.prototype._serializeVariantSets=function(){var t=[],n=[],r=this;t=this._oVariantSetMap.keys();t.forEach(function(t){var n={},i={};n=r._oVariantSetMap.get(t);i=n._serialize();r._oAdapterContainer.setItemValue(t,e.clone(i))});n=this._aLoadedVariantSetKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.delVariantSet=function(t){var e="";e=n.S_VARIANT_PREFIX+t;this._oVariantSetMap.remove(e);return this._oAdapterContainer.delItem(e)};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariant", ["sap/ushell/utils"],function(t){"use strict";function e(e,r,n){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(n&&typeof n!=="object"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantKey=e;this._oVariantName=r;this._oItemMap=new t.Map;this._oItemMap.entries=n||{}}e.prototype.getVariantKey=function(){return this._oVariantKey};e.prototype.getVariantName=function(){return this._oVariantName};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(t)};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}return this._oItemMap.put(e,r)};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(t)};e.prototype.getItemKeys=function(){return this._oItemMap.keys()};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.remove(t)};e.prototype._serialize=function(){var t=[],e={},r={},n=this;e.name=this.getVariantName();t=this._oItemMap.keys();t.forEach(function(t){r[t]=n.getItemValue(t)});e.variantData=r;return e};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(t,a,r){"use strict";function e(e,n){var i,s,o,p,u;this._sVariantSetKey=e;this._oAdapterContainer=n;this._oVariantNameMap=new t.Map;this._oVariantMap=new t.Map;i=a.clone(this._oAdapterContainer.getItemValue(e));if(i.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=i.currentVariant}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(i.hasOwnProperty("variants")){for(s in i.variants){if(i.variants.hasOwnProperty(s)){o=i.variants[s].name;p=i.variants[s].variantData;if(this._oVariantNameMap.containsKey(o)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{this._oVariantNameMap.put(o,s);u=new r(s,o,p);this._oVariantMap.put(s,u)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}e.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey};e.prototype.setCurrentVariantKey=function(t){this._sCurrentVariantKey=t};e.prototype.getVariantKeys=function(){return this._oVariantMap.keys()};e.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries))};e.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.get(t)};e.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}return this._oVariantNameMap.get(t)};e.prototype.containsVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.containsKey(t)};e.prototype.addVariant=function(a){var e=0,n="",i={};e=parseInt(this._oVariantMap.keys().sort(function(t,a){return t-a}).reverse()[0],10);n=isNaN(e)?"0":(e+1).toString();if(this._oVariantMap.containsKey(n)){throw new t.Error("Variant key '"+n+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantNameMap.containsKey(a)){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(a)+"' New key: '"+n+"') ': sap.ushell.services.Personalization"," ")}i=new r(n,a);this._oVariantMap.put(n,i);this._oVariantNameMap.put(a,n);return i};e.prototype._serialize=function(){var t=[],a={},r={},e=this;a.currentVariant=this._sCurrentVariantKey;t=this.getVariantKeys();t.forEach(function(t){var a={};a=e._oVariantMap.get(t);r[t]=a._serialize()});a.variants=r;return a};e.prototype.delVariant=function(t){var a=this._oVariantMap.get(t);if(a){this._oVariantNameMap.remove(a.getVariantName());this._oVariantMap.remove(t)}};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Personalizer", ["sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,jQuery,t){"use strict";function n(t,n,r,i,o){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=n;this._oService=t;this._oScope=i;this._oComponent=o;if(!r||!r.container||!r.item||typeof r.container!=="string"||typeof r.item!=="string"){throw new e.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ")}this._sPersContainer=r.container;this._sPersItem=r.item}n.prototype._getContainer=function(e){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(e,this._oScope,this._oComponent)}return this._oGetContainerPromise};n.prototype.getPersData=function(){var e={},n=this;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){e.resolve(t.getItemValue(n._sPersItem))});e.fail(function(){t.error("Failed to get personalization data for Personalizer container: "+n._sPersContainer)});return e.promise()};n.prototype.setPersData=function(e){var n={},r=this;n=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){n.reject()}).done(function(t){t.setItemValue(r._sPersItem,e);t.save().fail(function(){n.reject()}).done(function(){n.resolve()})});n.fail(function(){t.error("Fail to set Personalization data for Personalizer container: "+r._sPersContainer)});return n.promise()};n.prototype.delPersData=function(){var e={},n=this,r;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){t.delItem(n._sPersItem);t.save().fail(function(){e.reject()}).done(function(){e.resolve()})});r=e.promise();r.fail(function(){t.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer)});return r};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/TransientPersonalizer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this._oValue=undefined}e.prototype.getPersData=function(){var e;e=new jQuery.Deferred;e.resolve(this._oValue);return e.promise()};e.prototype.setPersData=function(e){var t;t=new jQuery.Deferred;this._oValue=e;t.resolve();return t.promise()};e.prototype.delPersData=function(){var e;e=new jQuery.Deferred;this._oValue=undefined;e.resolve();return e.promise()};e.prototype.setValue=function(e){this._oValue=e};e.prototype.getValue=function(){return this._oValue};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Variant", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(t,a){"use strict";function e(a,e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantSet=a;this._sVariantKey=e;this._sVariantName=r}e.prototype.getVariantKey=function(){return this._sVariantKey};e.prototype.getVariantName=function(){return this._sVariantName};e.prototype.setVariantName=function(a){var e=this._oVariantSet._getVariantSet(),r;if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantSet.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant with name '"+a+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(e,"variants")&&Object.prototype.hasOwnProperty.call(e.variants,this._sVariantKey)){r=e.variants[this._sVariantKey];r.name=a;this._sVariantName=a;this._oVariantSet._serialize()}else{throw new t.Error("Variant does not longer exist"," ")}};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}var e=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;if(!Object.prototype.hasOwnProperty.call(e,t)){return undefined}return a.clone(e[t])};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}var i,n=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!n){throw new t.Error("Variant does not longer exist"," ")}if(!n.variantData){n.variantData={}}i=n.variantData;i[e]=a.clone(r);this._oVariantSet._serialize()};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,t)};e.prototype.getItemKeys=function(){var t=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,a,e=[];for(a in t){if(Object.prototype.hasOwnProperty.call(t,a)){e.push(a)}}e.sort();return e};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[t];this._oVariantSet._serialize()};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/VariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/Variant"],function(t,a,e){"use strict";function r(e,r){var n,i,s;var o=new t.Map;this._oContextContainer=r;this._sVariantSetKey=e;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(n in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,n)){i=this._oVariantSetData.variants[n].name;s=this._oVariantSetData.variants[n].variantData;if(o.containsKey(i)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{if(typeof n!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof i!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(s&&typeof s!=="object"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}o.put(i,n)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}r.prototype._getVariantSet=function(){return this._oVariantSetData};r.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};r.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};r.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};r.prototype.getVariantKeys=function(){var a=new t.Map,e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){a.put(r,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.keys()};r.prototype.getVariantNamesAndKeys=function(){var a=new t.Map,e=new t.Map,r=this._getVariantSet(this._sVariantSetKey),n,i;if(Object.prototype.hasOwnProperty.call(r,"variants")){for(n in r.variants){if(Object.prototype.hasOwnProperty.call(r.variants,n)){i=r.variants[n].name;if(a.containsKey(i)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{a.put(i,n)}e.put(n,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.entries};r.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}var a=this._getVariantSet(this._sVariantSetKey),r,n,i;if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)){r=a.variants[t].name;i=a.variants[t].variantData;n=new e(this,t,r,i);return n}return undefined};r.prototype.getVariantKeyByName=function(a){if(typeof a!=="string"){return undefined}var e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){if(a===e.variants[r].name){return r}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return undefined};r.prototype.containsVariant=function(t){var a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)};r.prototype.addVariant=function(a){var r=[],n=0,i="",s={};r=this.getVariantKeys();n=parseInt(r.sort(function(t,a){return t-a}).reverse()[0],10);i=isNaN(n)?"0":(n+1).toString();if(r.indexOf(i)>=0){throw new t.Error("Variant key '"+i+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(a)+"' New key: '"+i+"') ': sap.ushell.services.Personalization"," ")}s=new e(this,i,a);this._getVariantSet(this._sVariantSetKey).variants[i]={name:a,variantData:{}};this._serialize();return s};r.prototype.delVariant=function(t){var a;if(typeof t!=="string"){return undefined}a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants", [],function(){"use strict";return{keyCategory:{FIXED_KEY:"FIXED_KEY",GENERATED_KEY:"GENERATED_KEY"},writeFrequency:{HIGH:"HIGH",LOW:"LOW"}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants.private", [],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/utils", ["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,jQuery,r){"use strict";function n(e,t){var r;for(r in t){if(typeof t[r]!=="function"){if(t.hasOwnProperty(r)){if(r===e){return true}}}}return false}function i(e){if(e.length>40){r.error('Personalization Service container key ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}return t.S_CONTAINER_PREFIX+e}function a(e,t,r){if(e&&e.validity===0){return t}return r}function u(t){var r={validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false};if(t){r.validity=t.validity;if(r.validity===null||r.validity===undefined||typeof r.validity!=="number"){r.validity=Infinity}if(!(typeof r.validity==="number"&&(r.validity>=0&&r.validity<1e3||r.validity===Infinity))){r.liftime=Infinity}r.keyCategory=n(t.keyCategory,e.keyCategory)?t.keyCategory:r.keyCategory;r.writeFrequency=n(t.writeFrequency,e.writeFrequency)?t.writeFrequency:r.writeFrequency;if(typeof t.clientStorageAllowed==="boolean"&&(t.clientStorageAllowed===true||t.clientStorageAllowed===false)){r.clientStorageAllowed=t.clientStorageAllowed}}return r}function l(e){if(!e.lazy){return jQuery.when(e.instance)}try{return e.create.call(null)}catch(e){return(new jQuery.Deferred).reject(e).promise()}}function o(e){if(!e){return false}var t=e.getManifestObject();if(!t){return false}var r=t.getEntry("/sap.ui5/appVariantId");if(!r){return false}var n=t.getComponentName();if(r===n){return false}return true}function f(e){if(e===undefined){return undefined}try{return JSON.parse(e)}catch(e){return undefined}}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}return{adjustScope:u,cloneToObject:f,clone:y,addContainerPrefix:i,pickAdapter:a,isAppVariant:o,loadAdapter:l}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/Extensions", ["sap/ushell/services/_PluginManager/HeaderExtensions","sap/ushell/services/_PluginManager/MenuExtensions"],function(e,n){"use strict";var r={Header:i,Menu:s};function s(e){return Promise.resolve(n(e))}function i(){return Promise.resolve(e)}function u(e,n){var s=r[n];if(!s){return Promise.reject("Unsupported extension: '"+n+"'")}return s(e)}return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/HeaderExtensions", ["sap/ushell/EventHub"],function(e){"use strict";function t(t,n,r){e.emit("setHeaderCentralAreaElement",{id:t,currentState:n,states:r})}return{setHeaderCentralAreaElement:t}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/MenuExtensions", [],function(){"use strict";function n(n){return function e(r){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getEntryProvider(n,r)})}}return function(e){return{getMenuEntryProvider:n(e)}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Ui5ComponentLoader/utils", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/UriParameters","sap/ui/core/Component","sap/ui/core/util/AsyncHintsHelper","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(e,a,t,r,n,jQuery,s,i){"use strict";let o=["sap.ui.unified"];(function(){o=["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]})();function p(e,a){var t=new jQuery.Deferred;e.componentData=a;if(e.manifest===undefined){e.manifest=false}else if(a.technicalParameters&&a.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var n=new s(e.manifest);n.addQuery("version",a.technicalParameters["sap-ui-fl-version"][0]);e.manifest=n.toString()}}r.create(e).then(function(e){t.resolve(e)},function(e){t.reject(e)});return t.promise()}function u(e){var a=true;if(e.hasOwnProperty("loadCoreExt")){a=e.loadCoreExt}return a}function c(e,a){var t=true;if(e.hasOwnProperty("loadDefaultDependencies")){t=e.loadDefaultDependencies}if(a&&a.hasOwnProperty("loadDefaultDependencies")){t=t&&a.loadDefaultDependencies}return t}function l(e){var a=e.semanticObject||null;var t=e.action||null;if(!a||!t){return null}return"application-"+a+"-"+t+"-component"}function f(e){return e&&e.indexOf("?")>=0}function d(e){var a=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(a,"")}function m(e){if(!e){return e}var a=e.indexOf("?");if(a>=0){return e.slice(0,a)}return e}function y(a,t,r,n,s){var i="The issue is most likely caused by application "+a,o="Failed to load UI5 component with properties: '"+s+"'.";if(n){o+=" Error likely caused by:\n"+n}else{o+=" Error: '"+t+"'"}if(r==="parsererror"){i+=", as one or more of its resources could not be parsed"}i+=". Please create a support incident and assign it to the support component of the respective application.";e.error(i,o,a)}function h(e){var a=t.fromURL(e||window.location.href).mParams,r=a["sap-xapp-state"],n=a["sap-xapp-state-data"],s;delete a["sap-xapp-state"];delete a["sap-xapp-state-data"];s={startupParameters:a};if(n){s["sap-xapp-state"]=n}if(r){s["sap-xapp-state"]=r}return s}function v(a,t){if(!Array.isArray(t)){return}t.forEach(function(t){var r=String.prototype.toLowerCase.call(t.severity||"");r=["trace","debug","info","warning","error","fatal"].indexOf(r)!==-1?r:"error";e[r](t.text,t.details,a)})}function x(a){if(!Array.isArray(a)){e.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(a.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(t){e.error("Ui5ComponentLoader: failed to load bundle resources: ["+a.join(", ")+"]");return Promise.reject(t)})}function P(e,t,r,s,i,p,u,c,l){var f=a({},i);if(!f.asyncHints){f.asyncHints=t?{libs:o}:{}}if(e){f.asyncHints.preloadBundles=f.asyncHints.preloadBundles||[];f.asyncHints.preloadBundles=f.asyncHints.preloadBundles.concat(l)}if(s){f.asyncHints.waitFor=s}if(!f.name){f.name=p}if(u){f.url=m(u)}if(c){f.id=c}if(r&&f.asyncHints){n.modifyUrls(f.asyncHints,d)}return f}function D(e,t,r,n){var s=a({startupParameters:{}},e);if(r){s.config=r}if(n){s.technicalParameters=n}if(f(t)){var i=h(t);s.startupParameters=i.startupParameters;if(i["sap-xapp-state-data"]){s["sap-xapp-state"]=i["sap-xapp-state-data"]}if(i["sap-xapp-state"]){s["sap-xapp-state"]=i["sap-xapp-state"]}}return s}function g(e){o=e}return{constructAppComponentId:l,getParameterMap:h,logAnyApplicationDependenciesMessages:v,logInstantiateComponentError:y,shouldLoadCoreExt:u,shouldLoadDefaultDependencies:c,urlHasParameters:f,removeParametersFromUrl:m,createUi5Component:p,loadBundle:x,createComponentProperties:P,createComponentData:D,_setDefaultDependencies:g}},false);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/RecentActivity", ["sap/ushell/services/_UserRecents/UserRecentsBase","sap/base/Log","sap/base/util/extend","sap/ui/Device","sap/ushell/EventHub","sap/ushell/library"],function(e,t,i,s,r,n){"use strict";var a=n.AppType;var c=e.extend("sap.ushell.services.UserRecents.RecentActivity",{constructor:function(t){e.call(this,"RecentActivity",t,c._compareItems)}});c.MAX_DAYS=30;c.ITEM_COUNT=30;const o=["#Shell-launchURL","#Shell-startGUI","#Shell-startIntent","#Shell-startURL","#Shell-startWDA"];c._compareItems=function(e,t){if(e.appType===t.appType){if(e.appType!==a.APP){return e.url===t.url}const i=e.appId===t.appId;if(i&&o.includes(e.appId)){return e.title===t.title}return i}else if(e.appType===a.APP||t.appType===a.APP){return e.appId===t.appId&&e.url===t.url}return false};c.prototype._updateIfAlreadyIn=function(t,s){return this.oRecentActivities.recentUsageArray.some(function(r){var n;if(c._compareItems(r.oItem,t)){if(t.appType===r.oItem.appType||t.appType!==a.APP){i(r.oItem,t);r.iTimestamp=s;r.oItem.timestamp=s;r.mobile=undefined;r.tablet=undefined;r.desktop=undefined;if(t.appType===r.oItem.appType||t.appType!==a.APP&&r.oItem.appType!==a.APP){r.aUsageArray[r.aUsageArray.length-1]+=1;r.iCount+=1}this.oRecentActivities.recentUsageArray.sort(e.itemSorter)}n=true}else{n=false}return n}.bind(this))};c.prototype._insertNew=function(e,t,i){e.timestamp=t;if(i){e.icon=i}var s={oItem:e,iTimestamp:t,aUsageArray:[1],iCount:1,mobile:undefined,tablet:undefined,desktop:undefined};if(this.oRecentActivities.recentUsageArray.length===this.iMaxItems){this.oRecentActivities.recentUsageArray.pop()}this.oRecentActivities.recentUsageArray.unshift(s)};c.prototype.newItem=function(e){const t=Date.now();const i=this.getActivityIcon(e.appType,e.icon);let s;const n=this.getDayFromDateObj(new Date);return new Promise((a,c)=>{this.load().then(o=>{this.oRecentActivities=this.getRecentActivitiesFromLoadedData(o);if(n!==this.oRecentActivities.recentDay){this.addNewDay();this.oRecentActivities.recentDay=n}s=this._updateIfAlreadyIn(e,t);if(!s){this._insertNew(e,t,i)}this.save(this.oRecentActivities).then(()=>{r.emit("newUserRecentsItem",this.oRecentActivities);a()}).catch(e=>{c(e)})})})};c.prototype.getActivityIcon=function(e,t){switch(e){case a.SEARCH:return t||"sap-icon://search";case a.COPILOT:return t||"sap-icon://co";case a.URL:return t||"sap-icon://internet-browser";default:return t||"sap-icon://product"}};c.prototype.clearAllActivities=function(){return new Promise((e,t)=>{this.save([]).then(()=>{r.emit("userRecentsCleared",Date.now());e()}).catch(e=>{t(e)})})};c.prototype.getRecentItemsHelper=function(e){let t;let i;let r;let n=false;const a=[];const c=[];const o=this.getDayFromDateObj(new Date);if(s.system.desktop){r="desktop"}else if(s.system.tablet){r="tablet"}else{r="mobile"}return new Promise((s,p)=>{this.load().then(h=>{this.oRecentActivities=this.getRecentActivitiesFromLoadedData(h);var l=false;var u;if(o!==this.oRecentActivities.recentDay){this.addNewDay();this.oRecentActivities.recentDay=o;l=true}for(t=0;t<this.oRecentActivities.recentUsageArray.length&&!n;t++){const e={target:{shellHash:""}};i=this.oRecentActivities.recentUsageArray[t];if(i[r]===undefined){if(!(i.oItem.url[0]==="#")){c.push(i.oItem.url)}else if(i.oItem.url.indexOf("?")>-1){u=i.oItem.url.substring(i.oItem.url.indexOf("?"));if(u.indexOf("&/")>-1){u=u.substring(0,u.indexOf("&/"))}const t=i.oItem.appId.split("#")[1];e.target.shellHash=t+u;a.push(e)}else{const t=i.oItem.appId.split("#")[1];e.target.shellHash=t;a.push(e)}}else{n=true}}if(c.length>0){var A;for(t=0;t<this.oRecentActivities.recentUsageArray.length;t++){if(!(this.oRecentActivities.recentUsageArray[t].oItem.url[0]==="#")){A=this.oRecentActivities.recentUsageArray[t];A[r]=true}}if(a.length<=0){this.save(this.oRecentActivities).then(()=>{const t=this._getRecentItemsForDevice(r,this.oRecentActivities,e);s(t)}).catch(e=>{p(e)})}}if(a.length>0){sap.ushell.Container.getServiceAsync("Navigation").then(c=>{c.isNavigationSupported(a).then(a=>{n=false;for(t=0;t<this.oRecentActivities.recentUsageArray.length&&!n;t++){i=this.oRecentActivities.recentUsageArray[t];if(i[r]===undefined){u="";if(i.oItem.url.indexOf("?")>-1){u=i.oItem.url.substring(i.oItem.url.indexOf("?"));if(u.indexOf("&/")>-1){u=u.substring(0,u.indexOf("&/"))}}var c=a[t];i[r]=!!(c&&c.supported)}else if(i.oItem.url[0]==="#"){n=true}}this.save(this.oRecentActivities).then(()=>{const t=this._getRecentItemsForDevice(r,this.oRecentActivities,e);s(t)}).catch(e=>{p(e)})}).catch(e=>{p(e)})})}else if(a.length<=0&&c.length<=0){if(l){this.save(this.oRecentActivities).then(()=>{const t=this._getRecentItemsForDevice(r,this.oRecentActivities,e);s(t)}).catch(e=>{p(e)})}else{const t=this._getRecentItemsForDevice(r,this.oRecentActivities,e);s(t)}}}).catch(e=>{p(e)})})};c.prototype._getRecentItemsForDevice=function(e,t,i){var s=[];var r=0;var n;for(var a=0;a<t.recentUsageArray.length&&(!i||r<i);a++){n=t.recentUsageArray[a];if(n[e]){s.push(n);r++}}return s};c.prototype.getRecentItems=function(){return new Promise((e,t)=>{this.getRecentItemsHelper(c.ITEM_COUNT).then(t=>{e(t.map(e=>e.oItem))}).catch(e=>{t(e)})})};c.prototype.getFrequentItems=function(){return new Promise((e,t)=>{this.getRecentItemsHelper().then(t=>{var i;var s=0;var r=[];var n;var a=t[0]?new Date(t[0].iTimestamp):undefined;var o;for(i=0;i<t.length&&s<c.MAX_DAYS;i++){n=t[i];if(n.iCount>1){r.push(n)}o=new Date(n.iTimestamp);if(a.toDateString()!==o.toDateString()){s++;a=o}}r.sort(function(e,t){return t.iCount-e.iCount});r=r.slice(0,c.ITEM_COUNT);e(r.map(e=>e.oItem))}).catch(e=>{t(e)})})};c.prototype.addNewDay=function(){var e;for(var t=0;t<this.oRecentActivities.recentUsageArray.length;t++){if(this.oRecentActivities.recentUsageArray[t].aUsageArray){e=this.oRecentActivities.recentUsageArray[t].aUsageArray}else{e=[];this.oRecentActivities.recentUsageArray[t].aUsageArray=e;this.oRecentActivities.recentUsageArray[t].iCount=0}e[e.length]=0;if(e.length>c.MAX_DAYS){this.oRecentActivities.recentUsageArray[t].iCount-=e[0];e.shift()}}};c.prototype.getDayFromDateObj=function(e){return e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate()};c.prototype.getRecentActivitiesFromLoadedData=function(e){var i;if(Array.isArray(e)){i={recentDay:null,recentUsageArray:e}}else{i=e||{recentDay:null,recentUsageArray:[]}}i.recentUsageArray=(i.recentUsageArray||[]).filter(function(e){var i=e&&e.oItem&&e.oItem.url;if(!i){t.error("FLP Recent Activity",e,"is not valid. The activity is removed from the list.")}return i});return i};return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/RecentAppsUsage", ["sap/ushell/services/_UserRecents/UserRecentsBase","sap/base/Log","sap/ushell/utils"],function(e,a,t){"use strict";var s=e.extend("sap.ushell.services.UserRecents.RecentAppsUsage",{constructor:function(){e.call(this,"AppsUsage")}});s.MAX_DAYS=30;s.prototype.init=function(){return new Promise((e,t)=>{const s=this.getDayFromDateObj(new Date);let p=false;if(!p||s!==this.oAppsUsageData.recentDay){p=true;this.load().then(async a=>{this.oAppsUsageData=a||{recentDay:null,recentAppsUsageMap:{}};await this.calculateInitialUsage(s);e(this.oAppsUsageData)}).catch(()=>{a.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");t()})}})};s.prototype.calculateInitialUsage=async function(e){if(e!==this.oAppsUsageData.recentDay){this.addNewDay();this.oAppsUsageData.recentDay=e;setTimeout(function(){this.cleanUnusedHashes()}.bind(this),3e3);await this.saveAppsUsage(this.oAppsUsageData)}};s.prototype.addAppUsage=function(e){if(!t.validHash(e)){return Promise.reject("Non valid hash")}return this.init().then(()=>{const a=this.oAppsUsageData.recentAppsUsageMap[e]||[];if(a.length===0){a[0]=1}else{a[a.length-1]+=1}this.oAppsUsageData.recentAppsUsageMap[e]=a;return this.saveAppsUsage(this.oAppsUsageData)}).catch(()=>{a.error("Ushell-lib ; addAppUsage ; Initialization falied!")})};s.prototype.getAppsUsage=function(){return new Promise((e,a)=>{this.init().then(()=>{e(this.summarizeUsage())}).catch(()=>{a("Not initialized yet")})})};s.prototype.summarizeUsage=function(){var e={};var a,t;var s=true;for(var p in this.oAppsUsageData.recentAppsUsageMap){e[p]=this.getHashUsageSum(p);if(s){a=t=e[p];s=false}else if(e[p]<t){t=e[p]}else if(e[p]>a){a=e[p]}}return{usageMap:e,maxUsage:a,minUsage:t}};s.prototype.addNewDay=function(){var e;for(var a in this.oAppsUsageData.recentAppsUsageMap){e=this.oAppsUsageData.recentAppsUsageMap[a];e[e.length]=0;if(e.length>s.MAX_DAYS){e=e.shift()}}};s.prototype.cleanUnusedHashes=function(){var e;for(var a in this.oAppsUsageData.recentAppsUsageMap){e=this.getHashUsageSum(a);if(e===0){delete this.oAppsUsageData.recentAppsUsageMap[a]}}};s.prototype.getHashUsageSum=function(e){var a=0;var t;var s=this.oAppsUsageData.recentAppsUsageMap[e];var p=s.length;for(t=0;t<p;t++){a+=s[t]}return a};s.prototype.saveAppsUsage=function(e){return this.save(e).catch(()=>{a.error("Ushell-lib ; saveAppsUsage ; Save action failed")})};s.prototype.getDayFromDateObj=function(e){return e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate()};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/RecentsList", ["sap/ushell/services/_UserRecents/UserRecentsBase"],function(e){"use strict";var t=e.extend("sap.ushell.services.UserRecents.RecentsList");t.prototype._updateIfAlreadyIn=function(e,t){return this.aRecents.some(function(s){var i;if(this._compareItems(s.oItem,e)){s.oItem=e;s.iTimestamp=t;s.iCount=s.iCount+1;i=true}else{i=false}return i}.bind(this))};t.prototype._insertNew=function(t,s){var i={oItem:t,iTimestamp:s,iCount:1};if(this.aRecents.length===this.iMaxItems){this.aRecents.sort(e.itemSorter);this.aRecents.pop()}this.aRecents.push(i)};t.prototype.clearAllActivities=function(){return this.save([])};t.prototype.newItem=function(e){return new Promise((t,s)=>{const i=Date.now();let n;this.load().then(r=>{this.aRecents=r||[];n=this._updateIfAlreadyIn(e,i);if(!n){this._insertNew(e,i)}this.save(this.aRecents).then(()=>{t()}).catch(e=>{s(e)})})})};t.prototype.getRecentItems=function(){return new Promise((t,s)=>{this.load().then(s=>{s=s||[];s.sort(e.itemSorter);this.aRecents=s.slice(0,this.iMaxItems);t(this.aRecents.map(e=>e.oItem))}).catch(e=>{s(e)})})};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_UserRecents/UserRecentsBase", ["sap/ui/base/Object","sap/base/Log","sap/ushell/Container"],function(e,t,s){"use strict";const o=e.extend("sap.ushell.services.UserRecents.UserRecentsBase",{constructor:function(e,t,r){this.aRecents=[];this.iMaxItems=t;this.sPersonalizationItemName=e;if(!o.prototype.oContainerPromise){o.prototype.oContainerPromise=s.getServiceAsync("PersonalizationV2").then(async e=>{const t="sap.ushell.services.UserRecents";const s={};const o=await e.getContainer(t,s);await o.load();return o})}this._compareItems=r}});o.prototype.load=async function(){try{const e=await o.prototype.oContainerPromise;return e.getItemValue(this.sPersonalizationItemName)}catch(e){t.error("Personalization service does not work:",e);return Promise.reject(e)}};o.prototype.save=async function(e){try{const t=await o.prototype.oContainerPromise;t.setItemValue(this.sPersonalizationItemName,e);await t.save()}catch(e){t.error("Personalization service does not work:",e);return Promise.reject(e)}};o.itemSorter=function(e,t){return t.iTimestamp-e.iTimestamp};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstance", ["sap/m/ActionSheet","sap/m/Button","sap/m/GenericTile","sap/m/library","sap/m/Popover","sap/m/Text","sap/m/VBox","sap/ui/core/Component","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/events/PseudoEvents","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(e,t,i,o,n,s,a,r,l,c,p,u,d,h,f,g){"use strict";var y=o.PlacementType;var m=o.FrameType;var A=o.GenericTileScope;var b=o.LoadState;var v=h.DisplayFormat;var _=l.extend("sap.ushell.ui.launchpad.VizInstance",{metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",bindable:true},subtitle:{type:"string",defaultValue:"",bindable:true},height:{type:"int",defaultValue:2},width:{type:"int",defaultValue:2},info:{type:"string",defaultValue:"",bindable:true},icon:{type:"sap.ui.core.URI",defaultValue:"",bindable:true},numberUnit:{type:"string",defaultValue:"",bindable:true},state:{type:"sap.m.LoadState",defaultValue:b.Loaded,bindable:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",defaultValue:undefined,bindable:true},editable:{type:"boolean",defaultValue:false,bindable:true},removable:{type:"boolean",defaultValue:true,bindable:true},clickable:{type:"boolean",defaultValue:true,bindable:true},active:{type:"boolean",defaultValue:false},targetURL:{type:"string"},indicatorDataSource:{type:"object",defaultValue:undefined},dataSource:{type:"object",defaultValue:undefined},keywords:{type:"string[]",defaultValue:[]},instantiationData:{type:"object",defaultValue:{}},contentProviderId:{type:"string",defaultValue:""},vizConfig:{type:"object"},supportedDisplayFormats:{type:"string[]",defaultValue:[v.Standard]},dataHelpId:{type:"string",defaultValue:""},vizRefId:{type:"string",defaultValue:""},displayFormat:{type:"string",defaultValue:v.Standard},preview:{type:"boolean",defaultValue:false,bindable:true}},defaultAggregation:"tileActions",aggregations:{content:{type:"sap.ui.core.Control",multiple:false},tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}},events:{press:{parameters:{scope:{type:"sap.m.GenericTileScope"},action:{type:"string"}}},beforeActionSheetOpen:{},afterActionSheetClose:{}}},renderer:g});_.prototype.init=function(){this._customTileActions=[];var e=new i({frameType:this._formatPlaceholderFrameType(this.getDisplayFormat()),state:this.getState()});this._disableTabindexOfGenericTile(e);this.setAggregation("content",e)};_.prototype.setDisplayFormat=function(e){this.setProperty("displayFormat",e);this._setSize();var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setFrameType(this._formatPlaceholderFrameType(e))}return this};_.prototype.setState=function(e){this.setProperty("state",e);var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setState(e)}return this};_.prototype.setSizeBehavior=function(e){this.setProperty("sizeBehavior",e);this.setTileSizeBehavior(e);return this};_.prototype.setEditable=function(e){this.setProperty("editable",e);this.setTileEditable(e);return this};_.prototype.setTileEditable=function(e){var t=e?A.ActionMore:A.Display;var i=this.getContent();if(i&&i.isA("sap.m.GenericTile")){i.setScope(t)}return this};_.prototype.setTileSizeBehavior=function(e){var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setSizeBehavior(e)}return this};_.prototype._formatPlaceholderFrameType=function(e){this._setSize();switch(e){case v.Flat:return m.OneByHalf;case v.FlatWide:return m.TwoByHalf;case v.StandardWide:return m.TwoByOne;default:return m.OneByOne}};_.prototype.exit=function(){if(this._oActionModeButtonIconVBox){this._oActionModeButtonIconVBox.destroy()}if(this._oActionDivCenter){this._oActionDivCenter.destroy()}if(this._oActionSheet){this._oActionSheet.destroy()}if(this._oRemoveIconVBox){this._oRemoveIconVBox.destroy()}};_.prototype.getLayout=function(){return{columns:this.getWidth(),rows:this.getHeight()}};_.prototype.setContent=function(e){var t=this.getLayoutData();if(t&&t.isA("sap.f.GridContainerItemLayoutData")){t.setRows(this.getHeight());t.setColumns(this.getWidth())}var i=this.getDataHelpId();var o=this.getVizRefId();if(i){e.data("help-id",i,true);e.data("tile-id",i,true)}else{e.data("tile-id",o,true)}this._disableTabindexOfContent(e);this.setAggregation("content",e)};_.prototype._disableTabindexOfContent=function(e){if(e){if(e.isA("sap.ui.core.ComponentContainer")){var t=e.getComponent();var i=r.get(t);if(i){this._disableTabindexOfContent(i.getRootControl())}}else if(e.isA("sap.m.FlexBox")){var o=e;var n=e.getItems()[0];o.addEventDelegate({onAfterRendering:this._disableTabindexOfContent.bind(this,n)});this._disableTabindexOfContent(n)}else if(e.isA("sap.ui.core.mvc.View")){this._disableTabindexOfContent(e.getContent()[0])}else if(e.isA("sap.cloudfnd.smartbusiness.lib.reusetiles.Singleton")){this._disableTabindexOfContent(e.getContent())}else if(e.isA("sap.m.GenericTile")){this._disableTabindexOfGenericTile(e)}}};_.prototype._disableTabindexOfGenericTile=function(e){function t(e){var t=e.getFocusDomRef();if(t){if(t.getAttribute("tabindex")==="0"){t.setAttribute("tabindex",-1);t.tabIndex=-1}}}t(e);e.addEventDelegate({onAfterRendering:t.bind(this,e)})};_.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new e({placement:y.VerticalPreferedBottom});this._oActionSheet.attachAfterClose(this.fireAfterActionSheetClose.bind(this))}return this._oActionSheet};_.prototype._destroyCustomTileActions=function(){this._customTileActions.forEach(function(e){this.removeTileAction(e);e.destroy()}.bind(this));this._customTileActions=[]};_.prototype._addCustomTileActions=function(){if(this._oCustomTileActionsPromise){return this._oCustomTileActionsPromise}this._destroyCustomTileActions();var e=sap.ushell.Container.getRenderer();this._oCustomTileActionsPromise=e.getCustomTileActions(this).then(function(e){e.forEach(function(e){var i=new t(e);this._customTileActions.push(i);this.addTileAction(i)}.bind(this));this._oCustomTileActionsPromise=null}.bind(this));return this._oCustomTileActionsPromise};_.prototype._openActionMenu=function(){if(this._oActionModeIcon){if(!this._getTileActionSheet().isOpen()){this.fireBeforeActionSheetOpen()}var e=d.last("/core/extension/enableTileColors");if(e){this._addCustomTileActions()}if(this.getTileActions().length===0){this._openNoActionsPopover();return}this._getTileActionSheet().openBy(this._oActionModeIcon)}};_.prototype.getFocusDomRef=function(){if(this.getEditable()){return this._oActionModeIcon&&this._oActionModeIcon.getFocusDomRef()}var e=this.getContent();var t=e.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")||e.isA("sap.m.SlideTile")});if(t.length){return t[0].getFocusDomRef()}if(this._oComponent&&this._oComponent.findAggregatedObjects){t=this._oComponent.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")||e.isA("sap.m.SlideTile")});if(t.length){return t[0].getFocusDomRef()}}return e.getFocusDomRef()};_.prototype.onclick=function(e){if(this._preventDefault(e)){this.firePress({scope:"Display",action:"Press"})}else if(this._oRemoveIconVBox&&this._oRemoveIconVBox.getDomRef().contains(e.target)){this.firePress({scope:"Actions",action:"Remove"})}else if(this.getEditable()){this._openActionMenu()}};_.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){e.removeEventListener("keyup",this._fnKeyupHandler);e.removeEventListener("touchend",this._fnTouchendHandler)}};_.prototype._openNoActionsPopover=function(){new n({placement:y.VerticalPreferedBottom,showHeader:false,content:new s({text:f.i18n.getText("tileHasNoActions")})}).addStyleClass("sapUiContentPadding").openBy(this._oActionModeIcon)};_.prototype.onAfterRendering=function(){var e=this.getDomRef();this._fnKeyupHandler=this.onkeyup.bind(this);this._fnTouchendHandler=this.onclick.bind(this);e.addEventListener("keyup",this._fnKeyupHandler,true);e.addEventListener("touchend",this._fnTouchendHandler,true);if(e.parentElement){e.parentElement.setAttribute("aria-description",f.i18n.getText("VizInstance.AriaDescription.Link"))}};_.prototype.onkeyup=function(e){if(this.getEditable()){if(u.events.sapdelete.fnCheck(e)||u.events.sapbackspace.fnCheck(e)){this.firePress({scope:"Actions",action:"Remove"})}if(u.events.sapspace.fnCheck(e)||u.events.sapenter.fnCheck(e)){this._openActionMenu();this._preventDefault(e)}}};_.prototype._preventDefault=function(e){if(this.getEditable()||!this.getClickable()){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return false}return true};_.prototype.load=function(){return Promise.resolve()};_.prototype._setSize=function(){var e={};switch(this.getDisplayFormat()){case v.Flat:e.width=2;e.height=1;break;case v.FlatWide:e.width=4;e.height=1;break;case v.StandardWide:e.width=4;e.height=2;break;default:e.width=2;e.height=2;break}this.setWidth(e.width);this.setHeight(e.height)};_.prototype.getAvailableDisplayFormats=function(){var e;var t=this.getSupportedDisplayFormats();var i=this.getDisplayFormat();e=t.filter(function(e){return e!==i});var o=e.indexOf("compact");var n=this.getTitle();var s=this.getTargetURL();if(o>-1&&(!n||!s)){e.splice(o,1)}return e};_.prototype._getRemoveIconVBox=function(){if(!this._oRemoveIconVBox){var e=c.getLibraryResourceBundle("sap.m");var t=new p({id:this.getId()+"-action-remove",alt:e.getText("GENERICTILE_ACTIONS_ARIA_TEXT"),decorative:false,noTabStop:true,src:"sap-icon://decline",tooltip:f.i18n.getText("removeButtonTitle")}).addStyleClass("sapUshellTileDeleteIconInnerClass sapMPointer");this._oRemoveIconVBox=new a({items:[t]}).addStyleClass("sapUshellTileDeleteIconOuterClass sapUshellTileDeleteClickArea sapMPointer");this._oRemoveIconVBox.setParent(this)}return this._oRemoveIconVBox};_.prototype._getActionModeButtonIconVBox=function(){if(!this._oActionModeButtonIconVBox){var e=c.getLibraryResourceBundle("sap.m");this._oActionModeIcon=new p({id:this.getId()+"-action-more",decorative:false,alt:e.getText("LIST_ITEM_NAVIGATION"),noTabStop:true,src:"sap-icon://overflow",tooltip:f.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner sapMPointer");var t=this._oActionModeIcon.onkeyup;this._oActionModeIcon.onkeyup=function(){t.apply(this._oActionModeIcon,arguments);this.onkeyup.apply(this,arguments)}.bind(this);this._oActionModeButtonIconVBox=new a({items:[this._oActionModeIcon]}).addStyleClass("sapUshellTileActionIconDivBottom sapMPointer");this._oActionModeButtonIconVBox.setParent(this)}return this._oActionModeButtonIconVBox};return _});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(t,i,e,n,s,a){"use strict";var r=i.LoadState;var o=n.DisplayFormat;var p=t.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},renderer:a});p.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oChipInstancePromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=t.getFactory();var e=this.getInstantiationData();var n;var a;if(!e.simplifiedChipFormat){n={chipId:e.chip.id,chip:e.chip}}else{var r=e.chip||{};a=r.bags;n={chipId:r.chipId,configuration:r.configuration?JSON.stringify(r.configuration):"{}"}}var o=i.createChipInstance(n);s.addBagDataToChipInstance(o,a);return o}.bind(this))};p.prototype.load=function(t){return this._oChipInstancePromise.then(function(t){this._oChipInstance=t;return new Promise(this._oChipInstance.load)}.bind(this)).then(function(){if(this.getPreview()){var t=this._oChipInstance.getContract("preview");if(t){t.setEnabled(true)}}this._setVisible(this.getActive());return this._oChipInstance.getImplementationAsSapui5Async()}.bind(this)).then(function(t){this._setChipInstanceType();this.setContent(t);if(t.getComponentInstance&&t.getComponentInstance()){t.getComponentInstance().setParent(this)}return Promise.resolve()}.bind(this)).catch(function(t){this.setState(r.Failed);return Promise.reject(t)}.bind(this))};p.prototype._setChipInstanceType=function(){var t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()))}};p.prototype._mapDisplayFormatToChip=function(t){var i={};i[o.Standard]="tile";i[o.StandardWide]="tile";i[o.Compact]="link";i[o.Flat]="flat";i[o.FlatWide]="flatwide";return i[t]};p.prototype._setVisible=function(t){var i=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(i){i.setVisible(t)}};p.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh()}};p.prototype.setActive=function(t,i){this._setVisible(t);if(i){this.refresh()}return this.setProperty("active",t,false)};return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/ui/core/Component","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/ui/core/ComponentContainer","sap/ushell/UI5ComponentType","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(t,e,n,i,o,r,a,s){"use strict";var p=e.LoadState;var u=t.extend("sap.ushell.ui.launchpad.VizInstanceCdm",{metadata:{library:"sap.ushell"},renderer:s});u.prototype.load=function(t){var e;if(t===true){e=this._loadCustomVizType()}else{e=this._loadStandardVizType()}return e.then(function(t){this._oComponent=t;var e=new r({component:t});t.setParent(this);this.setContent(e);if(this.getSizeBehavior()){this.setTileSizeBehavior(this.getSizeBehavior())}this._setComponentTileVisible(this.getActive());this.setTileEditable(this.getEditable())}.bind(this)).catch(function(t){this.setState(p.Failed);return Promise.reject(t)}.bind(this))};u.prototype._loadStandardVizType=function(){var t=this._getComponentConfiguration();return n.create(t)};u.prototype._loadCustomVizType=function(){var t=this._getCustomComponentConfiguration();var e={};var n=[];return sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(i){var o=i.createComponent(t,e,n,a.Visualization);return new Promise(function(t,e){o.done(function(e){t(e)})})}).then(function(t){if(t&&t.componentHandle&&t.componentHandle.getInstance){return t.componentHandle.getInstance()}throw new Error("Create component failed: no instance found in the component handle.")})};u.prototype._getComponentConfiguration=function(){var t=this.getInstantiationData().vizType;var e=this.getVizConfig();var n=i.get(["sap.platform.runtime","componentProperties"],t);n=o({},this._getComponentProperties(),n);var r={name:t["sap.ui5"].componentName,componentData:{properties:n},url:i.get(["sap.platform.runtime","componentProperties","url"],t),manifest:i.get(["sap.platform.runtime","componentProperties","manifest"],t),asyncHints:i.get(["sap.platform.runtime","componentProperties","asyncHints"],t)};var a=i.get(["sap.platform.runtime","includeManifest"],t);var s=i.get(["sap.platform.runtime","includeManifest"],e);if(a||s){r.manifest=o({},t,e)}if(typeof r.manifest==="object"){n.manifest=r.manifest}return r};u.prototype._getCustomComponentConfiguration=function(){var t=this._getComponentConfiguration();var e={loadCoreExt:true,loadDefaultDependencies:false,componentData:t.componentData,url:t.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:t,ui5ComponentName:t.name};return e};u.prototype._getComponentProperties=function(){return{title:this.getTitle(),subtitle:this.getSubtitle(),icon:this.getIcon(),info:this.getInfo(),indicatorDataSource:this.getIndicatorDataSource(),dataSource:this.getDataSource(),contentProviderId:this.getContentProviderId(),targetURL:this.getTargetURL(),displayFormat:this.getDisplayFormat(),numberUnit:this.getNumberUnit(),preview:this.getPreview()}};u.prototype._setComponentTileVisible=function(t){if(this._oComponent&&typeof this._oComponent.tileSetVisible==="function"){this._oComponent.tileSetVisible(t)}};u.prototype.setActive=function(t,e){this._setComponentTileVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};u.prototype.setTileEditable=function(t){if(this._oComponent&&typeof this._oComponent.tileSetEditMode==="function"){this._oComponent.tileSetEditMode(t)}return this};u.prototype.setTileSizeBehavior=function(e){if(this._oComponent&&typeof this._oComponent.tileSetSizeBehavior==="function"){this._oComponent.tileSetSizeBehavior(e)}t.prototype.setTileSizeBehavior.apply(this,arguments);return this};u.prototype.setPreview=function(e){var n=!!this.getProperty("preview")&&!e;if(this._oComponent&&typeof this._oComponent.tileSetPreview==="function"){this._oComponent.tileSetPreview(e)}if(n){this.refresh()}t.prototype.setPreview.apply(this,arguments);return this};u.prototype.refresh=function(){if(this._oComponent&&typeof this._oComponent.tileRefresh==="function"){this._oComponent.tileRefresh()}};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage", ["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ushell/library","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(e,t,a){"use strict";var i=t.DisplayFormat;var n=e.extend("sap.ushell.ui.launchpad.VizInstanceLaunchPage",{metadata:{library:"sap.ushell"},renderer:a});n.prototype.load=function(){var e=this.getInstantiationData().launchPageTile;return sap.ushell.Container.getServiceAsync("LaunchPage").then(t=>new Promise((a,i)=>{const n=this.getPreview();t.getCatalogTileViewControl(e,n).done(a).fail(()=>{t.getTileView(e).done(a).fail(i)})}).then(a=>{this._setDisplayFormatFromTileSize(e,t);this.setContent(a)}))};n.prototype._setDisplayFormatFromTileSize=function(e,t){var a=t.getTileSize(e);if(a==="1x2"){this.setDisplayFormat(i.StandardWide)}else{this.setDisplayFormat(i.Standard)}};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceLink", ["sap/m/library","sap/ushell/library","sap/m/GenericTile","sap/m/Button","sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/ActionSheet","sap/ushell/EventHub"],function(t,e,i,s,o,r,a,n,l,p){"use strict";var u=t.GenericTileMode;var h=t.GenericTileScope;var c=e.AppType;var d=e.DisplayFormat;var y=i.extend("sap.ushell.ui.launchpad.VizInstanceLink",{metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",group:"Appearance",bindable:true},subtitle:{type:"string",defaultValue:"",group:"Appearance",bindable:true},editable:{type:"boolean",defaultValue:false,group:"Behavior",bindable:true},removable:{type:"boolean",defaultValue:true,group:"Behavior",bindable:true},active:{type:"boolean",group:"Misc",defaultValue:false},targetURL:{type:"string",group:"Misc"},mode:{type:"sap.m.GenericTileMode",group:"Appearance",defaultValue:u.LineMode},displayFormat:{type:"string",defaultValue:d.Compact},supportedDisplayFormats:{type:"string[]",defaultValue:[d.Compact]},dataHelpId:{type:"string",defaultValue:""},vizRefId:{type:"string",defaultValue:""}},defaultAggregation:"tileActions",aggregations:{tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}},events:{beforeActionSheetOpen:{},afterActionSheetClose:{}}},renderer:i.getMetadata().getRenderer()});y.prototype.init=function(){i.prototype.init.apply(this,arguments);this.attachPress(this._handlePress,this);this._customTileActions=[]};y.prototype.exit=function(){if(this._oActionSheet){this._oActionSheet.destroy()}};y.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new l;this._oActionSheet.attachAfterClose(this.fireAfterActionSheetClose.bind(this))}return this._oActionSheet};y.prototype._destroyCustomTileActions=function(){this._customTileActions.forEach(function(t){this.removeTileAction(t);t.destroy()}.bind(this));this._customTileActions=[]};y.prototype._addCustomTileActions=function(){if(this._oCustomTileActionsPromise){return this._oCustomTileActionsPromise}this._destroyCustomTileActions();var t=sap.ushell.Container.getRenderer();this._oCustomTileActionsPromise=t.getCustomTileActions(this).then(function(t){t.forEach(function(t){var e=new s(t);this._customTileActions.push(e);this.addTileAction(e)}.bind(this));this._oCustomTileActionsPromise=null}.bind(this));return this._oCustomTileActionsPromise};y.prototype._handlePress=function(){if(this.getEditable()){if(!this._getTileActionSheet().isOpen()){this.fireBeforeActionSheetOpen()}var t=a.last("/core/extension/enableTileColors");if(t){this._addCustomTileActions()}this._getTileActionSheet().openBy(this);return}var e=this.getTargetURL();if(!e){return}p.emit("UITracer.trace",{reason:"LaunchApp",source:"Link",data:{targetUrl:e}});if(e[0]==="#"){r.setHash(e)}else{var i=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(i){var s={title:this.getTitle(),appType:c.URL,url:this.getTargetURL(),appId:this.getTargetURL()};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(s)}n.openURL(e,"_blank")}};y.prototype.load=o.prototype.load;y.prototype.setVizRefId=function(t){if(!this.getDataHelpId()){this.data("tile-id",t,true)}return this.setProperty("vizRefId",t)};y.prototype.setDataHelpId=function(t){this.data("help-id",t,true);this.data("tile-id",t,true);return this.setProperty("dataHelpId",t)};y.prototype.setTitle=function(t){this.setHeader(t);return this.setProperty("title",t)};y.prototype.setSubtitle=function(t){this.setSubheader(t);return this.setProperty("subtitle",t)};y.prototype.setTargetURL=function(t){this.setUrl(t);return this.setProperty("targetURL",t)};y.prototype.setProperty=function(t,e,s){if(t==="title"){this.setProperty("header",e,s)}if(t==="subtitle"){this.setProperty("subheader",e,s)}if(t==="targetURL"){this.setProperty("url",e,s)}if(t==="editable"){if(e&&this.getRemovable()){this.setProperty("scope",h.Actions,s)}else if(e){this.setProperty("scope",h.ActionMore,s)}else{this.setProperty("scope",h.Display,s)}}if(t==="removable"){var o=this.getEditable();if(e&&o){this.setProperty("scope",h.Actions,s)}else if(o){this.setProperty("scope",h.ActionMore,s)}else{this.setProperty("scope",h.Display,s)}}return i.prototype.setProperty.apply(this,arguments)};y.prototype.getAvailableDisplayFormats=o.prototype.getAvailableDisplayFormats;return y});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){var t=this._prepareControlsToBeRendered(n);e.openStart("div",n);e.class("sapUshellVizInstance");if(n.getEditable()){e.class("sapUshellVizInstanceEdit")}e.openEnd();t.forEach(function(n){e.renderControl(n)});e.close("div")};e._prepareControlsToBeRendered=function(e){var n=[e.getContent()];if(e.getEditable()){if(e.getRemovable()){var t=e._getRemoveIconVBox();n.unshift(t)}var o=e._getActionModeButtonIconVBox();n.push(o)}return n};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/AppState", ["sap/base/Log","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";function e(e,n,r,a,o,h,c,p,_){this._oServiceInstance=e;this._sKey=n;this._sData=a;this._sAppName=o;this._sACHComponent=h;this._bTransient=c;this._bModifiable=r;this._sPersistencyMethod=p;this._oPersistencySettings=_;if(this._bModifiable){this.setData=function(e){try{this._sData=JSON.stringify(e)}catch(e){t.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined}};this.save=s.bind(this);this.delete=i.bind(this)}}function s(){var t=new jQuery.Deferred;this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._sPersistencyMethod,this._oPersistencySettings).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}function i(){var t=new jQuery.Deferred;this._oServiceInstance._deleteAppState(this._sKey).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}e.prototype.getData=function(){var e;if(this._sData===undefined||this._sData===""){return undefined}try{e=JSON.parse(this._sData)}catch(e){t.error("Could not parse ["+this._sData+"]"+e)}return e};e.prototype.getPersistencyMethod=function(){return this._sPersistencyMethod};e.prototype.getPersistencySettings=function(){return this._oPersistencySettings};e.prototype.getKey=function(){return this._sKey};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/AppStatePersistencyMethod", [],function(){"use strict";function t(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState"}return new t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/LimitedBuffer", [],function(){"use strict";function t(t){this.index=-1;this.capacity=t;this.array=[]}t.prototype._clear=function(){this.array=[];this.index=-1};t.prototype.addAsHead=function(t,i,e,a){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:t,value:i,persistencyMethod:e,persistencySettings:a}};t.prototype.getByKey=function(t){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){return this.array[e]}}return undefined};t.prototype.deleteByKey=function(t){var i,e,a=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){delete this.array[e];a=true}}return a};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/Sequentializer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this.oLastPromise=new jQuery.Deferred;this.oLastPromise.resolve()}e.prototype.addToQueue=function(e){var r=new jQuery.Deferred;this.oLastPromise.always(function(){var t=e();t.done(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)})});this.oLastPromise=r;return r.promise()};return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/SequentializingAdapter", ["sap/ushell/services/appstate/Sequentializer"],function(e){"use strict";function t(t){this._oSequentializer=new e;this._oUnderlyingAdapter=t}t.prototype.saveAppState=function(e,t,r,n,i,p,d){var o;o=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,e,t,r,n,i,p,d);return this._oSequentializer.addToQueue(o)};t.prototype.loadAppState=function(e){return this._oUnderlyingAdapter.loadAppState(e)};t.prototype.deleteAppState=function(e){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(e)}};t.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods()}return[]};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/WindowAdapter", ["sap/ushell/services/appstate/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";var r=500;var a=18;function o(){this._init.apply(this,arguments)}o.prototype._init=function(t,a,p){var n=p&&p.config&&p.config.initialAppStates||{};var i=p&&p.config&&p.config.initialAppStatesPromise;this._oServiceInstance=t;this._oBackendAdapter=a;if(!o.prototype.data){o.prototype.data=new e(r)}if(i){i.then(function(e){if(typeof e==="object"){Object.keys(e).forEach(function(t){o.prototype.data.addAsHead(t,e[t])})}})}Object.keys(n).forEach(function(e){o.prototype.data.addAsHead(e,n[e])})};o.prototype.saveAppState=function(e,t,r,a,p,n,i,s){this.sComponent=p;var d=new jQuery.Deferred;o.prototype.data.addAsHead(e,r,i,s);if(this._oBackendAdapter&&!n){return this._oBackendAdapter.saveAppState(e,t,r,a,p,i,s)}d.resolve();return d.promise()};o.prototype._checkIfTransient=function(e){return e.startsWith("TAS")};o.prototype.loadAppState=function(e){var r=new jQuery.Deferred,p=o.prototype.data.getByKey(e);if(p){setTimeout(function(){r.resolve(e,p.value,p.persistencyMethod,p.persistencySettings)},0);return r.promise()}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var n=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(e);if(n){r.resolve(e,n.value);return r.promise()}}}catch(e){if(e.code===a){t.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.")}else{t.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.")}}if(this._oBackendAdapter&&!this._checkIfTransient(e)){this._oBackendAdapter.loadAppState(e).done(function(e,t,a,p){o.prototype.data.addAsHead(e,t);r.resolve(e,t,a,p)}).fail(r.reject.bind(r));return r.promise()}r.reject("AppState.js - loadAppState: Application State could not be loaded");return r.promise()};o.prototype.deleteAppState=function(e){var t=new jQuery.Deferred;o.prototype.data.deleteByKey(e);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState&&!this._checkIfTransient(e)){return this._oBackendAdapter.deleteAppState(e)}t.resolve();return t.promise()};o.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods()}return[]};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/personalization/VariantSetAdapter", ["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(t,n,e){"use strict";function r(t){this._oContextContainer=t}r.prototype.save=function(){return this._oContextContainer.save()};r.prototype.getVariantSetKeys=function(){var n=this._oContextContainer._getInternalKeys();var e=[];e=n.map(function(n){return n.replace(t.S_VARIANT_PREFIX,"","")});return e};r.prototype.containsVariantSet=function(t){return this.getVariantSetKeys().indexOf(t)>=0};r.prototype.getVariantSet=function(n){var r=this._oContextContainer._getItemValueInternal(t.S_VARIANT_PREFIX,n);if(!r){return undefined}return new e(n,this._oContextContainer)};r.prototype.addVariantSet=function(r){var a={};var i={};if(this.containsVariantSet(r)){throw new n.Error("Container already contains a variant set with key '"+r+"': sap.ushell.services.Personalization"," ")}a={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(t.S_VARIANT_PREFIX,r,a);i=new e(r,this._oContextContainer);return i};r.prototype.delVariantSet=function(n){this._oContextContainer._delItemInternal(t.S_VARIANT_PREFIX,n)};return r});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/AppContainer", ["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Element","sap/ui/Device","sap/base/Log","./AppContainerRenderer"],function(e,t,r,o,i,a){"use strict";var n=e.extend("sap.ushell.ui.AppContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"pages"}},events:{beforeNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}}}},renderer:a});n.prototype.addPages=function(e){if(this.getPages().indexOf(e)>-1){return}if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true)}else{e.toggleStyleClass("hidden",true)}this.addAggregation("pages",e,true);var r=this.getDomRef();if(r){var o=t.createRenderManager();o.render(e,r);o.destroy()}};n.prototype.addCenterViewPort=n.prototype.addPages;n.prototype.removeCenterViewPort=function(e){this.removeAggregation("pages",e,true)};n.prototype.getCurrentCenterPage=function(){return this.getPages().reduce(function(e,t){if(t&&t.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){return!t.hasStyleClass("sapUShellApplicationContainerIframeHidden")?t.getId():e}return t&&!t.hasStyleClass("hidden")?t.getId():e},null)};n.prototype.navTo=function(e,r){var a=t.byId(r),n=this.getCurrentCenterPage(),s=t.byId(n)||null,p=sap.ushell.Container.getRenderer("fiori2").byId("Shell-home-component-container"),l=p&&p.getId(),d=n&&l===n,u=l===r;if(e!=="centerViewPort"){i.error("Navigation to "+e+" is not allowed in Fiori3");return}if(this.getPages().indexOf(a)===-1){i.error("AppContainer: invalid navigation target");return}if(o.system.desktop&&d){this._saveFocus()}if(n!==r){this.fireBeforeNavigate({toId:r,to:a,fromId:n,from:s})}this.getPages().forEach(function(e){if(e){if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",e.getId()!==r)}else{e.toggleStyleClass("hidden",e.getId()!==r)}}});if(o.system.desktop&&u){this._restoreFocus()}if(n!==r){this.fireAfterNavigate({toId:r,to:a,fromId:n,from:s})}};n.prototype._restoreFocus=function(){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],function(e){var r;if(this.sLastFocusId){e.registerAppKeysHandler(this.fnLastAppKeyHandler);r=t.byId(this.sLastFocusId);if(r){r.focus()}}}.bind(this))};n.prototype._saveFocus=function(){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],function(e){var t=r.closestTo(document.activeElement);this.sLastFocusId=t?t.getId():null;this.fnLastAppKeyHandler=e.getAppKeysHandler()}.bind(this))};n.prototype.getViewPortControl=function(e,t){return this.getPages().reduce(function(r,o){return e==="centerViewPort"&&o&&o.getId()===t?o:r},null)};var s=function(){};n.prototype.switchState=s;n.prototype._handleSizeChange=s;n.prototype.shiftCenterTransitionEnabled=s;n.prototype.shiftCenterTransition=s;n.prototype.addLeftViewPort=s;n.prototype.addRightViewPort=s;n.prototype.attachAfterSwitchState=s;n.prototype.detachAfterSwitchState=s;n.prototype.attachAfterSwitchStateAnimationFinished=s;n.prototype.detachAfterSwitchStateAnimationFinished=s;n.prototype.getCurrentState=function(){return"Center"};return n});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/AppContainerRenderer", ["sap/ushell/resources"],function(e){"use strict";var n={apiVersion:2};n.render=function(n,r){if(!r.getVisible()){return}n.openStart("main",r);n.attr("role","main");n.attr("aria-label",e.i18n.getText("ShellContent.AriaLabel"));n.openEnd();r.getPages().forEach(function(e){n.renderControl(e)});n.close("main")};return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeader", ["sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/dom/units/Rem","sap/base/Log","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/ShellHeaderRenderer","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(e,t,i,o,a,r,n,s,l,h,u,g,p){"use strict";var d="sapUshellShellShowSearchOverlay";var f=0;var c;var m;var y=sap.ui.require.toUrl("sap/ushell/themes/base/img/SAPLogo.svg");var v=e.extend("sap.ushell.ui.ShellHeader",{metadata:{library:"sap.ushell",properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},homeUri:{type:"sap.ui.core.URI",defaultValue:"#"},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string"},centralAreaElement:{type:"string",defaultValue:null},title:{type:"string",defaultValue:""}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ui.core.Control",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{},events:{searchSizeChanged:{}}},renderer:u});v.prototype.setHomeUri=function(e){if(p.hasInvalidProtocol(e)){r.fatal("Tried to set a URL with an invalid protocol as the home uri. Setting to an empty string instead.",null,"sap/ushell/ui/ShellHeader");e=""}this._bHomeIsRoot=g.isRootIntent(e);return this.setProperty("homeUri",e)};v.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};v.prototype.FLPRangeSet={name:"Ushell",rangeBorders:[600,1024,1440,1920],rangeNames:["Phone","Tablet","Desktop","LargeDesktop","ExtraLargeDesktop"]};v.prototype.init=function(){o.media.initRangeSet(this.FLPRangeSet.name,this.FLPRangeSet.rangeBorders,"px",this.FLPRangeSet.rangeNames);o.media.attachHandler(this.invalidate,this,this.FLPRangeSet.name);o.resize.attachHandler(this.refreshLayout,this);this.getCustomLogoAltText();n.once("ShellNavigationInitialized").do(function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){this._rerenderLogoNavigationFilterBound=this._rerenderLogoNavigationFilter.bind(this,e);e.registerNavigationFilter(this._rerenderLogoNavigationFilterBound);this._rerenderLogoNavigationFilterBound.detach=function(){e.unregisterNavigationFilter(this._rerenderLogoNavigationFilterBound)}}.bind(this))}.bind(this))};v.prototype.exit=function(){o.media.detachHandler(this.invalidate,this,this.FLPRangeSet.name);o.resize.detachHandler(this.refreshLayout,this);if(this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter){this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter.detach()}};v.prototype.setFocusOnShellHeader=function(e){if(e){var t=this.getHeadEndItems();if(t.length>0){t[t.length-1].focus()}else{this.getAppTitle().focus()}}else{var i=this.getHeadItems();if(i.length>0){i[0].focus()}else{this.getAppTitle().focus()}}};v.prototype.onsapspace=function(e){if(e.target===this.getDomRef("logo")){this._setLocationHref(e.target.href)}};v.prototype._setLocationHref=function(e){if(p.hasInvalidProtocol(e)){r.fatal("Tried to navigate to URL with an invalid protocol. Preventing navigation.",null,"sap/ushell/ui/ShellHeader");return}window.location.href=e};v.prototype.onAfterRendering=function(){var e=this.getDomRef();if(!c&&document.body.getBoundingClientRect().height===0){e.style.visibility="hidden";e.style.height="2.75rem";return}this.refreshLayout()};v.prototype.onThemeChanged=function(e){var t=false;if(c!==e.theme){c=e.theme;t=true}if(m!==this.getLogo()){m=this.getLogo();t=true}if(t){this.invalidate()}};v.prototype.getLogo=function(){if(this.getProperty("logo")!==""){return this.getProperty("logo")}var e=i.get({name:"sapUiGlobalLogo",callback:()=>{this.invalidate()}});if(e==="none"){return y}if(e){var t=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(e);if(t){return t[1]}}return undefined};v.prototype.getCustomLogoAltText=function(){var e=s.last("/core/companyLogo/accessibleText");var i;delete this._sCustomAltText;if(e){try{var o=JSON.parse(e);if(o){i=t.getConfiguration().getLanguage();this._sCustomAltText=o[i];if(!this._sCustomAltText){Object.keys(o).forEach(function(e){if(e.indexOf(i)===0){this._sCustomAltText=o[e]}}.bind(this))}if(!this._sCustomAltText){Object.keys(o).forEach(function(e){if(i.indexOf(e)===0){this._sCustomAltText=o[e]}}.bind(this))}if(!this._sCustomAltText){this._sCustomAltText=o.default}}}catch(t){r.warning("Custom logo image ALT text is not a JSON string.",e);this._sCustomAltText=e}}};v.prototype.getLogoAltText=function(e){if(!e){return""}if(e===y){return h.i18n.getText("sapLogoText")}return this._sCustomAltText||h.i18n.getText("SHELL_LOGO_TOOLTIP")};v.prototype.refreshLayout=function(){if(!this.getDomRef()){return}this._adjustAppTitleTooltip();if(this.getSearchVisible()){var e=this.getDomRef("hdr-search");e.style.display="none";this._hideElementsForSearch();e.style.display="";e.style["max-width"]=f+"rem";this.fireSearchSizeChanged({remSize:a.fromPx(e.getBoundingClientRect().width),isFullWidth:this.isPhoneState()||this.getDomRef("hdr-end").style.display==="none"})}};v.prototype._adjustAppTitleTooltip=function(){var e=t.byId("shellAppTitle");if(e){var i=e.getDomRef("button");var o=i&&i.firstChild;if(o){var a;var r=s.last("/core/shell/model/currentState/stateName");var n=s.last("/core/services/allMyApps/enabled");var l=(r==="app"||r==="home")&&n;var u=t.byId(e.getNavigationMenu());var g=u&&u.getItems()&&u.getItems().length>0;if(g){a=h.i18n.getText("shellNavMenu_openMenuTooltip_navigationMenu")}else if(l){a=h.i18n.getText("shellNavMenu_openMenuTooltip_allMyApps")}else{var p=o.offsetWidth<o.scrollWidth;a=p?e.getText():null}if(e.getTooltip()!==a){e.setTooltip(a)}}}};v.prototype.removeHeadItem=function(e){if(typeof e==="number"){e=this.getHeadItems()[e]}this.removeAggregation("headItems",e)};v.prototype.isExtraLargeState=function(){return o.media.getCurrentRange(this.FLPRangeSet.name).from===this.FLPRangeSet.rangeBorders[3]};v.prototype.isMediumOrBiggerState=function(){return o.media.getCurrentRange(this.FLPRangeSet.name).from>=this.FLPRangeSet.rangeBorders[0]};v.prototype.isPhoneState=function(){var e=o.media.getCurrentRange(o.media.RANGESETS.SAP_STANDARD).name;var t=this.getDomRef().getBoundingClientRect().width>f;return o.system.phone||e==="Phone"||!t};v.prototype.setSearchState=function(e,t,i){if(this.SearchState[e]&&this.getSearchState()!==e){if(typeof t==="boolean"){i=t;t=undefined}this.setProperty("searchState",e,false);var o=e!=="COL";document.body.classList.toggle(d,o&&i);f=o?t||35:0}};v.prototype._hideElementsForSearch=function(){if(this.isExtraLargeState()){return}var e,t=this.getDomRef("hdr-search-container"),i=this.getDomRef("hdr-begin"),o=this.getDomRef("hdr-center"),r=this.getDomRef("hdr-end");if(this.getSearchState()==="EXP"||this.isPhoneState()){e=a.toPx(f+3)}else{e=a.toPx(9+.5)}var n=[i];Array.prototype.forEach.call(i.childNodes,function(e){n.unshift(e)});if(o){n.unshift(o)}i.style.flexBasis="";r.style.display="";n.forEach(function(e){if(e.getAttribute("id")==="shellAppTitle"){e.classList.remove("sapUiPseudoInvisibleText")}else{e.style.display=""}});var s;for(var l=0;l<n.length;l++){s=n[l];if(e>t.getBoundingClientRect().width){if(s.getAttribute("id")==="shellAppTitle"){s.classList.add("sapUiPseudoInvisibleText")}else{s.style.display="none";if(o&&l===0){i.style.flexBasis="auto"}}}else{return}}if(a.toPx(f)>t.getBoundingClientRect().width){r.style.display="none"}};v.prototype.getSearchWidth=function(){return f};v.prototype.isHomepage=function(){var e=window.hasher&&"#"+window.hasher.getHash()||"";var t=new RegExp("[?]"+"(?:"+"(?!&[/])."+")*");var i=e.replace(t,"");return g.isRootIntent(i)||i==="#Launchpad-openFLPPage"};v.prototype._rerenderLogoNavigationFilter=function(e,t,i){var o=e.hashChanger.isInnerAppNavigation(t,i);if(o){this.invalidate()}return e.NavigationFilterStatus.Continue};v.prototype.getSearchVisible=function(){return this.getSearchState()!==this.SearchState.COL};v.prototype.getCentralControl=function(){return t.byId(this.getCentralAreaElement())};v.prototype.setNoLogo=function(){this.setLogo(undefined)};v.prototype._getLeanMode=function(){return sap.ushell.Container.getRenderer().getSapUshellConfigParam()==="lean"};return v});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeaderRenderer", ["sap/ushell/resources","sap/ui/Device"],function(e,t){"use strict";var r={apiVersion:2};r.render=function(t,r){var a=r.getId();var n=r.getCentralControl();t.openStart("header",r);if(!r.getVisible()){t.style("display","none")}t.class("sapUshellShellHeader");t.class("sapContrastPlus");t.attr("aria-label",e.i18n.getText("Shell_Header_AriaLabel"));t.attr("data-sap-ui-customfastnavgroup","true");t.openEnd();t.openStart("div");t.attr("id",a+"-hdr-begin");t.class("sapUshellShellHeadBegin");if(n){t.class("sapUshellHeadWithCenter")}t.openEnd();this.renderBackButton(t,r);this.renderLogo(t,r);this.renderHeaderItems(t,r);this.renderTitle(t,r);t.close("div");if(n){t.openStart("div",n);t.attr("id",a+"-hdr-center");t.class("sapUshellShellHeadCenter");t.openEnd();t.renderControl(n);t.close("div")}t.openStart("div");t.attr("id",a+"-hdr-search-container");t.class("sapUshellShellHeadSearchContainer");t.openEnd();this.renderSearch(t,r);t.close("div");t.openStart("div");t.attr("id",a+"-hdr-end");t.class("sapUshellShellHeadEnd");t.openEnd();this.renderHeaderEndItems(t,r);t.close("div");t.close("header")};r.renderSearch=function(e,t){var r=t.getSearch();e.openStart("div");e.attr("id",t.getId()+"-hdr-search");e.attr("data-help-id","shellHeader-search");e.class("sapUshellShellSearch");e.style("max-width",t.getSearchWidth()+"rem");if(t.getSearchState()==="COL"){e.style("display","none")}e.openEnd();if(r){e.renderControl(r)}e.close("div")};r.renderTitle=function(e,t){var r=t.getTitle();e.renderControl(t.getAppTitle());if(r&&t.isMediumOrBiggerState()){e.openStart("div");e.attr("id",t.getId()+"-hdr-shell-title");e.class(t.getAppTitle()?"sapUshellShellHeadSubtitle":"sapUshellShellHeadTitle");e.openEnd();e.openStart("h2");e.class("sapUshellHeadTitle");e.attr("aria-level","2");e.attr("title",r);e.openEnd();e.text(r);e.close("h2");e.close("div")}};r.renderHeaderItems=function(e,t){var r=t.getHeadItems();r.forEach(function(t){if(t.getId()!=="backBtn"){e.renderControl(t)}})};r.renderBackButton=function(e,t){var r=t.getHeadItems();r.forEach(function(t){if(t.getId()==="backBtn"){e.renderControl(t)}})};r.renderHeaderEndItems=function(e,t){t.getHeadEndItems().forEach(e.renderControl)};r.renderLogo=function(t,r){var a=r.getLogo();if(!r.getShowLogo()||a===undefined){return}var n=r._getLeanMode();var l=r._bHomeIsRoot?e.i18n.getText("homeBtn_tooltip_text"):e.i18n.getText("lastPage_tooltip");t.openStart(n?"div":"a");t.attr("id",r.getId()+"-logo");t.class("sapUshellShellIco");if(n){t.class("sapUshellLean")}else{t.attr("href",r.getHomeUri());t.attr("title",l);t.attr("role","button")}t.openEnd();t.voidStart("img");t.attr("id",r.getId()+"-icon");t.attr("alt",r.getLogoAltText(a));t.attr("src",a);t.voidEnd();t.close(n?"div":"a")};return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/ContactSupportButton", ["sap/base/Log","sap/m/ButtonRenderer","sap/m/library","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem"],function(t,e,n,i,jQuery,a,o,s,l){"use strict";var r=n.ButtonType;var u=l.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"},renderer:e});u.prototype.init=function(){if(l.prototype.init){l.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://email");this.setText(o.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog);this.setEnabled()};u.prototype.showContactSupportDialog=function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/library","sap/m/TextArea","sap/m/Input","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button","sap/ushell/UserActivityLog"],function(t,e,n,a,l,u,h,p,c,d){var x=e.form.SimpleFormLayout;var g="",m="",C="",f=[],b,S;S=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();if(this.oClientContext.navigationData.applicationInformation){g=this.oClientContext.navigationData.applicationInformation.applicationType;m=this.oClientContext.navigationData.applicationInformation.url;C=this.oClientContext.navigationData.applicationInformation.additionalInformation}f.push(new h({text:this.translationBundle.getText("loginDetails")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));f.push(new u({text:this.translationBundle.getText("userFld")}));f.push(new h({text:this.oClientContext.userDetails.fullName||""}));f.push(new u({text:this.translationBundle.getText("serverFld")}));f.push(new h({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==""){f.push(new u({text:this.translationBundle.getText("eMailFld")}));f.push(new h({text:this.oClientContext.userDetails.eMail||""}))}f.push(new u({text:this.translationBundle.getText("languageFld")}));f.push(new h({text:this.oClientContext.userDetails.Language||""}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){f.push(new h({text:""}));f.push(new h({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));f.push(new u({text:this.translationBundle.getText("hashFld")}));f.push(new h({text:this.oClientContext.navigationData.navigationHash||""}));f.push(new h({text:""}));f.push(new h({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));f.push(new u({text:this.translationBundle.getText("applicationTypeFld")}));f.push(new h({text:g}));f.push(new u({text:this.translationBundle.getText("urlFld")}));f.push(new h({text:m}));f.push(new u({text:this.translationBundle.getText("additionalInfoFld")}));f.push(new h({text:C}))}this.oBottomSimpleForm=new t("technicalInfoBox",{layout:x.ResponsiveLayout,content:f}).addStyleClass("sapUshellTechnicalInfoBox");if(i.os.ios&&i.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth")}b=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){b.apply(this,arguments);var t=jQuery(this.getDomRef());t.attr("tabIndex",0);setTimeout(function(){this.focus()}.bind(t),700)};this.oDialog.addContent(this.oBottomSimpleForm)}.bind(this);this._embedLoginDetailsInBottomForm=S;this.translationBundle=o.i18n;this.oClientContext=d.getMessageInfo();this.oLink=new l({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new t("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new c("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),type:r.Emphasized,enabled:true,press:function(){this.oSubjectInput.fireChange();this.oTextArea.fireChange();if(this.oSubjectInput.getValueState()!=="Error"&&this.oTextArea.getValueState()!=="Error"){sap.ushell.Container.getServiceAsync("SupportTicket").then(function(t){var e=this.oSubjectInput.getValue();var n=this.oTextArea.getValue();t.createTicket({subject:e,text:n,clientContext:this.oClientContext}).then(function(){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.info(this.translationBundle.getText("supportTicketCreationSuccess"))}.bind(this))}.bind(this)).catch(function(){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(this.translationBundle.getText("supportTicketCreationFailed"))}.bind(this))}.bind(this));this.oDialog.close()}.bind(this))}}.bind(this)});this.cancelButton=new c("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close()}.bind(this)});var B=function(t){var e=t.getSource();if(!e.getValue()){if(e.getId()==="subjectInput"){e.setValueStateText(this.translationBundle.getText("subjectEmptyErrorMessage"))}if(e.getId()==="textArea"){e.setValueStateText(this.translationBundle.getText("txtAreaEmptyErrorMessage"))}e.setValueState("Error")}else{e.setValueState("None")}}.bind(this);this.oSubjectLabel=new u("subjectLabel",{text:this.translationBundle.getText("subjectLabel"),required:true});this.oSubjectInput=new a("subjectInput",{});this.oSubjectInput.attachLiveChange(B);this.oSubjectInput.attachChange(B);this.oTextAreaLabel=new u("textAreaLabel",{text:this.translationBundle.getText("txtAreaLabel"),required:true});this.oTextArea=new n("textArea",{rows:7});this.oTextArea.attachLiveChange(B);this.oTextArea.attachChange(B);this.oTopSimpleForm=new t("topForm",{editable:false,content:[this.oSubjectLabel,this.oSubjectInput,this.oTextAreaLabel,this.oTextArea],layout:x.ResponsiveGridLayout});this.oDialog=new p({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",beginButton:this.sendButton,endButton:this.cancelButton,initialFocus:"subjectInput",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0)})},afterClose:function(){this.oDialog.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("userActionsMenuHeaderButton").focus()}}.bind(this)}).addStyleClass("sapUshellContactSupportDialog").addStyleClass("sapContrastPlus");this.oSubjectInput.setPlaceholder(this.translationBundle.getText("subjectPlaceHolderHeader"));this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(S.bind(this));this.oDialog.addCustomData(new s({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open()}.bind(this))};u.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){t.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton")}e=false}l.prototype.setEnabled.call(this,e)};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AccessibilityCustomData", ["sap/ui/core/CustomData","sap/ui/core/Configuration"],function(e,t){"use strict";var a=e.extend("sap.ushell.ui.launchpad.AccessibilityCustomData",{metadata:{library:"sap.ushell"}});a.prototype._checkWriteToDom=function(){var a=t.getAccessibility();if(!a){return null}var i=this.getKey();var r=e.prototype._checkWriteToDom.apply(this,arguments);if(r&&(i.indexOf("aria-")===0||i==="role"||i==="tabindex")){r.key=r.key.replace(/^data-/,"")}return r};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ActionItem", ["sap/m/Button","sap/m/ButtonRenderer","sap/m/library"],function(e,t,r){"use strict";var s=r.ButtonType;var a=e.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:"standard"}},events:{press:{},afterRendering:{}}},renderer:t});a.prototype.setActionType=function(e){if(!this.sOrigType){this.sOrigType=this.getType()}this.setType(e==="action"?s.Unstyled:this.sOrigType||s.Standard);this.setProperty("actionType",e,true)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialog", ["sap/m/Label","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Popup","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./LoadingDialogRenderer"],function(e,t,i,s,o,a,n,l){"use strict";var p=t.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:l});p.prototype.init=function(){this._oPopup=new s;this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new i;this._oLabel=new e(this.getId()+"loadingLabel").addStyleClass("sapUshellLoadingDialogLabel");this.sState="idle";this.sLoadingString=a.i18n.getText("genericLoading").replace("..."," ")};p.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy()};p.prototype.isOpen=function(){return this._oPopup.isOpen()};p.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy"}if(this.getLoadAnimationWithInterval()){this.addStyleClass("sapUshellVisibilityHidden");this._iTimeoutId=setTimeout(function(){this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}.bind(this),3e3)}else{this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}if(!this.getVisible()){this.setVisible(true);this.$().show()}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open()}};p.prototype.showAppInfo=function(e,t,i){this.setText(e);this.setIconUri(t);this.oIcon.setSrc(t);this._oLabel.setText(e);this._oLabel.addCustomData(new n({key:"aria-hidden",value:"true",writeToDom:true}));var s=this.getDomRef("accessibility-helper");if(s&&i){s.innerText=this.sLoadingString}};p.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId)}if(this.getVisible()){this.sState="idle";this.setVisible(false);this.$().hide();this._oPopup.close()}};return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialogRenderer", [],function(){"use strict";var e={apiVersion:2,render:function(e,n){var t=n.getTooltip_AsString();e.openStart("div",n);e.class("sapUshellLoadingDialogControl");if(t){e.attr("title",t)}e.openEnd();this.renderAppInfo(e,n);e.close("div")},renderAppInfo:function(e,n){e.openStart("div");e.class("sapUshellLoadingDialogAppData");e.openEnd();if(n.getIconUri()){e.renderControl(n.oIcon)}e.openStart("span",n.getId()+"-accessibility-helper");e.class("sapUshellAccessibilityHelper");e.attr("aria-live","rude");e.attr("aria-relevant","additions text");e.openEnd();e.close("span");e.renderControl(n._oLabel);e.close("div")}};return e},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Tile", ["sap/base/Log","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./TileRenderer"],function(e,t,i,o,s,n,jQuery,a,l,r,c){"use strict";var u=o.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},tileCatalogIdStable:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false},noContainerMode:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}},renderer:c});u.prototype.init=function(){this.addDelegate({onkeyup:function(e){var t=e.originalEvent;var i=t.code==="Space"||e.keyCode===32;var o=t.code==="Enter"||e.keyCode===13;var s=t.altKey||t.shiftKey||t.ctrlKey||t.metaKey;if((i||o)&&!s){this._launchTileViaKeyboard(e)}}},this)};u.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy()}if(this.actionIcon){this.actionIcon.destroy()}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy()}};u.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new t({text:l.i18n.getText("Tile.failedToLoadView")})}return this.failedToLoadViewText};u.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined}if(!this.actionSheetIcon){this.actionSheetIcon=new n({src:"sap-icon://overflow",tooltip:l.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner")}return this.actionSheetIcon};u.prototype.ontap=function(){e.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress()};u.prototype.destroy=function(e){this.destroyTileViews();o.prototype.destroy.call(this,e)};u.prototype.addTileView=function(e,t){e.setParent(null);i.prototype.addAggregation.call(this,"tileViews",e,t)};u.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};u.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=null}if(document.activeElement===e){this.bFocused=true}this.sTabIndex=e.getAttribute("tabindex");if(this.sTabIndex){e.removeAttribute("tabindex")}}};u.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){var e=this.getParent();e.removeAggregation("tiles",this,false)}var t=this.getDomRef();if(t){if(this.sTabIndex){t.setAttribute("tabindex",this.sTabIndex);delete this.sTabIndex}if(this.bFocused){t.focus();delete this.bFocused}}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering()};u.prototype._disableInnerLink=function(){var e=this.getDomRef();var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=function(e){e.preventDefault()}}};u.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()})}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],i=false,o,s;if(t.firePress){t.firePress({id:this.getId()})}else if(t.getComponentInstance){o=t.getComponentInstance();if(o._oController&&o._oController.oView.getContent()){s=o._oController.oView.getContent()[0];if(s&&s.firePress){s.firePress({id:this.getId()})}}}else{while(t.getContent&&!i){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});i=true}}}}}};u.prototype.onfocusin=function(){var t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){var i=this.$().prevUntil("h3"),o;if(i.length>0){o=i[i.length-1].previousSibling}else{o=t.previousSibling}var s=t.querySelector(".sapUshellTileInner");if(s&&s.children&&s.children[0]){var n=[];if(o){n.push("sapUshellCatalogAccessibilityTileText")}else{n.push("sapUshellDashboardAccessibilityTileText")}var a=this.getNavigationMode();if(a){var r=l.i18n.getText(a+"NavigationMode");if(r){var c=this.getId()+"-navigationMode";if(!document.getElementById(c)){var u=document.createElement("div");u.setAttribute("id",c);u.style.display="none";u.innerText=r;s.appendChild(u)}n.push(c)}else{e.warning("The navigation mode is of a unkown mode, it can not be read!")}}n.push(s.children[0].getAttribute("id"));var d=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(d){n.push(d.id)}if(o){n.push(o.getAttribute("id"))}if(this.getTileActionModeActive()){n.push("sapUshellDashboardAccessibilityTileEditModeText")}t.setAttribute("aria-labelledby",n.join(" "))}}};u.prototype.onclick=function(e){if(this.getTileActionModeActive()){var t=e.originalEvent.srcElement;if(jQuery(t).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress()}else{this.fireCoverDivPress({id:this.getId()})}}else{this._announceLoadingApplication()}};u.prototype._announceLoadingApplication=function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),t=l.i18n.getText("screenReaderNavigationLoading");if(e){e.setAttribute("role","alert");e.innerText=t;setTimeout(function(){e.removeAttribute("role");e.innerText=""},0)}};u.prototype._initDeleteAction=function(){var e=this;if(!this.deleteIcon){this.deleteIcon=new n({src:"sap-icon://decline",tooltip:l.i18n.getText("removeButtonTitle")});this.deleteIcon.addEventDelegate({onclick:function(t){e.fireDeletePress();t.stopPropagation()}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new r({key:"aria-label",value:l.i18n.getText("removeButtonLabel"),writeToDom:true}))}return this.deleteIcon};u.prototype.setShowActionsIcon=function(e){if(e){if(!this.actionIcon){this.actionIcon=new n({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");var e=s.getEventBus(),t=function(i,o,s){s.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",t)};e.subscribe("dashboard","actionSheetClose",t)}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass")}}this.setProperty("showActionsIcon",e)};u.prototype.setIsDraggedInTabBarToSourceGroup=function(e){this.setProperty("isDraggedInTabBarToSourceGroup",e);this.setVisible(!e)};u.prototype.setRgba=function(e){this.setProperty("rgba",e);this._redrawRGBA()};u.prototype._redrawRGBA=function(){var e=this.getRgba(),t=this.$();if(e&&t){var i=this.getModel();t.css("background-color",e);t.unbind("mouseenter mouseleave");var o,s=t.css("border").split("px")[0];if(s>0){o=t.css("border-color")}else{o=e}t.hover(function(){if(i&&!i.getProperty("/tileActionModeActive")){var e=t.css("box-shadow"),s=e?e.split(") ")[1]:null;if(s){t.css("box-shadow",s+" "+o)}}},function(){t.css("box-shadow","")})}};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileRenderer", ["sap/base/Log","sap/ushell/Config"],function(e,l){"use strict";var i={apiVersion:2};i.render=function(i,t){var n=null;try{n=t.getTileViews()[0]}catch(l){e.warning("Failed to load tile view: ",l.message);n=t.getFailedtoLoadViewText()}var o=t.getParent();if(!o){return}var s=t.getNoContainerMode();i.openStart(s?"div":"li",t);if(l.last("/core/shell/model/enableHelp")){i.attr("data-help-id",t.getTileCatalogId());if(t.getTileCatalogIdStable()){i.attr("data-help-id2",t.getTileCatalogIdStable())}}i.class("sapUshellTile");if(t.getTileActionModeActive()){i.class("sapUshellTileWrapper")}if(n&&n.getContent){var a=n.getContent();a.forEach(function(e){if(e.isA("sap.m.GenericTile")){i.class("sapUshellFeedTileBG")}})}if(t.getLong()){i.class("sapUshellLong")}if(!t.getVisible()){i.class("sapUshellHidden")}if(t.getIsLocked()){i.class("sapUshellLockedTile")}if(l.last("/core/home/sizeBehavior")==="Small"){i.class("sapUshellSmall")}var r=o.getId()+"-titleText";i.attr("aria-describedby",r);i.openEnd();if(t.getTileActionModeActive()){this.renderTileActionMode(i,t);this.renderTileView(i,t,n)}else{i.openStart("div");i.class("sapUshellTileWrapper");i.openEnd();this.renderTileView(i,t,n);if(t.getShowActionsIcon()){i.renderControl(t.actionIcon)}i.close("div");this.renderTileActionsContainer(i,n,t.getPinButton())}i.close(s?"div":"li")};i.renderTileActionsContainer=function(e,l,i){i=i.length?i[0]:undefined;if(i){i.addStyleClass("sapUshellActionButton");e.openStart("div");e.class("sapUshellTilePinButtonOverlay");if(l.getHeader){e.attr("role","toolbar");e.attr("aria-label",l.getHeader())}e.openEnd();e.renderControl(i);e.close("div")}};i.renderTileView=function(e,l,i){e.openStart("div");e.class("sapUshellTileInner");if(l.getTileActionModeActive()){e.class("sapUshellTileActionBG")}e.openEnd();e.renderControl(i);e.close("div")};i.renderTileActionMode=function(e,l){e.openStart("div");e.class("sapUshellTileActionLayerDiv");e.openEnd();if(!l.getIsLocked()){e.openStart("div");e.class("sapUshellTileDeleteClickArea");e.openEnd();e.openStart("div");e.class("sapUshellTileDeleteIconOuterClass");e.openEnd();e.renderControl(l._initDeleteAction());e.close("div");e.close("div")}e.openStart("div");e.class("sapUshellTileActionDivCenter");e.openEnd();e.close("div");e.openStart("div");e.class("sapUshellTileActionIconDivBottom");e.openEnd();e.openStart("div");e.class("sapUshellTileActionIconDivBottomInnerDiv");e.openEnd();e.renderControl(l.getActionSheetIcon());e.close("div");e.close("div");e.close("div")};return i},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/OverflowListItem", ["sap/m/StandardListItem","sap/ui/core/CustomData","sap/ushell/library","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,a,r){"use strict";var o=r.getMetadata().getProperties();var l=e.extend("sap.ushell.ui.shell.OverflowListItem",{metadata:{library:"sap.ushell",properties:{floatingNumber:{type:o.floatingNumber.type,group:o.floatingNumber.group,defaultValue:o.floatingNumber.defaultValue},floatingNumberMaxValue:{type:o.floatingNumberMaxValue.type,group:o.floatingNumberMaxValue.group,defaultValue:o.floatingNumberMaxValue.defaultValue},floatingNumberType:{type:o.floatingNumberType.type,group:o.floatingNumberType.group,defaultValue:o.floatingNumberType.defaultValue}}},renderer:{apiVersion:2}});l.prototype.init=r.prototype.init;l.prototype.onBeforeRendering=r.prototype.onBeforeRendering;l.prototype.tooltipFormatter=r.prototype.tooltipFormatter;l.prototype.floatingNumberFormatter=r.prototype.floatingNumberFormatter;l.prototype._getImage=function(){var a=this._oImage;if(!a){a=e.prototype._getImage.call(this)}if(this.getFloatingNumber()>0){a.addStyleClass("sapUshellShellHeadItmCounter");a.addCustomData(new t({key:"counter-content",value:this.floatingNumberFormatter(),writeToDom:true}))}else{a.removeStyleClass("sapUshellShellHeadItmCounter")}this._oImage=a;return this._oImage};return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellAppTitle", ["sap/m/Bar","sap/m/Button","sap/m/Label","sap/m/HBox","sap/m/VBox","sap/m/library","sap/m/Popover","sap/m/ResponsivePopover","sap/m/Title","sap/m/ToggleButton","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/Device","sap/ui/performance/Measurement","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData"],function(e,t,o,l,s,i,p,n,a,r,h,u,c,v,y,A,d,f,g){"use strict";var M=d.AppTitleState;var S=d.AllMyAppsState;var P=i.PlacementType;var T=t.extend("sap.ushell.ui.shell.ShellAppTitle",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subTitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:"sap-icon://folder"}},associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.View"}},events:{textChanged:{deprecated:true}}},renderer:{apiVersion:2,render:function(e,t){var o=t._getControlVisibilityAndState();var l=t.getText();e.openStart("h1");e.class("sapUiPseudoInvisibleText");e.attr("aria-level","1");e.openEnd();e.text(l||"");e.close("h1");e.openStart("div",t);e.class("sapUshellHeadTitle");if(o||v.system.phone){e.class("sapUshellAppTitleClickable")}e.openEnd();e.openStart("div",t.getId()+"-button");e.class("sapUshellAppTitle");if(o||v.system.phone){e.attr("tabindex","0")}if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(o){e.attr("role","button");e.attr("aria-haspopup","dialog");e.attr("aria-label",l)}e.openEnd();if(v.media.getCurrentRange(v.media.RANGESETS.SAP_STANDARD).name!=="Phone"){e.openStart("span");e.class("sapUshellAppTitleText");e.openEnd();e.text(l||"");e.close("span")}if(o&&l){e.openStart("span");e.class("sapUshellShellHeadAction");e.openEnd();e.renderControl(t.oIcon);e.close("span")}e.close("div");e.close("div")}}});T.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oIcon=c.createControlByURI(c.getIconURI("slim-arrow-down"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");if(v.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){this.onclick(e)}}.bind(this)})}};T.prototype.getFocusDomRef=function(){return this.getDomRef("button")};T._getCurrentState=function(){return A.last("/core/shellHeader/ShellAppTitleState")};T.prototype.onclick=function(e){e.preventDefault();this.firePress();if(!this._getControlVisibilityAndState()){if(v.system.phone){window.hasher.setHash(A.last("/core/shellHeader/rootIntent"))}return}if(T._getCurrentState()===M.AllMyAppsOnly){y.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");this._openCloseAllMyAppsPopover();return}this._openCloseNavMenuPopover()};T.prototype._openCloseAllMyAppsPopover=function(){if(!this.oAllMyAppsPopover){this.oAllMyAppsPopover=this._createAllMyAppsPopover()}if(this.oAllMyAppsPopover){if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}else{this.oAllMyAppsPopover.openBy(this)}}};T.prototype._openCloseNavMenuPopover=function(){if(!this.oNavMenuPopover){this.oNavMenuPopover=this._createNavMenuPopover()}this.getModel().setProperty("/ShellAppTitleState",M.ShellNavMenu);if(this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}else{this.oNavMenuPopover.openBy(this)}if(this.oNavMenuPopover.getFooter()){var e=A.last("/core/shell/model/currentState/stateName");this.oNavMenuPopover.getFooter().setVisible(e==="home"||e==="app")}};T.prototype._getControlVisibilityAndState=function(){y.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");var e=this.getModel();var t=A.last("/core/shell/model/currentState/stateName");var o=this._isNavMenuEnabled();var l=o;if(!e){return false}if(t==="app"||t==="home"){var s=A.last("/core/services/allMyApps/enabled");l=s||o;if(s&&o){e.setProperty("/ShellAppTitleState",M.ShellNavMenu)}else if(!s&&o){e.setProperty("/ShellAppTitleState",M.ShellNavMenuOnly)}else if(s&&!o){e.setProperty("/ShellAppTitleState",M.AllMyAppsOnly)}}else{e.setProperty("/ShellAppTitleState",M.ShellNavMenuOnly)}y.end("FLP:ShellAppTitle.getControlVisibilityAndState");return l};T.prototype._createAllMyAppsPopover=function(){var e=h.byId(this.getAllMyApps());if(!e){return null}var t=new n("sapUshellAllMyAppsPopover",{placement:P.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(),verticalScrolling:false,showHeader:{path:"/ShellAppTitleState",formatter:function(e){return e!==M.ShellNavMenu}},content:[e],contentHeight:"28rem",contentWidth:"56rem"}).addStyleClass("sapContrastPlus");t.setModel(this.getModel());t.attachAfterOpen(function(){e.getController()._afterOpen();var o=t.getCustomHeader();var l=o.getContentLeft()[0];var s=o.getContentLeft()[1];if(s.getVisible()){s.firePress();s.setPressed(true)}l.focus()});t.attachAfterClose(this._afterCloseAllMyAppsPopover.bind(this));return t};T.prototype._afterCloseAllMyAppsPopover=function(){this._bPressedSpace=false;if(this._bOpenNavigationMenu===true){this._bOpenNavigationMenu=false;this.oNavMenuPopover.openBy(this)}else if(!v.system.phone){this.focus()}};T.prototype._createNavMenuPopover=function(){var e=h.byId(this.getNavigationMenu());this.oTitle=new a("navMenuInnerTitle",{wrapping:true,text:"{/application/title}"});this.oSecondTitle=new o("navMenuInnerSecondTitle",{text:"{/title}",visible:"{= !!${/title}}",wrapping:true});this.oIconControl=new u({src:"{/application/icon}"});const t=new s({items:[this.oTitle,this.oSecondTitle]}).addStyleClass("sapUshellNavTitleBox");const i=new s({items:[this.oIconControl]}).addStyleClass("sapUiContentPadding");const n=new l("navMenuTitleBar",{width:"100%",items:[i,t]});var r=new p("sapUshellAppTitlePopover",{placement:P.Bottom,showArrow:true,showHeader:false,contentWidth:"20rem",horizontalScrolling:false,content:[n,e]}).addStyleClass("sapContrastPlus");if(A.last("/core/services/allMyApps/enabled")){r.setFooter(this._getPopoverFooterContent())}r.addStyleClass("sapUshellAppTitleNavigationMenuPopover");r.setModel(this.getModel());A.emit("/core/shell/model/allMyAppsMasterLevel",S.FirstLevel);r.attachBeforeOpen(function(){e._beforeOpen()});r.attachAfterOpen(function(){e.$().on("touchmove.scrollFix",function(e){e.stopPropagation()});e._afterOpen()});r.attachAfterClose(this._afterCloseNavigationMenuPopover.bind(this));return r};T.prototype._afterCloseNavigationMenuPopover=function(){this._bPressedSpace=false;if(this._bOpenAllMyApps){this._bOpenAllMyApps=false;this._openCloseAllMyAppsPopover()}else if(!v.system.phone){this.focus()}};T.prototype._setAllMyAppsTitle=function(e){var t=A.last("/core/shellHeader");if(t.title&&(t.ShellAppTitleState==="AllMyAppsOnly"||t.ShellAppTitleState==="AllMyApps")){e=e+" - "+t.title}a.prototype.setText.apply(this,[e])};T.prototype._getPopoverHeader=function(){var t=new a({text:f.i18n.getText("allMyApps_headerTitle"),level:"H1"});t.setText=this._setAllMyAppsTitle.bind(t);var o=new e("sapUshellShellAppPopoverHeader",{contentLeft:[this._createPopoverBackButton(),this._createPopoverToggleButton()],contentMiddle:[t]});return o};T.prototype.onAfterRendering=function(){var e=h.byId("shell-header");if(e){e.refreshLayout()}};T.prototype._createPopoverBackButton=function(){var e=new t("sapUshellAppTitleBackButton",{icon:c.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:f.i18n.getText("backBtn_tooltip"),visible:this.getAllMyAppsController().getBackButtonVisible()});e.addStyleClass("sapUshellCatalogNewGroupBackButton");return e};T.prototype._popoverBackButtonPressHandler=function(){var e=this.getAllMyAppsController();var t=e.getCurrentState();if(t===S.FirstLevel||t===S.FirstLevelSpread){if(T._getCurrentState()!==M.AllMyAppsOnly){this.getModel().setProperty("/ShellAppTitleState",M.ShellNavMenu);this.oAllMyAppsPopover.close();this._bOpenNavigationMenu=true}}else if(t===S.SecondLevel){e.switchToInitialState()}else{e.handleSwitchToMasterAreaOnPhone()}e.updateHeaderButtonsState()};T.prototype._createPopoverToggleButton=function(){var e=this.getAllMyAppsController();var t=new r("sapUshellAllMyAppsToggleListButton",{icon:c.getIconURI("sap-icon://menu2"),press:function(t){e.switchToInitialState();this.setTooltip(t.getParameter("pressed")?f.i18n.getText("ToggleButtonHide"):f.i18n.getText("ToggleButtonShow"))},tooltip:f.i18n.getText("ToggleButtonShow"),visible:e.getToggleListButtonVisible()});v.media.attachHandler(function(){t.setVisible(e.getToggleListButtonVisible())},this,v.media.RANGESETS.SAP_STANDARD);t.addStyleClass("sapUshellAllMyAppsToggleListButton");return t};T.prototype._getPopoverFooterContent=function(){var o=new t("allMyAppsButton",{text:f.i18n.getText("allMyApps_launchingButtonTitle"),press:this._allMyAppsButtonPressHandler.bind(this),visible:{path:"/ShellAppTitleState",formatter:function(e){return e===M.ShellNavMenu}}});var l=new e("shellpopoverFooter",{contentMiddle:[o]});this.addCustomData(o,"role","button");this.addCustomData(o,"aria-label",f.i18n.getText("allMyApps_launchingButtonTitle"));return l};T.prototype._allMyAppsButtonPressHandler=function(){if(h.byId(this.getAllMyApps())){y.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");this.getModel().setProperty("/ShellAppTitleState",M.AllMyApps);this.oNavMenuPopover.close();this._bOpenAllMyApps=true}};T.prototype._isNavMenuEnabled=function(){var e=h.byId(this.getNavigationMenu());return e?e.getItems()&&e.getItems().length>0:false};T.prototype.addCustomData=function(e,t,o){e.addCustomData(new g({key:t,value:o,writeToDom:true}))};T.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}if(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}};T.prototype.setTooltip=function(e){this.setAggregation("tooltip",e);this.oIcon.setTooltip(e)};T.prototype.getAllMyAppsController=function(){var e=h.byId(this.getAllMyApps());return e.getController()};T.prototype.onkeyup=function(e){if(e.keyCode===32){this.onclick(e)}};T.prototype.onsapenter=T.prototype.onclick;T.prototype.exit=function(){var e=h.byId(this.getNavigationMenu());var t=h.byId(this.getAllMyApps());if(e){e.destroy()}if(t){t.destroy()}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy()}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy()}if(this.oIcon){this.oIcon.destroy()}};return T},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellHeadItem", ["sap/base/util/ObjectPath","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ushell/library","sap/ushell/resources"],function(e,t,a,i,r,o){"use strict";var n=r.FloatingNumberType;var l=t.extend("sap.ushell.ui.shell.ShellHeadItem",{metadata:{library:"sap.ushell",properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaHidden:{type:"boolean",group:"Accessibility",defaultValue:false},ariaHaspopup:{type:"string",group:"Accessibility",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},floatingNumberType:{type:"string",group:"Appearance",defaultValue:n.None}},events:{press:{}}},renderer:{apiVersion:2,render:function(e,t){var i=t.getTarget();e.openStart("a",t);e.attr("tabindex","0");if(i){e.attr("href",i)}e.attr("role",i?"link":"button");var r=t.getAriaLabel();if(r){e.attr("aria-label",r)}var o=t.getAriaHidden();if(o){e.attr("aria-hidden",o)}var n=t.getAriaHaspopup();if(n){e.attr("aria-haspopup",n)}e.attr("aria-describedby",t._oAriaDescribedbyText.getId());if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(t.getFloatingNumber()>0){e.attr("data-counter-content",t.floatingNumberFormatter());e.class("sapUshellShellHeadItmCounter")}e.class("sapUshellShellHeadItm");if(!t.getEnabled()){e.class("sapUshellShellHeadItmDisabled")}if(t.getSelected()){e.class("sapUshellShellHeadItmSel")}var l=t.getText();var s=t.getTooltip_AsString();if(l||s){e.attr("title",s||l)}e.openEnd();e.openStart("span");e.class("sapUshellShellHeadItmCntnt");var u=t.getIcon();var p=a.isIconURI(u)&&a.getIconInfo(u);if(p){e.style("font-family",p.fontFamily);e.openEnd();e.text(p.content)}else{e.openEnd();e.voidStart("img");e.attr("id",t.getId()+"-img-inner");e.attr("src",u);e.voidEnd()}e.close("span");e.close("a")}}});l.prototype.init=function(){this._oAriaDescribedbyText=new i(this.getId()+"-describedby").toStatic();this.addDependent(this._oAriaDescribedbyText)};l.prototype.onBeforeRendering=function(){switch(this.getFloatingNumberType()){case n.None:this._oAriaDescribedbyText.setText("");break;default:var e=this.getFloatingNumber();if(!e){this._oAriaDescribedbyText.setText("")}else{var t=this.getFloatingNumberMaxValue();this._oAriaDescribedbyText.setText(e>t?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",[t]):o.i18n.getText("NotificationToggleButton.NewNotifications",[e]))}break}};l.prototype.tooltipFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();switch(this.getFloatingNumberType()){default:case n.None:return"";case n.Notifications:if(!t){return o.i18n.getText("NotificationToggleButton.NoNewNotifications")}return t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",[a]):o.i18n.getText("NotificationToggleButton.NewNotifications",[t]);case n.OverflowButton:var i=o.i18n.getText("shellHeaderOverflowBtn_tooltip");if(!t){return i}i+=" ("+(t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",[a]):o.i18n.getText("NotificationToggleButton.NewNotifications",[t]))+")";return i}};l.prototype.floatingNumberFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();return t>a?a+"+":t.toString()};l.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault()}}};l.prototype.onkeyup=function(e){var t=e.originalEvent;var a=t.key;var i=t.shiftKey;if(["Enter"," "].includes(a)&&!i){this.onclick(e)}};e.set("sap.ui.unified.ShellHeadItem",l);return l},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SysInfoBar", ["sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/Icon","sap/ushell/library","sap/m/Bar","sap/m/Label","sap/ui/core/CustomData","./SysInfoBarRenderer"],function(e,t,s,o,a,r,l,i){"use strict";var n={orange:"sapUshellSysInfoBarOrange",Orange:"sapUshellSysInfoBarOrange",red:"sapUshellSysInfoBarRed",Red:"sapUshellSysInfoBarRed",pink:"sapUshellSysInfoBarPink",Pink:"sapUshellSysInfoBarPink",violet:"sapUshellSysInfoBarViolet",Violet:"sapUshellSysInfoBarViolet",blue:"sapUshellSysInfoBarBlue",Blue:"sapUshellSysInfoBarBlue",green:"sapUshellSysInfoBarGreen",Green:"sapUshellSysInfoBarGreen",grey:"sapUshellSysInfoBarGrey",Grey:"sapUshellSysInfoBarGrey",gray:"sapUshellSysInfoBarGrey",Gray:"sapUshellSysInfoBarGrey"};var p=e.extend("sap.ushell.ui.shell.SysInfoBar",{metadata:{library:"sap.ushell",defaultAggregation:"_bar",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},text:{type:"string",group:"Misc",defaultValue:""},subText:{type:"string",group:"Misc",defaultValue:""},color:{type:"string",group:"Misc",defaultValue:"orange"}},aggregations:{_bar:{type:"sap.m.Bar",multiple:false,visibility:"hidden"}}},renderer:i});p.prototype.init=function(){var e=new a({id:this.getId()+"-bar"}).addStyleClass("sapUshellSysInfoBar");e._setRootAccessibilityRole("complementary");e.data("sap-ui-fastnavgroup","false",false);this._oText=new r({id:this.getId()+"-text",text:this.getText(),design:"Bold"}).addStyleClass("sapUshellSysInfoBarText");this._oSubText=new r({id:this.getId()+"-subText",text:this.getSubText()}).addStyleClass("sapUshellSysInfoBarText");this.setAggregation("_bar",e,true);var t=new l({key:"help-id",value:"FLP-SysInfoBar",writeToDom:true});this.addCustomData(t)};p.prototype.exit=function(){this._oIcon=null;this._oText=null;this._oSubText=null};p.prototype.onBeforeRendering=function(){var e=this.getAggregation("_bar");e.removeAllContentMiddle();e.addContentMiddle(this._oIcon);e.addContentMiddle(this._oText);e.addContentMiddle(this._oSubText);if(this._isMappedColor(this.getColor())){this.addStyleClass(this._getMappedColorClass(this.getColor()))}else{this.addStyleClass("sapUshellSysInfoBarCustom")}};p.prototype.setText=function(e){this.setProperty("text",e,true);this._oText.setText(e)};p.prototype.setSubText=function(e){this.setProperty("subText",e,true);this._oSubText.setText(e)};p.prototype.setIcon=function(e){if(t.isIconURI(e)){if(this._oIcon){this._oIcon.destroy();this._oIcon=null}this._oIcon=t.createControlByURI({id:this.getId()+"-icon",src:e,densityAware:true,useIconTooltip:true},s).addStyleClass("sapUshellSysInfoBarText");this.invalidate()}else if(this._oIcon){this._oIcon.destroy();this._oIcon=null}this.setProperty("icon",e)};p.prototype.setColor=function(e){var t=this.getColor();if(this._isMappedColor(t)&&this.hasStyleClass(this._getMappedColorClass(t))){this.removeStyleClass(this._getMappedColorClass(t))}this.setProperty("color",e)};p.prototype._isMappedColor=function(e){return!!n[e]};p.prototype._getMappedColorClass=function(e){return n[e]||""};return p});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SysInfoBarRenderer", ["sap/ushell/resources"],function(e){"use strict";var o={apiVersion:2};o.render=function(o,r){o.openStart("div",r);o.accessibilityState(r,{role:"complementary",label:e.i18n.getText("SysInfoBarAriaLabel",[r._oText.getText(),r._oSubText.getText()])});o.class("sapUshellSysInfoBar");if(!r._isMappedColor(r.getColor())){o.style("border","1px solid "+r.getColor());o.style("background-color",r.getColor())}o.openEnd();o.renderControl(r.getAggregation("_bar"));o.close("div")};return o},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ToolAreaItem", ["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(jQuery,e,t){"use strict";var a=e.extend("sap.ushell.ui.shell.ToolAreaItem",{metadata:{library:"sap.ushell",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},renderer:{apiVersion:2,render:function(e,a){var l;e.openStart("div",a);if(!a.getIcon()){e.class("sapUshellToolAreaItmTextOnly")}else{e.class("sapUshellToolAreaItm")}if(!a.getVisible()){e.class("sapUshellShellHidden")}if(a.getAriaLabel()){e.accessibilityState(a,{label:this.getAriaLabel(),role:"button"})}var s=a.getTooltip_AsString();if(s){e.attr("title",s)}e.openEnd();if(a.getIcon()){l=t.createControlByURI(a.getIcon());l.setUseIconTooltip(false);l.addStyleClass("sapUshellToolAreaItemIcon");e.renderControl(l)}if(a.getText()){e.openStart("span");e.class("sapUshellToolAreaItemText");e.openEnd();e.text(a.getText());e.close("span")}if(a.getExpandable()){this.renderExpandable(e)}e.close("div")},renderExpandable:function(e){var a=t.createControlByURI("sap-icon://icon-dropdown");a.addStyleClass("sapUshellToolAreaItemExpandable");e.renderControl(a)}}});a.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false)}else{this.setSelected(true)}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand()}else{this.firePress()}};a.prototype.onsapenter=a.prototype.onclick;a.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e)};a.prototype.setSelected=function(e){e=!!e;if(e){var t=jQuery(".sapUshellToolAreaItemSelected");t.each(function(){jQuery(this).removeClass("sapUshellToolAreaItemSelected")})}this.setProperty("selected",e,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",e)};a.prototype.setVisible=function(e){var t=this.getParent()&&this.getParent().getDomRef();this.setProperty("visible",!!e,t);this.$().toggleClass("sapUshellShellHidden",!e)};a.prototype.setAriaLabel=function(e){this.setProperty("ariaLabel",e);return this};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/StaticTile", ["sap/ushell/library","sap/ushell/ui/tile/TileBase","sap/ushell/ui/tile/StaticTileRenderer"],function(e,l,i){"use strict";var a=l.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"},renderer:i});return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/StaticTileRenderer", ["sap/ui/core/Renderer","./TileBaseRenderer"],function(e,n){"use strict";var r=e.extend(n);r.apiVersion=2;r.renderPart=function(e,n){e.openStart("span");e.class("sapUshellStaticTile");e.openEnd();e.close("span")};return r});
/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/tile/TileBase", ["sap/ushell/library","sap/ui/core/Control","sap/ushell/library","./TileBaseRenderer"],function(e,t,a,r){"use strict";var l=e.ui.tile.State;var u=t.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subtitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"string",group:"Data",defaultValue:null},info:{type:"string",group:"Data",defaultValue:null},infoState:{type:"sap.ushell.ui.tile.State",defaultValue:l.Neutral},targetURL:{type:"string",group:"Behavior",defaultValue:null},highlightTerms:{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{press:{}}},renderer:r});u.prototype.ontap=function(e){this.firePress({})};u.prototype.onsapenter=function(e){this.firePress({})};u.prototype.onsapspace=function(e){this.firePress({})};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/TileBaseRenderer", ["sap/ushell/library","sap/ushell/resources","sap/base/security/encodeXML","sap/ui/core/Icon"],function(e,t,l,i){"use strict";var s=e.ui.tile.State;var a={apiVersion:2};var n=t.i18n;a.highlight=function(e,t){var i,s,a=l(t).replace(/&#xa;/g,"<br>");if(e&&e.length&&e.length>0){for(i=0;i<e.length;i=i+1){s=new RegExp("("+l(e[i]).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")+")","gi");a=a.replace(s,"<b>$1</b>")}}return a};a.render=function(e,t){var l,a;e.openStart("div",t);if(t.getTargetURL()){e.attr("data-targeturl",t.getTargetURL())}e.class("sapUshellTileBase");e.openEnd();e.openStart("div");e.class("sapUshellTileBaseHeader");e.openEnd();e.openStart("h3");e.class("sapUshellTileBaseTitle");e.accessibilityState(t,{label:n.getText("tileTypeListItem")+n.getText("TileDetails_lable")+n.getText("TileTitle_lable")+t.getTitle(),level:"3"});e.openEnd();e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getTitle()||""));e.close("h3");if(t.getSubtitle()){e.openStart("h4");e.class("sapUshellTileBaseSubtitle");e.accessibilityState(t,{label:n.getText("TileSubTitle_lable")+t.getSubtitle(),level:"4"});e.openEnd();e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getSubtitle()));e.close("h4")}e.close("div");if(typeof this.renderPart==="function"){this.renderPart(e,t)}if(t.getIcon()){a=new i({src:t.getIcon()});a.addStyleClass("sapUshellTileBaseIcon");e.renderControl(a)}if(t.getInfo()||typeof this.getInfoPrefix==="function"&&this.getInfoPrefix(t)){e.openStart("div");e.class("sapUshellTileBaseInfo");e.class(t.getInfoState()?"sapUshellTileBase"+t.getInfoState():"sapUshellTileBase"+s.Neutral);e.accessibilityState(t,{label:n.getText("TileInfo_lable")+t.getInfo()});e.openEnd();if(typeof this.getInfoPrefix==="function"){l=this.getInfoPrefix(t);e.text(l)}if(t.getInfo()){if(l){e.text(", ")}e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getInfo()))}e.close("div")}e.close("div")};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/ShellUIService", ["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_ShellUIService/shelluiservice.class.factory"],function(e,r,c,i){"use strict";return i({serviceRegistry:e,serviceFactory:r,service:c})},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/_ShellUIService/shelluiservice.class.factory", ["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher","sap/base/util/isPlainObject","sap/base/util/Version","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ui/core/Configuration"],function(e,t,n,r,i,a,o){"use strict";return function(s){var c=s.serviceRegistry;var l=s.serviceFactory;var u=s.service;var h;var d=new e;var p={hierarchyChanged:"hierarchyChanged",relatedAppsChanged:"relatedAppsChanged",titleChanged:"titleChanged",backNavigationChanged:"backNavigationChanged"};var v;var f=u.extend("sap.ushell.ui5service.ShellUIService",{init:function(){var e=this;var t=this.getInterface();t.init=function(){e._amendPublicServiceInstance.call(e,this)};c.register("sap.ushell.ui5service.ShellUIService",new l(t))},_setActiveComponentId:function(e){v=e},_getActiveComponentId:function(){return v},_shouldEnableAutoHierarchy:function(e){return typeof e.getManifestEntry==="function"&&e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy")==="auto"},_shouldEnableAutoTitle:function(e){return typeof e.getManifestEntry==="function"&&e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle")==="auto"},_enableAutoHierarchy:function(e){var t=this;var n=e.getRouter&&e.getRouter();if(!n){i.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}n.attachTitleChanged(function(e){var n=e.getParameter("history");t.setHierarchy(n.reverse().map(function(e){var n=t._getCurrentShellHashWithoutAppRoute();return{title:e.title,intent:n+"&/"+e.hash}}))})},_enableAutoTitle:function(e){var t=this;var n=e.getRouter&&e.getRouter();if(!n){i.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}var r=n.getTitleHistory()[0];if(r&&r.title){setTimeout(function(){t.setTitle(r.title)},0)}n.attachTitleChanged(function(e){var n=e.getParameter("title");t.setTitle(n)})},_getCurrentShellHashWithoutAppRoute:function(){var e="#"+t.getHash();var n=a.getShellHash(e);if(!n){i.error("Cannot get the current shell hash","UrlParsing service returned a falsy value for "+e,"sap.ushell.ui5service.ShellUIService");return""}return"#"+n},_getEventProvider:function(){return d},_getLastSetTitle:function(){return h},_ensureArrayOfObjectOfStrings:function(e,t){var r=Array.isArray(e)&&e.every(function(e){return n(e)&&Object.keys(e).length>0&&Object.keys(e).every(function(t){return typeof e[t]==="string"})});if(!r){i.error("'"+t+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.ShellUIService")}return r},_ensureFunction:function(e,t){var n=typeof e;if(n!=="function"){i.error("'"+t+"' was called with invalid arguments","the parameter should be a function, got '"+n+"' instead","sap.ushell.ui5service.ShellUIService");return false}return true},_ensureString:function(e,t){var n=typeof e;if(n!=="string"){i.error("'"+t+"' was called with invalid arguments","the parameter should be a string, got '"+n+"' instead","sap.ushell.ui5service.ShellUIService");return false}return true},_addCallAllowedCheck:function(e,t){var n=this;e[t]=function(){var r=e.getContext();if(!r||r.scopeObject.getId()!==v){i.warning("Call to "+t+" is not allowed","This may be caused by an app component other than the active '"+v+"' that tries to call the method","sap.ushell.ui5service.ShellUIService");return undefined}if(t==="setHierarchy"&&r.scopeType==="component"&&r.scopeObject&&n._shouldEnableAutoHierarchy(r.scopeObject)){i.warning("Call to "+t+" is not allowed","The app defines that setHierarchy should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined}if(t==="setTitle"&&r.scopeType==="component"&&r.scopeObject&&n._shouldEnableAutoTitle(r.scopeObject)){i.warning("Call to "+t+" is not allowed","The app defines that setTitle should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined}return n[t].apply(e,arguments)}},_amendPublicServiceInstance:function(e){var t=this;var n=e.getContext();if(typeof n==="undefined"){return}["setTitle","setHierarchy","setRelatedApps","setBackNavigation"].forEach(function(n){t._addCallAllowedCheck(e,n)});var r=n.scopeObject;if(n.scopeType==="component"&&r){this._setActiveComponentId(r.getId());if(this._shouldEnableAutoHierarchy(r)){this._enableAutoHierarchy(r)}if(this._shouldEnableAutoTitle(r)){this._enableAutoTitle(r)}return}i.error("Invalid context for ShellUIService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.ShellUIService")},setHierarchy:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureArrayOfObjectOfStrings(e,"setHierarchy")){return}var t=this.getContext().scopeObject;d.fireEvent(p.hierarchyChanged,{data:e,component:t})},setTitle:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureString(e,"setTitle")){return}h=e;var t={data:e,component:this.getContext().scopeObject};if(typeof arguments[1]==="boolean"&&arguments[1]){t.bAcceptEmptyString=true}d.fireEvent(p.titleChanged,t)},setBackNavigation:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureFunction(e,"setBackNavigation")){return}var t=this.getContext().scopeObject;d.fireEvent(p.backNavigationChanged,{data:e,component:t})},getTitle:function(){return this._getLastSetTitle()},setRelatedApps:function(e){if(typeof e!=="undefined"&&!f.prototype._ensureArrayOfObjectOfStrings(e,"setRelatedApps")){return}var t=this.getContext().scopeObject;d.fireEvent(p.relatedAppsChanged,{data:e,component:t})},getUxdVersion:function(){if(new r(o.getVersion()).compareTo("1.37.0")>=0){return 2}return 1},_attachHierarchyChanged:function(e){this._getEventProvider().attachEvent(p.hierarchyChanged,e)},_detachHierarchyChanged:function(e){this._getEventProvider().detachEvent(p.hierarchyChanged,e)},_attachTitleChanged:function(e){this._getEventProvider().attachEvent(p.titleChanged,e)},_attachBackNavigationChanged:function(e){this._getEventProvider().attachEvent(p.backNavigationChanged,e)},_detachBackNavigationChanged:function(e){this._getEventProvider().detachEvent(p.backNavigationChanged,e)},_detachTitleChanged:function(e){this._getEventProvider().detachEvent(p.titleChanged,e)},_attachRelatedAppsChanged:function(e){this._getEventProvider().attachEvent(p.relatedAppsChanged,e)},_detachRelatedAppsChanged:function(e){this._getEventProvider().detachEvent(p.relatedAppsChanged,e)}});return f}});
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/DynamicTileRequest", ["sap/ushell/utils/HttpClient","sap/ui/thirdparty/URI","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/base/Log","sap/ui/core/Configuration","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/utils"],function(e,t,s,r,n,i,a,o,l){"use strict";const u="sap.ushell.utils.DynamicTileRequest";class c{#e=()=>{};#t=()=>{};#s=null;#r=null;#n=null;#i=null;#a=null;#o=null;#l=null;#u=null;#c=null;#h=Promise.resolve();constructor(e,t,s,r,i){this.#e=t;this.#t=s;this.#s=e;this.#r=a.get(["dataSource","settings","odataVersion"],i);this.#n=true;this.#i=r;this.#h=this.#f(e,r).then(e=>{if(e){this.#a=e}}).catch(e=>{n.error("Was not able to create a DynamicTileRequest:",e,u)});this._oInitialRefreshPromise=this.#h.then(()=>{if(this.#a){return this.refresh()}})}set originalUrl(e){throw new Error("originalUrl is read-only!")}get originalUrl(){return this.#s}set oDataVersion(e){throw new Error("oDataVersion is read-only!")}get oDataVersion(){return this.#r}refresh(){if(!this.#o){this.#o=this.#h.then(this.#g.bind(this)).then(e=>{if(e){return this.#d(e)}})}return this.#o}async#g(){if(!this.#n){return this.#a}try{const e=await sap.ushell.Container.getServiceAsync("ReferenceResolver");const t=await e.resolveSemanticDateRanges(this.#a,this.#r);if(t.ignoredReferences&&t.ignoredReferences.length>0||t.invalidSemanticDates&&t.invalidSemanticDates.length>0){const e=[].concat(t.invalidSemanticDates||[],t.ignoredReferences||[]);n.error("The service URL contains invalid Reference(s): "+e.join(", "),"",u);return}this.#n=t.hasSemanticDateRanges;return t.url}catch(e){n.error("Could not resolve semantic date ranges:",e,u);return Promise.reject(e)}}#d(s){let r=new t(s).escapeQuerySpace(false);const n=i.getSAPLogonLanguage();if(n&&!r.hasQuery("sap-language")){r.addQuery("sap-language",n)}let a=false;if(r.is("relative")){a=true;r=r.absoluteTo(location.href)}const o=this.#R(a);const l={headers:o};this.#c=r.origin();this.#u=r.href();this.#l=new e(this.#c,l);return this.#l.get(r.relativeTo(this.#c).href()).then(this.#m.bind(this)).catch(this.#U.bind(this))}abort(){if(this.#o&&this.#l){this.#l.abortAll();this.#l=null;this.#o=null;return true}return false}#m(e){o.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:200}});let t;try{t=JSON.parse(e.responseText)}catch(e){throw new Error("Was not able to parse response of dynamic tile request")}this.#l=null;this.#o=null;let s;if(typeof t==="object"){t=t.d?t.d:t;const e=r.fromURL(this.#u);if(e.get("$inlinecount")==="allpages"){s={number:t.__count}}else if(e.get("$count")==="true"){s={number:t["@odata.count"]}}else{s=this.#p(t)}}else if(typeof t==="string"||typeof t==="number"){s={number:t}}this.#e(s)}#U(e){o.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:e.status}});this.#l=null;this.#o=null;this.#t(e)}#p(e){const t=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];const r=Object.keys(e).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[r]}return s},{});if(!s(r)){return r}const n=Object.keys(e)[0];if(n!==undefined&&Object.keys(e).length===1){return Object.keys(e[n]).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[n][r]}return s},{})}return{}}#R(e){const t={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":i.getLanguage()||"",Accept:"application/json, text/plain"};const s=i.getSAPLogonLanguage();if(s){t["sap-language"]=s}if(e){const e=sap.ushell.Container.getLogonSystem();const s=e&&e.getClient();if(s){t["sap-client"]=s}}return t}async#f(e,t){const s=await sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");const r=await sap.ushell.Container.getServiceAsync("ReferenceResolver");const i=await s.getSystemContext(t);const a=await l.promisify(r.resolveUserDefaultParameters(e,i));if(a.defaultsWithoutValue&&a.defaultsWithoutValue.length>0){n.error("The service URL contains User Default(s) with no set value: "+a.defaultsWithoutValue.join(", "),"",u);return}if(a.ignoredReferences&&a.ignoredReferences.length>0){const e=a.ignoredReferences.filter(e=>!e.startsWith("DynamicDate"));if(e.length>0){n.error("The service URL contains invalid Reference(s): "+e.join(", "),"",u);return}}return a.url}destroy(){this.abort();this.#t=null;this.#e=null}}return c});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/HttpClient", ["sap/ui/core/Configuration","sap/ui/thirdparty/URI","sap/ushell/utils"],function(e,t,s){"use strict";var r=function(e,s){this._oOngoingRequests={};this._oCSRFTokens={};this._oDefaultOptions={headers:s&&s.headers||{}};if(typeof e==="string"){this._oBasePath=new t(e)}else{this._oDefaultOptions={headers:e&&e.headers||{}}}};r.prototype.get=function(e,t){return this._executeRequest("GET",e,t)};r.prototype.put=function(e,t){return this._executeRequest("PUT",e,t)};r.prototype.post=function(e,t){return this._executeRequest("POST",e,t)};r.prototype.patch=function(e,t){return this._executeRequest("PATCH",e,t)};r.prototype.delete=function(e,t){return this._executeRequest("DELETE",e,t)};r.prototype.options=function(e,t){return this._executeRequest("OPTIONS",e,t)};r.prototype.abortAll=function(){Object.keys(this._oOngoingRequests).forEach(function(e){this._oOngoingRequests[e].abort()}.bind(this))};r.prototype._executeRequest=function(r,o,n){var i=new Error("The provided resource path is not a valid URL.");var a={};var u=e.getStatisticsEnabled();if(u){a["sap-statistics"]=u}try{var h;var c=new t(o);if(!c.is("url")){return Promise.reject(i)}if(this._oBasePath){h=c.absoluteTo(this._oBasePath)}else{h=c}var d=new XMLHttpRequest;d._sapUshellHttpClientId=s.generateUniqueId(Object.keys(this._oOngoingRequests));this._oOngoingRequests[d._sapUshellHttpClientId]=d;var f=Object.assign({},a,this._oDefaultOptions.headers,n&&n.headers);return this._getCSRFTokenHeader(r,h).then(function(e){Object.assign(f,e);return new Promise(function(e,t){var s=h.href();d.onload=this._onLoad.bind(this,e,t,{xhr:d,method:r,url:s,data:n});d.onerror=function(){t.call(this,this._getFormattedResponse(d))}.bind(this);d.onabort=function(){d.bAborted=true;t.call(this,this._getFormattedResponse(d))}.bind(this);d.onloadend=function(){delete this._oOngoingRequests[d._sapUshellHttpClientId]}.bind(this);d.open(r,s);Object.keys(f).forEach(function(e){d.setRequestHeader(e,f[e])});var o=n&&n.data||"";if(typeof o!=="string"){o=JSON.stringify(o)}d.send(o)}.bind(this))}.bind(this))}catch(e){return Promise.reject(i)}};r.prototype._getCSRFTokenHeader=function(e,t){var s="",r="";switch(e){case"HEAD":case"GET":case"OPTIONS":return Promise.resolve({"x-csrf-token":"fetch"});case"POST":s=this._getCSRFTokenKey(t);if(this._oCSRFTokens[s]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[s]})}r=t.href();if(this._oBasePath){r=this._oBasePath.origin()+this._oBasePath.directory()}return this._executeRequest("HEAD",r).then(function(e){var t=this._getCSRFTokenFromHeader(e.responseHeaders);if(!t){throw new Error("CSRF Token couldn't be fetched.")}return{"x-csrf-token":t}}.bind(this));case"PATCH":case"PUT":case"DELETE":s=this._getCSRFTokenKey(t);if(this._oCSRFTokens[s]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[s]})}r=t.href();if(this._oBasePath){r=this._oBasePath.origin()+this._oBasePath.directory()}return this._executeRequest("OPTIONS",r).then(function(e){var t=this._getCSRFTokenFromHeader(e.responseHeaders);if(!t){throw new Error("CSRF Token couldn't be fetched.")}return{"x-csrf-token":t}}.bind(this));default:return Promise.resolve({})}};r.prototype._onLoad=function(e,s,r){var o=this._getFormattedResponse(r.xhr);var n=this._getCSRFTokenFromHeader(o.responseHeaders);if(n){var i=this._getCSRFTokenKey(new t(r.url));if(n.toLowerCase()==="required"&&o.status===403){delete this._oCSRFTokens[i];return this._executeRequest(r.method,r.url,r.data).then(e).catch(s)}this._oCSRFTokens[i]=n}if(o.status>=200&&o.status<300){return e(o)}return s(o)};r.prototype._getCSRFTokenKey=function(e){if(this._oBasePath){return this._oBasePath.origin()+this._oBasePath.directory()}return e.origin()+e.directory()};r.prototype._getCSRFTokenFromHeader=function(e){var t=e.filter(function(e){return e.name==="x-csrf-token"})[0];return t&&t.value};r.prototype._getFormattedResponse=function(e){return{aborted:e.bAborted||false,status:e.status,statusText:e.statusText,responseText:e.responseText,responseHeaders:e.getAllResponseHeaders().split(/\r\n/g).filter(function(e){return e.length>0}).map(function(e){var t=e.split(":");return{name:t[0].trim(),value:t[1].trim()}})}};return r},true);
//Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/RestrictedJSONModel", ["sap/ui/model/json/JSONModel"],function(t){"use strict";function e(){throw new Error("sap.ushell.utils.RestrictedJSONModel : Function not supported")}return t.extend("sap.ushell.utils.RestrictedJSONModel",{constructor:function(){t.prototype.constructor.apply(this,arguments);this.setDefaultBindingMode("OneWay");this.setDefaultBindingMode=e;this.setSizeLimit(1e3);this.setData=e;this.setJSON=e;this.setProperty=e;this.loadData=e},_setData:function(){t.prototype.setData.apply(this,arguments)},_setJSON:function(){this.setData=t.prototype.setData;t.prototype.setJSON.apply(this,arguments);this.setData=e},_setProperty:function(){this.setData=t.prototype.setData;t.prototype.setProperty.apply(this,arguments);this.setData=e}})});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlShortening", ["sap/base/Log","sap/ushell/utils/UrlParsing"],function(t,e){"use strict";function a(){var a=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(e,a){var r,s;if(typeof e!=="string"||/^[A-Z0-9]{40,41}$/.test(e)){return e}try{r=JSON.parse(e)}catch(a){t.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return e}s=a&&a.getNextKey();this._storeValue(s,r,a);return s};this.compactHash=function(r,s,i){var n,p,h,c,o,u=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(s){s.forEach(function(t){u.push(t)})}n=e.parseShellHash(r);if(!n){t.error("the URL "+r+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:r}}c="";if(r.charAt(0)==="#"){c="#"}var f=n&&n.params&&n.params["sap-xapp-state"]&&n.params["sap-xapp-state"][0];if(f){n.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(f,i)];r=c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:n.params,appSpecificRoute:n.appSpecificRoute})}if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}if(n&&(n.params&&n.params[a.ABBREV_PARAM_NAME])){return{hash:r}}p=i&&i.getNextKey();h=this._splitParameters(n.params,u,p);if(!h.key){return{hash:r}}o=e.paramsToString(h.tailParams);this._storeValue(h.key,o,i);return{hash:c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:h.headParams,appSpecificRoute:n.appSpecificRoute}),params:h.headParams,skippedParams:h.tailParams}};this.checkHashLength=function(r){var s,i,n;if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}s=e.parseShellHash(r);n="";if(r.charAt(0)==="#"){n="#"}i=this._splitParameters(s.params,[],"DummyKey");if(i.key){t.error("Application startup parameter length exceeds "+a.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete i.headParams[this.ABBREV_PARAM_NAME];return{hash:n+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:i.headParams,appSpecificRoute:s.appSpecificRoute}),params:i.headParams,skippedParams:i.tailParams}}t.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:r}};this._findIndex=function(t,e){var a=t.indexOf(e);if(a>=0){return a}a=-1;t.every(function(t,r){if(t.length>0&&t[t.length-1]==="*"&&t.substring(0,t.length-1)===e.substring(0,t.length-1)){a=r;return false}return true});return a};this._cmpByList=function(t,e,a){var r,s;t=t||[];if(e===a){return 0}r=this._findIndex(t,e);s=this._findIndex(t,a);if(r>=0&&s>=0){if(r-s!==0){return r-s}if(e<a){return-1}if(e>a){return+1}return 0}if(r>=0){return-1}if(s>=0){return+1}if(e<a){return-1}return+1};this._sortByPriority=function(t,e){return t.sort(this._cmpByList.bind(this,e))};this._splitParameters=function(e,a,r){var s,i,n,p={},h={},c=false,o,u,f=0,l,m=[];if(!r||typeof r!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!")}for(s in e){if(Object.prototype.hasOwnProperty.call(e,s)){m.push(s)}}m.sort();m=this._sortByPriority(m,a);for(n=0;n<m.length;n=n+1){s=m[n];o=e[s];if(o.length>1){t.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(i=0;i<o.length;i=i+1){u=e[s][i];l=s.length+u.length;if(l+f>this.URL_PARAMS_LENGTH_LIMIT){if(h[s]){h[s].push(u)}else{h[s]=[u]}c=true}else if(p[s]){p[s].push(u)}else{p[s]=[u]}f=f+l+1}}if(c){p[this.ABBREV_PARAM_NAME]=[r]}return{key:r,tailParams:h,headParams:p}};this.expandHash=function(t){var e=function(t){return a._retrieveValue(t)};return this.expandParamGivenRetrievalFunction(t,this.ABBREV_PARAM_NAME,e)};this.expandParamGivenRetrievalFunction=function(t,a,r){var s,i,n,p,h;if(typeof t!=="string"){return t}s=e.parseShellHash(t);n=s&&s.params&&s.params[a]&&s.params[a][0];if(!n){return t}p="";if(t.charAt(0)==="#"){p="#"}i=r(n);if(!i){return t}h=this._blendParameters(s.params,a,i);return p+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:h,appSpecificRoute:s.appSpecificRoute})};this._retrieveValue=function(){return undefined};this._storeValue=function(t,e,a){if(a&&typeof a.store==="function"){a.store(e)}};this._blendParameters=function(t,a,r){var s=e.parseParameters("?"+r),i;delete t[a];for(i in s){if(Object.prototype.hasOwnProperty.call(s,i)){if(t[i]){t[i]=t[i].concat(s[i])}else{t[i]=s[i]}}}return t}}var r=new a;return r},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/WindowUtils", ["sap/base/Log","sap/ui/util/isCrossOriginURL","sap/ushell/utils","sap/base/util/UriParameters"],function(e,r,n,i){"use strict";var o={};o.hasInvalidProtocol=function(e){var r=document.createElement("a");r.setAttribute("href",e);if(r.protocol==="javascript:"){return true}return false};o.isCrossOriginUrl=function(e){return r(e)};o.openURL=function(r,n,i,o){var t=o===undefined?true:o;var a=this.isCrossOriginUrl(r);i=i||"";if(t&&this.hasInvalidProtocol(r)){e.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol")}if(a){if(i.toLowerCase().indexOf("noopener")===-1){if(i!==""){i+=","}i+="noopener"}if(i.toLowerCase().indexOf("noreferrer")===-1){i+=",noreferrer"}window.open(r,n,i);return true}return window.open(r,n,i)};o.getLeanURL=function(r,n){var i=r||n;if(this.hasInvalidProtocol(i)){e.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return""}if((i||"").charAt(0)!=="#"){return i}var o=window.location.search;if(!o){o="?sap-ushell-config=lean"}else if(o.indexOf("sap-ushell-config=")>=-1){o+="&sap-ushell-config=lean"}return window.location.origin+window.location.pathname+o+i};o._getAdjustedQueryString=function(e,r){if((!e||e.length===0)&&(!r||r.length===0)){return null}var o=i.fromQuery(window.location.search);var t=Array.from(o.keys()).reduce(function(e,r){e[r]=o.getAll(r);return e},{});if(e&&e.length>0){e.forEach(function(e){var r=Object.keys(e)[0];if(r){t[r]=e[r]}})}if(r&&r.length>0){r.forEach(function(e){delete t[e]})}return n.urlParametersToString(t)};o.refreshBrowser=function(e,r){var i=n.getLocationHref();var t=n.getLocationSearch();var a=o._getAdjustedQueryString(e,r);a=a!==""?"?"+a:"";i=i.replace(t,a);if(n.getLocationHref()===i){n.windowLocationReload()}else{n.windowLocationAssign(i)}};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/chipsUtils", ["sap/base/Log","sap/base/util/ObjectPath"],function(e,t){"use strict";var i="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",r="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";var n={};n.getCatalogTilePreviewTitle=function(e){var t=n.getBagText(e,"tileProperties","display_title_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewTitle()||undefined};n.getCatalogTilePreviewSubtitle=function(e){var t=n.getBagText(e,"tileProperties","display_subtitle_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewSubtitle()||undefined};n.getCatalogTilePreviewIcon=function(e){var t=n._getConfigurationProperty(e,"tileConfiguration","display_icon_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewIcon()||undefined};n.getCatalogTileTargetURL=function(e){var t=n._getConfigurationProperty(e,"tileConfiguration","navigation_target_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getTargetUrl()||undefined};n.getCatalogTileNumberUnit=function(e){return n._getConfigurationProperty(e,"tileConfiguration","display_number_unit")};n.getCatalogTilePreviewInfo=function(e){return n.getBagText(e.getChip(),"tileProperties","display_info_text")};n.getCatalogTileSize=function(e){return n.getTileSize(e)};n.getCatalogTilePreviewIndicatorDataSource=function(e){var t;var i=n._getAppLauncherTileConfiguration(e);if(n._isAppLauncher(e)&&i&&i.service_url){t={path:i.service_url,refresh:i.service_refresh_interval}}return t};n._getConfigurationProperty=function(e,t,i){var r,n;try{r=e.getConfigurationParameter(t);n=JSON.parse(r)}catch(e){return}if(n[i]!==undefined){return n[i]}};n.getBagText=function(e,t,i){if(e.getBagIds().indexOf(t)>-1&&e.getBag(t).getTextNames().indexOf(i)>-1){return e.getBag(t).getText(i)}};n.getTileSize=function(e){var t=!e.isStub()&&e.getConfigurationParameter("row")||"1",i=!e.isStub()&&e.getConfigurationParameter("col")||"1";return t+"x"+i};n._getAppLauncherTileConfiguration=function(t){var i,r=t.getConfigurationParameter("tileConfiguration");try{i=JSON.parse(r||"{}")}catch(i){e.error("Tile with ID '"+t.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+r+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",i.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return i};n._isAppLauncher=function(e){var t=e.getChip().getBaseChipId();return t===i||t===r};n.getTileConfigurationFromSimplifiedChip=function(e){var t;try{t=JSON.parse(e.configuration.tileConfiguration)}catch(e){t={}}return t};n.getTargetUrlFromSimplifiedChip=function(e,t){var i=this.getCustomTileTargetFromSimplified(e);if(i){return"#"+t.constructShellHash(i)}var r=this.getTileConfigurationFromSimplifiedChip(e);return r.navigation_target_url};n.getIndicatorDataSourceFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);var i=t.service_url;if(!i){return undefined}return{path:i,refresh:t.service_refresh_interval}};n.getTileSizeFromSimplifiedChip=function(e){var t=e.configuration;var i=t.row||1;var r=t.col||1;return i+"x"+r};n.getNumberUnitFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);return t.display_number_unit};n.getInfoFromSimplifiedChip=function(e){var t=e.bags.tileProperties;return t&&t.texts.display_info_text};n.getKeywordsFromSimplifiedChip=function(e){var t=e.bags.tileProperties;var i=t&&t.texts.display_search_keywords;if(i){return i.trim().split(/\s*,\s*/g)}return[]};n.isCustomTileFromSimplifiedChip=function(e){var t=e.chipId;return t!==i&&t!==r};n.loadChipInstanceFromSimplifiedChip=function(e){var t=e.bags;var i={chipId:e.chipId,configuration:e.configuration?JSON.stringify(e.configuration):"{}"};return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e){var r=e.getFactory();var n=r.createChipInstance(i);this.addBagDataToChipInstance(n,t);return new Promise(function(e,t){n.load(e,t)}).then(function(){return n})}.bind(this))};n.addBagDataToChipInstance=function(t,i){if(!i){return}var r;for(var n in i){var a=i[n];var o=t.getBag(n);try{for(r in a.properties){o.setProperty(r,a.properties[r])}for(r in a.texts){o.setText(r,a.texts[r])}}catch(t){e.error("chipsUtils.addBagDataToChipInstance: "+t.toString())}}};n.getCustomTileTargetFromSimplified=function(e){if(e.chipId==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{target:{semanticObject:"NewsFeed",action:"displayNewsList"}}}var t=JSON.parse(e.configuration.tileConfiguration||"{}");var i=JSON.parse(t.TILE_PROPERTIES||"{}");if(i.semanticObject&&i.semanticAction){return{target:{semanticObject:i.semanticObject,action:i.semanticAction},params:{EvaluationId:[i.evaluationId]}}}return null};return n},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/utilsCdm", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ushell/utils/objectOperations","sap/ushell/utils/UrlParsing"],function(e,t,a,i,s){"use strict";function o(e,t){return i.getMember(e,t)}function p(e,a,i){a=t({},a);i=t({},i);var s={};s.semanticObject=a.semanticObject;s.action=a.action;s.title=a.title||o(i,"sap|app.title");s.info=a.info||o(i,"sap|app.info");s.icon=a.icon||o(i,"sap|ui.icons.icon");s.subTitle=a.subTitle||o(i,"sap|app.subTitle");s.shortTitle=a.shortTitle||o(i,"sap|app.shortTitle");var p,n,r,l,u,c,f=false;var m=o(i,"sap|platform|runtime");s.resolutionResult=t({},m);if(m){s.resolutionResult["sap.platform.runtime"]=t({},m)}if(o(i,"sap|ui.technology")==="GUI"){s.resolutionResult["sap.gui"]=o(i,"sap|gui")}if(o(i,"sap|ui.technology")==="WDA"){s.resolutionResult["sap.wda"]=o(i,"sap|wda")}if(o(i,"sap|ui.technology")==="URL"){if(i["sap.url"]){s.resolutionResult["sap.platform.runtime"]=s.resolutionResult["sap.platform.runtime"]||{};s.resolutionResult.url=i["sap.url"].uri;s.resolutionResult["sap.platform.runtime"].url=i["sap.url"].uri}else if(m&&m.uri){s.resolutionResult["sap.platform.runtime"].url=m.uri;s.resolutionResult.url=m.uri}}if(!s.resolutionResult["sap.ui"]){s.resolutionResult["sap.ui"]={}}s.resolutionResult["sap.ui"].technology=o(i,"sap|ui.technology");s.resolutionResult.applicationType=this._formatApplicationType(s.resolutionResult,i);s.resolutionResult.systemAlias=s.resolutionResult.systemAlias||a.systemAlias;s.resolutionResult.systemAliasSemantics="apply";s.resolutionResult.text=s.title;s.deviceTypes=o(i,"sap|ui.deviceTypes")||{};s.resolutionResult.appId=o(i,"sap|app.id");["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(a.deviceTypes||{},e)){s.deviceTypes[e]=a.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(s.deviceTypes,e)){s.deviceTypes[e]=true}s.deviceTypes[e]=!!s.deviceTypes[e]});s.signature=a.signature||{};s.signature.parameters=s.signature.parameters||{};s.signature.additionalParameters=(a.signature||{}).additionalParameters||"allowed";var d=a.indicatorDataSource||o(i,"sap|app.crossNavigation.inbounds."+e+".indicatorDataSource");var y=d?"#Shell-dynamicTile":"#Shell-staticTile";if(o(i,"sap|app.type")==="tile"||o(i,"sap|flp.type")==="tile"){y=s.resolutionResult;y.url=o(i,"sap|platform|runtime.componentProperties.url");y.componentName=o(i,"sap|ui5.componentName");if(o(i,"sap|platform|runtime.includeManifest")){y.componentProperties=y.componentProperties||{};y.componentProperties.manifest=t({},i);delete y.componentProperties.manifest["sap.platform.runtime"]}l=o(i,"sap|app.crossNavigation.outbounds.target");f=true}if(o(i,"sap|app.type")==="plugin"||o(i,"sap|flp.type")==="plugin"){return undefined}if(o(i,"sap|flp.tileSize")){p=o(i,"sap|flp.tileSize")}if(o(i,"sap|app.description")){n=o(i,"sap|app.description")}if(o(i,"sap|ui.technology")==="GUI"&&o(i,"sap|gui.transaction")){r=o(i,"sap|gui.transaction")}if(o(i,"sap|ui.technology")==="WDA"&&o(i,"sap|wda.applicationId")){r=o(i,"sap|wda.applicationId")}if(o(i,"sap|app.dataSources")){u=o(i,"sap|app.dataSources")}if(o(i,"sap|app.id")){c=o(i,"sap|app.id")}s.tileResolutionResult={appId:c,title:s.title,subTitle:s.subTitle,icon:s.icon,size:p,info:s.info,tileComponentLoadInfo:y,indicatorDataSource:d,dataSources:u,description:n,runtimeInformation:m,technicalInformation:r,deviceTypes:s.deviceTypes};s.tileResolutionResult.isCustomTile=f;if(l){s.tileResolutionResult.targetOutbound=l}return s}function n(e,t){var a=e.applicationType;if(a){return a}var i=o(t,"sap|platform|runtime.componentProperties.self.name")||o(t,"sap|ui5.componentName");if(o(t,"sap|flp.appType")==="UI5"||o(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+i;e.url=o(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=o(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(o(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=o(t,"sap|gui");e.systemAlias=o(t,"sap|app.destination.name");return"TR"}if(o(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=o(t,"sap|wda");e.systemAlias=o(t,"sap|app.destination.name");return"WDA"}if(o(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=o(t,"sap|app.destination.name")}return"URL"}function r(t){if(!t){return[]}var a=[];try{var i=Object.keys(t.applications||{}).sort();i.forEach(function(i){try{var s=t.applications[i];var p=o(s,"sap|app.crossNavigation.inbounds");if(p){var n=Object.keys(p).sort();n.forEach(function(e){var t=p[e];var i=this.mapOne(e,t,s);if(i){a.push(i)}}.bind(this))}}catch(t){e.error("Error in application "+i+": "+t,t.stack)}}.bind(this))}catch(t){e.error(t);e.error(t.stack);return[]}return a}function l(e){var t,i,o;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};i=a.get("signature.parameters",e)||{};Object.keys(i).forEach(function(e){if(i[e].filter&&Object.prototype.hasOwnProperty.call(i[e].filter,"value")&&(i[e].filter.format===undefined||i[e].filter.format==="plain")){t.params[e]=[i[e].filter.value]}if(i[e].launcherValue&&Object.prototype.hasOwnProperty.call(i[e].launcherValue,"value")&&(i[e].launcherValue.format===undefined||i[e].launcherValue.format==="plain")){t.params[e]=[i[e].launcherValue.value]}});o=s.constructShellHash(t);if(!o){return undefined}return o}function u(e){var t,a,i;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});i=s.constructShellHash(t);if(!i){return undefined}return i}return{formatSite:r,toHashFromInbound:l,toHashFromOutbound:u,mapOne:p,_formatApplicationType:n}},true);
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/AdapterContainer", ["sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/format/DateFormat","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell/services/_Personalization/constants"],function(e,t,jQuery,r,n,i){"use strict";var o="PersContainers",a="yyyyMMddHHmmss",s=new Date(9999,1,1,0,0,0),c=new Date(9999,1,1,0,0,0,0),u="ADMIN#sap-ushell-container-expireUTCTimestamp",p="ADMIN#sap-ushell-container-storageUTCTimestamp",f="ADMIN#sap-ushell-container-scope";function y(e){var r="sap.ushell.personalization#";if(e.substring(0,r.length)!==r){t.error("Unexpected ContainerKey "+e);return e}return e.substring(r.length,r.length+40)}var h=function(t,r,n,i){this._oService=r;this._oScope=n;this["sap-cache-id"]=e.get("_oService._oConfig.services.personalization.cacheId",this);this._sContainerKey=y(t);this._sAppName=i||"";this._category=this._determineCategory(n);this._oJSONContainer={category:this._category,clientExpirationTime:c,appName:this._sAppName,component:"",id:this._sContainerKey,PersContainerItems:[]};this._oPropertyBag={};this._aOperationQueue=[]};h.prototype._reset=function(){this._oJSONContainer.PersContainerItems=[]};h.prototype._obtainODataWrapper=function(){return this._oService._oWrapper};h.prototype.load=function(){var e=new jQuery.Deferred,r=this,i=this._obtainODataWrapper(),a=o+"(category='"+this._category+"',id='"+encodeURIComponent(this._sContainerKey)+"')?$expand=PersContainerItems";if(this._category&&this._category==="P"&&this["sap-cache-id"]){a=a+"&sap-cache-id="+this["sap-cache-id"]}n.call(this,i,function(){return false});i.read(a,function(t){r._oJSONContainer=t;r._oJSONContainer.category=r._category;r._oJSONContainer.id=r._sContainerKey;r._oJSONContainer.appName=r._sAppName;r._oJSONContainer.PersContainerItems=r._oJSONContainer.PersContainerItems&&r._oJSONContainer.PersContainerItems.results||[];e.resolve(r)},function(r){t.error(r);e.reject(r)});return e.promise()};h.prototype.save=function(){t.debug("[000] save","AdapterContainer");var e=new jQuery.Deferred,r=this,i=this._obtainODataWrapper(),a=o;n.call(this,i,function(){return false});i.create(a,this._oJSONContainer,function(){e.resolve(r)},function(t){e.reject(t)});return e.promise()};h.prototype.del=function(){var e=new jQuery.Deferred,t=this,r=this._obtainODataWrapper(),i=o+"(category='"+this._category+"',id='"+encodeURIComponent(this._sContainerKey)+"')";n.call(this,r,function(){return false});r.del(i,function(r){e.resolve(t)},function(t){e.reject(t)});this._reset();return e.promise()};h.prototype.getItemKeys=function(){var e=[];this._oJSONContainer.PersContainerItems.forEach(function(t){if(t.category==="V"){e.push("VARIANTSET#"+t.id)}else if(t.category==="I"){e.push("ITEM#"+t.id)}});if(this._oJSONContainer.validity>=0){e.push(p);e.push(u);e.push(f)}return e};h.prototype.containsItem=function(e){return this.getItemKeys().indexOf(e)>=0};function l(e){if(e===undefined||e===null){return null}var t=r.getDateInstance({pattern:a});return t.parse(JSON.parse(e),true)}function d(e){var n=r.getDateInstance({pattern:a});if(e===null){e=c}if(typeof e==="string"){if(/\/Date\(([0-9]+)\)\//.exec(e)){e=new Date(parseInt(/\/Date\(([0-9]+)\)\//.exec(e)[1],10))}else{t.error("Expected Date format "+e)}}if(+e===+c){return undefined}return n.format(e,true)}h.prototype._findItemIndex=function(e,t){var r;for(r=0;r<this._oJSONContainer.PersContainerItems.length;r=r+1){if(this._oJSONContainer.PersContainerItems[r].id===e&&this._oJSONContainer.PersContainerItems[r].category===t){return r}}return undefined};h.prototype._locateItem=function(e){var r={index:-1};if(e===u){return{containerProperty:"clientExpirationTime",initialValue:c,convToABAP:l,convFromABAP:d}}if(e===f){return{containerProperty:"validity",initialValue:0,convToABAP:function(e){if(!e){return null}return JSON.parse(e).validity},convFromABAP:function(e,t){if(e<=0){return undefined}t=t||{};t.validity=e;return t}}}if(e===p){return{containerProperty:" ignore",initialValue:s,convToABAP:l,convFromABAP:d}}if(e.indexOf("ITEM#")===0){r.trueItemKey=e.substring("ITEM#".length,"ITEM#".length+40);r.category="I"}else if(e.indexOf("VARIANTSET#")===0){r.trueItemKey=e.substring("VARIANTSET#".length,"VARIANTSET#".length+40);r.category="V"}else if(e.indexOf("ADMIN#")!==0){t.error("Unknown itemkey prefix"+e)}r.index=this._findItemIndex(r.trueItemKey,r.category);return r};h.prototype.getItemValue=function(e){var t="",r,n=this._locateItem(e);if(n.containerProperty===" ignore"){return undefined}if(n.index>=0){t=this._oJSONContainer.PersContainerItems[n.index].value;try{r=JSON.parse(t)}catch(e){if(t==="X"){r=true}else{r=undefined}}}if(n.containerProperty){if(typeof n.convFromABAP==="function"){return n.convFromABAP(this._oJSONContainer[n.containerProperty],r)}return this._oJSONContainer[n.containerProperty]}return r};h.prototype.setItemValue=function(e,t){var r=JSON.stringify(t),n=this._locateItem(e);if(n.containerProperty===" ignore"){return}if(n.containerProperty){if(typeof n.convToABAP==="function"){this._oJSONContainer[n.containerProperty]=n.convToABAP(r)}else{this._oJSONContainer[n.containerProperty]=r}if(!n.trueItemKey){return}}if(n.index>=0){this._oJSONContainer.PersContainerItems[n.index].value=r;return}this._oJSONContainer.PersContainerItems.push({value:r,id:n.trueItemKey,category:n.category,containerId:this._sContainerKey,containerCategory:this._category})};h.prototype.delItem=function(e){var t=this._locateItem(e);if(t.containerProperty===" ignore"){return}if(t.containerProperty){this._oJSONContainer[t.containerProperty]=t.initialValue;return}if(t.index>=0){this._oJSONContainer.PersContainerItems.splice(t.index,1);return}};h.prototype._determineCategory=function(e){if(!e){return"U"}var t=i;if(e.keyCategory&&e.keyCategory===t.keyCategory.FIXED_KEY&&e.writeFrequency&&e.writeFrequency===t.writeFrequency.LOW&&e.clientStorageAllowed&&e.clientStorageAllowed===true){return"P"}return"U"};return h});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/AppStateAdapter", ["sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/ODataService"],function(e,jQuery,a,r,t,p,s){"use strict";var o=function(a,r,o){this._oConfig=o&&o.config;var n=(e.get("services.appState.baseUrl",o)||"/sap/opu/odata/UI2/INTEROP")+"/";var i={baseUrl:n,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=t.createODataWrapper(i);function u(e){throw new p(e,"sap.ushell_abap.adapters.abap.AppStateAdapter")}s.call(this,this._oWrapper,u)};o.prototype.saveAppState=function(e,r,t,p,s){var o=new jQuery.Deferred,n="GlobalContainers",i={id:e,sessionKey:r,component:s,appName:p,value:t};this._oWrapper.create(n,i,function(){o.resolve()},function(e){o.reject(e);a.error(e)});return o.promise()};o.prototype.loadAppState=function(e){var t=new jQuery.Deferred,p="GlobalContainers(id='"+encodeURIComponent(e)+"')";if(!e){throw new r.Error("The sKey is mandatory to read the data from the persistence layer")}this._oWrapper.openBatchQueue();this._oWrapper.read(p,function(e){t.resolve(e.id,e.value)},function(e){a.error(e);t.reject(e)},false);this._oWrapper.submitBatchQueue(function(){},function(e){a.error(e);t.reject(e)});return t.promise()};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/ClientSideTargetResolutionAdapter", ["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isPlainObject","sap/base/util/deepExtend","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/base/Log","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Utils","sap/ui/thirdparty/URI"],function(jQuery,e,t,a,r,i,n,s,o,l){"use strict";var p="sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter",u=["sap-wd-configId","SAP-WD-CONFIGID","sap-client","SAP-CLIENT","System","SYSTEM","sap-language","SAP-LANGUAGE","sap-wd-htmlrendermode","sap-wd-deltarendering","wdallowvaluesuggest","sap-wd-lightspeed","sap-wd-remotedesktop","sap-wd-flashdebug","sap-accessibility","sap-theme","sap-*","SAP-*","wd*","WD*"];var f=function(e,t,a){var i=this;var o=sap.ushell.Container,l="";if(o){l=o.getLogonSystem().getProductName()||""}this._oLocalSystemAlias={http:{id:"",host:"",port:"",pathPrefix:"/sap/bc/"},https:{id:"",host:"",port:"",pathPrefix:"/sap/bc/"},rfc:{id:"",systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:l}};this.hasSegmentedAccess=true;this._oAdapterConfig=a&&a.config;this._wdLengthLimit=1800;this._oODataWrapper=undefined;this._getODataWrapper=function(){if(!this._oODataWrapper){this._oODataWrapper=s.createODataWrapper("/sap/opu/odata/UI2/INTEROP/")}return this._oODataWrapper};this._aTargetMappings=[];this._aInbounds=[];this._aInitialSegment=undefined;this._oSystemAliasBuffer=new r.Map;this._oURLTemplates={};this._storeFromFullStartupResponse=function(e){if(e){if(e.targetMappings){i._aTargetMappings=e.targetMappings}if(e.systemAliases){i._writeUserSystemAliasesToBuffer(e.systemAliases)}if(e.urlTemplates){i._oURLTemplates=e.urlTemplates}}};this._fallbackToFullStartupRequest=function(e,t){n.debug("Falling back to full start_up request from adapter","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");i._requestAllTargetMappings().done(function(t){i._storeFromFullStartupResponse(t);e()}).fail(function(e){t(e)})};this._iTargetMappingsUnusedPromiseRejectCount=0;this._oInitialSegmentPromise=a&&a.config&&a.config.initialSegmentPromise||new Promise(function(e,t){i._iTargetMappingsUnusedPromiseRejectCount++;if(i._iTargetMappingsUnusedPromiseRejectCount===2){i._fallbackToFullStartupRequest(e,t)}});this._oNavTargetPromise=a&&a.config&&a.config.navTargetDataPromise||new Promise(function(e,t){i._iTargetMappingsUnusedPromiseRejectCount++;if(i._iTargetMappingsUnusedPromiseRejectCount===2){i._fallbackToFullStartupRequest(e,t)}});this._oInitialSegmentPromise.then(function(e){if(e===null){n.debug("Initial target mappings segment promise resolved with 'null'","Will not process initial target mappings segments again (mostly likely because this is no longer needed)","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return}if(i._aTargetMappings.length===0){n.debug("Segmented start_up response returned","storing system aliases and inbounds from segment","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");var t=e[0],a=e[1],r=e[2];if(e.length>3){i._oURLTemplates=e[3]}i._aTargetMappings=a;i._writeUserSystemAliasesToBuffer(r);i._aInitialSegment=t}else{n.debug("Segmented start_up response returned","ignoring response because the full target mapping response returned before","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")}}).catch(function(e){n.error("Initial segment promise was rejected.",e,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")});this._oNavTargetPromise.then(function(e){n.debug("Full start_up response returned","storing system aliases and inbounds","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");i._storeFromFullStartupResponse(e)})};f.prototype._adjustNavTargetResult=function(e){if(e){var t=e.url,a,r={applicationType:e.applicationType,additionalInformation:e.applicationData},i,s,p,u;if(e.text){r.text=e.text}if(e.applicationType==="URL"||e.applicationType==="SAPUI5"){s=/^SAPUI5\.Component=(.*)/.exec(e.applicationData);i=s&&s[1];if(i||e.applicationDependencies){if(i){r.ui5ComponentName=i}if(e.applicationDependencies){try{p=JSON.parse(e.applicationDependencies);u=p.self;if(!r.ui5ComponentName&&u.name){r.ui5ComponentName=u.name;r.additionalInformation="SAPUI5.Component="+r.ui5ComponentName}if(u&&u.url&&typeof u.url==="string"){a=t&&new l(t);if(a){if(u.url.toUpperCase().indexOf(a.path().toUpperCase())!==0){n.debug("Component URL defined in target mapping "+"does not match the URL retrieved from application index. "+"The URL of the application index is used for further processing.","Target mapping URL: "+e.url+"\nApplication index URL: "+u.url,"sap.ushell_abap.bootstrap.abap")}a.path(u.url);t=a.toString();n.debug("ResolveLink result's component url has been replaced with the url specified "+"in Application Dependencies, which includes cache buster token")}else{t=u.url}}r.applicationDependencies=p}catch(e){n.error("Parsing of applicationDependencies attribute in resolveLink result failed for SAPUI5 component '"+i+"'",e,"sap.ushell_abap.bootstrap.abap")}}t=o.addCacheBusterTokenUsingUshellConfig(t)}}r.url=t;return r}};f.prototype.resolveHashFragmentFallback=function(e,t,a){var r=this._constructShellHashForLpdCust(t,a),i=a&&a["sap-system"]&&a["sap-system"][0],n=new jQuery.Deferred;this._resolveHashFragmentBE(r||e).done(function(e){if(e&&i){e["sap-system"]=e["sap-system"]||i}n.resolve(e)}).fail(n.reject.bind(n));return n.promise()};f.prototype.getInbounds=function(e){var t=new jQuery.Deferred,a=this;this._oInitialSegmentPromise.then(function(r){if(r===null){return}if(a._isInSegment(e,a._aInitialSegment)){n.debug("Got inbounds from initial segment","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");a._aInbounds=a._formatDirectStart(a._aTargetMappings);t.resolve(a._aInbounds)}else{n.debug("Did not get inbound in initial segment","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")}});this._oNavTargetPromise.then(function(){n.debug("Got inbounds from full start_up response","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");a._aInbounds=a._formatDirectStart(a._aTargetMappings);a.getInbounds=function(){return(new jQuery.Deferred).resolve(a._aInbounds).promise()};t.resolve(a._aInbounds)},function(e){t.reject(e)});return t.promise()};f.prototype._isInSegment=function(e,t){if(!Array.isArray(t)||!Array.isArray(e)){return false}return e.every(function(e){return!t.every(function(t){return!(e.semanticObject===t.semanticObject&&e.action===t.action)})})};f.prototype._requestAllTargetMappings=function(){var t=o.getParameterMap();var a=new jQuery.Deferred;var i="/sap/bc/ui2/start_up?so=%2A&action=%2A&",n=e.create("services.targetMappings",this._oAdapterConfig).cacheId&&"&sap-cache-id="+e.create("services.targetMappings",this._oAdapterConfig).cacheId||"";function s(e){var a=t[e];if(a){i+=e+"="+encodeURIComponent(a[0])+"&"}}s("sap-language");s("sap-client");o.get(i+"&shellType="+r.getShellType()+"&depth=0"+n,false,function(e){var t=JSON.parse(e);if(!t){a.reject("Malformed Full TM Result")}a.resolve(t)},function(e){a.reject(e)});return a.promise()};f.prototype._formatDirectStart=function(e){var r=this;if(!e){this._aInitialSegment=undefined;return[]}function i(e,i){var s={};var o=e.match(/^([^-]+)-([^~]+)/);if(!o){n.warning("The target mapping id "+e+" is not valid","this target mapping will be discarded","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return undefined}if(!i.hasOwnProperty("text")){i.text=""}s.semanticObject=o[1];s.action=o[2];s.id=e;s.title=i.text;s.permanentKey="X-SAP-UI2-PAGE:"+i.catalogId+":"+i.tmChipId;s.contentProviderId="";var l={};["applicationType","applicationDependencies","applicationData","postParameters","text","url","systemAlias"].forEach(function(e){l[e]=i[e]});s.resolutionResult=f.prototype._adjustNavTargetResult(l);s.resolutionResult.additionalInformation=s.resolutionResult.additionalInformation||"";s.resolutionResult.appId=s.permanentKey;var p=s.resolutionResult,u=p.applicationType;if(e.indexOf("Shell-startWCF")===0&&u==="URL"){s.resolutionResult.systemAliasSemantics="apply"}s.resolutionResult.applicationType=r._formatApplicationType(e,s.resolutionResult);s.resolutionResult.systemAlias=i.systemAlias||"";s.deviceTypes=i.formfactors;s.resolutionResult["sap.ui"]={};s.resolutionResult["sap.ui"].technology=s.resolutionResult.applicationType;if(s.resolutionResult["sap.ui"].technology==="SAPUI5"){s.resolutionResult["sap.ui"].technology="UI5"}if(s.resolutionResult["sap.ui"].technology==="TR"){s.resolutionResult["sap.ui"].technology="GUI"}if(!s.deviceTypes){s.deviceTypes=i.formFactors||{}}s.deviceTypes.desktop=s.deviceTypes.desktop||false;s.deviceTypes.phone=s.deviceTypes.phone||false;s.deviceTypes.tablet=s.deviceTypes.tablet||false;if(Array.isArray(i.signature)){s.signature={};s.signature.additionalParameters=i.allowParams?"allowed":"ignored";s.signature.parameters={};i.signature.forEach(function(e){var t={};var a;var i=e.name;if(e.defaultValue&&e.defaultValue.value){t.defaultValue={};t.defaultValue.value=e.defaultValue.value;t.defaultValue.format=e.defaultValue.format||"plain";a=r._extractUserDefaultValue(t.defaultValue.value);if(a){t.defaultValue={value:a,format:"reference"}}}if(e.filter&&e.filter.value){t.filter={};t.filter.value=e.filter.value;t.filter.format=e.filter.format||"plain";a=r._extractUserDefaultValue(t.filter.value);if(a){t.filter={value:a,format:"reference"}}}if(e.renameTo){t.renameTo=e.renameTo}t.required=e.required||false;s.signature.parameters[i]=t})}else{s.signature=a({parameters:{}},i.signature);s.signature.additionalParameters=s.signature.additionalParameters||(i.allowParams?"allowed":"ignored");Object.keys(s.signature.parameters).forEach(function(e){var t=s.signature.parameters[e];if(t.filter){t.filter.format=t.filter.format||"plain"}if(t.defaultValue){t.defaultValue.format=t.defaultValue.format||"plain"}t.required=t.required||false;if(t.filter&&t.filter.hasOwnProperty("format")&&!t.filter.hasOwnProperty("value")){delete t.filter}if(t.defaultValue&&t.defaultValue.hasOwnProperty("format")&&!t.defaultValue.hasOwnProperty("value")){delete t.defaultValue}})}var d=s.signature&&s.signature.parameters&&s.signature.parameters["sap-hide-intent-link"];if(d&&d.hasOwnProperty("defaultValue")){s.hideIntentLink=d.defaultValue.value==="true"}if(d&&!d.required&&d.hasOwnProperty("defaultValue")){delete s.signature.parameters["sap-hide-intent-link"]}if(typeof i.parameterMappings==="object"){Object.keys(i.parameterMappings).forEach(function(e){var t=i.parameterMappings[e];if(e&&t.target){s.signature.parameters[e]=s.signature.parameters[e]||{};s.signature.parameters[e].renameTo=t.target}})}if(s.resolutionResult.applicationType==="URL"&&t(i.urlTemplate)){s.templateContext=r.getUrlTemplateContext(i)}return s}var s=[];Object.keys(e).forEach(function(t){var a=i(t,e[t]);if(a){s.push(a)}});return s};f.prototype._formatApplicationType=function(e,t){var a=t.applicationType,r=t.url||"";function i(t,a){n.warning("Cannot detect application type for TargetMapping id '"+e+"', will default to "+a+" application type","TargetMapping URL is '"+r+"'",p)}if(a==="SAPUI5"){return"SAPUI5"}if(a==="URL"&&t.additionalInformation&&t.additionalInformation.indexOf("SAPUI5.Component=")===0){return"SAPUI5"}if(a==="WDA"||a==="TR"||a==="WCF"){return a}if(e.indexOf("Shell-startWCF")===0&&a==="URL"){return"WCF"}if(a==="NWBC"){if(r.indexOf("/~canvas;window=app/wda")>=0){return"WDA"}if(r.indexOf("/~canvas;window=app/transaction")>=0){return"TR"}i(t,"TR");return"TR"}if(a!=="URL"){i(t,"URL")}return"URL"};f.prototype._extractUserDefaultValue=function(e){var t,a=new RegExp("^%%(UserDefault[.].+)%%$"),r=a.exec(e);return r?r[1]:t};f.prototype._formatSignature=function(e,t){var a=this,r={parameters:{},additionalParameters:t===false?"ignored":"allowed"};if(!e.results){return r}e.results.forEach(function(t){var i,s=t.name,o,l;if(Object.prototype.hasOwnProperty.call(r.parameters,s)){n.error("Duplicate property name "+s+" in "+JSON.stringify(e),"ClientSideTargetResolutionAdapter._formatSignature")}r.parameters[s]={required:a._getObjectDefaulting(t,"required",false)};i=r.parameters[s];o=a._getObjectDefaulting(t,"value","");if(t.regexp===true){i.filter={value:o===""?".*":o,format:"regexp"};return}if(t.required===false){l=a._extractUserDefaultValue(o);if(l){i.defaultValue={value:l,format:"reference"};return}if(o!==""){i.defaultValue={value:o}}return}if(t.required===true&&t.value){l=a._extractUserDefaultValue(o);if(l){i.filter={value:l,format:"reference"};return}if(o!==""){i.filter={value:o}}}});return r};f.prototype._mergeParameterMappingsIntoSignature=function(e,t){var a=t.results;if(!a){return}a.forEach(function(t){var a=t.source;var r=t.target;if(r){e.parameters[a]=e.parameters[a]||{};if(e.parameters[a].renameTo){n.warning("duplicate parameter mapping for'"+a+"'","OData Parameter mappings is "+JSON.stringify(t,null,"   "),p)}e.parameters[a].renameTo=r}})};f.prototype._formatDeviceTypes=function(e){var t={},a=this;["desktop","tablet","phone"].forEach(function(r){t[r]=a._getObjectDefaulting(e,r,false)});return t};f.prototype._getObjectDefaulting=function(t,a,r){var i=e.get(a||"",t);return i===undefined?r:i};f.prototype._constructShellHashForLpdCust=function(a,r){var s="",o,l=e.get("resolutionResult._original",a);if(!t(l)){o="the given target mapping is not an object"}if(!o&&!l.hasOwnProperty("id")){o="no id found in target mapping _original object"}if(!o&&typeof l.id!=="string"){o="the target mapping id was not a string"}if(!o&&l.id.length===0){o="the target mapping id was an empty string"}if(o){n.error("Cannot construct Shell Hash for LPD_CUST resolution",o,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return undefined}s+=l.id;var p=i.paramsToString(r);if(p.length>0){s+="?"+p}return s};f.prototype._openBatchQueueUnlessOpen=function(e){if(e.isBatchQueueOpen()){return false}e.openBatchQueue();return true};f.prototype._resolveHashFragmentBE=function(e){var t=new jQuery.Deferred,a=this,i,s=o.getFormFactor();function l(e){return encodeURIComponent(e).replace(/'/g,"''")}i=this._openBatchQueueUnlessOpen(this._getODataWrapper());function p(e,t){if(e){t+=t.indexOf("?")<0?"?":"&";t+=e}return t}this._oODataWrapper.read("ResolveLink?linkId='"+l(e)+"'&shellType='"+r.getShellType()+"'"+(s?"&formFactor='"+l(s)+"'":""),function(r){var i,s="",o;if(r.results.length){if(r.results.length>1){for(i=0;i<r.results.length;i+=1){delete r.results[i].__metadata;s+=(i===0?"used target: ":"\nignored target: ")+JSON.stringify(r.results[i])}n.error("INTEROP service's ResolveLink operation "+"returned "+r.results.length+" targets for hash '#"+e+"', first one is used.",s,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter")}r=r.results[0];o=f.prototype._adjustNavTargetResult(r);o.url=p(r.postParameters,o.url);if(o&&o.applicationType==="SAPUI5"){o.applicationType="URL"}a._compactTooLongWdaUrl(o).done(function(e){t.resolve(e)}).fail(function(a){t.reject("Could not resolve link '"+e+"' due to compactation failure"+a)})}else{t.reject("Could not resolve link '"+e+"'")}},function(e){t.reject(e)});if(i){a._getODataWrapper().submitBatchQueue(function(){},t.reject.bind(t))}return t.promise()};f.prototype._compactTooLongWdaUrl=function(e){var t=new jQuery.Deferred;var a=e&&e.url;if(e&&e.applicationType==="NWBC"&&a&&a.indexOf("/ui2/nwbc/~canvas;window=")===0&&a.length>this._getWDAUrlShorteningLengthLimit()){this._compactUrl(a).done(function(a){e.url=a;t.resolve(e)}).fail(t.reject)}else{t.resolve(e)}return t.promise()};f.prototype._compactUrl=function(e){var t=e.match(/\?.*/);var a=t&&t[0];var r=this._getWDAUrlShorteningLengthLimit()-200;var n=new jQuery.Deferred;if(a&&a.length<r){return n.resolve(e).promise()}var s=i.parseParameters(t[0]);sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.compactParams(s,u,undefined).done(function(t){var a=e.match(/^[^?]*/)[0]+"?"+i.paramsToString(t);n.resolve(a)}).fail(n.reject)}).catch(n.reject);return n.promise()};f.prototype._getWDAUrlShorteningLengthLimit=function(){var e=r.getParameterValueBoolean("sap-ushell-nowdaurlshortening");if(e){return 6e6}return this._wdLengthLimit};f.prototype.resolveSystemAlias=function(e){var t,a=new jQuery.Deferred,r=this,i;i=this._readSystemAliasFromBuffer(e);if(i){n.debug("System alias '"+e+"' was already buffered","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");window.setTimeout(function(){a.resolve(i)},0)}else{n.debug("System alias '"+e+"' is not in buffer","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");var s=function(){i=r._readSystemAliasFromBuffer(e);if(i){n.debug("System alias '"+e+"' is now in buffer","Skipping INTEROP service call","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");a.resolve(i)}else{n.debug("System alias '"+e+"' still not in buffer","Resolving via INTEROP service","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");r._readSystemAliasViaInterop(e).fail(function(e){a.reject(e)}).done(function(e){i=r._fixSystemAlias(e);if(i&&i.id){r._writeSystemAliasToBuffer(i);a.resolve(i)}else{t="Data returned for system alias is not valid. Has no 'id'. System alias data will not be cached.";n.warning("ClientSideTargetResolutionAdapter: "+t);a.resolve(i)}})}};this._oInitialSegmentPromise.then(s,s)}return a.promise()};f.prototype._writeUserSystemAliasesToBuffer=function(e){var a=this;if(typeof e==="undefined"){return}if(t(e)){Object.keys(e).forEach(function(t){a._writeSystemAliasToBuffer(a._fixSystemAlias(e[t]))});return}e.forEach(function(e){a._writeSystemAliasToBuffer(a._fixSystemAlias(e))})};f.prototype._readSystemAliasFromBuffer=function(e){var t=this._oSystemAliasBuffer.get(e);if(e===""){if(!t){return this._oLocalSystemAlias}t.properties=a({},this._oLocalSystemAlias.properties,t.properties||{})}return t};f.prototype._writeSystemAliasToBuffer=function(e){if(e&&e.id){this._oSystemAliasBuffer.put(e.id,e)}return e};f.prototype._fixSystemAlias=function(e){e=e||{};delete e.__metadata;var t={};t.id=e.id||"";t.client=e.client||"";t.language=e.language||"";["http","https"].forEach(function(r){if(e.hasOwnProperty(r)){delete e[r].__metadata;if(e[r].id!==""){t[r]=a({id:"",host:"",port:"",pathPrefix:""},e[r])}}});if(e.hasOwnProperty("rfc")&&e.rfc.id){delete e.rfc.__metadata;t.rfc=a({id:"",systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},e.rfc)}return t};f.prototype._readSystemAliasViaInterop=function(e){var t=new jQuery.Deferred,a="SystemAliases(id='"+encodeURIComponent(e)+"')?$format=json";this._getODataWrapper().read(a,function(e){t.resolve(e)},function(e){t.reject(e)});return t.promise()};f.prototype.getSystemAliases=function(){return this._oSystemAliasBuffer&&this._oSystemAliasBuffer.entries||{}};f.prototype.getUrlTemplateContext=function(e){var t=this._oURLTemplates[e.urlTemplate.id];if(!t){n.error("No URL template found.");return null}var a={systemAliases:this.getSystemAliases(),urlTemplates:this._oURLTemplates};return{payload:t.payload,site:a,siteAppSection:e}};return f});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/ContainerAdapter", ["sap/ui/thirdparty/jquery","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ushell_abap/bootstrap/evo/abap.bootstrap.utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ui/thirdparty/URI","sap/ui/thirdparty/datajs","sap/base/util/ObjectPath","sap/base/Log"],function(jQuery,e,t,a,s,i,r,n,o,l){"use strict";var u=function(f,c,d){var p,m="/sap/public/bc/icf/logoff";this._logoutViaHiddenIFrame=function(e,t){var a=document.createElement("iframe"),s=t.replace(/"/g,'\\"');window.addEventListener("message",function(a){if(a.data===t){e.resolve()}});a.style.visibility="hidden";a.setAttribute("src",t);function i(){parent.postMessage(s,"*")}a.addEventListener("load",i);a.addEventListener("error",i);document.body.appendChild(a)};this.getSystem=function(){return f};this.getUser=function(){return p};this._determineAccessibility=function(e){var t=a.getParameterValueBoolean("sap-accessibility");if(t!==undefined){return t}t=e.accessibility;if(t!==undefined){return t}return false};this._setThemeAccessibilityFlags=function(e){if(e.userProfile&&e.userProfile.length){var t,a;t=e.userProfile.filter(function(e){return e.id&&e.id==="THEME"})[0];if(t&&t.value){e.setThemePermitted=t.editState===3}else{e.oUserProfileDataTheme=false}a=e.userProfile.filter(function(e){return e.id&&e.id==="ACCESSIBILITY"})[0];if(a&&a.id){e.setAccessibilityPermitted=a.editState===3}else{e.setAccessibilityPermitted=false}if(a&&a.value==="true"){e.accessibility=true}if(a&&a.value==="false"){e.accessibility=false}e.accessiblity=this._determineAccessibility(e)}};this._setUserProfileFlags=function(e){if(e.userProfile&&e.userProfile.length&&Array.isArray(e.userProfile)){var t={};e.setContentDensityPermitted=false;e.userProfile.forEach(function(a){if(a.id in t){return}t[a.id]=a.id;if(a.id==="CONTENT_DENSITY"){e.contentDensity=a.value;e.setContentDensityPermitted=a&&a.editState===3||false}if(a.id==="TRACKING_USAGE_ANALYTICS"){if(typeof a.value==="string"){if(a.value.toLowerCase()==="true"||a.value.toLowerCase()==="false"){a.value=a.value.toLowerCase()==="true"||false}else{a.value=undefined}}if(typeof a.value==="undefined"||typeof a.value==="boolean"){e.trackUsageAnalytics=a.value}else{e.trackUsageAnalytics=undefined}}if(a.id==="MYHOME_IMPORT_FROM_CLASSIC"){e.importBookmarks=a.value}if(a.id==="MYHOME_ENABLEMENT"){switch(a.value){case"false":e.showMyHome=false;break;case"true":e.showMyHome=true;break;default:e.showMyHome=undefined;break}}if(a.id==="THEME_DARKMODE_AUTO_DETECTION"){switch(a.value){case"false":e.detectDarkMode=false;break;case"true":e.detectDarkMode=true;break;default:e.detectDarkMode=undefined;break}}})}};this.load=function(){var a=new jQuery.Deferred,s=d.config,r=s.systemProperties;f=new e({alias:f.getAlias(),platform:f.getPlatform(),baseUrl:s.baseUrl,client:s.client,clientRole:s.clientRole,system:s.system,productName:r&&r.productName,systemName:r&&r.systemName,systemRole:r&&r.systemRole,tenantRole:r&&r.tenantRole,productVersion:s.productVersion,isTrialSystem:s.isTrialSystem,sysInfoBar:r&&r.sysInfoBar,sysInfoBarColor:r&&r.sysInfoBarColor,sysInfoBarMainText:r&&r.sysInfoBarMainText,sysInfoBarSecondaryText:r&&r.sysInfoBarSecondaryText,sysInfoBarIcon:r&&r.sysInfoBarIcon});this._setThemeAccessibilityFlags(s);this._setUserProfileFlags(s);p=new t(s);i["sap-language"]=s.language;i["sap-client"]=s.client;if(s.target){u.startUpApplication={adjustedInitialTarget:s.adjustedInitialTarget,target:s.target}}this._setUserImage(p);return a.resolve().promise()};this.addFurtherRemoteSystems=function(){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("PageBuilding").then(function(a){a.getFactory().getPageBuildingService().readAllCatalogsForUser("type eq 'H' or type eq 'REMOTE'",function(a){var s="/sap/opu/odata/sap/SM_CATALOG_SRV/";if(a.results){a.results.forEach(function(t){var a=/^\/sap\/hba\//.test(t.baseUrl);if(t.type==="H"||t.baseUrl===s||a){sap.ushell.Container.addRemoteSystem(new e({alias:t.systemAlias,platform:a||t.type==="H"?"hana":"abap",baseUrl:t.type==="H"?"":";o="}))}})}t.resolve()},function(e){l.error("Reading REMOTE catalogs failed: "+e,null,"sap.ushell_abap.adapters.abap.ContainerAdapter");t.reject()})}).catch(t.reject);return t.promise()};this.getCurrentUrl=function(){return window.location.href};this.sessionKeepAlive=function(){var e="/sap/opu/odata/UI2/PAGE_BUILDER_PERS";var t=s.createAndOpenXHR(e,null,"HEAD");t.onreadystatechange=function(){if(this.readyState===4){l.debug("server session was extended")}};t.send()};this.logout=function(e){var t=new jQuery.Deferred,s;if(e){if(a.hasNativeLogoutCapability()){var i=new r(m).absoluteTo(this.getCurrentUrl()).search("").toString();window.external.getPrivateEpcm().doLogOff(i)}else{this.logoutRedirect()}l.info("ABAP system logged out: "+f.getAlias(),null,"sap.ushell_abap.adapters.abap.ContainerAdapter");t.resolve()}else{s=f.adjustUrl(m);l.info("Logging out from system '"+f.getAlias()+"' via hidden iframe");this._logoutViaHiddenIFrame(t,s)}return t.promise()};this.logoutRedirect=function(){var e=f.adjustUrl(m);this._setDocumentLocation(e)};this._setDocumentLocation=function(e){window.document.location=e};this._setUserImage=function(e){function t(){var e=window["sap-ushell-config"],t=o.get("renderers.fiori2.componentData.config.enableUserImage",e);return!!t}if(t()&&e&&e.isJamActive&&e.isJamActive()){n.read("/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/Self?$format=json",function(t){var a=t.results.Id,s="/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/Members('"+a+"')/ProfilePhoto/$value";e.setImage(s)},function(){l.error("Could not recieve JAM user data")})}}};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/LaunchPageAdapter", ["sap/ui/thirdparty/URI","sap/ushell/components/cards/ManifestPropertyHelper","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/m/GenericTile","sap/ushell/Config","sap/base/util/deepExtend","sap/ushell/utils/chipsUtils","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Page","sap/base/Log","sap/m/library","sap/ushell/ui/tile/StaticTile","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/contracts/preview"],function(e,t,jQuery,i,r,n,a,o,s,u,l,c,g,f,p,d){"use strict";var h=g.LoadState;var v="sap.ushell_abap.adapters.abap.LaunchPageAdapter";var _="/UI2/Fiori2LaunchpadHome";var C="/UI2/FLPD_CATALOG";var m="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER";var y="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";var b="X-SAP-UI2-CHIP:/UI2/CARD";var T={catalogTileNotFound:"catalogTileNotFound",referenceTileNotFound:"referenceTileNotFound",noTargetMapping:"noTargetMapping",emptyConfiguration:"emptyConfiguration",tileIntentSupportException:"tileIntentSupportException"};var I="/UI2/FLPNoActionChip";var P=function(g,S,w){var O;var k;var A;var E=new u.Map;var j=w&&w.config||{};var x=j.services&&j.services.launchPage;var D={};var B=this;this._oCurrentPageSet=null;this._bPageSetFullyLoaded=false;this._aOtherChipsPromises=[];d.setEnvironmentType("runtime");function N(e,t,i){try{return e.getImplementationAsSapui5()}catch(e){c.error(i+": "+(e.message||e),e.stack,v);return new f({icon:"sap-icon://error",info:"",infoState:"Critical",subtitle:e.message||e,title:t}).addStyleClass("sapUshellTileError")}}P.prototype._getBagText=function(e,t,i){if(e.getBagIds().indexOf(t)>-1&&e.getBag(t).getTextNames().indexOf(i)>-1){return e.getBag(t).getText(i)}return undefined};P.prototype._getConfigurationProperty=function(e,t,i){var r;var n;try{r=e.getConfigurationParameter(t);n=JSON.parse(r)}catch(e){return undefined}if(n[i]!==undefined){return n[i]}return undefined};P.prototype._orderBasedOnConfiguration=function(e,t){var i=e&&u.isArray(e.order)?e.order:[];var r={};var n=[];var a;var o;var s;i=i.concat(e&&u.isArray(e.linkOrder)?e.linkOrder:[]);for(o=0,s=t.length;o<s;o+=1){a=t[o];r[a.getId()]=a}for(o=0,s=i.length;o<s;o+=1){var l=i[o];if(Object.prototype.hasOwnProperty.call(r,l)){n.push(r[l]);delete r[l]}}for(o=0,s=t.length;o<s;o+=1){a=t[o];if(Object.prototype.hasOwnProperty.call(r,a.getId())){n.push(a)}}return n};function L(e,t,i){if(i==="link"){return R(e.linkOrder,t.getId())}return R(e.order,t.getId())}function R(e,t){var i=e.indexOf(t);if(i<0){return i}e.splice(i,1);return i}function F(e,t,i,r){if(r==="link"){i=i-e.order.length;e.linkOrder.splice(i,0,t)}else{e.order.splice(i,0,t)}}function G(e,t){var i=t.getGroupTiles(e);var r={order:[],linkOrder:[]};i.forEach(function(e){var i=t.getTileType(e);if(i==="link"){r.linkOrder.push(e.getId())}else{r.order.push(e.getId())}});return r}function U(){var e;try{e=JSON.parse(B._oCurrentPageSet.getConfiguration());e.order.splice(0,0,B._oCurrentPageSet.getDefaultPage().getId())}catch(t){e={order:[B._oCurrentPageSet.getDefaultPage().getId()]}}return P.prototype._orderBasedOnConfiguration(e,B._oCurrentPageSet.getPages())}this.hideGroups=function(e){var t=new jQuery.Deferred;if(!e||!(e instanceof Array)){t.reject("Input parameter must be of type Array.")}else{var i=JSON.parse(B._oCurrentPageSet.getConfiguration()||"{}");i.hiddenGroups=e;B._oCurrentPageSet.setConfiguration(JSON.stringify(i),t.resolve.bind(t),t.reject.bind(t))}return t.promise()};this.isGroupVisible=function(e){var t=B._oCurrentPageSet.getConfiguration();if(!t){return true}var i=JSON.parse(t);if(!i||!i.hiddenGroups){return true}var r=i.hiddenGroups;for(var n=0;n<r.length;n+=1){if(r[n]===e.getId()){return false}}return true};P.prototype._triggerChipInstanceLoad=function(e){function t(){if(e._loadingDeferred){e._loadingDeferred.resolve()}delete e._loadingDeferred;delete e.$loadingPromise}function i(t){c.error("Failed to load tile: "+t,e.toString(),v);if(e._loadingDeferred){e._loadingDeferred.reject()}delete e._loadingDeferred;delete e.$loadingPromise}e.load(t,i)};this._loadApplaunchersAndDelayLoadingOfOtherChips=function(e,t){var i=0;var r=[];var n=[];function a(){if(i<=0){t()}}function o(e){e._loadingDeferred=new jQuery.Deferred;e.$loadingPromise=e._loadingDeferred.promise();B._aOtherChipsPromises.push(new Promise(function(t,i){e.$loadingPromise.done(t).fail(i)}));if(window["sap-ui-debug"]===true){P.prototype._triggerChipInstanceLoad(e)}else{sap.ui.require(["sap/ushell/EventHub"],function(t){var i=t.on("CoreResourcesComplementLoaded");i.do(function(t){if(t.status==="success"){P.prototype._triggerChipInstanceLoad(e);i.off()}else{c.error("Did not load custom tile as core resources where not loaded",null,v)}})})}}function s(e){function t(){i-=1;a()}i+=1;e.load(t,function(i){c.error("Failed to load tile: "+i,e.toString(),v);t()})}e.forEach(function(e){e.getChipInstances().forEach(function(e){if(z(e)){n.push(e)}else if(V(e)){}else if(H(e)||q(e)){s(e)}else{r.push(e)}})});r.forEach(function(e){o(e)});n.forEach(function(e){o(e)});a()};P.prototype._readTargetMappings=function(){var e=new jQuery.Deferred;function t(e){var t=[];var i=e.targetMappings||e||{};Object.keys(i).forEach(function(e){var r={};["semanticObject","semanticAction","formFactors"].forEach(function(t){r[t]=i[e][t]});t.push(r)});return t}if(i.get("compactTMPromise",j)){j.compactTMPromise.then(function(i){var r=t(i||{});e.resolve({results:r})},function(t){e.reject(t)});return e.promise()}var r=i.create("services.targetMappings",j);var n=r.cacheId||"";var a="/sap/bc/ui2/start_up?so=%2A&action=%2A&tm-compact=true&shellType="+p.getShellType()+"&depth=0";if(n){a+=(a.indexOf("?")<0?"?":"&")+"sap-cache-id="+n}var o=r.sUI2CacheDisable;if(o){a+=(a.indexOf("?")<0?"?":"&")+"sap-ui2-cache-disable="+o}u.get(a,false,function(i){var r=JSON.parse(i);var n=r.targetMappings||{};var a=t(n);e.resolve({results:a})},function(t){e.reject(t)});return e.promise()};P.prototype._makeTargetMappingSupportKey=function(e,t){return e+"-"+t};P.prototype._isWrapperOnly=function(e){return!e.getConfiguration()};function M(e,t){var i=[];t.forEach(function(t){var r=t.getRemoteCatalog();if(t.getBaseChipId()==="X-SAP-UI2-CHIP:/UI2/ACTION"){return}var n=e.createChipInstance({chipId:t.getId(),remoteCatalogId:r&&r.getId()});i.push(n)});return i}function J(e){var t=B._oCurrentPageSet.getDefaultPage().getAllCatalogs();var i=t.getCatalogs();var r=[];for(var n=0;n<i.length;n+=1){var a=i[n];r.push({data:{},errorMessage:undefined,id:a.getId(),title:a.isStub()?a.getId():a.getTitle(),tiles:a.isStub()?[]:M(e,a.getChips()),ui2catalog:a})}return r}function H(e){var t=e.getChip().getBaseChipId();return t===m||t===y}function q(e){var t=e.getChip().getBaseChipId();return b===t}function z(e){return!!e.getChip().getRemoteCatalog()}function V(e){return!z(e)&&e.getChip().getBaseChipId()===undefined}function $(e){var t;var i=e.getConfigurationParameter("tileConfiguration");try{t=JSON.parse(i||"{}")}catch(t){c.error("Tile with ID '"+e.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+i+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",t.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return t}function K(e){var t={};var i;var r;var n;try{i=JSON.parse(e.getChip()._getChipRawConfigurationString());r=JSON.parse(i&&i.tileConfiguration||"{}");n=JSON.parse(r&&r.TILE_PROPERTIES||"{}");if(n.semanticObject&&n.semanticAction){t.navigation_use_semantic_object=true;t.navigation_semantic_object=n.semanticObject;t.navigation_semantic_action=n.semanticAction}}catch(e){return{}}return t}function W(e){var t;if(e.getChip().getBaseChipId()==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{navigation_use_semantic_object:true,navigation_semantic_object:"NewsFeed",navigation_semantic_action:"displayNewsList",navigation_semantic_parameters:"",navigation_target_url:"#NewsFeed-displayNewsList"}}var i=K(e);if(i.navigation_use_semantic_object){return i}try{var r=JSON.parse(e.getChip()._getChipRawConfigurationString());t=JSON.parse(r&&r.tileConfiguration||"{}")}catch(e){return{}}return t}this._parseFullChipId=function(e){var t=e.split(":");var i=t.pop();var r=null;if(t.length>2){r=t.shift()}return{id:i,prefix:r,catalog:t.join(":")}};this.getTargetMappingSupport=function(){return E};this._parseReferenceLost=function(e){var t=e||Object.prototype.toString.apply(t);if(!t.match(/^Reference lost: Note \d+ Page.+\s,\sInstance ID.+$/)){c.warning("The string that describes a lost reference is in an unexpected format","This is expected to be a string exactly like 'Reference lost: Note <#> Page <CATALOG_ID> , Instance ID <CHIP_ID>' instead of the given '"+e+"'","sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{id:"Unknown",catalog:"Unknown"}}var i=t.split(" , ").map(function(e){return e.split(" ").pop()});return{id:i[1],catalog:i[0]}};this._flattenArray=function(e){var t=this;if(Object.prototype.toString.apply(e)!=="[object Array]"){return e}return e.reduce(function(e,i){return e.concat(t._flattenArray(i))},[])};this._findAndReportTileErrors=function(e,t){var i=this._getPossibleTileErrors(e,t);if(i.length>0){this._reportTileErrors(i)}};this._getPossibleTileErrors=function(e,t){var i=this;return e.map(function(e){return{group:{id:e.getId(),title:e.getTitle()},errors:i._getPossibleTileErrorsFromOnePage(e,t)}})};this._getPossibleTileErrorsFromOnePage=function(e,t){var i=this;var r=e.getChipInstances().reduce(function(e,r){var n;var a;var o=r.getChip();var s=i._parseFullChipId(o.getId());if(!o.isInitiallyDefined()){e.push({type:T.catalogTileNotFound,chipInstanceId:r.getId(),chipId:s.id,chipCatalogId:s.catalog})}else if(o.isReference()&&o.isBrokenReference()){var u=i._parseReferenceLost(o.getTitle());e.push({type:T.referenceTileNotFound,chipInstanceId:r.getId(),referenceChipId:s.id,referenceChipCatalogId:s.catalog,missingReferredChipId:u.id,missingReferredCatalogId:u.catalog})}else{try{n=i._checkTileIntentSupport(r,t)}catch(e){n={isSupported:false,reason:T.tileIntentSupportException,exception:e}}if(!n.isSupported){var l=i._getBagText(r,"tileProperties","display_title_text");var c=i._getBagText(r,"tileProperties","display_subtitle_text");switch(n.reason){case T.noTargetMapping:if(H(r)){a=$(r)}else{a=W(r)}e.push({type:T.noTargetMapping,chipInstanceId:r.getId(),chipInstanceTitle:l||a.display_title_text||r.getTitle(),chipInstanceSubtitle:c||a.display_subtitle_text,tileURL:a.navigation_target_url||"#"+a.navigation_semantic_object+"-"+a.navigation_semantic_action+(a.navigation_semantic_parameters?"?"+a.navigation_semantic_parameters:"")});break;case T.emptyConfiguration:var g=r.getConfigurationParameter("tileConfiguration");e.push({type:T.emptyConfiguration,chipInstanceId:r.getId(),chipInstanceTitle:l||r.getTitle(),chipInstanceSubtitle:c||null,tileConfiguration:g});break;case T.tileIntentSupportException:e.push({type:T.tileIntentSupportException,exception:n.exception,chipInstanceId:r.getId()});break;case T.referenceTileNotFound:break;default:}}}return e},[]);return r};this._formatTileError=function(e){switch(e.type){case T.catalogTileNotFound:return"comes from catalog tile with ID '"+e.chipId+"' but this cannot be found in catalog '"+e.chipCatalogId+"' (CATALOG TILE NOT FOUND).";case T.referenceTileNotFound:return"comes from reference tile '"+e.referenceChipId+"'"+" in catalog '"+e.referenceChipCatalogId+"'"+" which in turn refers to the tile '"+e.missingReferredChipId+"'"+" from catalog '"+e.missingReferredCatalogId+"', but this is missing (REFERENCED TILE NOT FOUND).";case T.noTargetMapping:return"was hidden because a target mapping for the tile URL '"+e.tileURL+"' was not found (TARGET MAPPING NOT FOUND).";case T.emptyConfiguration:return"the tile configuration '"+e.tileConfiguration+"' is empty or invalid (BAD CONFIGURATION).";case T.tileIntentSupportException:return"exception occurred while checking tile intent support: "+e.exception+" (EXCEPTION RAISED).";default:return"unknown error type '"+e.type+"' (UNKNOWN ERROR). Error data: "+JSON.stringify(e,null,3)}};this._reportTileErrors=function(e){var t=this;var i=[];var r=[];function n(e,t){var i=[e,t].map(function(e,t){return t===1&&e?"("+e+")":e}).filter(function(e){return typeof e==="string"&&e.length>0}).join(" ");return i.length>0?"'"+i+"'":""}e.forEach(function(e){var a="  in Group '"+e.group.title+"' with Group ID '"+e.group.id+"'";var o=[];var s=[];e.errors.forEach(function(e){var i=["  - tile instance",n(e.chipInstanceTitle,e.chipInstanceSubtitle),"with ID '"+e.chipInstanceId+"'"].filter(function(e){return e.length>0}).join(" ");if(e.type===T.noTargetMapping){s.push([i,"    "+t._formatTileError(e)].join("\n"))}else{o.push([i,"    "+t._formatTileError(e)].join("\n"))}});if(o.length>0){r.push([a,o.join("\n")].join("\n"))}if(s.length>0){i.push([a,s.join("\n")].join("\n"))}});if(r.length>0){r.unshift("Tile error(s) were detected:");c.error(r.join("\n"),null,"sap.ushell_abap.adapters.abap.LaunchPageAdapter")}if(i.length>0){i.unshift("Tile warning(s) were detected:");c.warning(i.join("\n"),null,"sap.ushell_abap.adapters.abap.LaunchPageAdapter")}};this.getGroups=function(){if(this._bPageSetFullyLoaded){return(new jQuery.Deferred).resolve(U()).promise()}if(!k){k=new jQuery.Deferred;var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=t.getFactory().getPageBuildingService().readPageSet;if(x&&x.cacheId){i.cacheBusterTokens.put(_,x.cacheId)}if(x&&x["sap-ui2-cache-disable"]&&i){var r=i.appendedParameters||{};r["sap-ui2-cache-disable"]=x["sap-ui2-cache-disable"];i.appendedParameters=r}var n=this._loadTargetMappings();if(a.last("/core/spaces/enabled")){var o=t.getFactory();var s=new l(o,{id:I});B._oCurrentPageSet={getDefaultPage:function(){return s},getPages:function(){return[s]},appendPage:function(){throw new Error("Not implemented in Pages Runtime")},isPageRemovable:function(){return false},removePage:function(){throw new Error("Not implemented in Pages Runtime")},isPageResettable:function(){return true},resetPage:function(){},getConfiguration:function(){return"{}"},setConfiguration:function(){},filter:function(){}};k.resolve([])}else{var u=t.getPageSet(_);u.fail(e.reject.bind(e)).done(function(t){this._oCurrentPageSet=t;this._oCurrentPageSet.filter([_],[C]);this._loadApplaunchersAndDelayLoadingOfOtherChips(t.getPages(),e.resolve.bind(e,t))}.bind(this));jQuery.when(n,e).done(function(e,t){this._bPageSetFullyLoaded=true;if(c.getLevel()>=c.Level.DEBUG){this._findAndReportTileErrors(t.getPages(),E)}k.resolve(U())}.bind(this)).fail(k.reject.bind(k))}}.bind(this))}return k.promise()};this._loadTargetMappings=function(){if(this._oTargetMappingPromise){return this._oTargetMappingPromise}this._oTargetMappingPromise=this._readTargetMappings().done(function(e){var t=u.getFormFactor();e.results.forEach(function(e){var i=P.prototype._makeTargetMappingSupportKey(e.semanticObject,e.semanticAction);E.put(i,E.get(i)||!!(e.formFactors&&e.formFactors[t]))})}.bind(this));return this._oTargetMappingPromise};this.getGroupsAndWaitForAllChips=function(){return new Promise(function(e,t){B.getGroups().done(e).fail(t)}).then(function(e){return Promise.allSettled(B._aOtherChipsPromises).then(function(){return e})})};this.getDefaultGroup=function(){var e=new jQuery.Deferred;this.getGroups().done(function(){e.resolve(B._oCurrentPageSet.getDefaultPage())}).fail(e.reject.bind(e));return e.promise()};this.getGroupTitle=function(e){return e.getTitle()};this.getGroupId=function(e){return e.getId()};this.getGroupTiles=function(e){var t;try{t=JSON.parse(e.getLayout())}catch(t){c.warning("Group "+e.getId()+": invalid layout: "+e.getLayout(),null,v)}return this._orderBasedOnConfiguration(t,e.getChipInstances())};this.getGroupTileClones=function(e){var t=this.getGroupTiles(e);var i=t.map(function(e){return e.clone()});return Promise.allSettled(i).then(function(e){return e.map(function(e){if(!e.value){c.warning("Group tile was filtered out: ",e.reason)}return e.value}).filter(function(e){return e})})};this.addGroup=function(e){var t=new jQuery.Deferred;B._oCurrentPageSet.appendPage(e,C,t.resolve.bind(t),t.reject.bind(t,U()));return t.promise()};this.removeGroup=function(e){var t=new jQuery.Deferred;if(B._oCurrentPageSet.isPageRemovable(e)){B._oCurrentPageSet.removePage(e,t.resolve.bind(t),t.reject.bind(t,U()))}else{t.reject(U())}return t.promise()};this.resetGroup=function(e){var t=new jQuery.Deferred;var i=this;if(i._oCurrentPageSet.isPageRemovable(e)){t.reject(U())}else if(i._oCurrentPageSet.isPageResettable(e)){i._oCurrentPageSet.resetPage(e,function(){i._loadApplaunchersAndDelayLoadingOfOtherChips([e],t.resolve.bind(t,e))},t.reject.bind(t,U()))}else{t.resolve(e)}return t.promise()};this.isGroupRemovable=function(e){return B._oCurrentPageSet.isPageRemovable(e)};this.isGroupLocked=function(e){return e.isPersonalizationLocked()};this.isLinkPersonalizationSupported=function(e){if(!e){return true}if(!e.isStub()){var t=e.getContract&&e.getContract("types");var i=t&&t.getAvailableTypes()||[];return i.indexOf("link")!==-1}return false};this.isTileIntentSupported=function(e){if(!this._oTargetMappingPromise||this._oTargetMappingPromise.state()!=="resolved"){c.error("isTileIntentSupported might return wrong results as data loading hasn't finished yet!","sap.ushell_abap.adapters.abap.LaunchPageAdapter")}var t;var i=this._checkTileIntentSupport(e,E);if(!i.isSupported&&i.reason===T.noTargetMapping){if(H(e)){t=$(e)}else{t=W(e)}var r=this._getBagText(e,"tileProperties","display_title_text")||t.display_title_text;var n=this._getBagText(e,"tileProperties","display_subtitle_text")||t.display_subtitle_text;var a=t.navigation_target_url;c.warning("Group tile with ID '"+e.getId()+"' is filtered out as the current user has no target mapping assigned for the intent '"+a+"'","\nGroup Tile ID: '"+e.getId()+"'\n"+"Title: '"+r+"'\n"+"Subtitle: '"+n+"'\n"+"Intent: '"+a+"' - ","sap.ushell_abap.adapters.abap.LaunchPageAdapter")}return i.isSupported};this.isTileIntentSupportedAsync=function(e){return this._loadTargetMappings().then(function(){return this.isTileIntentSupported(e)}.bind(this))};this._checkTileIntentSupport=function(e,t){var i;var n;var a=P.prototype._makeTargetMappingSupportKey;if(!H(e)){i=W(e);if(!i.navigation_use_semantic_object||!i.navigation_semantic_object||!i.navigation_semantic_action){return{isSupported:true}}n=t.get(a(i.navigation_semantic_object,i.navigation_semantic_action));if(!n){n=t.get(a("*",i.navigation_semantic_action))}if(!n){return{isSupported:false,reason:T.noTargetMapping}}return{isSupported:true}}if(e.isStub()){c.error("Applauncher Tile not loaded completely! This might be caused by a RemoteCatalog content. Standard Tiles are not supported as part of RemoteCatalogs",new Error("Applauncher Tile is still a stub"),"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{isSupported:true}}if(e.getChip()&&typeof e.getChip().isBrokenReference==="function"&&e.getChip().isBrokenReference()){return{isSupported:false,reason:T.referenceTileNotFound}}i=$(e);if(r(i)){return{isSupported:false,reason:T.emptyConfiguration}}if(!i.navigation_use_semantic_object){return{isSupported:true}}n=t.get(a(i.navigation_semantic_object,i.navigation_semantic_action));if(n){return{isSupported:true}}return{isSupported:false,reason:T.noTargetMapping}};this.moveGroup=function(e,t){var i=new jQuery.Deferred;function r(e){var t=[];e.forEach(function(e){t.push(e.getId())});var r=JSON.parse(B._oCurrentPageSet.getConfiguration()||"{}");r.order=t;B._oCurrentPageSet.setConfiguration(JSON.stringify(r),i.resolve.bind(i),i.reject.bind(i,U()))}this.getGroups().done(function(i){var n=i.indexOf(e);i.splice(n,1);i.splice(t,0,e);r(i)});return i.promise()};this.setGroupTitle=function(e,t){var i=new jQuery.Deferred;e.setTitle(t,i.resolve.bind(i),function(){i.reject(e.getTitle())});return i.promise()};this.addTile=function(e,t){var i=new jQuery.Deferred;var r=e.getChip();if(e.isStub()){i.reject(U(),new Error("Tile was not added to the group as the tile failed loading"))}else{if(!t){t=B._oCurrentPageSet.getDefaultPage()}t.addChipInstance(r,i.resolve.bind(i),i.reject.bind(i,U()))}return i.promise()};this.removeTile=function(e,t){var i=new jQuery.Deferred;e.removeChipInstance(t,i.resolve.bind(i),i.reject.bind(i,U()));return i.promise()};this.moveTile=function(e,t,i,r,n,a){var o=new jQuery.Deferred;var s=this._isWrapperOnly(e);var l=new u.Map;var g;var f=o.reject.bind(o,U());var p=2;function d(e){p-=1;g=g||e;if(p<=0){o.resolve(g)}}if(!n){n=r}var h=G(r,this);var _=G(n,this);var C=this.getTileType(e);t=L(h,e,C);if(t<0){c.error("moveTile: tile not found in source group",null,v);f();return o.promise()}if(r===n){F(h,e.getId(),i,a);r.setLayout(JSON.stringify(h),o.resolve.bind(o,e),f)}else{sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var o=t.getFactory().getPageBuildingService();var u=e.getBagIds();u.forEach(function(t){var i={texts:[],properties:[]};var r=e.getBag(t);r.getOwnTextNames().forEach(function(e){i.texts.push({name:e,value:r.getText(e)})});r.getOwnPropertyNames().forEach(function(e){i.properties.push({name:e,value:r.getProperty(e)})});if(i.texts.length>0||i.properties.length>0){l.put(t,i)}});o.openBatchQueue();var g=this.getGroupTiles(n);n.addChipInstance(s?e.getChip():e,function(e){var t;g.splice(i,0,e);u.forEach(function(i){var r=l.get(i);if(r){t=e.getBag(i);r.texts.forEach(function(e){t.setText(e.name,e.value)});r.properties.forEach(function(e){t.setProperty(e.name,e.value)});t.save(function(){},function(){c.error("Bag "+i+": could not be saved",null,v)})}});F(_,e.getId(),i,a);n.setLayout(JSON.stringify(_),d.bind(this,e),f)},f,e.isStub());r.removeChipInstance(e,d,f);r.setLayout(JSON.stringify(h),undefined,f);o.submitBatchQueue(undefined,f)}.bind(this))}return o.promise()};this.getTileId=function(e){return e.getId()};this.getTileType=function(e){var t=e.getPage();try{var i=JSON.parse(t.getLayout());if(i.linkOrder&&i.linkOrder.indexOf(e.getId())>-1){return"link"}}catch(e){c.warning("Group "+t.getId()+": invalid layout: "+t.getLayout(),null,v)}if(e.isStub()===false){var r=e.getContract("types");if(r&&r.getAvailableTypes().indexOf("card")>-1){return"card"}}return"tile"};this.getCardManifest=function(e){try{var i=e.getConfigurationParameter("cardManifest");var r=JSON.parse(i);var n=t.getCardData(e);r=t.mergeCardData(r,n);return r}catch(t){c.error("Manifest of card with id '"+e.getId()+"' could not be read. "+t.message)}};this.getTileTitle=function(e){return e.getTitle()};this.getTileView=function(e){var t=this;var i=new jQuery.Deferred;function r(){var r;var o=e.getContract("types");if(o){r=t.getTileType(e);o.setType(r)}e.getImplementationAsSapui5Async().then(function(e){if(r==="link"){if(!e.hasModel()){e=e.getComponentInstance().getRootControl()}var t=e.getModel();var a=e.getController();var o=t&&t.getProperty?t.getProperty("/nav/navigation_target_url"):undefined;var s=new n({mode:"{view>/mode}",header:"{view>/config/display_title_text}",subheader:"{view>/config/display_subtitle_text}",sizeBehavior:"{view>/sizeBehavior}",size:"Auto",url:a.formatters&&a.formatters.leanURL(o),press:[a.onPress,a]});s.setModel(t,"view");i.resolve(s);return}i.resolve(e)}).catch(a)}function a(e){i.reject("Tile not successfully loaded"+(e?": "+e:""))}if(!e.$loadingPromise){if(!e.isStub()){u.callHandler(r,a,!H(e))}else{a()}}else{e.$loadingPromise.fail(a).done(function(){try{r()}catch(e){a(e.message||e)}})}return i.promise()};this.getTileSize=function(e){var t=!e.isStub()&&e.getConfigurationParameter("row")||"1";var i=!e.isStub()&&e.getConfigurationParameter("col")||"1";return t+"x"+i};this.refreshTile=function(e){e.refresh()};this.setTileVisible=function(e,t){var i=!e.isStub()&&e.getContract("visible");if(i){i.setVisible(t);return}if(e.isStub()&&e.$loadingPromise){var r=this.getTileId(e);var n=D[r];D[r]=t;if(n===undefined){e.$loadingPromise.done(function(){var t=e.getContract("visible");if(t){t.setVisible(D[r])}})}return}};this.getTileActions=function(e){var t=!e.isStub()&&e.getContract("actions");if(t){return t.getActions()}return[]};this.getTileTarget=function(){return null};this.getTileDebugInfo=function(e){var t=e.getChip();var i=t.getCatalog();var r={chipId:t.getId(),chipInstanceId:e.getId(),chipTitle:t.getTitle(),chipDescription:t.getDescription(),completelyLoaded:!e.isStub()};if(i){r.catalogId=i.getId()}var n=JSON.stringify(r);return n};this.getCatalogs=function(){var e;var t=A;var i=O===false;if(t&&!t.$notified&&!i){e=t}else{A=new jQuery.Deferred;e=A;e.done(function(){if(e===A){O=true}}).always(function(){if(e===A){A=null}});if(t){if(i){O=undefined}t.always(function(){this._startLoading(e,i)}.bind(this))}else{this._startLoading(e,i)}}return e.promise()};this._refreshRemoteCatalogs=function(e){return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=0;var r=t.getFactory();var n=J(r);n.forEach(function(t){var a=t.ui2catalog;if(a.isStub()||a.getType()==="H"||a.getType()==="REMOTE"){i+=1;a.refresh(function(){t.title=a.getTitle();t.tiles=M(r,a.getChips());e.notify(t);i-=1;if(i<=0){e.resolve(n)}},function(r){c.error("Failed to load catalog: "+r,a.toString(),v);t.errorMessage=r||"Error";e.notify(t);i-=1;if(i<=0){e.resolve(n)}})}else{e.notify(t);e.$notified=true}});if(i<=0){e.resolve(n)}})};this._useKnownCatalogs=function(e){return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(t){var i=J(t.getFactory());i.forEach(function(t){e.notify(t)});e.resolve(i)})};this._doGetCatalogs=function(e,t){var i=this._oCurrentPageSet.getDefaultPage().getAllCatalogs();if(i.isStub()){i.load(function(){this._refreshRemoteCatalogs(e)}.bind(this),e.reject,"type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG' or type eq 'REMOTE'",true,"title",true)}else if(t){this._refreshRemoteCatalogs(e)}else{this._useKnownCatalogs(e)}};this._startLoading=function(e,t){var i;if(x&&x.cacheId){i=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e){var t=e.getFactory().getPageBuildingService().readAllCatalogs.cacheBusterTokens;t.put(_,x.cacheId);if(a.last("/core/spaces/enabled")){t.put(I,x.cacheId)}}).catch(e.reject)}else{i=Promise.resolve()}i.then(function(){if(B._bPageSetFullyLoaded){this._doGetCatalogs(e,t)}else{this.getGroups().done(function(){this._doGetCatalogs(e,t)}.bind(this)).fail(e.reject)}}.bind(this)).catch(e.reject)};this.isCatalogsValid=function(){return!!O};this.getCatalogData=function(e){return e.ui2catalog.getCatalogData()};this.getCatalogError=function(e){return e.errorMessage};this.getCatalogId=function(e){return e.id};this.getCatalogTitle=function(e){return e.title};this.getCatalogTiles=function(e){var t=new jQuery.Deferred;var i=0;function r(){i-=1;if(i===0){t.resolve(e.tiles)}}function n(e,t){c.error("Failed to load catalog tile: "+t,e.toString(),v);r()}for(var a=0;a<e.tiles.length;a+=1){var o=e.tiles[a];if(o.isStub()){i+=1;o.load(r,n.bind(null,o))}}if(i===0){t.resolve(e.tiles)}return t.promise()};this.getCatalogTileNumberUnit=s.getCatalogTileNumberUnit;this.getCatalogTileId=function(e){var t=e.getChip();var i=t.getId();if(t.getCatalog()&&t.getCatalog().getCatalogData()&&t.getCatalog().getCatalogData().systemAlias){i+="_"+t.getCatalog().getCatalogData().systemAlias}return i};this.getStableCatalogTileId=function(e){var t=e.getChip();var i=t.getReferenceChipId();if(i==="O"){i=null}if(!i){i=this.getCatalogTileId(e)}return i};this.getCatalogTileTitle=function(e){return e.getChip().getTitle()};this.getCatalogTileSize=s.getCatalogTileSize;this.getCatalogTileView=function(e,t){t=typeof t!=="undefined"?t:true;var i=this.getCatalogTileTitle(e);if(e.isStub()){c.warning("CHIP (instance) is just a stub!",e.toString(true),v);return new f({icon:"sap-icon://hide",info:"",infoState:"Critical",subtitle:"",title:i}).addStyleClass("sapUshellTileError")}if(t){var r=e.getContract("preview");if(r){r.setEnabled(true)}else{return new f({title:i,subtitle:"",info:"",infoState:"Neutral",icon:"sap-icon://folder-full"})}}return N(e,i,"Cannot get catalog tile view as SAPUI5")};this.getCatalogTileViewControl=function(e,t){var i=new jQuery.Deferred;t=typeof t!=="undefined"?t:true;var r=this.getCatalogTileTitle(e);if(e.isStub()){c.warning("CHIP (instance) is just a stub!",e.toString(true),v);i.resolve(this._createErrorTile(r,"CHIP was just a stub!"));return i.promise()}if(t){var n=e.getContract("preview");if(n){n.setEnabled(true)}else{i.resolve(this._createPreviewTile(r));return i.promise()}}e.getImplementationAsSapui5Async().catch(function(e){c.error("Cannot get catalog tile view as SAPUI5: "+(e.message||e),e.stack,v);return this._createErrorTile(r,e.message||e)}.bind(this)).then(i.resolve);return i.promise()};this._createErrorTile=function(e,t){var i=new n({state:h.Failed,header:e,subheader:t||""}).addStyleClass("sapUshellTileError");return i};this._createPreviewTile=function(e){return new f({title:e,subtitle:"",info:"",infoState:"Neutral",icon:"sap-icon://folder-full"})};this.getCatalogTileTargetURL=s.getCatalogTileTargetURL;this.getCatalogTilePreviewSubtitle=s.getCatalogTilePreviewSubtitle;this.getCatalogTilePreviewTitle=s.getCatalogTilePreviewTitle;this.getCatalogTilePreviewInfo=s.getCatalogTilePreviewInfo;this.getCatalogTilePreviewIndicatorDataSource=s.getCatalogTilePreviewIndicatorDataSource;this.getCatalogTilePreviewIcon=s.getCatalogTilePreviewIcon;this.getCatalogTileKeywords=function(e){var t={};var i=e.getTitle();var r=this.getCatalogTilePreviewSubtitle(e);var n=e.getChip().getDescription();function a(e,t){if(u.isArray(t)){t.forEach(function(t){if(e.hasOwnProperty(t)){return}e[t]=null})}}function o(e){var t=P.prototype._getBagText(e,"tileProperties","display_search_keywords");if(!u.isString(t)||t===""){return[]}return t.trim().split(/\s*,\s*/g)}function s(e){var t=P.prototype._getBagText(e,"tileProperties","display_info_text");if(t){return[t]}return[]}function l(e){var t=P.prototype._getConfigurationProperty(e,"tileConfiguration","display_number_unit");if(t){return[t]}return[]}function c(e){var t;if(e.isStub()){return[]}t=e.getContract("search");if(t){return t.getKeywords()}return[]}a(t,o(e));a(t,s(e));a(t,l(e));a(t,c(e));if(i){a(t,[i])}if(r){a(t,[r])}if(n){a(t,[n])}return Object.keys(t)};this.addBookmark=function(e,t){var r=y;var n={display_icon_url:e.icon||"",display_info_text:e.info||"",display_subtitle_text:e.subtitle||"",display_title_text:e.title};var a=new jQuery.Deferred;var o={tileProperties:{texts:{display_title_text:n.display_title_text,display_subtitle_text:n.display_subtitle_text,display_info_text:n.display_info_text}}};if(e.serviceUrl){r=m;n.display_number_unit=e.numberUnit;n.service_refresh_interval=e.serviceRefreshInterval||0;n.service_url=e.serviceUrl;if(e.dataSource){n.data_source={type:e.dataSource.type,settings:{odataVersion:i.get(["dataSource","settings","odataVersion"],e)}}}}if(t&&!(t instanceof l)){a.reject("The given object is not a group");return a.promise()}n={tileConfiguration:JSON.stringify(n)};this._createBookmarkTile(r,e.url,n,o,e.title,t).then(function(){a.resolve()}).catch(function(e){a.reject(e.toString())});return a.promise()};this.addCustomBookmark=function(e,t){var i=e.vizConfig["sap.flp"].chipConfig;var r=new jQuery.Deferred;if(t&&!(t instanceof l)){r.reject("The given object is not a group");return r.promise()}this._createBookmarkTile(i.chipId,e.url,i.configuration,i.bags,e.title,t).then(function(){r.resolve()}).catch(function(e){r.reject(e.toString())});return r.promise()};this._getTileTargetConfiguration=function(t){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(i){var r={navigation_target_url:t,navigation_use_semantic_object:false};var n=new e;var a=new e(t);var o=a.host()+a.path()===n.host()+n.path();var s=P.prototype._makeTargetMappingSupportKey;if(t[0]==="#"||o){var u=i.parseShellHash(i.getShellHash(t));if(u&&E.get(s(u.semanticObject,u.action))!==undefined){r.navigation_use_semantic_object=true;r.navigation_semantic_object=u.semanticObject;r.navigation_semantic_action=u.action;r.navigation_semantic_parameters=i.paramsToString(u.params)}}return r})};this._updateBags=function(e,t){var i=[];var r=[];if(!t){t={};i.push(Promise.resolve([]))}Object.keys(t).forEach(function(n){var a;var o=false;var s=t[n];var u=e.getBag(n);try{for(a in s.properties){u.setProperty(a,s.properties[a]);o=true}for(a in s.texts){u.setText(a,s.texts[a]);o=true}i.push(new Promise(function(e,t){if(o){r.push(n);u.save(e,t)}else{e()}}))}catch(e){i.push(Promise.reject(e))}});return Promise.all(i).then(function(){return r})};this._checkBookmarkConfiguration=function(e){return new Promise(function(t,i){try{var r=$(e);if(!r.navigation_target_url){throw new Error("tileConfiguration.navigation_target_url was not set")}this.getTileSize(e);t()}catch(t){var n="Chip configuration check failed: "+t.toString();c.error(n,e.getId(),v);i(n)}}.bind(this))};this._createBookmarkTile=function(e,t,i,r,n,a){return Promise.all([sap.ushell.Container.getServiceAsync("PageBuilding"),this._getTileTargetConfiguration(t)]).then(function(t){var r=t[0];var s=t[1];if(!i.tileConfiguration){i.tileConfiguration=JSON.stringify(s)}else{var u=JSON.parse(i.tileConfiguration);u=o({},u,s);i.tileConfiguration=JSON.stringify(u)}var l=r.getFactory();var c=l.getPageBuildingService();return new Promise(function(t,r){if(this._bPageSetFullyLoaded){a=a||this._oCurrentPageSet.getDefaultPage();var o=l.createChipInstance({chipId:e,pageId:a.getId(),title:n,configuration:JSON.stringify(i),layoutData:""});a.addChipInstance(o,t,r,undefined)}else{try{c.createPageChipInstanceFromRawData({chipId:e,configuration:JSON.stringify(i),pageId:"/UI2/Fiori2LaunchpadHome",title:n},function(e){l.createChipInstance(e,t,r,undefined)},r)}catch(e){r(e)}}}.bind(this))}.bind(this)).then(function(e){return this._updateBags(e,r).then(function(){return this._checkBookmarkConfiguration(e)}.bind(this)).catch(function(t){return new Promise(function(i,r){e.remove(r.bind(undefined,t),r.bind(undefined,t))})})}.bind(this))};P.prototype._isBookmarkFor=function(e,t){var i=e.getChip().getBaseChipId();if(i!==undefined){var r=$(e).navigation_target_url;if(typeof t==="string"){return H(e)&&r===t}return t.chipId===i&&t.url===r}return false};P.prototype._visitBookmarks=function(e,t){var i=[];var r=new jQuery.Deferred;B.getGroupsAndWaitForAllChips().then(function(n){var a=0;n.forEach(function(r){r.getChipInstances().forEach(function(r){if(B._isBookmarkFor(r,e)){a+=1;if(t){i.push(t(r))}}})});if(i.length===0){r.resolve(a)}else{jQuery.when.apply(jQuery,i).fail(function(e){r.reject(e)}).done(function(){r.resolve(a)})}}).catch(function(e){r.reject(e.message||e)});return r.promise()};this._visitCustomBookmarks=function(e,t){if(!e.chipId){return Promise.reject("_visitCustomBookmarks: Required parameter is missing: oIdentifier.chipId")}return new Promise(function(i,r){this.getGroups().fail(r).done(function(n){var a=[];var o=0;n.forEach(function(i){i.getChipInstances().forEach(function(i){if(P.prototype._isBookmarkFor(i,e)){o+=1;if(t){a.push(t(i))}}})});Promise.all(a).then(function(){i(o)}).catch(r)})}.bind(this))};this.countBookmarks=function(e){return P.prototype._visitBookmarks(e)};this.countCustomBookmarks=function(e){return this._visitCustomBookmarks(e)};this.deleteBookmarks=function(e){return P.prototype._visitBookmarks(e,function(e){var t=new jQuery.Deferred;e.remove(t.resolve.bind(t),t.reject.bind(t));return t.promise()})};this.deleteCustomBookmarks=function(e){return this._visitCustomBookmarks(e,function(e){return new Promise(function(t,i){e.remove(t,i)})})};this.updateBookmarks=function(e,t){return P.prototype._visitBookmarks(e,function(e){var i=$(e);var r=new jQuery.Deferred;var n={tileProperties:{texts:{}}};if(t.title){n.tileProperties.texts.display_title_text=t.title}if(typeof t.subtitle==="string"){n.tileProperties.texts.display_subtitle_text=t.subtitle}if(typeof t.info==="string"){n.tileProperties.texts.display_info_text=t.info}var a={display_icon_url:typeof t.icon==="string"?t.icon:i.display_icon_url,display_info_text:typeof t.info==="string"?t.info:i.display_info_text,display_subtitle_text:typeof t.subtitle==="string"?t.subtitle:i.display_subtitle_text,display_title_text:t.title||i.display_title_text,display_number_unit:typeof t.numberUnit==="string"?t.numberUnit:i.display_number_unit,service_refresh_interval:t.serviceRefreshInterval||i.service_refresh_interval,service_url:t.serviceUrl||i.service_url};var s={};this._getTileTargetConfiguration(t.url||i.navigation_target_url).then(function(e){a=o({},a,e);s.tileConfiguration=JSON.stringify(a)}).then(function(){return new Promise(function(t,i){e.updateConfiguration(s,t,i)})}).then(function(){e.getContract("configuration").fireConfigurationUpdated(Object.keys(s));return this._updateBags(e,n)}.bind(this)).then(function(t){if(t.length){e.getContract("bag").fireBagsUpdated(t)}r.resolve()}).catch(function(e){r.reject(e.toString())});return r.promise()}.bind(this))};this.updateCustomBookmarks=function(e,t){var r=i.get(["vizConfig","sap.flp","chipConfig"],t)||{};var n=r.configuration||{};var a=r.bags||{};var s=t.url;return this._visitCustomBookmarks(e,function(e){return this._getTileTargetConfiguration(s).then(function(t){var i;if(!n.tileConfiguration){i=$(e);i=o({},i,t);n.tileConfiguration=JSON.stringify(i)}else{i=JSON.parse(n.tileConfiguration);i=o({},i,t);n.tileConfiguration=JSON.stringify(i)}return new Promise(function(t,i){try{e.updateConfiguration(n,t,i)}catch(e){i(e)}})}).then(function(){e.getContract("configuration").fireConfigurationUpdated(Object.keys(n));return this._checkBookmarkConfiguration(e)}.bind(this)).then(function(){return this._updateBags(e,a)}.bind(this)).then(function(i){if(i.length){e.getContract("bag").fireBagsUpdated(i)}return new Promise(function(i,r){if(t.title){e.setTitle(t.title,true,i,r)}else{i()}})})}.bind(this))};this.onCatalogTileAdded=function(){O=false};this.isCustomTile=function(e){return!H(e)}};P.prototype._getCatalogTileIndex=function(){this._oCatalogTileIndexPromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e){var t=e.getFactory().getPageBuildingService();return new Promise(function(e,i){t.readAllCatalogs(I,e,i,"type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG' or type eq 'REMOTE'","title",true)})}).then(function(e){var t={};e.results.forEach(function(e){e.Chips.results.forEach(function(e){var i;if(a.last("/core/stableIDs/enabled")&&e.referenceChipId){i=e.referenceChipId}else{i=e.id}if(!t[i]){t[i]=e}})});return t}).catch(function(){return{}});return this._oCatalogTileIndexPromise};return P});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/MenuAdapter", ["sap/ushell/Config","sap/base/Log","sap/ushell/library","sap/ushell/components/pages/controller/PagesAndSpaceId"],function(e,t,n,r){"use strict";var a=n.ContentNodeType;var i=function(){};i.prototype.isMenuEnabled=function(){var t=e.last("/core/menu/enabled");var n=this._getAssignedSpaces().length;return Promise.resolve(t&&n>0)};i.prototype.getMenuEntries=function(){return r.getUserMyHomeEnablement().then(function(t){var n=e.last("/core/homeApp/enabled");var r=e.last("/core/spaces/myHome/enabled");var a=e.last("/core/spaces/myHome/myHomeSpaceId");var i=this._getAssignedSpaces();if(n&&r||r&&!t){for(var o=0;o<i.length;o++){if(i[o].id===a){i=i.slice(1);break}}}var s=this._buildMenuEntries(i);return s}.bind(this))};i.prototype.getMenuPersonalization=function(){var e=document.querySelector("meta[name='sap.ushell.menuPersonalization']");if(!e){return null}var t=JSON.parse(e.getAttribute("content"));return t};i.prototype.getContentNodeEntries=function(){var e=this._getAssignedSpaces();this._removeMyHomeForContentNodes(e);var t=this._buildMenuEntries(e);return Promise.resolve(t)};i.prototype.getContentNodes=function(){var e=this._getAssignedSpaces();this._removeMyHomeForContentNodes(e);var t=this._buildContentNodes(e);return Promise.resolve(t)};i.prototype._buildMenuEntries=function(t){var n=t.filter(this._isSpaceNotEmpty.bind(null,"FLP menu")).map(function(t,n){var r={id:t.id,title:t.title||t.id,"help-id":"Space-"+t.id,description:t.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:t.id},{name:"pageId",value:t.pages[0].id}],innerAppRoute:undefined},isHomeEntry:n===0&&t.id===e.last("/core/spaces/myHome/myHomeSpaceId"),menuEntries:[]};var a=t.pages.map(function(e){return{id:e.id,title:e.title||e.id,"help-id":"Page-"+e.id,description:e.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:t.id},{name:"pageId",value:e.id}],innerAppRoute:undefined},menuEntries:[]}});if(a.length>1){r.menuEntries=a}return r});return n};i.prototype._buildContentNodes=function(e){var t=e.filter(this._isSpaceNotEmpty.bind(null,"content nodes")).map(function(e){return{id:e.id,label:e.title||e.id,type:a.Space,isContainer:false,children:e.pages.map(function(e){return{id:e.id,label:e.title||e.id,type:a.Page,isContainer:true}})}});return t};i.prototype._isSpaceNotEmpty=function(e,n){if(!n.pages||n.pages.length===0){t.warning("FLP space "+n.id+" without page omitted in "+e+".","","sap.ushell_abap.adapters.abap.MenuAdapter");return false}return true};i.prototype._removeMyHomeForContentNodes=function(t){var n=e.last("/core/homeApp/enabled");var r=e.last("/core/spaces/myHome/enabled");var a=e.last("/core/spaces/myHome/userEnabled");var i=e.last("/core/spaces/myHome/myHomeSpaceId");if(n){return}if(r&&!a){if(t[0]&&t[0].id===i){t.shift()}}};i.prototype._getAssignedSpaces=function(){var e=document.querySelector("meta[name='sap.ushell.assignedSpaces']");if(!e){return[]}var t=JSON.parse(e.getAttribute("content"));return t};return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/NavTargetResolutionAdapter", [],function(){"use strict";return function(){}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PageBuildingAdapter", ["sap/base/util/ObjectPath","sap/base/Log","sap/ushell_abap/pbServices/ui2/Factory"],function(e,a,i){"use strict";return function(r,t,s){var o,c="PERS",p="/sap/opu/odata/UI2/PAGE_BUILDER_PERS/",n=s.config.remoteCatalogServices||{},u=e.get("config.services.pageBuilding.baseUrl",s);this.getFactory=function(){return o};t=t?t.toUpperCase():"";if(t==="CONF"||t==="CUST"){c=t;p="/sap/opu/odata/UI2/PAGE_BUILDER_"+c+"/"}else if(u&&e.get("config.services.pageBuilding.relativeUrl",s)){p=u}var l=e.get("sap-ushell-config.services.Container.adapter.config.services.pbFioriHome.cacheId");o=i.createFactory(p,undefined,c==="PERS",l);["/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata/","/sap/hba/r/sb/core/odata/modeler/SMART_BUSINESS.xsodata/","/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata/","/sap/opu/odata/sap/SM_CATALOG_SRV/"].forEach(function(e){if(!Object.prototype.hasOwnProperty.call(n,e)){n[e]="sap.ushell_abap.pbServices.ui2.RemoteCatalogService"}});Object.keys(n).forEach(function(e){var i=n[e];if(i==="sap.ui2.srvc.RemoteCatalogService"){i="sap.ushell_abap.pbServices.ui2.RemoteCatalogService"}var r=(i||"").replace(/\./g,"/");var t;if(!(t=sap.ui.require(r))){a.warning("FLP PageBuildingAdapter: remote catalog service "+r+" must be loaded before use.");t=sap.ui.requireSync(r)}o.addRemoteCatalogService(e,new t)})}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PagePersistenceAdapter", ["sap/base/util/ObjectPath","sap/ushell/utils/HttpClient","sap/ushell/resources","sap/ushell/utils/chipsUtils","sap/ushell/Config","sap/ui/core/Configuration"],function(e,t,i,a,n,r){"use strict";function s(){var t=window["sap-ushell-config"].services&&window["sap-ushell-config"].services.PagePersistence||{};return(e.get("config.serviceUrl",t.adapter)||"").replace(/\/?$/,"/")}var o=function(){this.S_COMPONENT_NAME="sap.ushell_abap.adapters.abap.PagePersistenceAdapter"};o.prototype.getPage=function(e){return Promise.all([this._readPage(e),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(e){var t=e[0];var i=e[1];return this._convertODataToReferenceData(t,i)}.bind(this)).catch(this._rejectWithError.bind(this))};o.prototype.getPages=function(e){return Promise.all([this._readPages(e),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(e){var t=e[0].results;var i=e[1];return t.map(function(e){return this._convertODataToReferenceData(e,i)}.bind(this))}.bind(this)).catch(this._rejectWithError.bind(this))};o.prototype._readPage=function(e){return new Promise(function(i,a){var n={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":r.getLanguage()||"",Accept:"application/json, text/plain"};var o=sap.ushell.Container.getUser().getLanguage();if(o){n["sap-language"]=o}var p=sap.ushell.Container.getLogonSystem();var c=p?p.getClient():"";if(c){n["sap-client"]=c}var l=s();var d=new t(l,{headers:n});var u=l+"pageSet('"+encodeURIComponent(e)+"')"+"?$expand=sections/viz,vizReferences/chipBags/properties,tileTypes/vizOptions/displayFormats/supported";d.get(u).then(function(e){i(JSON.parse(e.responseText).d)}).catch(a)})};o.prototype._readPages=function(e){return new Promise(function(i,a){var n={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":r.getLanguage()||"",Accept:"application/json, text/plain","content-type":"multipart/mixed; boundary=batch_bd56-ff53-571c"};var o=sap.ushell.Container.getUser().getLanguage();if(o){n["sap-language"]=o}var p=sap.ushell.Container.getLogonSystem();var c=p?p.getClient():"";if(c){n["sap-client"]=c}var l="pageSet?$expand="+encodeURIComponent("sections/viz,vizReferences/chipBags/properties,tileTypes/vizOptions/displayFormats/supported")+"&$filter=";var d=e.length?"id eq '"+e.join("' or id eq '")+"'":"";var u=s();var g=u+"$batch";var h=new t(u,{headers:n});var f=this._createBatchData(l+encodeURIComponent(d).replace(/[!'()*]/g,escape));h.post(g,{data:f}).then(function(e){var t=this._retrieveBatchData(e);i(t)}.bind(this)).catch(a)}.bind(this))};o.prototype._createBatchData=function(e){var t=sap.ushell.Container.getUser().getLanguage();var i=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";var a=["--batch_bd56-ff53-571c","Content-Type: application/http","Content-Transfer-Encoding: binary","","GET "+e+" HTTP/1.1","sap-cancel-on-close: true","sap-language: "+(t||""),"sap-client: "+(i||""),"sap-contextid-accept: header","Accept: application/json","Accept-Language: "+(t||""),"DataServiceVersion: 2.0","MaxDataServiceVersion: 2.0","X-Requested-With: XMLHttpRequest","","","","--batch_bd56-ff53-571c--"];return a.join("\r\n")};o.prototype._retrieveBatchData=function(e){var t=e.responseText.split("\r\n");var i=[];for(var a=0;a<t.length;a++){if(t[a].startsWith("{")){i=t[a]}}return JSON.parse(i).d};o.prototype._convertODataToReferenceData=function(e,t){var i={};var r=n.last("/core/stableIDs/enabled");var s={page:{id:e.id,title:e.title,description:e.description,createdBy:e.createdBy,createdByFullname:e.createdByFullname||e.createdBy,modifiedBy:e.modifiedBy,modifiedByFullname:e.modifiedByFullname||e.modifiedBy,sections:e.sections.results.map(function(e){return{id:e.id,sectionIndex:e.sectionIndex,title:e.title,viz:e.viz.results.map(function(e){return{catalogTileId:e.catalogTileId,id:e.id,itemIndex:e.itemIndex,targetMappingId:e.targetMappingId,vizId:r?e.catalogTileIdStable:e.catalogTileId,inboundPermanentKey:r?e.targetMappingIdStable:e.targetMappingId,displayFormatHint:e.displayFormatHint}}).sort(function(e,t){return e.itemIndex-t.itemIndex})}}).sort(function(e,t){return e.sectionIndex-t.sectionIndex})},visualizations:e.vizReferences.results.reduce(function(e,n){var s=this._getSimplifiedChip(n);var o={vizType:n.tileType,title:n.title,subTitle:n.subTitle,icon:n.iconUrl,info:a.getInfoFromSimplifiedChip(s),keywords:a.getKeywordsFromSimplifiedChip(s),size:a.getTileSizeFromSimplifiedChip(s),indicatorDataSource:a.getIndicatorDataSourceFromSimplifiedChip(s),url:a.getTargetUrlFromSimplifiedChip(s,t),numberUnit:a.getNumberUnitFromSimplifiedChip(s),isCustomTile:a.isCustomTileFromSimplifiedChip(s),_instantiationData:{platform:"ABAP",simplifiedChipFormat:true,chip:s}};if(r){o.vizId=n.catalogTileIdStable;e[n.catalogTileIdStable]=o;if(n.fromPersonalization&&n.id!==n.catalogTileIdStable){i[n.id]=o}}else{e[n.id]=o}return e}.bind(this),{}),vizTypes:e.tileTypes.results.reduce(function(e,t){var i=t.vizOptions.displayFormats;var a=t.id;e[a]={id:a,url:t.url,vizOptions:{displayFormats:{supported:i.supported.results.map(function(e){return e.id}),default:i.preferred}}};return e},{})};if(r){s.unstableVisualizations=Object.keys(i).length>0?i:null}return s};o.prototype._getSimplifiedChip=function(e){var t={};var i;try{i=JSON.parse(e.configuration)}catch(e){i={}}e.chipBags.results.forEach(function(e){t[e.id]={texts:{},properties:{}};e.properties.results.forEach(function(i){if(i.translatable){t[e.id].texts[i.id]=i.value}else{t[e.id].properties[i.id]=i.value}})});return{chipId:e.tileType,configuration:i,bags:t}};o.prototype._rejectWithError=function(e){var t={component:this.S_COMPONENT_NAME,description:i.i18n.getText("PagePersistenceAdapter.CannotLoadPage"),detail:e};return Promise.reject(t)};return o});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PersonalizationAdapter", ["sap/ushell_abap/adapters/abap/AdapterContainer","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell_abap/pbServices/ui2/Error","sap/base/util/ObjectPath","sap/base/Log"],function(a,e,t,r,p,s){"use strict";var n=function(a,n,i){s.debug("[000] PersonalizationAdapter: constructor","PersonalizationAdapter");this._oConfig=i&&i.config;var o=(p.get("config.services.personalization.baseUrl",i)||"/sap/opu/odata/UI2/INTEROP")+"/";var u={baseUrl:o,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=e.createODataWrapper(u);function l(a){throw new r(a,"sap.ushell_abap.adapters.abap.PersonalizationAdapter")}t.call(this,this._oWrapper,l)};n.prototype.supportsGetWithoutSubsequentLoad=true;n.prototype.getAdapterContainer=function(e,t,r){return new a(e,this,t,r)};n.prototype.delAdapterContainer=function(a,e){return this.getAdapterContainer(a,e).del()};return n});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/PersonalizationV2Adapter", ["./PersonalizationAdapter"],function(e){"use strict";return e});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/Ui5ComponentLoaderAdapter", [],function(){"use strict";return function(){}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/adapters/abap/UserInfoAdapter", ["sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/resources","sap/ui/core/library"],function(e,r,jQuery,t,a,n){"use strict";var s;var i="default";var u=n.date.CalendarWeekNumbering;return function(){this._updateODataObjectBasedOnDatatype=function(e,r){if(jQuery.type(e)==="string"){r.value=e.toString();r.dataType="Edm.String"}if(jQuery.type(e)==="boolean"){r.value=e.toString();r.dataType="Edm.Boolean"}return r};this.getThemeList=function(){var e=new jQuery.Deferred,a="/sap/opu/odata/UI2/INTEROP/Themes";r.read({requestUri:a},function(r,t){var a,n=[];for(a=0;a<r.results.length;a=a+1){n.push(r.results[a])}e.resolve({options:n})},function(r){t.error(r.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");e.reject(r.message)});return e.promise()};this.getCalendarWeekNumberingList=function(){return[{value:u.Default,title:a.i18n.getText("DefaultWeekNumberingTitle"),description:a.i18n.getText("DefaultWeekNumberingText")},{value:u.ISO_8601,title:a.i18n.getText("ISO_8601WeekNumberingTitle"),description:a.i18n.getText("ISO_8601WeekNumberingText")},{value:u.MiddleEastern,title:a.i18n.getText("MiddleEasternWeekNumberingTitle"),description:a.i18n.getText("MiddleEasternWeekNumberingText")},{value:u.WesternTraditional,title:a.i18n.getText("WesternTraditionalWeekNumberingTitle"),description:a.i18n.getText("WesternTraditionalWeekNumberingText")}]};this.getLanguageList=function(){var e=new jQuery.Deferred,n=encodeURI("/sap/opu/odata/UI2/INTEROP/UserProfilePropertyValues?$filter=id eq 'PREFERRED_LOGON_LANGUAGE'");r.read({requestUri:n},function(r){var t=[{text:a.i18n.getText("userSettings.browserLanguage"),key:i}];var n=r.results.map(function(e){return{text:e.description,key:e.value}}).sort(function(e,r){return e.text.localeCompare(r.text)});t=t.concat(n);e.resolve(t)},function(r){t.error(r.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");e.reject(r.message)});return e.promise()};this.getUserProfilePropertyValueLists=function(){var e=new jQuery.Deferred;var r;var a={};var n=["NUMBER_FORMAT","TIME_ZONE","TIME_FORMAT","DATE_FORMAT","CALENDAR_WEEK_NUMBERING"];var s=this._createWrapper("/sap/opu/odata/UI2/INTEROP/");s.openBatchQueue();var i;for(var u=0;u<n.length;u++){i=n[u];r=encodeURI("UserProfilePropertyValues?$filter=id eq '"+i+"'&$select=description,value");s.read(r,function(e){a[this]=e.results}.bind(i),function(e){t.error(e.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter")})}s.submitBatchQueue(function(){e.resolve(a)},function(r){t.error(r.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");e.reject(r.message)});return e.promise()};this._createWrapper=function(r){return e.createODataWrapper(r,false,function(e){})};this.updateUserPreferences=function(e){t.debug("[000] updateUserPreferences","UserInfoAdapter");var r=this,a,n,u,p,o,l=function(){p-=1;if(p===0){a.resolve()}},d=function(e,r){a.reject(e,r)};t.debug("[000] updateUserPreferences: _createWrapper","UserInfoAdapter");s=this._createWrapper("/sap/opu/odata/UI2/INTEROP/");a=new jQuery.Deferred;t.debug("[000] updateUserPreferences: oDataWrapper.openBatchQueue","UserInfoAdapter");s.openBatchQueue();u=e.getChangedProperties()||[];t.debug("[000] updateUserPreferences: getChangedProperties","UserInfoAdapter");p=u.length;u.forEach(function(e){var a=e.name,u=e.newValue;if(a.toUpperCase()==="LANGUAGE"){a="PREFERRED_LOGON_LANGUAGE";u=u===i?undefined:u}n="UserProfileProperties("+["id='"+a+"'","shellType='FLP')"].join(",");o={id:a,shellType:"FLP",value:u};r._updateODataObjectBasedOnDatatype(u,o);t.debug("[000] updateUserPreferences: oDataWrapper: put","UserInfoAdapter");s.put(n,o,l,d)});t.debug("[000] updateUserPreferences: submitBatchQueue","UserInfoAdapter");s.submitBatchQueue(function(){if(p===0){a.resolve()}},d);return a.promise()}}});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/library", ["sap/ui/core/library","sap/m/library"],function(a,p){"use strict";var i=sap.ui.getCore().initLibrary({name:"sap.ushell_abap",version:"1.120.20",dependencies:["sap.ui.core","sap.m"],noLibraryCSS:true,extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell_abap/support/plugins/app-infra/AppInfraOnSapNetWeaverSupportPlugin"]}}});return i});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/AllCatalogs", ["sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(t,l){"use strict";var a=function(a,i){var s=[],e=true,n=this;function o(){if(e){throw new t(n+": collection is just a stub","AllCatalogs")}}this.getCatalogs=function(){o();return s.slice()};this.isStub=function(){return e};this.load=function(o,u,r,g,f,c){if(!e){throw new t(n+": collection is not a stub anymore","AllCatalogs")}function h(){var t,l,a;if(!g){for(t=0,l=s.length;t<l;t+=1){a=s[t];if(a.isStub()){a.load(h,u);return}}}o()}function d(t){var i,o;l.debug("Loaded: "+n,null,"AllCatalogs");e=false;s=[];for(i=0,o=t.results.length;i<o;i+=1){s.push(a.createCatalog(t.results[i]))}l.debug("Initialized: "+n,null,"AllCatalogs");h()}a.getPageBuildingService().readAllCatalogs(i,d,u,r,f,!!c)};this.toString=function(t){var l=['AllCatalogs({sPageId:"',i,'",bIsStub:',e];if(t){l.push(",aCatalogs:",JSON.stringify(s))}l.push("})");return l.join("")};if(!i){throw new t("Missing page ID","AllCatalogs")}l.debug("Created: "+this,null,"AllCatalogs")};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Catalog", ["sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/Utils","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Core"],function(e,t,i,jQuery,n){"use strict";var a=function(a,r){var o,s,l=[],u,d=true,g,f,c,h=[],p=this;function C(){if(d){throw new e(p+": page is just a stub","Page")}}function S(){if(!o){throw new e(p+": catalog is just an ID","Catalog")}}this.exit=function(){var e=p.toString();if(s){s.exit()}o=undefined;r=undefined;l=[];d=true;u=undefined;c=undefined;h=[];Object.keys(p).forEach(function(e){if(!/getCatalogData|getId|isStub|toString/.test(e)){delete p[e]}});a.forgetCatalog(p);i.debug("Exited: "+e,null,"Catalog")};this.getRemoteBaseUrl=function(){return p.addSystemToServiceUrl(o.type==="H"?"/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata/":o.baseUrl)};this.getRemoteCatalogService=function(){return a.getRemoteCatalogService(o)||{readChips:function(e,n,a,r,s){i.error("Catalog '"+o.id+"', type '"+o.type+"' not supported",null,"Catalog");t.callHandler(r.bind(null,{results:[]}),undefined,true)}}};function v(){var e,t,n;i.debug("Loaded: "+p,null,"Catalog");if(o.Chips){n=o.Chips.results||o.Chips;delete o.Chips;l=[];for(e=0,t=n.length;e<t;e+=1){l[e]=a.createChip(n[e])}d=false;i.debug("Initialized: "+p,null,"Catalog")}delete o.CatalogPage}this.read=function(e,i,n){var r;function s(e){o=e;v();r.resolve()}function l(e){o.Chips=e;v();r.resolve()}function d(e){e.results.forEach(function(e){e.remoteCatalogId=f});l(e)}function c(){v();g=arguments;r.reject.apply(this,arguments)}function h(t){var i;if(t.remoteId){o=t;try{i=p.getRemoteBaseUrl()}catch(e){c(e.toString());return}p.getRemoteCatalogService().readChips(i,o.remoteId,undefined,d,c)}else if(o&&e){l(t.Chips)}else{s(t)}}if(!u||u.state()!=="pending"){r=new jQuery.Deferred;u=r.promise();if(!o||e&&!o.remoteId){a.getPageBuildingService().readCatalog(f,h,r.reject.bind(r))}else{h.bind(this)(o)}}n=n||a.getPageBuildingService().getDefaultErrorHandler();u.done(t.callHandler.bind(null,i,n));u.fail(n)};this.addSystemToServiceUrl=function(t,i){if(t.indexOf("/")!==0||t.indexOf("//")===0){throw new e("addSystemToServiceUrl: Invalid URL: "+t,"Catalog")}i=i||this.getSystemAlias();if(/^[^?]*(;o=([\/;?]|$))/.test(t)){t=t.replace(/;o=([\/;?]|$)/,(i?";o="+i:"")+"$1")}else if(!/^[^?]*;o=/.test(t)&&i){t=t.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+i+"$2")}n.getEventBus().publish("sap.ushell.Container","addRemoteSystemForServiceUrl",t);return t};this.clone=function(e,t,i,n){var r,s=function(e,t){return n(e,undefined,t)};if(o&&o.type==="REMOTE"){r=this.getCatalogData();delete r.id;r.domainId=e;if(t!==undefined){r.title=t}a.createNewCatalog(r,i,n)}else{a.getPageBuildingService().cloneCatalog(this.getId(),e,t,function(e){a.createCatalog(e.id,i,s)},s)}};this.getCatalogData=function(){var e;if(!o){return undefined}e=JSON.parse(JSON.stringify(o));delete e.__metadata;return e};this.getCatalogPage=function(){S();if(o.type!=="P"&&o.type!=="CATALOG_PAGE"){return undefined}if(!s){s=a.createPage(f)}return s};this.getChips=function(){if(d){throw new e(p+": catalog is just a stub","Catalog")}return l.slice()};this.getDomainId=function(){return o&&o.domainId};this.getId=function(){return f};this.getSystemAlias=function(){return o&&o.systemAlias||undefined};this.getTitle=function(){S();return o.title};this.getType=function(){S();return o&&o.type};this.isOutdated=function(){S();return s&&!s.isStub()&&s.isOutdated()||o.outdated==="X"};this.isReadOnly=function(){C();return o.isReadOnly==="X"};this.isStub=function(){return d};this.getCachedRemoteFailureArguments=function(){return g};this.load=function(t,i){if(!d){throw new e("Catalog is not a stub anymore","Catalog")}this.read(false,t,i)};this.readChips=function(e,i,n){function r(e){e.results.forEach(function(e){a.createChip(e)});t.callHandler(i,n)}function s(e){e.results.forEach(function(e){e.remoteCatalogId=f});r(e)}function l(t){o=t;if(o.remoteId){this.getRemoteCatalogService().readChips(this.getRemoteBaseUrl(),o.remoteId,e,s,n)}else{a.getPageBuildingService().readCatalogChips(f,e,r,n)}}if(!o){a.getPageBuildingService().readCatalog(f,l.bind(this),n,true)}else{l.bind(this)(o)}};this.readRegisteredChips=function(e,i){function n(){var e=new jQuery.Deferred,t=h;h=[];if(t.length){p.readChips(t,e.resolve.bind(e),e.reject.bind(e))}else{e.resolve()}return e.promise()}if(!c||c.state()!=="pending"){c=n()}i=i||a.getPageBuildingService().getDefaultErrorHandler();c.fail(i).done(t.callHandler.bind(null,e,i))};this.refresh=function(e,t){this.read(true,e,t)};this.registerChip=function(t){if(c&&c.state()==="pending"){throw new e("Invalid state: registerChip while readRegisteredChips pending","Catalog")}h.push(t.getId())};this.remove=function(t,n){S();if(u&&u.state()==="pending"){throw new e("Catalog is being refreshed: "+this,"Catalog")}i.debug("Removing: "+this,null,"Catalog");a.getPageBuildingService().deleteCatalog(o,function(){this.exit();t()}.bind(this),n)};this.toString=function(e){var t=['Catalog({sId:"',f,'"',",bIsStub:",d];if(e){t.push(",oAlterEgo:",JSON.stringify(o),",oFactory:",a.toString(e),",aChips:",JSON.stringify(l))}t.push("})");return t.join("")};this.update=function(t,i,n){var r;S();if(Object.hasOwnProperty.call(t,"__metadata")){throw new e("Unsupported __metadata update","Catalog")}r=JSON.parse(JSON.stringify(o));Object.keys(t).forEach(function(e){r[e]=t[e]});d=true;g=undefined;a.getPageBuildingService().updateCatalog(r,function(){o=r;this.read(true,i,n)}.bind(this),function(){d=false;n=n||a.getPageBuildingService().getDefaultErrorHandler();n.apply(null,arguments)})};if(typeof r==="object"){f=r.id;if(r.remoteId){delete r.Chips}o=r;v()}else if(typeof r==="string"){f=r}if(!f){throw new e("Missing ID","Catalog")}i.debug("Created: "+this,null,"Catalog")};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/Factory", ["sap/ushell_abap/pbServices/ui2/Chip","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/Catalog","sap/ushell_abap/pbServices/ui2/ChipDefinition","sap/ushell_abap/pbServices/ui2/PageBuildingService","sap/ushell_abap/pbServices/ui2/ChipInstance","sap/ushell_abap/pbServices/ui2/Page","sap/ushell_abap/pbServices/ui2/PageSet","sap/ushell_abap/pbServices/ui2/Utils","sap/base/Log","sap/base/util/LoaderExtensions"],function(e,a,t,i,n,r,l,s,o,c,u){"use strict";var p=function(n){var p={},h={},g={},d,f=this;this.addRemoteCatalogService=function(e,t){if(!e){throw new a("Invalid base URL","sap.ushell_abap.pbServices.ui2.Factory")}if(typeof t.readChips!=="function"){throw new a("Invalid remote catalog service","sap.ushell_abap.pbServices.ui2.Factory")}e=e.replace(/\/$/,"");if(d.containsKey(e)){throw new a("Base URL '"+e+"' already registered","sap.ushell_abap.pbServices.ui2.Factory")}d.put(e,t)};this.createCatalog=function(e,a,i){var n=this,r,l=typeof e==="object"?e.id:e;function s(){var e;i=i||n.getPageBuildingService().getDefaultErrorHandler();if(i){e=Array.prototype.slice.call(arguments);e.splice(1,0,r);i.apply(null,e)}}function c(){s.apply(null,r.getCachedRemoteFailureArguments())}if(Object.prototype.hasOwnProperty.call(h,l)){r=h[l].catalog;if(typeof e==="object"&&r.getCatalogData()===undefined){t.call(r,this,e)}}else{r=new t(this,e);h[l]={catalog:r,chips:{}}}if(a){if(r.isStub()){r.load(a.bind(null,r),s)}else if(r.getCachedRemoteFailureArguments()!==undefined){o.callHandler(c,c,true)}else{o.callHandler(a.bind(null,r),s,true)}}return r};this.createChip=function(a,t,i){var n=a.remoteCatalogId,r=a.id,l,s;if(n){this.createCatalog(n);l=h[n].chips}else{l=p}if(Object.prototype.hasOwnProperty.call(l,r)){s=l[r];s.update(a)}else{s=new e(a,this);l[r]=s}if(t){if(s.isStub()){s.load(t.bind(null,s),i)}else{i=i||this.getPageBuildingService().getDefaultErrorHandler();o.callHandler(t.bind(null,s),i,true)}}return s};this.createChipDefinition=function(e,t,n){var r,l;function s(e,a,t,n){o.callHandler(a.bind(null,new i(e)),t,n)}function c(a){var t,n;var r=new i(a);g[e]=r;for(t=0,n=l.length;t<n;t+=2){s(r,l[t],l[t+1],false)}}function p(a){var t,i,n;if(typeof a==="string"){n=a}else{n=a.message}g[e]=n;for(t=0,i=l.length;t<i;t+=2){l[t+1](n)}}if(!e){throw new a("Missing URL","Factory")}if(typeof t!=="function"){throw new a("Missing success handler","Factory")}n=n||this.getPageBuildingService().getDefaultErrorHandler();e=o.addCacheBusterTokenUsingUshellConfig(e);if(Object.prototype.hasOwnProperty.call(g,e)){r=l=g[e];if(o.isArray(l)){l.push(t,n)}else if(r instanceof i){s(r,t,n,true)}else{o.callHandler(n.bind(null,r),null,true)}return}l=[t,n];g[e]=l;u.loadResource({dataType:"xml",url:e,async:true}).then(c).catch(p)};this.createChipInstance=function(e,a,t,i){var n,l;e.Chip=e.Chip||{$proxy:true};e.Chip.id=e.Chip.id||e.chipId;e.Chip.remoteCatalogId=e.Chip.remoteCatalogId||e.remoteCatalogId;if(e.RemoteCatalog&&e.RemoteCatalog.id){this.createCatalog(e.RemoteCatalog)}n=this.createChip(e.Chip);l=new r(this,e,n,i);if(a){l.load(a.bind(null,l),t)}return l};this.createNewCatalog=function(e,a,t){this.getPageBuildingService().createCatalog(e,function(e){var i=f.createCatalog(e);i.load(a.bind(null,i),function(e,a){t(e,i,a)})},function(e,a){t(e,undefined,a)})};this.createNewPageBasedCatalog=function(e,a,t,i){this.getPageBuildingService().createPageBasedCatalog(e,a,function(e){f.createCatalog(e,t,i)},i)};this.createPage=function(e,a,t,i){var n;n=new l(this,e);if(a){n.load(a.bind(null,n),t,i)}return n};this.createPageSet=function(e,a,t){var i;i=new s(this,e);if(a){i.load(a.bind(null,i),t)}return i};this.forgetCatalog=function(e){delete h[e.getId()]};this.getPageBuildingService=function(){return n};this.getRemoteCatalogService=function(e){var a=e.type==="H"?"/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata":e.baseUrl;return a?d.get(a.replace(/\/$/,"")):undefined};this.toString=function(e){var a=["Factory({oPbs:",n.toString(e)];if(e){a.push(",mChips:",JSON.stringify(p))}a.push("})");return a.join("")};d=new o.Map;if(!n){throw new a("Missing page building service","Factory")}c.debug("Created: "+this,null,"Factory")};p.createFactory=function(e,a,t,i){return new p(n.createPageBuildingService(e,a,t,i))};return p});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/ODataService", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error"],function(e,r){"use strict";var n=new e.Map;var t=function(e,t){var s;this.getCsrfToken=function(){if(n.get(s)&&n.get(s).token){return n.get(s).token}return""};this.getDefaultErrorHandler=function(){return t};this.openBatchQueue=function(){e.openBatchQueue()};this.refreshCsrfToken=function(i,o){var a;if(typeof i!=="function"){throw new r("Success callback is not a function","ODataService")}o=o||t;a=n.get(s);if(!a.fetchingInProgress){a.token=undefined;a.fetchingInProgress=true;e.read("",function(){if(!n.get(s)||!n.get(s).token){o("No CSRF token delivered");a.errorHandlers.forEach(function(e){e("No CSRF token delivered")})}else{i();a.successHandlers.forEach(function(e){e()})}a.successHandlers=[];a.errorHandlers=[];a.fetchingInProgress=false},function(){a.fetchingInProgress=false;o.apply(null,arguments)})}else{a.successHandlers.push(i);a.errorHandlers.push(o)}};this.setCsrfToken=function(e){var t;if(e&&typeof e!=="string"){throw new r("Invalid CSRF token: "+e,"ODataService")}t=n.get(s);t.token=e};this.setDefaultErrorHandler=function(e){if(e&&typeof e!=="function"){throw new r("Error callback is not a function","ODataService")}t=e||function(){}};this.submitBatchQueue=function(){e.submitBatchQueue.apply(e,arguments)};this.toString=function(r){var n=["ODataService({"];if(r){n.push('csrfToken:"',this.getCsrfToken(),'"');n.push(",oODataWrapper:",e.toString(true))}n.push("})");return n.join("")};if(!e){throw new r("Missing OData wrapper","ODataService")}s=e.getBaseUrl();if(!n.get(s)){n.put(s,{fetchingInProgress:false,successHandlers:[],errorHandlers:[]})}this.setDefaultErrorHandler(t)};t.resetSharedCsrfTokens=function(){n=new e.Map};return t});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/ODataWrapper", ["sap/ui/thirdparty/datajs","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Core"],function(e,t,a,r,n,jQuery,s){"use strict";function i(){}function o(e,a){if(t.isArray(e)){e.forEach(function(e){e.reject(a)})}else{e.reject(a)}}var u;u=function(e,a){var c="saplb",p,l,d,h=this,g,b;function O(e){var t={};t.baseUrl=e[0];if(typeof e[2]==="boolean"){t.supportsChangeSets=e[2]}return t}this.getBatchQueue=function(){return p};u.headerValue=function(e,t){e=e.toLowerCase();for(var a in t){if(Object.prototype.hasOwnProperty.call(t,a)&&a.toLowerCase()===e){return t[a]}}return undefined};function S(t){var a=e["sap-language"]||u["sap-language"],r=e["sap-statistics"]||u["sap-statistics"],n=e["sap-client"]||u["sap-client"];t=t||{};if(a){t["sap-language"]=a}if(r||r==="false"){t["sap-statistics"]=""+r}if(n){t["sap-client"]=n}return t}function y(e){e=e||{};var t=u.oStickySessionConfiguration[g];if(typeof t==="undefined"){return e}if(t&&t.enabled&&typeof t.value!=="undefined"){e[c]=t.value}return e}this.detectStickySession=function(e){var t,a=u.oStickySessionConfiguration[g];if(!a||!a.enabled){return}t=u.headerValue(c,e);if(typeof t==="undefined"){return}if(a.value!==t){a.value=t}};u.csrfTokenValue=function(e){var t=u.headerValue("x-csrf-token",e);if(t==="Required"){return t}var a=u.headerValue("cache-control",e);if(a===undefined||a.indexOf("max-age=0")>-1||a.indexOf("no-cache")>-1){return t||""}return""};this.doRequest=function(e,r,o,c,f,p,l){n.debug("[000] do request, sMethod",r,"ODataWrapper");var d;c=c||i;f=f||a.getDefaultErrorHandler();h.check(c,f);d={Accept:"application/json","Accept-Language":s.getConfiguration().getLanguage()||"","X-CSRF-Token":a.getCsrfToken()};S(d);y(d);OData.request({requestUri:e,method:r,data:o,headers:d},function(a,s){this.detectStickySession((s||{}).headers);n.debug("Received OData response for "+r+' "'+e+'"',null,"ODataWrapper");t.callHandler(c.bind(null,a),f)}.bind(this),function(t){function s(){f.apply(null,arguments)}function i(){c.apply(null,arguments)}if(!l&&t.response.statusCode===403&&u.csrfTokenValue(t.response.headers).toLowerCase()==="required"){n.debug("CSRF token required for "+r+' "'+e+'", refreshing it',JSON.stringify(t.response),"ODataWrapper");a.refreshCsrfToken(this.doRequest.bind(h,e,r,o,i,s,p,true),s)}else{h.onError(r,e,f,null,t)}}.bind(this),p);n.debug("Sent OData request for "+r+' "'+e+'"',null,"ODataWrapper")};this.toRelativeUrl=function(e){var t=e.indexOf(g);if(t<0){throw new r('Not relative to base URL "'+g+'": '+e,"ODataWrapper")}return e.slice(t+g.length)};this.toRequestUrl=function(e){if(/^\//.test(e)){throw new r("Not a relative URL: "+e,"ODataWrapper")}return g+e};this.readOrBatch=function(e,t,a){var r,i=this.toRequestUrl(e),o=y(S());if(p){n.debug('Queued OData request for GET "'+e+'"',null,"ODataWrapper");p.push({method:"GET",requestUri:e,headers:o});r=(new jQuery.Deferred).done(t).fail(a);d.push(r);l=false;return}o.Accept="application/json";o["Accept-Language"]=s.getConfiguration().getLanguage()||"";o["X-CSRF-Token"]="Fetch";OData.read({requestUri:i,headers:o},t,a);n.debug('Sent OData request for GET "'+i+'"',null,"ODataWrapper")};this.requestOrBatch=function(e,r,s,o,u){var c,f={data:s,method:r,requestUri:e,headers:y(S())},g=this.toRequestUrl(e);if(p){o=o||i;u=u||a.getDefaultErrorHandler();h.check(o,u);n.debug("Queued OData request for "+r+' "'+e+'"',null,"ODataWrapper");if(!l){p.push({__changeRequests:[]});d.push([]);l=b}p[p.length-1].__changeRequests.push(f);c=(new jQuery.Deferred).done(function(e,a){n.debug("Received OData response for "+r+' "'+g+'"',null,"ODataWrapper");t.callHandler(o.bind(null,e),u)}).fail(h.onError.bind(h,r,g,u,null));d[d.length-1].push(c);return}this.doRequest(g,r,s,o,u)};this.isStickySessionEnabled=function(){return(u.oStickySessionConfiguration[g]||{}).enabled||false};this.enableStickySession=function(){u.oStickySessionConfiguration[g].enabled=true};this.check=function(e,t){if(!e){throw new r("Missing success callback","ODataWrapper")}if(typeof e!=="function"){throw new r("Success callback is not a function","ODataWrapper")}if(!t){throw new r("Missing error callback","ODataWrapper")}if(typeof t!=="function"){throw new r("Error callback is not a function","ODataWrapper")}};this.create=function(e,t,a,r){n.debug("[000] create: url",e,"ODataWrapper");this.requestOrBatch(e,"POST",t,a,r)};this.del=function(e,t,a){var r=e;if(typeof r!=="string"){r=this.toRelativeUrl(e.__metadata.uri)}this.requestOrBatch(r,"DELETE",null,function(e){if(t){t()}},a)};this.getBaseUrl=function(){return g};this.getODataService=function(){return a};this.onError=function(e,t,a,r,s){var i,o="Error ";if(s.response&&s.response.statusCode){o+="("+s.response.statusCode+", "+s.response.statusText+") "}o+="in OData response for "+e+' "'+t+'": '+s.message;if(s.response&&s.response.body){try{i=JSON.parse(s.response.body).error;if(i){if(i.hasOwnProperty("message")&&i.message.hasOwnProperty("value")){o+="\nDetails: "+i.message.value}if(s.response.statusCode&&!i.httpStatus){i.httpStatus=s.response.statusCode}}}catch(e){}}n.error(o,JSON.stringify(s.response),"ODataWrapper");if(r){r.reject(o,i)}a(o,i)};this.openBatchQueue=function(){if(p){throw new r("Batch queue already open","ODataWrapper")}p=[];d=[];l=false};this.isBatchQueueOpen=function(){return!!p};this.read=function(e,r,s,i){var o,c=this.toRequestUrl(e),f;function p(e,i){this.detectStickySession(i.headers);a.setCsrfToken(u.csrfTokenValue(i.headers)||a.getCsrfToken());n.debug('Received OData response for GET "'+c+'"',null,"ODataWrapper");f=u.headerValue("sap-message",i.headers);if(f){n.warning("SAP message for GET "+c,f,"ODataWrapper")}if(o){o.resolve(JSON.parse(JSON.stringify(e)),a.getCsrfToken())}t.callHandler(r.bind(null,e),s)}s=s||a.getDefaultErrorHandler();this.check(r,s);if(i){OData.read.$cache=OData.read.$cache||new t.Map;o=OData.read.$cache.get(c);if(o){n.debug('Using cached response for GET "'+c+'"',null,"ODataWrapper");o.done(function(e,n){a.setCsrfToken(a.getCsrfToken()||n);t.callHandler(r.bind(null,JSON.parse(JSON.stringify(e))),s)}).fail(s);return}o=new jQuery.Deferred;OData.read.$cache.put(c,o.promise())}this.readOrBatch(e,p.bind(this),this.onError.bind(this,"GET",c,s,o))};this.batch=function(e,t,a){var r=this.toRequestUrl("$batch");this.doRequest(r,"POST",e,t,a,OData.batchHandler)};this.submitBatchQueue=function(e,s){var i=d;function u(r){var n=r.__batchResponses.length,u=i.length;if(u!==n){h.onError("POST",this.toRequestUrl("$batch"),s,null,{message:"Protocol error! Expected "+u+" responses, but received "+n});return}r.__batchResponses.forEach(function(e,t){var a=i[t];if(e.response){o(a,e)}else if(e.__changeResponses){e.__changeResponses.forEach(function(e,t){a[t].resolve(e.data,e)})}else{a.resolve(e.data,e)}});if(e){t.callHandler(e,a.getDefaultErrorHandler())}}if(!p){throw new r("No open batch queue to submit","ODataWrapper")}if(p.length>0){n.debug("[000] submit batch queue: batch","ODataWrpper");this.batch({__batchRequests:p},u.bind(this),s)}else if(e){t.callHandler(e,a.getDefaultErrorHandler(),true)}n.debug("[000] submit batch queue","ODataWrapper");p=undefined;d=undefined};this.toString=function(e){var t=['ODataWrapper({sBaseUrl:"',g,'"'];t.push("})");return t.join("")};this.put=function(e,t,a,r){n.debug("[000] put: request or batch, payload.id",t.id,"ODataWrapper");this.requestOrBatch(e,"PUT",t,function(e){if(a){a()}},r)};this.update=function(e,t,a){var r={__metadata:{type:e.__metadata&&e.__metadata.type}},n,s=this.toRelativeUrl(e.__metadata.uri);for(n in e){if(Object.prototype.hasOwnProperty.call(e,n)&&n.indexOf("$")!==0&&typeof e[n]!=="object"){r[n]=e[n]}}this.put(s,r,t,a)};if(typeof e==="string"){e=O(arguments)}else if(typeof e==="object"){e=f(e)}if(!e||!e.baseUrl||typeof e.baseUrl!=="string"){throw new r("Missing base URL","ODataWrapper")}if(!a||typeof a!=="object"){throw new r("Missing OData service facade","ODataWrapper")}e.baseUrl=e.baseUrl.replace(/\/$/,"")+"/";g=e.baseUrl;b=e.supportsChangeSets;if(typeof u.oStickySessionConfiguration==="undefined"){n.error("ODataWrapper.oStickySessionConfiguration is not defined!","the ODataWrapper constructor was called before the static property was defined","ODataWrapper")}else if(typeof u.oStickySessionConfiguration[g]==="undefined"){u.oStickySessionConfiguration[g]={enabled:false,value:undefined}}};function c(e){var t={};var a={};t.baseUrl=e[0];if(typeof e[1]==="boolean"){t.supportsChangeSets=e[1]}if(typeof e[2]==="function"){a.defaultFailure=e[2]}a.settings=t;return a}function f(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}if(typeof u.oStickySessionConfiguration==="undefined"){u.oStickySessionConfiguration={}}u.checkSapStatisticsSetting=function(e){try{u["sap-statistics"]=s.getConfiguration().getStatisticsEnabled()}catch(t){u["sap-statistics"]=/sap-statistics=(true|x|X)/.test(e)}};u.checkSapStatisticsSetting(window.location.search);u._Service=function e(t,r){var n=new u(t,this);a.call(this,n,r);return n};u.createODataWrapper=function(e,t){n.debug("[000] createOdataWrapper","ODataWrapper");if(typeof arguments[0]==="string"){var a=c(arguments);e=a.settings;if(a.defaultFailure){t=a.defaultFailure}}else if(typeof arguments[0]==="object"){e=f(e)}return new u._Service(e,t)};return u});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/PageBuildingService", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/ODataService","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Error"],function(e,n,t,i){"use strict";var a=function(t,r,s,o){var c,g=this;function d(e){return e.replace(/'/g,"''").replace(/&/g,"%26")}function p(e,n,t){var i;if(typeof e==="string"){i=e}else{if(e.instanceId){return"ChipInstanceBags(pageId='"+encodeURIComponent(e.pageId)+"',instanceId='"+encodeURIComponent(e.instanceId)+"',id='"+encodeURIComponent(n)+"')"+(t?"?$expand=ChipInstanceProperties":"")}i=e.id}return"Bags(pageId='"+encodeURIComponent(i)+"',id='"+encodeURIComponent(n)+"')"+(t?"?$expand=Properties":"")}a.extractBatchResponseEntry=function(e){if(e.statusCode==="201"){return e.data}if(e.statusCode==="204"){return undefined}return e.message||""};this.batch=function(n,t,i,r){var s=[];function o(e){var n,t=[];for(n=0;n<e.length;n+=1){t[n]=a.extractBatchResponseEntry(e[n])}return t}i=i||function(){};r=r||g.getDefaultErrorHandler();c.check(i,r);n=n||[];t=t||[];if(n.length>0){s.push({__changeRequests:n})}s=s.concat(t);if(s.length===0){e.callHandler(i.bind(null,[],[]),r,true);return}c.batch({__batchRequests:s},function(t){var a=t.__batchResponses,g=a[0].__changeResponses;if(a[0].response&&a[0].message){c.onError("POST",c.getBaseUrl()+"$batch",r,undefined,t.__batchResponses[0]);return}if(g&&g.length!==n.length||a.length!==s.length){r("Number of requests differs from number of responses in $batch");return}if(g){e.callHandler(i.bind(null,o(g),o(a.slice(1))),r,false)}else{e.callHandler(i.bind(null,[],o(a)),r,false)}},r)};this.isPersonalization=function(){return!!s};this.readMetadata=function(n,t,i){var a=c.getBaseUrl()+"$metadata"+(i?"?"+Date.now():"");t=t||this.getDefaultErrorHandler();c.check(n,t);OData.read(a,function(i){e.callHandler(n.bind(null,i),t)},c.onError.bind(c,"GET",a,t,undefined),OData.metadataHandler)};this.deleteBag=function(e,n,t,a){if(!e){throw new i("Missing parent ID or object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}c.del(p(e,n,false),t,a)};this.readBag=function(e,n,t,a){if(!e){throw new i("Missing parent ID or object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}c.read(p(e,n,true),t,a)};this.readAllCatalogs=function(e,n,t,i,a,r){var s="id";r=r===undefined?true:r;if(a&&typeof a==="string"){s=a}var o="Pages('"+encodeURIComponent(e)+"')/allCatalogs?$expand=Chips/ChipBags/ChipProperties&"+"$orderby="+s;if(i&&typeof i==="string"){o=o+"&$filter="+encodeURIComponent(i)}if(this.readAllCatalogs.cacheBusterTokens&&this.readAllCatalogs.cacheBusterTokens.get(e)){o+="&sap-cache-id="+this.readAllCatalogs.cacheBusterTokens.get(e)}c.read(o,n,t,r)};this.readCatalogs=function(e,n,t){var i="Catalogs?$orderby=id";if(t&&typeof t==="string"){i=i+"&$filter="+encodeURIComponent(t)}c.read(i,e,n)};this.readAllCatalogsForUser=function(e,n,t){var i=e?"?$filter="+encodeURIComponent(e):"";c.read("Pages('unused')/allCatalogs"+i,n,t)};this.getReferencingCatalogIds=function(e,n,t){if(typeof n!=="function"){n=t;t=arguments[3]}function a(t){var i=[],a=t.results||[];a.forEach(function(n){if(n.referenceChipId===e){if(i.indexOf(n.catalogId)===-1){i.push(n.catalogId)}}});n(i)}if(typeof e!=="string"){throw new i("sReferencedChipId must be a string","PageBuildingService")}if(typeof n!=="function"){throw new i("fnSuccess is mandatory","PageBuildingService")}c.read("Chips?$filter="+encodeURIComponent("referenceChipId eq '"+d(e)+"'"),a,function(e){new i(e,"PageBuildingService");t.apply(null,arguments)})};this.createPageBasedCatalog=function(e,n,t,a){if(!e){throw new i("Missing domain ID","PageBuildingService")}c.create("Catalogs",{domainId:e,title:n,type:"CATALOG_PAGE"},t,a)};this.createCatalog=function(e,n,t){c.create("Catalogs",e,n,t)};this.deleteCatalog=function(e,n,t){c.del(e,n,t)};this.cloneCatalog=function(e,n,t,a,r){if(!e){throw new i("Missing source catalog ID","PageBuildingService")}if(!n){throw new i("Missing new domain ID","PageBuildingService")}if(n.indexOf(":")>=0){throw new i("Illegal domain ID: "+n,"PageBuildingService")}c.create("CloneCatalog?sourceId='"+encodeURIComponent(e)+"'&targetId='"+encodeURIComponent(n)+(t!==undefined?"'&title='"+encodeURIComponent(t)+"'":"'"),{},a,r)};this.clonePageChipInstance=function(e,n,t,a,r){if(!e){throw new i("Missing source page ID","PageBuildingService")}if(!n){throw new i("Missing source CHIP instance ID","PageBuildingService")}if(!t){throw new i("Missing target page ID","PageBuildingService")}c.create("ClonePageChipInstance?sourcePageId='"+encodeURIComponent(e)+"'&sourceChipInstanceId='"+encodeURIComponent(n)+"'&targetPageId='"+encodeURIComponent(t)+"'",{},function(e){c.read("PageChipInstances(pageId='"+encodeURIComponent(e.pageId)+"',instanceId='"+encodeURIComponent(e.instanceId)+"')"+"?$expand=ChipInstanceBags/ChipInstanceProperties",a,r)},r)};this.readCatalog=function(e,n,t,a,r){var s;if(!e){throw new i("Missing catalog ID","PageBuildingService")}s="Catalogs('"+encodeURIComponent(e)+"')";if(!a){s+="?$expand=Chips";if(!r){s+="/ChipBags/ChipProperties"}}c.read(s,n,t)};this.updateCatalog=function(e,n,t){c.update(e,n,t)};this.readCatalogChips=function(e,n,t,a){var r,s="",o="?$filter=";if(!e){throw new i("Missing catalog ID","PageBuildingService")}r="Catalogs('"+encodeURIComponent(e)+"')/Chips";if(n){if(!n.length){throw new i("No CHIP IDs given","PageBuildingService")}n.forEach(function(e){s=s+o+"id%20eq%20'"+encodeURIComponent(e)+"'";o="%20or%20"});if(c.getBaseUrl().length+r.length+s.length>2e3){s=""}}c.read(r+s,t,a)};this.createPage=function(e,n,t,a,r,s){if(!e){throw new i("Missing page ID","PageBuildingService")}c.create("Pages",{id:e,catalogId:n,layout:t,title:a},r,s)};this.readPages=function(e,n,t){var i="Pages?";if(!t){i+="$expand=Catalog&"}c.read(i+"$orderby=id",e,n)};this.readPage=function(e,n,t,a){var r="Pages('"+encodeURIComponent(e)+"')";if(!e){throw new i("Missing page ID","PageBuildingService")}if(a===undefined){r+="?$expand=Bags/Properties,PageChipInstances/Chip/ChipBags/ChipProperties,"+"PageChipInstances/RemoteCatalog,"+"PageChipInstances/ChipInstanceBags/ChipInstanceProperties"}else if(a!==""){r+="?$expand="+a}c.read(r,n,t)};this.readPageSet=function(e,n,t,a){var r;var s=this;var o;a=a===undefined?true:a;if(!e){throw new i("Missing page set ID","PageBuildingService")}r="PageSets('"+encodeURIComponent(e)+"')?$expand="+"Pages/PageChipInstances/Chip/ChipBags/ChipProperties,"+"Pages/PageChipInstances/RemoteCatalog,"+"Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties,"+"AssignedPages,"+"DefaultPage";if(this.readPageSet.cacheBusterTokens&&this.readPageSet.cacheBusterTokens.get(e)){r+="&sap-cache-id="+this.readPageSet.cacheBusterTokens.get(e)}if(this.readPageSet.appendedParameters){o=Object.keys(this.readPageSet.appendedParameters);if(o.length>0){o.sort();o.forEach(function(e){r+="&"+encodeURIComponent(e)+"="+encodeURIComponent(s.readPageSet.appendedParameters[e])})}}c.read(r,n,t,a)};this.updatePageSet=function(e,n,t){c.update(e,n,t)};this.createPageInPageSet=function(e,n,t,a,r){if(!e){throw new i("Missing page set ID","PageBuildingService")}c.create("PageSets('"+encodeURIComponent(e)+"')/Pages",{catalogId:t||"",layout:"",title:n||""},a,r)};this.updatePage=function(e,n,t){c.update(e,n,t)};this.deletePage=function(e,n,t){if(!e){throw new i("Missing page ID","PageBuildingService")}c.del("Pages('"+encodeURIComponent(e)+"')",n,t)};this.createPageChipInstance=function(e,n,t,i,a,r,s,o){this.createPageChipInstanceFromRawData({pageId:e,instanceId:n,chipId:t,title:i,configuration:a,layoutData:r},s,o)};this.createPageChipInstanceFromRawData=function(e,n,t){if(typeof e!=="object"){throw new i("Invalid raw data","PageBuildingService")}if(!e.pageId){throw new i("Missing page ID","PageBuildingService")}if(!e.chipId){throw new i("Missing CHIP ID","PageBuildingService")}e.instanceId=e.instanceId||"";e.title=e.title||"";e.configuration=e.configuration||"";e.layoutData=e.layoutData||"";c.create("PageChipInstances",e,n,t)};this.updatePageChipInstance=function(e,n,t){c.update(e,n,t)};this.deletePageChipInstance=function(e,n,t,a){if(!e){throw new i("Missing page ID","PageBuildingService")}if(!n){throw new i("Missing instance ID","PageBuildingService")}c.del("PageChipInstances(pageId='"+encodeURIComponent(e)+"',instanceId='"+encodeURIComponent(n)+"')",t,a)};this.updateBagProperties=function(e,n,t,a,r,s,o){var g=[],d=[],p,l,h,u,f="__metadata";function I(e){var n={__metadata:{type:e[f].type,uri:e[f].uri}},t;for(t in e){if(Object.prototype.hasOwnProperty.call(e,t)&&t!==f&&t.indexOf("$")!==0&&typeof e[t]!=="object"){n[t]=e[t]}}return n}if(!e){throw new i("Missing parent object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}if(typeof r==="function"){this.updateBagProperties(e,n,t,a,[],r,s);return}t=t||[];a=a||[];r=r||[];if(t.length===0&&a.length===0&&r.length===0){throw new i("No properties to update, create or reset","PageBuildingService")}for(p=0;p<t.length;p+=1){h=t[p];u=h[f].uri;l=u.indexOf(c.getBaseUrl());if(l>=0){u=u.slice(l+c.getBaseUrl().length)}g.push({requestUri:u,method:"PUT",data:I(h)})}u=e.instanceId?"ChipInstanceProperties":"Properties";for(p=0;p<a.length;p+=1){h=a[p];if(!h.name){throw new i("Missing property name","PageBuildingService")}if(e.instanceId){h.instanceId=e.instanceId;h.pageId=e.pageId}else{h.pageId=e.id}h.bagId=n;g.push({requestUri:u,method:"POST",data:h})}for(p=0;p<r.length;p+=1){h=r[p];u=h[f].uri;l=u.indexOf(c.getBaseUrl());if(l>=0){u=u.slice(l+c.getBaseUrl().length)}g.push({requestUri:u,method:"DELETE"});d.push({requestUri:u,method:"GET"})}this.batch(g,d,function(e,n){var i=e.slice(a.length+t.length),r;for(r=0;r<i.length;r+=1){if(i[r]===undefined){if(typeof n[r]==="object"){i[r]=n[r]}}}if(s){s(e.slice(0,t.length),e.slice(t.length,a.length+t.length),i)}},o)};this.createProperty=function(e,n,t,a,r,s,o){var g;if(!e){throw new i("Missing parent ID or object","PageBuildingService")}if(!n){throw new i("Missing bag ID","PageBuildingService")}if(!t){throw new i("Missing property name","PageBuildingService")}if(typeof r==="function"){this.createProperty(e,n,t,a,undefined,r,s);return}g={bagId:n,name:t,pageId:e,translatable:r,value:a};if(typeof e!=="string"){if(e.instanceId){g.instanceId=e.instanceId;g.pageId=e.pageId}else{g.pageId=e.id}}c.create(g.instanceId?"ChipInstanceProperties":"Properties",g,s,o)};this.updateProperty=function(e,n,t){c.update(e,n,t)};this.deleteProperty=function(e,n,t){c.del(e,n,t)};this.readChip=function(e,n,t){if(!e){throw new i("Missing CHIP ID","PageBuildingService")}var a="Chips('"+encodeURIComponent(e)+"')?$expand=ChipBags/ChipProperties";if(o!==undefined){a=a+"&sap-cache-id="+o}c.read(a,n,t)};if(typeof t==="string"){c=a._createODataWrapper(t,this)}else{c=t}this.readAllCatalogs.cacheBusterTokens=new e.Map;this.readPageSet.cacheBusterTokens=new e.Map;if(!c.isStickySessionEnabled()&&!s){c.enableStickySession()}n.call(this,c,r)};a._createODataWrapper=function(e,n){return new t(e,n,true)};a.createPageBuildingService=function(e,n,t,i){return new a(e,n,t,i)};return a});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/PageSet", ["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Page","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(e,t,i,n){"use strict";var a={assigned:1,userCreated:2,personalized:3,defaultPage:4};var s=function(s,g){var u,r,o,f=[],l,d=true,c=this;function p(){if(d){throw new i(c+": page set is just a stub","sap.ushell_abap.pbServices.ui2.PageSet")}}this.getPageType=function(e){var t=e.getId(),n;p();if(!l.containsKey(t)){throw new i("Unknown page "+t,"sap.ushell_abap.pbServices.ui2.PageSet")}n=l.get(t);if(n===a.assigned&&e.isPersonalized()){n=a.personalized}return n};function h(i){var g=i.DefaultPage.id,u=i.AssignedPages&&i.AssignedPages.results||[];r=i;l=new e.Map;u.forEach(function(e){l.put(e.id,a.assigned)});r.Pages.results.forEach(function(e){var i=new t(s,e),n=i.getId();f.push(i);if(g===n){o=i;l.put(n,a.defaultPage)}else if(!l.containsKey(n)){l.put(n,a.userCreated)}});delete r.AssignedPages;delete r.DefaultPage;delete r.Pages;d=false;n.debug("Initialized: "+c,null,"PageSet")}this.appendPage=function(e,g,r,o){p();if(typeof r!=="function"){throw new i("Missing success handler","PageSet")}s.getPageBuildingService().createPageInPageSet(u,e,g,function(e){var i=new t(s,e);f.push(i);l.put(i.getId(),a.userCreated);n.debug("Appended new page with ID "+i.getId()+" to pageset "+c,null,"PageSet");r(i)},o)};this.isPageRemovable=function(e){return this.getPageType(e)===a.userCreated};this.isPageResettable=function(e){return this.getPageType(e)===a.personalized};this.removePage=function(e,t,n){if(!this.isPageRemovable(e)){throw new i("Cannot remove page "+e.getId(),"PageSet")}e.remove(function(){f.splice(f.indexOf(e),1);l.remove(e.getId());if(t){t()}},n)};this.resetPage=function(e,t,n){if(!this.isPageResettable(e)){throw new i("Cannot reset page "+e.getId(),"sap.ushell_abap.pbServices.ui2.PageSet")}e.remove(function(){e.load(t,n,true)},n)};this.filter=function(e,t){var i,n=[],a;p();e=e||[];t=t||[];for(i=0;i<f.length;i+=1){a=f[i];if(e.indexOf(a.getId())!==-1){n.push(a)}else if(a.getCatalog()&&t.indexOf(a.getCatalog().getId())!==-1){n.push(a)}}f=n};this.getConfiguration=function(){p();return r.configuration};this.setConfiguration=function(t,n,a){p();if(typeof n!=="function"){throw new i("Missing success handler","PageSet")}if(r.configuration===t){e.callHandler(n,a,true);return}r.configuration=t;s.getPageBuildingService().updatePageSet(r,function(e){n()},a)};this.getDefaultPage=function(){p();return o};this.getId=function(){return u};this.getPages=function(){p();return f.slice()};this.isStub=function(){return d};this.load=function(e,t){if(!d){throw new i("Page set is not a stub anymore","PageSet")}s.getPageBuildingService().readPageSet(u,function(t){n.debug("Loaded: "+c,null,"PageSet");h(t);e()},t,true)};this.toString=function(e){var t=['PageSet({sId:"',u,'",bIsStub:',d];if(e){t.push(",oAlterEgo:",JSON.stringify(r),",oFactory:",s.toString(e),",aPages:",JSON.stringify(f))}t.push("})");return t.join("")};u=g;if(!u){throw new i("Missing page set ID","PageSet")}n.debug("Created: "+this,null,"PageSet")};return s});
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell_abap/pbServices/ui2/RemoteCatalogService", ["sap/ushell_abap/pbServices/ui2/PageBuildingService"],function(e){"use strict";var i=function(){this.readChips=function(i,a,n,r,u){e.createPageBuildingService(i).readCatalogChips(a,n,r,u)}};return i});
sap.ui.require.preload({
	"sap/ushell/components/tiles/cdm/applauncher/StaticTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncher.StaticTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{/properties/contentProviderLabel}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        mode="{/properties/mode}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><dependents><TileContent id="standardTileContent" footer="{/properties/info}" /><TileContent id="imageTileContent" footer="{/properties/info}"><ImageContent src="{/properties/icon}" /></TileContent></dependents></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"XML"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{/properties/contentProviderLabel}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><TileContent\n            id="numericTileContent"\n            footer="{/properties/info}"\n            footerColor="{\n                path: \'/properties/infoState\',\n                formatter: \'._formatValueColor\'\n            }"\n            unit="{/properties/number_unit}"><NumericContent\n                icon="{/properties/icon}"\n                indicator="{/properties/number_state_arrow}"\n                scale="{/properties/number_factor}"\n                truncateValueTo="5"\n                value="{/properties/number_value}"\n                valueColor="{\n                    path: \'/properties/number_value_state\',\n                    formatter: \'._getValueColor\'\n                }"\n                withMargin="false"\n                width="100%" /></TileContent></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell","type":"library","embeds":["appRuntime/ui5/plugins/rtaAgent","appRuntime/ui5/plugins/rtaShell","components/appfinder","components/cepsearchresult/app","components/cepsearchresult/app/cards/searchresultwidget","components/contentFinder","components/homeApp/error","components/homepage","components/pages","components/runtimeSwitcher","components/shell/MenuBar","components/shell/NavigationBarMenu","components/shell/Search","components/shell/Settings/userDefaults","components/tiles/cdm/applauncher","components/tiles/cdm/applauncherdynamic","components/workPageBuilder","components/workPageRuntime","plugins/appwarmup","plugins/ghostapp","plugins/rta","plugins/rta-personalize","renderer/search/searchComponent"],"applicationVersion":{"version":"1.120.20"},"title":"SAP library: sap.ushell","description":"SAP library: sap.ushell","ach":"CA-FLP-FE-UI","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.120","libs":{"sap.f":{"minVersion":"1.120.21","lazy":true},"sap.m":{"minVersion":"1.120.21"},"sap.ui.core":{"minVersion":"1.120.21"},"sap.ui.layout":{"minVersion":"1.120.21","lazy":true},"sap.suite.ui.commons":{"minVersion":"1.120.10","lazy":true},"sap.suite.ui.microchart":{"minVersion":"1.120.21","lazy":true},"sap.ui.comp":{"minVersion":"1.120.21","lazy":true},"sap.ui.export":{"minVersion":"1.120.21","lazy":true},"sap.collaboration":{"minVersion":"1.120.0","lazy":true},"sap.ui.table":{"minVersion":"1.120.21","lazy":true},"sap.ui.integration":{"minVersion":"1.120.21","lazy":true},"sap.ui.generic.app":{"minVersion":"1.120.3","lazy":true},"sap.esh.search.ui":{"minVersion":"1.120.3","lazy":true}}},"library":{"i18n":false,"content":{"controls":["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.components.workPageBuilder.controls.WorkPage","sap.ushell.components.workPageBuilder.controls.WorkPageButton","sap.ushell.components.workPageBuilder.controls.WorkPageCell","sap.ushell.components.workPageBuilder.controls.WorkPageColumn","sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer","sap.ushell.components.workPageBuilder.controls.WorkPageRow","sap.ushell.services._VisualizationInstantiation.VizInstance","sap.ushell.services._VisualizationInstantiation.VizInstanceAbap","sap.ushell.services._VisualizationInstantiation.VizInstanceCdm","sap.ushell.services._VisualizationInstantiation.VizInstanceLaunchPage","sap.ushell.services._VisualizationInstantiation.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.SidePane","sap.ushell.ui.shell.SubHeader","sap.ushell.ui.shell.SysInfoBar","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],"elements":["sap.ushell.ui.launchpad.AccessibilityCustomData"],"types":["sap.ushell.AllMyAppsState","sap.ushell.AllMyAppsProviderType","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState","sap.ushell.AppType","sap.ushell.FloatingNumberType"],"interfaces":[]}}}}',
	"sap/ushell/ui/RendererRootView.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui.shell"\n    xmlns:m="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ui="sap.ushell.ui"\n><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></core:FragmentDefinition>\n',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui"\n    xmlns:core="sap.ui.core"\n    xmlns:shell="sap.ushell.ui.shell"><ShellHeader\n        id="shell-header"\n        showLogo="{/showLogo}"\n        visible="{/headerVisible}"\n        homeUri="{/homeUri}"\n        headItems="{ path: \'/headItems\', factory: \'.shellUpdateAggItem\' }"\n        headEndItems="{ path: \'/headEndItems\', factory: \'.shellUpdateAggItem\', filters: [{ path: \'\', test: \'.isHeadEndItemNotInOverflow\' }] }"\n        centralAreaElement="{/centralAreaElement}"\n        title="{/title}"><appTitle><shell:ShellAppTitle\n                id="shellAppTitle"\n                text="{/application/title}"\n                title="{/application/title}"\n                icon="{/application/icon}"\n                subTitle="{/title}"\n            /></appTitle></ShellHeader></core:FragmentDefinition>\n',
	"sap/ushell_abap/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell_abap","type":"library","embeds":[],"applicationVersion":{"version":"1.120.20"},"title":"SAP library: sap.ushell_abap","description":"SAP library: sap.ushell_abap","ach":"CA-FLP-FE-UI","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.120","libs":{"sap.ui.core":{"minVersion":"1.120.21"},"sap.m":{"minVersion":"1.120.21"},"sap.ushell":{"minVersion":"1.120.20"},"sap.ui.layout":{"minVersion":"1.120.21","lazy":true},"sap.ui.fl":{"minVersion":"1.120.21","lazy":true},"sap.f":{"minVersion":"1.120.21","lazy":true}}},"library":{"i18n":false,"css":false,"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ushell_abap/pbServices/ui2/ChipInstance.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
this.sap=this.sap||{};sap.ui.define(["sap/ushell_abap/pbServices/ui2/Bag","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log"],function(e,t,n,i){"use strict";var r=function(r,a,u,s){var c,o,f,l,g,h;var p=new t.Map;var d=false;var I=[];var C=this;var v=Object.assign({},a);function y(){a.referenceChipInstanceId="";a.referencePageId=""}function S(){y();if(s){s.updateScope()}}function P(){if(!c){throw new n(C+": CHIP instance is just a stub","ChipInstance")}}function b(e,n){if(!c){c=u.createApi(C,p)}i.debug("Initialized: "+C,null,"ChipInstance");t.callHandler(e,n)}function m(t){var n,i=u.getBagIds(),s;for(n=0;n<t.length;n+=1){o.put(t[n].id,new e(r,t[n],u.getBag(t[n].id),S))}for(n=0;n<i.length;n+=1){s={pageId:a.pageId,instanceId:a.instanceId,id:i[n],$tmp:true};if(!o.containsKey(s.id)){o.put(s.id,new e(r,s,u.getBag(s.id),S))}}}function w(){if(u.isStub()){throw new n(this+": initializeConfiguration expects that the CHIP is no stub anymore","ChipInstance",false)}if(!f){f={};u.updateConfiguration(f,a.configuration)}}this.persist=function(e,t){r.getPageBuildingService().updatePageChipInstance(a,function(){y();if(s){s.updateScope()}if(e){e()}},t)};this.attachFullscreen=function(e){if(typeof e!=="function"){throw new n(this+": fullscreen event handler is not a function","ChipInstance")}I.push(e)};this.attachRefresh=function(e){if(e&&typeof e!=="function"){throw new n(this+": refresh event handler is not a function","ChipInstance")}l=e};this.attachTitleChange=function(e){h=e};this.detachAll=function(){I=[];l=null};this.exit=function(){i.debug("Exit: "+C,null,"ChipInstance");c=null;o=new t.Map;f=null;g=null;h=null};this.getApi=function(){return c};this.getBagIds=function(){return o.keys()};this.getBag=function(t){var i;if(!t){throw new n("Missing bag ID","ChipInstance")}i=o.get(t);if(i){return i}i=new e(r,{pageId:a.pageId,instanceId:a.instanceId,id:t,$tmp:true},null,S);o.put(t,i);return i};this.getChip=function(){return u};this.getConfiguration=function(){return a.configuration};this.getConfigurationParameter=function(e){w();if(Object.prototype.hasOwnProperty.call(f,e)){return f[e]}return u.getConfigurationParameter(e)};this.getContract=function(e){P();return p.get(e)};this.getFullscreen=function(){return d};this.getId=function(){return a.instanceId};this.getImplementationAsSapui5=function(){i.error("Deprecated API call of 'ChipInstance.getImplementationAsSapui5'. Please use 'getImplementationAsSapui5Async' instead",null,"sap.ushell_abap.pbServices.ui2.ChipInstance");P();return u.getImplementationAsSapui5(c)};this.getImplementationAsSapui5Async=function(){try{P()}catch(e){return Promise.reject(e)}return u.getImplementationAsSapui5Async(c)};this.getLayoutData=function(){return a.layoutData};this.getPage=function(){return s};this.getTitle=function(){return g||a.title||u.getTitle()};this.getUpdated=function(e){function t(){i.error("Parse Error: CHIP instance's updated property has unexpected format","value of updated property: '"+a.updated+"'","ChipInstance")}var n,r;if(a.updated&&!e){n=/\((\d*)\)/.exec(a.updated);if(!n){t();return undefined}r=new Date(parseInt(n[1],10));if(isNaN(r.getTime())){t();return undefined}return r}return a.updated};this.isOutdated=function(){return a.outdated==="X"};this.isReadOnly=function(){P();return a.isReadOnly==="X"};this.isReference=function(){return!!a.referenceChipInstanceId||!!a.referencePageId};this.isBrokenReference=function(){return a.referenceChipInstanceId==="O"||a.referencePageId==="O"};this.getOriginalId=function(){return a.referenceChipInstanceId===""||a.referenceChipInstanceId==="O"?undefined:a.referenceChipInstanceId};this.getOriginalPageId=function(){return a.referencePageId===""||a.referencePageId==="O"?undefined:a.referencePageId};this.isStub=function(){return!c};this.load=function(e,n){var i;n=n||r.getPageBuildingService().getDefaultErrorHandler();i=b.bind(null,e,n);if(u.isStub()){u.load(i,n)}else{t.callHandler(i,n,true)}};this.remove=function(e,t){if(s&&s.removeChipInstance(C,e,t)){return}this.exit();r.getPageBuildingService().deletePageChipInstance(a.pageId,a.instanceId,e,t)};this.refresh=function(){if(l){try{l();return true}catch(e){i.error(C+": call to refresh handler failed: "+(e.message||e.toString()),null,"ChipInstance");return false}}return false};this.setFullscreen=function(e){var t,n;if(d!==e){d=e;for(t=0,n=I.length;t<n;t+=1){I[t]()}}};this.setLayoutData=function(e,n,i){if(a.layoutData===e){if(n){i=i||r.getPageBuildingService().getDefaultErrorHandler();t.callHandler(n,i,true)}return}a.layoutData=e;this.persist(n,i)};this.setTitle=function(e,n,i,u){var s;u=u||r.getPageBuildingService().getDefaultErrorHandler();if(g!==e){g=e;if(h){t.callHandler(h.bind(null,this),u,!n)}}if(n&&a.title!==g){s=a.title;a.title=g;g=undefined;this.persist(i,function(){a.title=s;g=undefined;u.apply(null,arguments)})}else if(i){t.callHandler(i,u,true)}};this.toString=function(e){var t=["ChipInstance({oChip:",u.toString(e),",bFullscreen:",d];if(e){t.push(",oAlterEgo:",JSON.stringify(a),",oApi:",JSON.stringify(c),",oBags:",o.toString(),",oConfiguration:",JSON.stringify(f),",oFactory:",r.toString(e),",aFullscreenHandlers.length:",I.length,',sTitle:"',g,'"')}t.push("})");return t.join("")};this.updateConfiguration=function(e,t,n){w();u.updateConfiguration(f,e);a.configuration=JSON.stringify(f);this.persist(t,n)};this._getConstructorData=function(){return{factory:r,alterEgo:v,chip:u,page:s}};this._getBags=function(){return o};this._setBags=function(e){o=e};o=new t.Map;m(a.ChipInstanceBags&&a.ChipInstanceBags.results||[]);delete a.Chip;i.debug("Created: "+this,null,"ChipInstance")};r.prototype.clone=function(){var e=this._getConstructorData();var t=new r(e.factory,e.alterEgo,e.chip,e.page);return new Promise(function(e,n){t.load(e,n)}).then(function(){t._setBags(this._getBags());return t}.bind(this))};return r});
},
	"sap/ushell_abap/pbServices/ui2/Page.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
this.sap=this.sap||{};sap.ui.define(["sap/ushell_abap/pbServices/ui2/Bag","sap/ushell_abap/pbServices/ui2/AllCatalogs","sap/ushell_abap/pbServices/ui2/Utils","sap/ushell_abap/pbServices/ui2/Error","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,i,n,a,jQuery){"use strict";var s=function(s,r){var g,u,o,l,c,d=[],f=true,h=true,p=this;function P(){if(h){throw new n(p+": page is just a stub","Page")}}function I(t){var i,n=!!(t.Bags&&t.Bags.results),a=n?t.Bags.results:[],r=t.PageChipInstances&&t.PageChipInstances.results||[],g=a.length,u=r.length;f=!n;delete t.Bags;delete t.Catalog;delete t.PageChipInstances;o=t;h=false;for(i=0;i<g;i+=1){l.put(a[i].id,new e(s,a[i]))}for(i=0;i<u;i+=1){d[i]=s.createChipInstance(r[i],null,null,p)}}function v(e,t){s.getPageBuildingService().updatePage(o,function(t){p.updateScope();if(e){e()}},t)}this.addChipInstance=function(e,t,i,n){var a=s.getPageBuildingService(),r,g;function u(e){var a=s.createChipInstance(e,n?null:t,i,p);d.push(a);p.updateScope();if(n){t(a)}}P();if(e.getChip){g=e;r=g.getChip()}else{r=e}if(r.getRemoteCatalog()){a.createPageChipInstanceFromRawData({pageId:o.id,chipId:r.getId(),configuration:g&&g.getConfiguration()||"",title:g&&g.getTitle(),remoteCatalogId:r.getRemoteCatalog().getId()},u,i)}else{a.createPageChipInstance(o.id,null,r.getId(),g&&g.getTitle(),g&&g.getConfiguration()||"","",u,i)}};this.addChipInstanceReference=function(e,t,i){var n=s.getPageBuildingService();function a(n){var a=s.createChipInstance(n,e.isStub()?null:t,i,p);d.push(a);if(e.isStub()){t(a)}}P();n.clonePageChipInstance(e.getPage().getId(),e.getId(),this.getId(),a,i)};this.exit=function(){var e,t;a.debug("Exiting: "+this,null,"Page");for(e=0,t=d.length;e<t;e+=1){d[e].exit()}o=null;l=new i.Map;c=null;d=[];h=true;a.debug("Exited: "+this,null,"Page")};this.getAllCatalogs=function(){if(!u){u=new t(s,g)}return u};this.getBagIds=function(){if(f){throw new n(p+": page is just a stub, load bags on demand","Page")}return l.keys()};this.getBag=function(t){var i;if(f){throw new n(p+": page is just a stub, load bags on demand","Page")}if(!t){throw new n("Missing bag ID","Page")}if(l.containsKey(t)){return l.get(t)}i=new e(s,{pageId:this.getId(),id:t,$tmp:true});l.put(t,i);return i};this.loadBag=function(t){var i;if(!t){throw new n("Missing bag ID","Page")}if(l.containsKey(t)){i=l.get(t)}else{i=new jQuery.Deferred;l.put(t,i);s.getPageBuildingService().readBag(g,t,function(t){i.resolve(new e(s,t))},function(){i.resolve(new e(s,{pageId:g,id:t,$tmp:true}))})}return i.promise()};this.getCatalog=function(){P();if(!c&&o.catalogId){c=s.createCatalog(o.catalogId)}return c};this.getChipInstances=function(){P();return d.slice()};this.getId=function(){return g};this.getLayout=function(){P();return o.layout};this.setLayout=function(e,t,n){P();if(o.layout===e){if(t){n=n||s.getPageBuildingService().getDefaultErrorHandler();i.callHandler(t,n,true)}return}o.layout=e;v(t,n)};this.getOriginalLanguage=function(){P();return o.originalLanguage};this.getScope=function(){P();return o.scope};this.getTitle=function(){P();return o.title};this.setTitle=function(e,t,n){P();if(o.title===e){if(t){n=n||s.getPageBuildingService().getDefaultErrorHandler();i.callHandler(t,n,true)}return}o.title=e;v(t,n)};this.isCatalogPage=function(){P();return o.isCatalogPage==="X"};this.isPersonalizationLocked=function(){P();return o.isPersLocked==="X"};this.setPersonalizationLocked=function(e,t,a){P();if(s.getPageBuildingService().isPersonalization()){throw new n("Personalization locking cannot be changed at personalization scope","Page")}if(o.isPersLocked==="X"&&e||o.isPersLocked!=="X"&&!e){if(t){a=a||s.getPageBuildingService().getDefaultErrorHandler();i.callHandler(t,a,true)}return}o.isPersLocked=e?"X":" ";v(t,a)};this.isOutdated=function(){P();return o.outdated==="X"};this.isReadOnly=function(){P();return o.isReadOnly==="X"};this.isPersonalized=function(){P();return o.scope==="PERSONALIZATION"};this.isStub=function(){return h};this.load=function(e,t,i){var r;if(!h){throw new n("Page is not a stub anymore","Page")}function u(){if(r===0){a.debug("Initialized: "+p,null,"Page");e()}}function o(){r-=1;u()}s.getPageBuildingService().readPage(g,function(e){var n,s=e.PageChipInstances&&e.PageChipInstances.results||[],g=s.length;a.debug("Loaded: "+p,null,"Page");I(e);r=i?0:g;if(!i){for(n=0;n<g;n+=1){d[n].load(o,t)}}u()},t)};this.remove=function(e,t){this.exit();s.getPageBuildingService().deletePage(g,e,t)};this.removeChipInstance=function(e,t,i){var n=d.indexOf(e);P();if(n>=0){d.splice(n,1);e.remove(function(){p.updateScope();if(t){t.apply(this,arguments)}},function(){d.splice(n,0,e);i=i||s.getPageBuildingService().getDefaultErrorHandler();i.apply(this,arguments)});return true}return false};this.toString=function(e){var t=['Page({sId:"',g,'",bIsStub:',h,",bIsLoadingBagsOnDemand:",f];if(e){t.push(",oAlterEgo:",JSON.stringify(o),",oCatalog:",c?c.toString(e):c,",oFactory:",s.toString(e),",aChipInstances:",JSON.stringify(d))}t.push("})");return t.join("")};this.updateScope=function(){if(s.getPageBuildingService().isPersonalization()){o.scope="PERSONALIZATION"}};if(typeof r==="object"){g=r.id;I(r)}else if(typeof r==="string"){g=r}if(!g){throw new n("Missing ID","Page")}l=new i.Map;a.debug("Created: "+this,null,"Page")};return s});
}
},"sap/ushell/core-lib-preload");
sap.ui.requireSync("sap/ui/core/Core");
// as this module contains the Core, we ensure that the Core has been booted
sap.ui.getCore().boot && sap.ui.getCore().boot();
//# sourceMappingURL=core-min-3.js.map
