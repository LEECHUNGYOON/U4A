// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/ODataService"],function(t,e,a,n,i){"use strict";return function(){function s(e){var a;if(e&&!t(e)){a=JSON.stringify(e);return a.replace(/\{|\}|\\n|,/g,"\n")}return""}this.createTicket=function(t){var r="/sap/opu/odata/UI2/INTEROP/";var u="Messages";var c=sap.ushell.Container;var o,l,g,p;if(!t.text){throw new a.Error("Support Ticket data does not contain text member")}o=e.get("clientContext.navigationData.applicationInformation.url",t);l=e.get("clientContext.navigationData.navigationHash",t);g=e.get("clientContext.navigationData.tileDebugInfo",t);o=typeof o==="string"?o:"";l=typeof l==="string"?l:"";g=typeof g==="string"&&g.length>0?JSON.parse(g).catalogId||"":"";t.text=t.text.trim();t.subject=t.subject.trim();if(t.subject.length>40){t.text=t.subject+"\n"+t.text;t.subject=t.subject.substring(0,40).slice(0,-3)+"..."}t.url=o;t.catalogId=g;t.hash=l;t.clientContext=s(t.clientContext);var b=new Promise(function(e,a){var s={baseUrl:r,"sap-language":c.getUser().getLanguage(),"sap-client":c.getLogonSystem().getClient()};p=n.createODataWrapper(s);i.call(this,p,function(){return false});p.create(u,t,function(t){e(t.messageNumber)},function(t){a(t)})}.bind(this));return b}}});
//# sourceMappingURL=SupportTicketAdapter.js.map