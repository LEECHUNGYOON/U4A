/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/esh/search/ui/controls/SearchFacetItem","sap/m/List","sap/m/library","../eventlogging/UserEvents","../error/errors"],function(e,t,r,i,a,o){function n(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var s=n(e);var c=i["ListMode"];var l=i["ListSeparators"];var d=a["UserEventType"];var h=n(o);var u=r.extend("sap.esh.search.ui.controls.SearchFacet",{renderer:{apiVersion:2},metadata:{properties:{eshRole:{type:"string",defaultValue:"datasource"}}},init:function e(){this.data("sap-ui-fastnavgroup","false",true)},constructor:function e(t,i){var a=this;r.prototype.constructor.call(this,t,i);this.setMode(c.SingleSelectMaster);this.setShowSeparators(l.None);this.setIncludeItemInSelection(true);this.attachSelectionChange(function(e){if(a.getProperty("eshRole")==="attribute"){a.handleItemPress(e)}});this.attachItemPress(function(e){var t=a.getModel();if(t.config.searchScopeWithoutAll){return}if(a.getProperty("eshRole")==="datasource"){a.handleItemPress(e)}});this.addStyleClass("sapUshellSearchFacet")},handleItemPress:function e(t){var r=t.getParameter("listItem");var i=r.getBindingContext().getObject();var a=this.getModel();var o=i.filterCondition;if(r.getSelected()){if(typeof a.config.cleanUpSpaceFilters==="function"){a.config.cleanUpSpaceFilters(a,o)}a.addFilterCondition(o);a.eventLogger.logEvent({type:d.FACET_FILTER_ADD,referencedAttribute:i.facetAttribute,clickedValue:i.value,clickedLabel:i.label,clickedPosition:r.getList().getItems().indexOf(r)})}else{a.removeFilterCondition(i.filterCondition);a.eventLogger.logEvent({type:d.FACET_FILTER_DEL,referencedAttribute:i.facetAttribute,clickedValue:i.value,clickedLabel:i.label,clickedPosition:r.getList().getItems().indexOf(r)})}},onAfterRendering:function e(t){r.prototype.onAfterRendering.call(this,t);var i=jQuery(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];if(i){var a=sap.ui.getCore().byId(i.id);a.setVisible(false)}var o=this.getModel();if(o.config.searchInAreaOverwriteMode&&typeof o.config.setQuickSelectDataSourceAllAppearsNotSelected==="function"){try{o.config.setQuickSelectDataSourceAllAppearsNotSelected(o,this)}catch(e){var n=new h.ConfigurationExitError("setQuickSelectDataSourceAllAppearsNotSelected",o.config.applicationComponent,e);throw n}}},setEshRole:function e(r){var i={path:"items",template:new t("",{isDataSource:r.toLowerCase()==="datasource"})};switch(r.toLowerCase()){case"attribute":{var a=this.getModel();var o;if(a.config&&typeof a.config.getSearchInFacetListMode==="function"){var n=a.getProperty(this.getBindingContext().getPath());try{o=a.config.getSearchInFacetListMode(n)}catch(e){var l=new h.ConfigurationExitError("getSearchInFacetListMode",a.config.applicationComponent,e);throw l}}this.setMode(o||c.MultiSelect);this.setHeaderText("");break}default:this.setMode(c.SingleSelectMaster);this.setHeaderText(s.getText("searchIn"));break}this.bindItems(i);this.setProperty("eshRole",r,true);return this}});return u})})();
//# sourceMappingURL=SearchFacet.js.map