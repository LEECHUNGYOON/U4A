/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/base/Log","sap/m/MessageBox","sap/ui/core/library","../i18n"],function(e,r,t,o){function n(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function a(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function i(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}function s(e,r,t){if(r)i(e.prototype,r);if(t)i(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function u(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var l=t["MessageType"];var c=t["TextDirection"];var f=n(o);var g=function(){function t(r){a(this,t);u(this,"_oLogger",e.getLogger("sap.esh.search.ui.error.ErrorHandler"));this.searchModel=r.model;this.fnOnError=r.fnOnError||this.defaultErrorHandler}s(t,[{key:"_getLoggableError",value:function e(r){var t=r+"";if(typeof r.stack!=="undefined"){t=r.stack+"\n"}if(r.previous instanceof Error){t+="--\x3e Previous error was: ".concat(this._getLoggableError(r.previous),"\n")}return t}},{key:"_addUI5LogMessage",value:function e(r,t){var o=this._getLoggableError(r)+"\n";if(this.searchModel&&this.searchModel.sinaNext){o+=this.searchModel.sinaNext.getDebugInfo()+"\n"}this._oLogger.error(t,o,"ErrorHandler")}},{key:"_openMessageBox",value:function e(t,o,n,a){r.error(o+"\n"+n+"\n"+a,{title:t,onClose:null,styleClass:"",initialFocus:null,textDirection:c.Inherit})}},{key:"setSearchModel",value:function e(r){this.searchModel=r}},{key:"onError",value:function e(r){return this.fnOnError(r)}},{key:"onErrorDeferred",value:function e(r){this.onError(r);return Promise.resolve(true)}},{key:"defaultErrorHandler",value:function e(r){var t=l.Error;var o=r.name||f.getText("searchError");var n=r.message||f.getText("error.message");var a=r.solution||f.getText("error.solution");var i=f.getText("error.details");switch(r.name){case"TypeError":{n=f.getText("error.TypeError.message");a=f.getText("error.TypeError.solution")}break;case"URIError":{a=f.getText("error.URIError.solution")}break;case"DataSourceAttributeMetadataNotFoundError":{n=f.getText("error.sina.DataSourceAttributeMetadataNotFoundError.message");a=f.getText("error.sina.DataSourceAttributeMetadataNotFoundError.solution")}break;case"NoValidEnterpriseSearchAPIConfigurationFoundError":{n=f.getText("error.sina.NoValidEnterpriseSearchAPIConfigurationFoundError.message")+"\n"+r.message;a=f.getText("error.sina.NoValidEnterpriseSearchAPIConfigurationFoundError.solution")}break;case"InBetweenConditionInConsistent":{n=f.getText("error.sina.InBetweenConditionInConsistent.description");a=f.getText("error.sina.InBetweenConditionInConsistent.solution")}}if(typeof this.searchModel==="undefined"||this.searchModel===null){this._addUI5LogMessage(r,o);this._openMessageBox(o,n,a,i);return}this._addUI5LogMessage(r,o);if(a){n=n+"\n\n"+a+"\n\n "+i}var s={type:t,title:o,description:n};this.searchModel.pushUIMessage(s)}}]);return t}();return g})})();
//# sourceMappingURL=ErrorHandler.js.map