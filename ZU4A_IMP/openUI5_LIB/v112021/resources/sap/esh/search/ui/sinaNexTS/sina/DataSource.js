/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./SinaObject","./DataSourceType","./AttributeMetadata","./AttributeGroupMetadata","../core/errors","./HierarchyDisplayType","./MatchingStrategy","./AttributeType"],function(t,e,a,r,i,n,u,o){function l(t,e){var a=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=c(t))||e&&t&&typeof t.length==="number"){if(a)t=a;var r=0;var i=function(){};return{s:i,n:function(){if(r>=t.length)return{done:true};return{done:false,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,u=false,o;return{s:function(){a=a.call(t)},n:function(){var t=a.next();n=t.done;return t},e:function(t){u=true;o=t},f:function(){try{if(!n&&a.return!=null)a.return()}finally{if(u)throw o}}}}function c(t,e){if(!t)return;if(typeof t==="string")return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor)a=t.constructor.name;if(a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(t,e)}function s(t,e){if(e==null||e>t.length)e=t.length;for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function f(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function h(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}function d(t,e,a){if(e)h(t.prototype,e);if(a)h(t,a);Object.defineProperty(t,"prototype",{writable:false});return t}function y(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});Object.defineProperty(t,"prototype",{writable:false});if(e)b(t,e)}function b(t,e){b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,a){e.__proto__=a;return e};return b(t,e)}function p(t){var e=g();return function a(){var r=A(t),i;if(e){var n=A(this).constructor;i=Reflect.construct(r,arguments,n)}else{i=r.apply(this,arguments)}return v(this,i)}}function v(t,e){if(e&&(typeof e==="object"||typeof e==="function")){return e}else if(e!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return M(t)}function M(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function g(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(t){return false}}function A(t){A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function t(e){return e.__proto__||Object.getPrototypeOf(e)};return A(t)}function S(t,e,a){if(e in t){Object.defineProperty(t,e,{value:a,enumerable:true,configurable:true,writable:true})}else{t[e]=a}return t}
/*!
   * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
   */var m=t["SinaObject"];var _=e["DataSourceType"];var D=a["AttributeMetadata"];var w=r["AttributeGroupMetadata"];var O=i["DataSourceAttributeMetadataNotFoundError"];var T=n["HierarchyDisplayType"];var j=u["MatchingStrategy"];var G=o["AttributeType"];var H=function(t){y(a,t);var e=p(a);function a(t){var r,i,n,u,o,l,c,s,h,d,y;var b;f(this,a);b=e.call(this,{sina:t.sina});S(M(b),"hidden",false);S(M(b),"usage",{});S(M(b),"attributesMetadata",[]);S(M(b),"attributeMetadataMap",{});S(M(b),"attributeGroupsMetadata",[]);S(M(b),"attributeGroupMetadataMap",{});b.annotations=(r=t.annotations)!==null&&r!==void 0?r:b.annotations;b.type=(i=t.type)!==null&&i!==void 0?i:b.type;b.subType=t.subType;b.id=(n=t.id)!==null&&n!==void 0?n:b.id;b.label=(u=t.label)!==null&&u!==void 0?u:b.label;b.labelPlural=(o=t.labelPlural)!==null&&o!==void 0?o:b.labelPlural;b.icon=t.icon;b.hidden=(l=t.hidden)!==null&&l!==void 0?l:b.hidden;b.usage=(c=t.usage)!==null&&c!==void 0?c:b.usage;b.attributesMetadata=(s=t.attributesMetadata)!==null&&s!==void 0?s:b.attributesMetadata;b.attributeMetadataMap=(h=t.attributeMetadataMap)!==null&&h!==void 0?h:b.createAttributeMetadataMap(b.attributesMetadata);b.attributeGroupsMetadata=(d=t.attributeGroupsMetadata)!==null&&d!==void 0?d:b.attributeGroupsMetadata;b.attributeGroupMetadataMap=(y=t.attributeGroupMetadataMap)!==null&&y!==void 0?y:b.attributeGroupMetadataMap;b.isHierarchyDataSource=t.isHierarchyDataSource;b.hierarchyName=t.hierarchyName;b.hierarchyDisplayType=t.hierarchyDisplayType;b.hierarchyAttribute=t.hierarchyAttribute;if(!b.labelPlural||b.labelPlural.length===0){b.labelPlural=b.label}if(b.type===_.BusinessObject&&b.attributesMetadata.length===0){}return b}d(a,[{key:"_configure",value:function t(){var e=this.sina.metadataFormatters;if(!e){return}for(var a=0;a<e.length;++a){var r=e[a];r.format({dataSources:[this]})}}},{key:"createAttributeMetadataMap",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var a={};for(var r=0;r<e.length;++r){var i=e[r];a[i.id]=i}return a}},{key:"getAttributeMetadata",value:function t(e){if(this.id==="All"){return this.getCommonAttributeMetadata(e)}if(this.id==="CD$ALL~ESH_TRANSACTION~"&&(e==="TCDTEXT"||e==="TCODE")&&!this.attributeMetadataMap[e]){this.attributeMetadataMap[e]=new D({label:"label",isSortable:false,isKey:false,matchingStrategy:j.Text,id:e,usage:{Title:{displayOrder:1}},type:G.String})}var a=this.attributeMetadataMap[e];if(a){return a}throw new O("Could not find metadata for attribute "+e+" in data source "+this.id+". ")}},{key:"getCommonAttributeMetadata",value:function t(e){var a=l(this.sina.dataSources),r;try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.type!==_.BusinessObject){continue}var n=i.attributeMetadataMap[e];if(n){return n}}}catch(t){a.e(t)}finally{a.f()}throw new O("Could not find metadata for common attribute "+e+" in data source "+this.id+". ")}},{key:"getHierarchyDataSource",value:function t(){if(this._hierarchyDataSource instanceof a){return this._hierarchyDataSource}for(var e=0;e<this.attributesMetadata.length;++e){var r=this.attributesMetadata[e];if(!r.isHierarchy){continue}if(r.hierarchyDisplayType===T.StaticHierarchyFacet||r.hierarchyDisplayType===T.HierarchyResultView){this._hierarchyDataSource=this.sina.getHierarchyDataSource(r.hierarchyName);return this._hierarchyDataSource}}return undefined}},{key:"getStaticHierarchyAttributeMetadata",value:function t(){if(this._staticHierarchyAttributeMetadata){return this._staticHierarchyAttributeMetadata}for(var e=0;e<this.attributesMetadata.length;++e){var a=this.attributesMetadata[e];if(!a.isHierarchy){continue}if(a.hierarchyDisplayType===T.StaticHierarchyFacet){this._staticHierarchyAttributeMetadata=a;return this._staticHierarchyAttributeMetadata}}return undefined}},{key:"_getStaticHierarchyAttributeForDisplay",value:function t(){var e;if(this._hierarchyAttributeGroupMetadata instanceof w||this._hierarchyAttributeGroupMetadata instanceof D){return this._hierarchyAttributeGroupMetadata}var a=this.hierarchyAttribute||((e=this.getHierarchyDataSource())===null||e===void 0?void 0:e.hierarchyAttribute);if(!a){return undefined}for(var r=0;r<this.attributeGroupsMetadata.length;r++){var i,n;var u=this.attributeGroupsMetadata[r];var o=(i=u._private)===null||i===void 0?void 0:i.parentAttribute;if(o instanceof D&&o.id===a&&((n=u._private)===null||n===void 0?void 0:n.isDescription)===true){this._hierarchyAttributeGroupMetadata=u;return this._hierarchyAttributeGroupMetadata}}this._hierarchyAttributeGroupMetadata=this.attributeMetadataMap[this.hierarchyAttribute];return this._hierarchyAttributeGroupMetadata}},{key:"toJson",value:function t(){return{type:this.type,id:this.id,label:this.label,labelPlural:this.labelPlural}}}],[{key:"getAllDataSource",value:function t(){return new a({id:"All",label:"All",type:_.Category})}}]);return a}(m);var P={__esModule:true};P.DataSource=H;return P})})();
//# sourceMappingURL=DataSource.js.map