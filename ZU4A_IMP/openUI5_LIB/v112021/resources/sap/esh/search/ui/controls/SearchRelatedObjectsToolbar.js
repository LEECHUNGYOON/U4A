/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/m/Toolbar","sap/m/library","sap/m/Button","sap/m/ToolbarLayoutData","sap/m/ToolbarSpacer","sap/m/ActionSheet","sap/ui/core/InvisibleText","sap/ui/core/IconPool","sap/ui/core/delegate/ItemNavigation","sap/ui/core/Control","../sinaNexTS/sina/NavigationTarget","./SearchLink"],function(e,t,a,o,i,r,s,n,l,d,c,h,g){function v(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var u=v(e);var p=a["ToolbarDesign"];var f=a["ButtonType"];var b=a["PlacementType"];var m=h["NavigationTarget"];var _=v(g);var y=c.extend("sap.esh.search.ui.controls.SearchRelatedObjectsToolbar",{renderer:{apiVersion:2,render:function e(t,a){t.openStart("div",a);t["class"]("sapUshellSearchResultListItem-RelatedObjectsToolbar");var o=a.getModel();if(o.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-RelatedObjectsToolbarValueHelp")}t.openEnd();t.renderControl(a.getAggregation("_ariaDescriptionForLinks"));a._renderToolbar(t,a);t.close("div")}},metadata:{properties:{itemId:"string",navigationObjects:{type:"object",multiple:true},positionInList:"int"},aggregations:{_relatedObjectActionsToolbar:{type:"sap.m.Toolbar",multiple:false,visibility:"hidden"},_ariaDescriptionForLinks:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},constructor:function e(a,o){var i=this;c.prototype.constructor.call(this,a,o);var r=new t("".concat(this.getId(),"--toolbar"),{design:p.Solid});r.data("sap-ui-fastnavgroup","false",true);r.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Toolbar");r.addEventDelegate({onAfterRendering:this.layoutToolbarElements.bind(this)});this.setAggregation("_relatedObjectActionsToolbar",r);this.setAggregation("_ariaDescriptionForLinks",new n({text:u.getText("result_list_item_aria_has_more_links")}));$(window).on("resize",function(){i.layoutToolbarElements()})},exit:function e(){if(c.prototype.exit){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++){a[o]=arguments[o]}c.prototype.exit.apply(this,a)}if(this._overFlowSheet){this._overFlowSheet.destroy()}},_renderToolbar:function e(t,a){var n=this;var d=a.getModel();var c=a.getAggregation("_relatedObjectActionsToolbar");c.destroyContent();if(d.config.optimizeForValueHelp){c.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-ToolbarValueHelp")}var h=a.getProperty("navigationObjects");if(Array.isArray(h)&&h.length>0){var g=[];for(var v=0;v<h.length;v++){var u=h[v];var p=new _("".concat(a.getId(),"--link_").concat(v),{text:(u===null||u===void 0?void 0:u.text)||"",navigationTarget:u,layoutData:new i({shrinkable:false})});p.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");g.push(p)}var m=new r;m.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Spacer");c.addContent(m);for(var y=0;y<g.length;y++){c.addContent(g[y])}this._overFlowButton=new o("".concat(this.getId(),"--overflowButton"),{icon:l.getIconURI("overflow")});this._overFlowButton.addStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-OverFlowButton");if(d.config.optimizeForValueHelp){this._overFlowButton.addStyleClass("sapUiSmallMarginBegin");this._overFlowButton.addStyleClass("sapUiTinyMarginEnd");this._overFlowButton.setType(f.Transparent)}c.addContent(this._overFlowButton);if(!this._overFlowSheet){this._overFlowSheet=new s("".concat(this.getId(),"--actionSheet"),{placement:b.Top})}this._overFlowButton.attachPress(function(){if(n._overFlowSheet.isOpen()){n._overFlowSheet.close()}else{n._overFlowSheet.openBy(n._overFlowButton)}});t.renderControl(c)}},onAfterRendering:function e(){if(this.getAggregation("_relatedObjectActionsToolbar")){this._addAriaInformation()}},layoutToolbarElements:function e(){if(this.isDestroyed()||this.isDestroyStarted()){return}var t=this.getAggregation("_relatedObjectActionsToolbar");if(!(this.getDomRef()&&t.getDomRef())){return}var a=$(t.getDomRef());var i=a.width();if($(this.getDomRef()).css("display")==="none"||a.css("display")==="none"){return}this.toolbarWidth=i;var r=$(this._overFlowButton.getDomRef());r.css("display","none");var s=0;var n=function e(t,a){if(a instanceof m){a.performNavigation({event:t})}};var l=a.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");for(var d=0;d<l.length;d++){var c=$(l[d]);c.css("display","");var h=s+c.outerWidth(true);if(h>i){r.css("display","");var g=r.outerWidth(true);for(;d>=0;d--){c=$(l[d]);h-=c.outerWidth(true);if(h+g<=i){break}}var v=this.getProperty("navigationObjects");this._overFlowSheet.destroyButtons();d=d>=0?d:0;for(;d<l.length;d++){c=$(l[d]);c.css("display","none");var u=v[d];var p=new o({text:(u===null||u===void 0?void 0:u.text)||""});p.attachPress(u,n);this._overFlowSheet.addButton(p)}break}s=h}this._setupItemNavigation()},_setupItemNavigation:function e(){if(!this._theItemNavigation){this._theItemNavigation=new d(null,[]);this["addDelegate"](this._theItemNavigation)}this._theItemNavigation.setCycling(false);this._theItemNavigation.setRootDomRef(this.getDomRef());var t=[];var a=this.getAggregation("_relatedObjectActionsToolbar");var o=a.getContent();for(var i=0;i<o.length;i++){if(!o[i].hasStyleClass("sapUshellSearchResultListItem-RelatedObjectsToolbar-Element")){continue}if(!$(o[i].getDomRef()).attr("tabindex")){var r="-1";if(o[i]["getPressed"]&&o[i]["getPressed"]()){r="0"}$(o[i].getDomRef()).attr("tabindex",r)}t.push(o[i].getDomRef())}var s=this._overFlowButton.getDomRef();t.push(s);$(s).attr("tabindex","-1");this._theItemNavigation.setItemDomRefs(t)},_addAriaInformation:function e(){var t=$(this.getAggregation("_relatedObjectActionsToolbar").getDomRef());var a=t.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar-Element");var o=$(this._overFlowButton.getDomRef());if(a.length>0||o.is(":visible")){var i=this.getAggregation("_ariaDescriptionForLinks").getId();a.each(function(){var e=$(this);var t=e.attr("aria-describedby")||"";t+=" "+i;e.attr("aria-describedby",t)});if(o.is(":visible")){var r=o.attr("aria-describedby")||"";r+=" "+i;o.attr("aria-describedby",r)}}}});return y})})();
//# sourceMappingURL=SearchRelatedObjectsToolbar.js.map