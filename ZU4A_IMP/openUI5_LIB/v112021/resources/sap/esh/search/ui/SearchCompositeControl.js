/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./error/ErrorHandler","./i18n","sap/ui/model/resource/ResourceModel","sap/esh/search/ui/controls/SearchFieldGroup","sap/esh/search/ui/SearchModel","sap/esh/search/ui/controls/SearchLayoutResponsive","sap/esh/search/ui/controls/SearchResultContainer","sap/esh/search/ui/controls/SearchResultList","sap/esh/search/ui/controls/SearchResultTable","sap/esh/search/ui/controls/SearchResultGrid","sap/esh/search/ui/controls/SearchSpreadsheet","sap/esh/search/ui/controls/SearchText","sap/esh/search/ui/controls/SearchCountBreadcrumbs","sap/esh/search/ui/controls/SearchResultListItem","sap/esh/search/ui/controls/CustomSearchResultListItem","sap/esh/search/ui/controls/SearchTileHighlighter","sap/esh/search/ui/controls/SearchFilterBar","sap/esh/search/ui/controls/SearchFacetFilter","sap/esh/search/ui/SearchHelper","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/layout/VerticalLayout","sap/ui/model/BindingMode","sap/m/Button","sap/m/OverflowToolbarButton","sap/m/library","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/m/Bar","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/OverflowToolbarLayoutData","sap/m/OverflowToolbar","sap/m/ToolbarSeparator","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Column","sap/m/ColumnListItem","sap/m/CustomListItem","sap/m/ActionSheet","sap/m/FlexBox","sap/m/GenericTile","sap/m/TileContent","sap/m/ViewSettingsDialog","sap/m/ViewSettingsItem","sap/m/MessagePopover","sap/m/MessageItem","sap/m/HBox","sap/m/VBox","sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/GridContainerItemLayoutData","./error/errors","./eventlogging/UserEvents","sap/m/IllustratedMessage","sap/m/IllustratedMessageType","sap/m/IllustratedMessageSize","sap/esh/search/ui/error/errors","sap/ui/core/ResizeHandler","./controls/OpenShowMoreDialog","sap/m/ToolbarSpacer","./UIEvents","./SearchResultTablePersonalizer","sap/ushell/ui/footerbar/AddBookmarkButton","./sinaNexTS/sina/NavigationTarget","./sinaNexTS/sina/cloneUtil","./controls/SearchLink","./controls/SearchQueryExplanation"],function(e,t,r,a,s,i,o,n,l,u,c,h,d,p,g,f,v,S,y,m,b,C,D,R,T,w,I,B,M,F,L,V,x,E,P,A,H,U,G,O,_,N,j,z,k,W,q,Q,K,J,X,Y,Z,ee,te,re,ae,se,ie,oe,ne,le,ue,ce,he,de,pe,ge,fe,ve,Se,ye){function me(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function be(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ce(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var a=0;var s=function(){};return{s:s,n:function(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,o=false,n;return{s:function(){r=r.call(e)},n:function(){var e=r.next();i=e.done;return e},e:function(e){o=true;n=e},f:function(){try{if(!i&&r.return!=null)r.return()}finally{if(o)throw n}}}}function Ce(e,t){if(!e)return;if(typeof e==="string")return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}function De(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,a=new Array(t);r<t;r++){a[r]=e[r]}return a}var Re=me(e);var Te=me(t);var we=f["Highlighter"];var Ie=B["ButtonType"];var Be=B["ToolbarDesign"];var Me=B["URLHelper"];var Fe=B["PlacementType"];var Le=B["OverflowToolbarPriority"];var Ve=B["ListMode"];var xe=B["ListType"];var Ee=B["PopinDisplay"];var Pe=B["FlexJustifyContent"];var Ae=B["PopinLayout"];var He=ae["ProgramError"];var Ue=se["UserEventType"];var Ge=ce["openShowMoreDialog"];var Oe=me(de);var _e=me(pe);var Ne=fe["NavigationTarget"];var je=ve["clonePublic"];var ze=B["BarDesign"];var ke=me(Se);var We=me(ye);var qe=m.extend("sap.esh.search.ui.SearchCompositeControl",{renderer:{apiVersion:2,render:function e(t,r){t.openStart("div",r);t.style("width","100%");t.style("height","100%");t.openEnd();var a=r.getAggregation("content");if(a){for(var s=0;s<a.length;s++){t.renderControl(a[s])}}t.close("div")}},metadata:{library:"sap.esh.search.ui",dnd:{draggable:true,droppable:false},properties:{cssClass:{type:"string"},searchTerm:{type:"string",group:"Misc",defaultValue:""},searchOnStart:{type:"boolean",group:"Behavior",defaultValue:true},filterRootCondition:{type:"object",group:"Misc"},sinaConfiguration:{type:"object",group:"Misc"},dataSource:{type:"string",group:"Misc"},resultViewTypes:{type:"string[]",group:"Misc",defaultValue:["searchResultList","searchResultTable"]},resultViewType:{type:"string",group:"Misc",defaultValue:"searchResultList"},resultViewSettings:{settings:{resultViewTypes:"string[]",resultViewType:"string"},group:"Misc",defaultValue:{resultViewTypes:["searchResultList","searchResultTable"],resultViewType:"searchResultList"}},tabStripsFormatter:{type:"function",group:"Misc"},folderMode:{type:"boolean",group:"Misc",defaultValue:false},folderModeForInitialSearch:{type:"boolean",group:"Misc",defaultValue:false},autoAdjustResultViewTypeInFolderMode:{type:"boolean",group:"Misc",defaultValue:false},enableQueryLanguage:{type:"boolean",group:"Misc",defaultValue:false},applicationComponent:{type:"string",group:"Misc",defaultValue:"HAN-AS-INA-UI"},facetPanelResizable:{type:"boolean",group:"Misc",defaultValue:false},facetPanelWidthInPercent:{type:"float",group:"Misc",defaultValue:25},getCustomNoResultScreen:{type:"function",group:"Misc"},getSearchInputPlaceholderLabel:{type:"function",group:"Misc"},overwriteBrowserTitle:{type:"boolean",group:"Misc"},defaultDataSource:{type:"string",group:"Misc"},optimizeForValueHelp:{type:"boolean",group:"Misc"},filterDataSources:{type:"function",group:"Misc"},facetVisibility:{type:"boolean",group:"Misc"},boSuggestions:{type:"boolean",group:"Misc",defaultValue:false},displayFacetPanelInCaseOfNoResults:{type:"boolean",group:"Misc",defaultValue:false},updateUrl:{type:"boolean",group:"Misc",defaultValue:true},renderSearchUrl:{type:"function",group:"Misc"},isSearchUrl:{type:"function",group:"Misc"},parseSearchUrlParameters:{type:"function",group:"Misc"},quickSelectDataSources:{type:"object",group:"Misc"},selectionChange:{type:"function",group:"Misc"},initAsync:{type:"function",group:"Misc"},enableMultiSelectionResultItems:{type:"boolean",group:"Misc",defaultValue:false},pageSize:{type:"int",group:"Misc",defaultValue:10},formatFilterBarText:{type:"function",group:"Misc"},isFilterBarVisible:{type:"function",group:"Misc"},eventConsumers:{singularName:"eventConsumer",multiple:true,group:"Misc"}},aggregations:{content:{singularName:"content",multiple:true}},events:{searchStarted:{},searchFinished:{}}},constructor:function e(t,a){var i=this;var o=new Re({model:null});var n;var l=false;try{var u=qe.unifyInputParameters(t,a);t=u.sId;a=u.settings;n=a["model"]||a["searchModel"];if(!n){n=new s({configuration:a})}else{n.config.id=t}o.setSearchModel(n);var c=qe.getUI5ControlSettings(n.config);m.prototype.constructor.call(this,t,c);this.errorHandler=o;this.addStyleClass("sapUshellSearchInputHelpPage");if(n.config.optimizeForValueHelp){this.addStyleClass("sapUshellSearchInputHelpPageValueHelp")}this.setModel(n);this.setModel(new r({bundle:Te}),"i18n");var h=this;this.oFocusHandler=new y.SearchFocusHandler(h);n.focusHandler=this.oFocusHandler;n.config.performanceLogger.enterMethod({name:"createContent"},{isSearch:true});l=true;this.createContent();n.config.performanceLogger.leaveMethod({name:"createContent"});l=false;ue.register(this,function(){i._resizeHandler()});this.initSearch()}catch(e){o.onError(e);throw e}finally{if(l){n.config.performanceLogger.leaveMethod({name:"createContent"});l=false}}},initSearch:function e(){var t=this;var r=this.getModel();r.config.performanceLogger.enterMethod({name:"init search"},{isSearch:true});r.searchUrlParser.parse().then(function(){r.initAsync().then(function(){if(t.getProperty("searchOnStart")&&!r.config.isUshell){r._firePerspectiveQuery()}if(r){r.config.performanceLogger.leaveMethod({name:"init search"})}})})},exit:function e(){var t;if(this.oErrorPopover){}if(this.oFilterBar){this.oFilterBar.destroy()}if(this.noResultScreen){this.noResultScreen.destroy()}if(this.noResultScreenFolder){this.noResultScreenFolder.destroy()}(t=this.tablePersonalizer)===null||t===void 0?void 0:t.destroyControllerAndDialog();if(this!==null&&this!==void 0&&this.oSearchPage["oFacetDialog"]){this.oSearchPage["oFacetDialog"].destroy()}var r=this.getModel();r.unsubscribe(Oe.ESHSearchStarted,this.onAllSearchStarted,this);r.unsubscribe(Oe.ESHSearchFinished,this.onAllSearchFinished,this)},createContent:function e(){var t=this;var r=this.getModel();if(!r.config.isUshell){this.oSearchFieldGroup=new a(this.getId()+"-searchInputHelpPageSearchFieldGroup");this.oSearchFieldGroup.setCancelButtonActive(false);this.oSearchFieldGroup.addStyleClass("sapUshellSearchInputHelpPageSearchFieldGroup");this.oSearchFieldGroup.input.setShowValueHelp(false);r.setProperty("/inputHelp",this.oSearchFieldGroup.input);if(r.config.optimizeForValueHelp){this.oSearchFieldGroup.setActionsMenuButtonActive(true);this.oSearchFieldGroup.setSelectQsDsActive(true);this.oSearchFieldGroup.addStyleClass("sapUiTinyMarginBegin");this.oSearchFieldGroup.addStyleClass("sapUiTinyMarginEnd")}}if(r!==null&&r!==void 0&&r.subscribe){if(!this.subscribeDone_SearchStarted){r.subscribe(Oe.ESHSearchStarted,this.onAllSearchStarted,this);this.subscribeDone_SearchStarted=true}if(!this.subscribeDone_SearchFinished){r.subscribe(Oe.ESHSearchFinished,this.onAllSearchFinished,this);this.subscribeDone_SearchFinished=true}}if(this.oSearchFieldGroup){if(r){r.subscribe(Oe.ESHSearchFinished,function(){t.oSearchFieldGroup.input.setValue(r.getSearchBoxTerm())},this)}}this.oFilterButton=this.assembleFilterButton();this.oDataSourceTabBar=this.assembleDataSourceTabBar();var s=[this.oFilterButton,this.oDataSourceTabBar];var i=this.assembleGenericButtonsToolbar();this.oGenericItemsToolbar=i.toolbar;this.oSearchBar=new A(this.getId()+"-searchBar",{width:"100%",visible:{parts:[{path:"/count"}],formatter:function e(t){var a;return t!==0||(r===null||r===void 0?void 0:(a=r.config)===null||a===void 0?void 0:a.showSearchBarForNoResults)}},content:s.concat(this.oGenericItemsToolbar),design:Be.Transparent});this.oSearchBar.addStyleClass("sapUshellSearchBar");if(i.hasCustomButtons){this.oDataSourceTabBar.addStyleClass("sapUshellSearchBarHasCustomButtons")}else{this.oDataSourceTabBar.removeStyleClass("sapUshellSearchBarHasCustomButtons")}if(r.config.optimizeForValueHelp){this.oSearchBar.addStyleClass("sapUshellSearchBarValueHelp")}this.oFilterBar=new v(this.getId()+"-searchFilterBar");this.oSearchPage=this.createSearchPage(this.getId());if(this.oSearchFieldGroup){this["addContent"](this.oSearchFieldGroup)}var o=be(this.oSearchPage),n;try{for(o.s();!(n=o.n()).done;){var l=n.value;this["addContent"](l)}}catch(e){o.e(e)}finally{o.f()}},onAfterRendering:function e(){var t=this===null||this===void 0?void 0:this.getModel();if(t!==null&&t!==void 0&&t.subscribe){if(!this.subscribeDone_SearchStarted){t.subscribe(Oe.ESHSearchStarted,this.onAllSearchStarted,this);this.subscribeDone_SearchStarted=true}if(!this.subscribeDone_SearchFinished){t.subscribe(Oe.ESHSearchFinished,this.onAllSearchFinished,this);this.subscribeDone_SearchFinished=true}}},assembleFilterButton:function e(){var t=this;var r=this.getModel();var a=new L(this.getId()+"-searchBarFilterButton",{icon:D.getIconURI("filter"),tooltip:{parts:[{path:"/facetVisibility"}],formatter:function e(t){return t?Te.getText("hideFacetBtn_tooltip"):Te.getText("showFacetBtn_tooltip")}},pressed:{path:"/facetVisibility"},press:function e(r){var a=t.getModel();t.searchContainer.setProperty("animateFacetTransition",true);a.setFacetVisibility(r.getParameter("pressed"));t.searchContainer.setProperty("animateFacetTransition",false);t.adjustSearchbarCustomGenericButtonWidth()},visible:{parts:[{path:"/businessObjSearchEnabled"},{path:"/count"}],formatter:function e(t,a){if(a===0){return false}return!sap.ui.Device.system.phone&&!r.config.optimizeForValueHelp&&t}}});a.addStyleClass("searchBarFilterButton");a.setLayoutData(new P({priority:Le.NeverOverflow}));return a},assembleCountBreadcrumbsHiddenElement:function e(){var t=new b("",{text:{parts:[{path:"/count"},{path:"/nlqSuccess"},{path:"/nlqDescription"}],formatter:function e(t,r,a){if(r){return a}if(typeof t!=="number"){return""}return Te.getText("results_count_for_screenreaders",[t.toString()])}}});return t},assembleGenericButtonsToolbar:function e(){var t=this,r,a;var s=this.getModel();var i=new I((this.getId()?this.getId()+"-":"")+"dataExportButton",{icon:"sap-icon://download",text:"{i18n>exportData}",tooltip:"{i18n>exportData}",type:Ie.Transparent,visible:{parts:[{path:"/count"},{path:"/tableColumns"}],formatter:function e(r,a){var s=t.getModel();if(s&&s.isHomogenousResult()&&r>0&&a.length>0){return true}else{return false}}},press:function e(){if(t.searchSpreadsheet===undefined){t.searchSpreadsheet=new c("ushell-search-spreadsheet")}t.searchSpreadsheet.onExport()}}).addStyleClass("sapUshellSearchTableDataExportButton");i.setLayoutData(new P({priority:Le.High}));this.assembleResultViewSwitch();var o=new I((this.getId()?this.getId()+"-":"")+"tableSortButton",{icon:"sap-icon://sort",text:"{i18n>sortTable}",tooltip:"{i18n>sortTable}",type:Ie.Transparent,visible:{parts:[{path:"/count"},{path:"/sortableAttributes"}],formatter:function e(r,a){var s=t.getModel();if(s&&s.isHomogenousResult()&&r>0&&a.length>0){return true}else{return false}}},press:function e(){t.openSortDialog()}});o.addStyleClass("sapUshellSearchTableSortButton");o.setLayoutData(new P({priority:Le.High}));var n=new I((this.getId()?this.getId()+"-":"")+"tablePersonalizeButton",{icon:"sap-icon://action-settings",text:"{i18n>personalizeTable}",tooltip:"{i18n>personalizeTable}",type:Ie.Transparent,enabled:{parts:[{path:"/resultViewType"}],formatter:function e(t){return t==="searchResultTable"}},visible:{parts:[{path:"/count"},{path:"/tableColumns"}],formatter:function e(r,a){var s=t.getModel();if(s&&s.isHomogenousResult()&&r>0&&a.length>0){return true}else{return false}}},press:function e(){var r;(r=t.tablePersonalizer)===null||r===void 0?void 0:r.openDialog()}});n.addStyleClass("sapUshellSearchTablePersonalizeButton");n.setLayoutData(new P({priority:Le.High}));var l=[];if(s!==null&&s!==void 0&&(r=s.config)!==null&&r!==void 0&&r.useEshGpt){l.push(this.assembleQueryInformationButton())}l.push(i);l.push(o);l.push(n);var u=s===null||s===void 0?void 0:(a=s.config)===null||a===void 0?void 0:a.isUshell;if(u){var h=this.assembleShareButton();h.setLayoutData(new P({priority:Le.High}));l.push(h)}l.push(this.resultViewSwitch);var d=false;try{var p;var g=[new he];var f=s===null||s===void 0?void 0:(p=s.config)===null||p===void 0?void 0:p.getCustomToolbar();if((f===null||f===void 0?void 0:f.length)>0){d=true;f.push(new H("",{visible:{parts:[{path:"/resultViewSwitchVisibility"},{path:"/count"}],formatter:function e(t,r){return t&&r!==0}}}))}g=g.concat(f);l=g.concat(l)}catch(e){var v=new le.ConfigurationExitError("getCustomToolbar",s.config.applicationComponent,e);this.errorHandler.onError(v)}var S=new A(this.getId()+"-searchBar--genericButtonsToolbar",{content:l});S.addStyleClass("sapElisaSearchGenericButtonsToolbar");return{toolbar:S,hasCustomButtons:d}},assembleQueryInformationButton:function e(){var t=new I((this.getId()?this.getId()+"-":"")+"queryExplanationButton",{icon:"sap-icon://information",tooltip:"{i18n>explainQueryBtn}",text:"{i18n>explainQueryBtn}",width:"auto",visible:{parts:[{path:"/nlqSuccess"}],formatter:function e(t){return t}},press:function e(){r.open()}});var r=new O((this.getId()?this.getId()+"-":"")+"queryExplanationDialog",{contentHeight:"100%",contentWidth:"73%",resizable:true,draggable:true,title:"{i18n>explainQuery}",content:new We((this.getId()?this.getId()+"-":"")+"queryExplanationDialogDetails",{text:"{/nlqDescription}"}),beginButton:new w((this.getId()?this.getId()+"-":"")+"queryExplanationDialogOkBtn",{type:Ie.Emphasized,text:"{i18n>okBtn}",press:function e(){return r.close()}}),endButton:new w((this.getId()?this.getId()+"-":"")+"queryExplanationDialogCloseBtn",{text:"{i18n>closeBtn}",press:function e(){return r.close()}})});this.addDependent(r);return t},assembleShareButton:function e(){var t=this.getModel();var r=new ge((this.getId()?this.getId()+"-":"")+"bookmarkButton",{width:"auto",beforePressHandler:function e(){var a={url:document.URL,title:t.getDocumentTitle(),icon:D.getIconURI("search")};r.setAppData(a)}});var a=new w((this.getId()?this.getId()+"-":"")+"emailButton",{icon:"sap-icon://email",text:Te.getText("eMailFld"),width:"auto",press:function e(){Me.triggerEmail(null,t.getDocumentTitle(),document.URL)}});var s=new z((this.getId()?this.getId()+"-":"")+"shareActionSheet",{placement:Fe.Bottom,buttons:[r,a]});this.addDependent(s);var i=new I((this.getId()?this.getId()+"-":"")+"shareButton",{icon:"sap-icon://action",text:Te.getText("shareBtn"),tooltip:Te.getText("shareBtn"),type:Ie.Transparent,press:function e(){s.openBy(i)}});return i},assembleDataSourceTabBar:function e(){var t=this;var r=new x("".concat(this.getId(),"-dataSourceTabBar"),{expandable:false,stretchContentHeight:false,visible:{parts:[{path:"/facetVisibility"},{path:"/count"},{path:"/businessObjSearchEnabled"}],formatter:function e(t,r,a){return!t&&r>0&&a}},select:function e(a){var s=t.getModel();if(s.config.searchScopeWithoutAll){return}if(s.getDataSource()!==a.getParameter("item").getBindingContext().getObject()){s.setDataSource(a.getParameter("item").getBindingContext().getObject())}else{if(r["selectFired"]){r["selectFired"]=false}else{r["selectFired"]=true;r.fireSelect({item:a.getParameter("item")})}}}});r.data("sap-ui-fastnavgroup","false",true);r.addStyleClass("searchDataSourceTabStripBar");r.addStyleClass("sapUiSmallMarginBegin");r.setAriaTexts({headerLabel:Te.getText("dataSources"),headerDescription:Te.getText("dataSources")});r.bindAggregation("items",{path:"/tabStrips/strips",template:new E("",{key:"{id}",text:"{labelPlural}"})});r.addEventDelegate({onBeforeRendering:function e(){if(t.getModel().getProperty("/tabStrips")){if(r.getSelectedKey()!==t.getModel().getProperty("/tabStrips/selected").id){r.setSelectedKey(t.getModel().getProperty("/tabStrips/selected").id)}}}});return r},assembleResultViewSwitch:function e(){var t=this;if(this.resultViewSwitch!==undefined){return}this.resultViewSwitch=new M(this.getId()+"-ResultViewType",{selectedKey:"{/resultViewType}",visible:{parts:[{path:"/resultViewSwitchVisibility"},{path:"/count"}],formatter:function e(t,r){return t&&r!==0}},selectionChange:function e(r){var a=r.getParameter("item").getKey();t.setResultViewType(a);t.assignDragDropConfig()}});this.resultViewSwitch.bindAggregation("items",{path:"/resultViewTypes",factory:function e(t,r){var a=new F("",{visible:true});switch(r.getObject()){case"searchResultList":a.setIcon("sap-icon://list");a.setTooltip(Te.getText("displayList"));a.setKey("searchResultList");break;case"searchResultTable":a.setIcon("sap-icon://table-view");a.setTooltip(Te.getText("displayTable"));a.setKey("searchResultTable");break;case"searchResultGrid":a.setIcon("sap-icon://grid");a.setTooltip(Te.getText("displayGrid"));a.setKey("searchResultGrid");break;default:a.setVisible(false)}return a}});this.resultViewSwitch.addStyleClass("sapUshellSearchResultViewSwitch");this.resultViewSwitch.setLayoutData(new P({priority:Le.High}))},isShowMoreFooterVisible:function e(){var t=this.getModel();return t.getProperty("/boCount")>t.getProperty("/boResults").length},assembleCenterArea:function e(t){var r=this;this.sortDialog=this.assembleSearchResultSortDialog();this.searchResultList=this.assembleSearchResultList(t);this.searchResultTable=this.assembleSearchResultTable(t);this.searchResultTable["addDelegate"]({onBeforeRendering:function e(){r.updateTableLayout()},onAfterRendering:function e(){var t=$(r.searchResultTable.getDomRef()).find("table > thead > tr:first");if(t){t.attr("aria-labelledby",r.countBreadcrumbsHiddenElement.getId())}}});this.searchResultGrid=this.assembleSearchResultGrid(t);this.appSearchResult=this.assembleAppSearch(t);this.showMoreFooter=this.assembleShowMoreFooter();var a=[this.sortDialog,this.searchResultList,this.searchResultTable,this.searchResultGrid,this.appSearchResult,this.showMoreFooter,this.countBreadcrumbsHiddenElement];return a},assembleSearchResultSortDialog:function e(){var t=this;var r=new Q(this.getId()+"-sortDialog",{sortDescending:{parts:[{path:"/orderBy"}],formatter:function e(t){return Object.keys(t).length===0||t.sortOrder==="DESC"}},confirm:function e(a){var s=a.getParameter("sortItem");var i=a.getParameter("sortDescending");var o=t.getModel();if(typeof s==="undefined"||s.getBindingContext().getObject().attributeId==="DEFAULT_SORT_ATTRIBUTE"){r.setSortDescending(true);o.resetOrderBy(true)}else{o.setOrderBy({orderBy:s.getBindingContext().getObject().attributeId,sortOrder:i===true?"DESC":"ASC"},true)}},cancel:function e(){},resetFilters:function e(){setTimeout(function(){r.setSortDescending(true);r.setSelectedSortItem("searchSortAttributeKeyDefault")},500)}});return r},assembleSearchResultGrid:function e(t){var r=this.getModel();var a;if(typeof r.config.customGridView==="function"){try{a=r.config.customGridView()}catch(e){var s=new le.ConfigurationExitError("customGridView",r.config.applicationComponent,e);throw s}}else{var i=new te("",{rowSize:"11rem",columnSize:"11rem",gap:"0.5rem"});a=new u(t+"-ushell-search-result-grid",{layout:i,snapToRow:true})}a.bUseExtendedChangeDetection=false;a.bindProperty("visible",{parts:["/resultViewType","/count"],formatter:function e(t,r){return t==="searchResultGrid"&&r!==0}});a.addStyleClass("sapUshellSearchGrid");return a},assembleSearchResultTable:function e(t){var r=this;var a=this;var s=new l(t+"-ushell-search-result-table",{mode:{parts:[{path:"/multiSelectionEnabled"}],formatter:function e(t){return t===true?Ve.MultiSelect:Ve.None}},noDataText:"{i18n>noCloumnsSelected}",visible:{parts:[{path:"/resultViewType"},{path:"/count"}],formatter:function e(t,r){return t==="searchResultTable"&&r!==0}},popinLayout:Ae.GridLarge,rememberSelections:false,selectionChange:function e(){var t=r.getModel();t.updateMultiSelectionSelected()},sticky:["ColumnHeaders"]});s.bindAggregation("columns",{path:"/tableColumns",factory:function e(r,a){var s=a.getObject();var i=new _(t+"-"+s.persoColumnId,{header:new U("",{text:"{name}"}),visible:true,width:"{width}"});return i}});s.bindItems({path:"/tableRows",factory:function e(t,r){return a.assembleTableItems(r)}});s.addStyleClass("sapElisa-search-result-table");s.addEventDelegate({onAfterRendering:function e(){var t=$(r.getDomRef());t.find("table tbody tr").each(function(){var e=$(this);var t=sap.ui.getCore().byId(e.attr("id"));if(t){var r=t.getAriaLabelledBy();if($.inArray(a.countBreadcrumbsHiddenElement.getId(),r)===-1){t.addAriaLabelledBy(a.countBreadcrumbsHiddenElement)}}return false});t.find(".sapMListTblCell").each(function(){var e=$(this)[0];y.attachEventHandlersForTooltip(e)});t.find(".sapMListTblSubCntVal").each(function(){var e=$(this)[0];y.attachEventHandlersForTooltip(e)})}});return s},assembleTableItems:function e(t){var r=t.getObject();if(r.type==="footer"){return new j("",{visible:false})}return this.assembleTableMainItems(r,t.getPath())},assembleTableMainItems:function e(t,r){var a=this;var s=r+"/cells";var i=new N("",{selected:{path:"selected"}}).addStyleClass("sapUshellSearchTable");i.bindAggregation("cells",{path:s,factory:function e(t,r){if(r.getObject().isTitle){var s="";var i=false;var o=true;var n=r.getObject().titleNavigation;if(n instanceof Ne){i=typeof n.targetFunction==="function";s=n.targetUrl}if((typeof s!=="string"||s.length===0)&&i===false){o=false}var l=new ke("",{navigationTarget:n,text:{path:"value"},wrapping:true});var u=r.getObject().titleIconUrl;if(u){var c=new C("",{src:u});l.setAggregation("icon",c)}l.addStyleClass("sapUshellSearchResultListItem-MightOverflow");l.addStyleClass("sapUshellSearchTableTitleLink");var d=l;var p=r.getObject().titleInfoIconUrl;if(p){var g=new C("",{src:p,tooltip:Te.getText("collectionShared")}).addStyleClass("sapUshellSearchTableTitleInfoIcon");if(!o){g.addStyleClass("sapUshellSearchTableTitleInfoIconDisabled")}d=new Y("",{items:[l,g]})}return d}if(r.getObject().isRelatedApps){var f=r.getObject().navigationObjects;var v=[];var S;var y=function e(t,r){if(r instanceof Ne){r.performNavigation({event:t})}};for(var m=0;m<f.length;m++){var b=f[m];S=new w("",{text:b===null||b===void 0?void 0:b.text,tooltip:b===null||b===void 0?void 0:b.text});S.attachPress(b,y);v.push(S)}var D=new w("",{icon:"sap-icon://action",press:function e(){var t=new z("",{buttons:v,placement:Fe.Auto});t.openBy(D)}});D.addStyleClass("sapElisaSearchTableRelatedAppsButton");return D}var R=r.getObject().defaultNavigationTarget;if(R instanceof Ne){var T=new ke("",{navigationTarget:null,wrapping:true,tooltip:r.getObject().tooltip||""});T.setNavigationTarget(R);T.setText(r.getObject().value);T.addStyleClass("sapUshellSearchResultListItem-MightOverflow");var I=null;var B=r.getObject().icon;if(typeof B==="string"&&B.startsWith("sap-icon://")){I=new C({src:B});I.addStyleClass("sapUshellSearchResultListItem-AttributeIcon");T.setAggregation("icon",I)}return T}if(r.getObject().isExtendTableColumnCell){var M=a.getModel();return M.config.extendTableColumn.bindingFunction(r.getObject())}var F=new h("",{text:{path:"value"},isForwardEllipsis4Whyfound:true}).addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(r.getObject().icon){var L=new C("",{src:r.getObject().icon});F.setAggregation("icon",L)}return F}});return i},assembleShowMoreFooter:function e(){var t=this;var r=new w(this.getId()+"-resultview-moreFooter-button",{text:"{i18n>showMore}",type:Ie.Transparent,press:function e(){var r=t.getModel();r.setProperty("/focusIndex",r.getTop());var a=r.getTop()+r.pageSize;r.setTop(a);r.eventLogger.logEvent({type:Ue.SHOW_MORE})}});r.addStyleClass("sapUshellResultListMoreFooter");var a=new k(this.getId()+"-resultview-moreFooter",{visible:{parts:[{path:"/boCount"},{path:"/boResults"}],formatter:function e(t,r){return r.length<t}},justifyContent:Pe.Center});a.addStyleClass("sapUshellResultListMoreFooterContainer");a.addItem(r);return a},assembleSearchResultList:function e(t){var r=this;var a=new n(t+"-ushell-search-result-list",{mode:Ve.None,width:"auto",showNoData:false,visible:{parts:[{path:"/resultViewType"},{path:"/count"}],formatter:function e(t,r){return t==="searchResultList"&&r!==0}}});a.bindItems({path:"/results",factory:function e(t,a){return r.assembleListItem(t,a)}});return a},assembleAppSearch:function e(t){var r=this;var a=new te("",{rowSize:"5.5rem",columnSize:"5.5rem",gap:"0.25rem"});var s=new ee(t+"-ushell-search-result-app",{layout:a,snapToRow:true,visible:{parts:[{path:"/count"}],formatter:function e(t){var a=r.getModel();return(a.isAppCategory()||a.isUserCategoryAppSearchOnlyWithoutBOs())&&t!==0}},items:{path:"/appResults",factory:function e(t,a){var s=r.getModel();if(s.isAppCategory()||s.isUserCategoryAppSearchOnlyWithoutBOs()){var i=a.getObject();var o=i.visualization;var n=s.uShellVisualizationInstantiationService;var l=n.instantiateVisualization(o);l.attachPress(function(){s.eventLogger.logEvent({type:Ue.TILE_NAVIGATE,tileTitle:o.title,targetUrl:o.targetURL})});l.addEventDelegate({onAfterRendering:r.highlightTile});l.setActive(false,true);l.setLayoutData(new re(l.getLayout()));return l}return new G("",{text:""})}}});s.addStyleClass("sapUshellSearchGridContainer");var i=new w({text:"{i18n>showMore}",type:Ie.Transparent,visible:{parts:[{path:"/appCount"},{path:"/appResults"}],formatter:function e(t,a){var s=r.getModel();return(s.isAppCategory()||s.isUserCategoryAppSearchOnlyWithoutBOs())&&a.length<t}},press:function e(){var t=r.getModel();var a=t.getTop()+t.pageSize;t.setProperty("/focusIndex",t.getTop());t.setTop(a);t.eventLogger.logEvent({type:Ue.SHOW_MORE})}});i.addStyleClass("sapUshellResultListMoreFooter");var o=new R("",{width:"100%",visible:{parts:[{path:"/count"}],formatter:function e(t){var a=r.getModel();return(a.isAppCategory()||a.isUserCategoryAppSearchOnlyWithoutBOs())&&t!==0}},content:[s,i]});o.addStyleClass("sapUshellResultApps");return o},highlightTile:function e(t){var r;var a=(r=t["srcControl"])===null||r===void 0?void 0:r.getAggregation("content");if(a){var s=a.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")});if(s.length===0&&a.getComponentInstance){s=a.getComponentInstance().findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")})}if(s.length>0){var i;var o=s[0];var n=new we;n.setHighlightTerms((i=t["srcControl"])===null||i===void 0?void 0:i.getModel().getProperty("/uiFilter/searchTerm"));n.highlight(o)}}},assembleAppContainerResultListItem:function e(t){var r=this;var a=new te("",{rowSize:"5.5rem",columnSize:"5.5rem",gap:"0.25rem"});var s="".concat(t,"-appItemContainer");var i=new ee(s,{layout:a,snapToRow:true,items:{path:"/appResults",factory:function e(t,a){var s=r.getModel();if(!s.isAppCategory()){var i=a.getObject();var o=i.visualization;var n=s.uShellVisualizationInstantiationService;var l=n.instantiateVisualization(o);l.attachPress(function(){var e=r.getModel();e.eventLogger.logEvent({type:Ue.TILE_NAVIGATE,tileTitle:o.title,targetUrl:o.targetURL})});l.addEventDelegate({onAfterRendering:r.highlightTile});l.setActive(false,true);l.setLayoutData(new re(l.getLayout()));return l}return new G(t,{text:""})}}});i.addStyleClass("sapUshellSearchGridContainer");i.addEventDelegate({onAfterRendering:function e(){var t=r.getModel();if(i.getDomRef().clientWidth===0){return}var a=i.getDomRef().clientWidth-176;if(a<184){a=184}var o=Math.floor(a/184);var n=i.getItems();var l=t.getProperty("/appCount");var u=t.getProperty("/boCount");var c=n[n.length-1];if(c.hasStyleClass("sapUshellSearchResultListItemAppsShowMore")){return}if(n.length>o+1){var h=0,d=0;for(;d<n.length;d++){h=h+n[d].getDomRef().clientWidth+4;if(h>a){break}}var p=t.getProperty("/appResults");t.setProperty("/appResults",p.slice(0,d))}else{if(l>o&&!c.hasStyleClass("sapUshellSearchResultListItemAppsShowMore")){var g="".concat(s,"--showMore");var f=new W(g,{tileContent:new q("".concat(g,"--content"),{content:new G("".concat(g,"--content--text"),{text:Te.getText("showMoreApps")})}),press:function e(){var t=r.getModel();t.setDataSource(t.appDataSource)}});f.addStyleClass("sapUshellSearchResultListItemAppsShowMore");i.addItem(f);t.setProperty("/resultViewType","appSearchResult");t.setProperty("/resultViewType","searchResultList");t.setProperty("/boCount",0);t.setProperty("/boCount",u)}}}},i);var o=new j("".concat(this.getId(),"-appItem"),{content:i});o.addStyleClass("sapUshellSearchResultListItem");o.addStyleClass("sapUshellSearchResultListItemApps");o.addEventDelegate({onAfterRendering:function e(){var t=$(o.getDomRef());t.removeAttr("tabindex");t.removeAttr("role");t.attr("aria-hidden","true")}},o);return o},assembleResultListItem:function e(t,r){var a=this.getModel();var s=a.config.getDataSourceConfig(r.dataSource);var i={dataSource:r.dataSource,title:"{title}",titleDescription:"{titleDescription}",titleNavigation:{path:"titleNavigation"},type:"{dataSourceName}",imageUrl:"{imageUrl}",imageFormat:"{imageFormat}",imageNavigation:{path:"imageNavigation"},geoJson:"{geoJson}",attributes:{path:"itemattributes"},navigationObjects:{path:"navigationObjects"},selected:{path:"selected"},expanded:{path:"expanded"},positionInList:{path:"positionInList"},resultSetId:{path:"resultSetId"},layoutCache:{path:"layoutCache"},titleIconUrl:{path:"titleIconUrl"},titleInfoIconUrl:{path:"titleInfoIconUrl"}};var o;if(s.searchResultListItemControl){o=new s.searchResultListItemControl(i)}else if(s.searchResultListItemContentControl){i["content"]=new s.searchResultListItemContentControl;o=new g("".concat(t,"--customItemContent"),i)}else{o=new p("".concat(t,"--itemContent"),i)}if(o.setCountBreadcrumbsHiddenElement){o.setCountBreadcrumbsHiddenElement(this.countBreadcrumbsHiddenElement)}var n=new j("".concat(t,"--customListItem"),{content:o,type:xe.Inactive});n.addStyleClass("sapUshellSearchResultListItem");if(o.setParentListItem){o.setParentListItem(n)}return n},assembleListItem:function e(t,r){var a=r.getObject();if(a.type==="footer"){return new j("".concat(t,"-footerItem"))}else if(a.type==="appcontainer"){this.appResultListItem=this.assembleAppContainerResultListItem(t);return this.appResultListItem}return this.assembleResultListItem(t,a)},assignDragDropConfig:function e(){var t=this.getDragDropConfig();if(t.length===0){t=this._dragDropConfig||[]}if(t.length>0){var r;switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){r=this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){r=this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){r=this.searchResultGrid}break}if(r){var a=be(t),s;try{for(a.s();!(s=a.n()).done;){var i=s.value;r.addDragDropConfig(i)}}catch(e){a.e(e)}finally{a.f()}}}},addDragDropConfig:function e(t){switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){this.searchResultList.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){this.searchResultTable.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){this.searchResultGrid.addDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig();return this.searchResultGrid}break;case"":this._dragDropConfig=[t]}return this},insertDragDropConfig:function e(t,r){var a=this;switch(this.getResultViewType()){case"appSearchResult":break;case"searchResultList":if(this.searchResultList){this.searchResultList.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultList}break;case"searchResultTable":if(this.searchResultTable){this.searchResultTable.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultTable}break;case"searchResultGrid":if(this.searchResultGrid){this.searchResultGrid.insertDragDropConfig(t,r);this._dragDropConfig=this.getDragDropConfig();return this.searchResultGrid}break;case"":setTimeout(function(){return a.insertDragDropConfig(t,r)},500)}return this},indexOfDragDropConfig:function e(t){var r,a,s,i,o,n;if((r=this.searchResultList)!==null&&r!==void 0&&r.getDragDropConfig()&&((a=this.searchResultList)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){return this.searchResultList.indexOfDragDropConfig(t)}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((i=this.searchResultTable)===null||i===void 0?void 0:i.getDragDropConfig().length)>0){return this.searchResultTable.indexOfDragDropConfig(t)}else if((o=this.searchResultGrid)!==null&&o!==void 0&&o.getDragDropConfig()&&((n=this.searchResultGrid)===null||n===void 0?void 0:n.getDragDropConfig().length)>0){return this.searchResultGrid.indexOfDragDropConfig(t)}else{return-1}},getDragDropConfig:function e(){var t,r,a,s,i,o;if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){return this.searchResultList.getDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((s=this.searchResultTable)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){return this.searchResultTable.getDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){return this.searchResultGrid.getDragDropConfig()}else{return[]}},removeDragDropConfig:function e(t){var r,a,s,i,o,n;var l=null;if((r=this.searchResultList)!==null&&r!==void 0&&r.getDragDropConfig()&&((a=this.searchResultList)===null||a===void 0?void 0:a.getDragDropConfig().length)>0){l=this.searchResultList.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else if((s=this.searchResultTable)!==null&&s!==void 0&&s.getDragDropConfig()&&((i=this.searchResultTable)===null||i===void 0?void 0:i.getDragDropConfig().length)>0){l=this.searchResultTable.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else if((o=this.searchResultGrid)!==null&&o!==void 0&&o.getDragDropConfig()&&((n=this.searchResultGrid)===null||n===void 0?void 0:n.getDragDropConfig().length)>0){l=this.searchResultGrid.removeDragDropConfig(t);this._dragDropConfig=this.getDragDropConfig()}else{}return l},removeAllDragDropConfig:function e(){var t,r,a,s,i,o;var n=[];if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){n=this.searchResultList.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((s=this.searchResultTable)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){n=this.searchResultTable.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){n=this.searchResultGrid.removeAllDragDropConfig();this._dragDropConfig=this.getDragDropConfig()}else{}return n},destroyDragDropConfig:function e(){var t,r,a,s,i,o;var n=this;if((t=this.searchResultList)!==null&&t!==void 0&&t.getDragDropConfig()&&((r=this.searchResultList)===null||r===void 0?void 0:r.getDragDropConfig().length)>0){n=this.searchResultList.destroyDragDropConfig()}else if((a=this.searchResultTable)!==null&&a!==void 0&&a.getDragDropConfig()&&((s=this.searchResultTable)===null||s===void 0?void 0:s.getDragDropConfig().length)>0){n=this.searchResultTable.destroyDragDropConfig()}else if((i=this.searchResultGrid)!==null&&i!==void 0&&i.getDragDropConfig()&&((o=this.searchResultGrid)===null||o===void 0?void 0:o.getDragDropConfig().length)>0){n=this.searchResultGrid.destroyDragDropConfig()}else{}this._dragDropConfig=[];return n},onAllSearchStarted:function e(){this.fireEvent("searchStarted")},onAllSearchFinished:function e(){var t=this;var r=this.getModel();this.assignDragDropConfig();this.chooseNoResultScreen();this.oFocusHandler.setFocus();if(r.config.isUshell){var a=sap.ui.getCore().byId("viewPortContainer");if(a!==null&&a!==void 0&&a.switchState){a.switchState("Center")}}this.fireEvent("searchFinished");var s=this.getModel().getProperty("/uiFilter/rootCondition");var i=this.getModel().getProperty("/count");var o=this.getModel().getProperty("/facetVisibility");var n=false;if(!o&&s&&s.hasFilters()){n=true}if(s&&r.filterWithoutFilterByConditions()){n=false}if(s&&typeof r.config.hasSpaceFiltersOnly==="function"){if(r.config.hasSpaceFiltersOnly(s)===true){n=false}}var l=i!==0||r.config.showSearchBarForNoResults;setTimeout(function(){t.adjustSearchContainerHeightClasses(l,n);t.adjustSearchbarCustomGenericButtonWidth()},0);if(!this.tablePersonalizer){this.tablePersonalizer=new _e(r)}this.tablePersonalizer.update(this.searchResultTable)},updateTableLayout:function e(){if(!this.getModel()||!this.getModel().getDataSource()){return}var t=this.searchResultTable.getColumns();var r=t.sort(this._orderColumns);var a=0;r.forEach(function(e){e.setDemandPopin(false);if(e.getVisible()){a++;e.setDemandPopin(true);e.setPopinDisplay(Ee.Inline);e.setMinScreenWidth(12*a+"rem")}});if(a<=3){this.searchResultTable.setFixedLayout(false)}else{this.searchResultTable.setFixedLayout(true)}},_orderColumns:function e(t,r){if(t.getOrder()<r.getOrder()){return-1}if(t.getOrder()>r.getOrder()){return 1}return 0},createSearchPage:function e(t){var r=this;var a=this.getModel();this.oFilterBar.bindProperty("visible",{parts:[{path:"/count"},{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"}],formatter:function e(t,s,i){var o=false;if(!s&&i&&i.hasFilters()){o=true}if(i&&a.filterWithoutFilterByConditions()){o=false}if(i&&typeof a.config.hasSpaceFiltersOnly==="function"){if(a.config.hasSpaceFiltersOnly(i)===true){o=false}}if(i&&typeof a.config.isFilterBarVisible==="function"){try{if(!a.config.isFilterBarVisible(i)){o=false}}catch(e){var n=new le.ConfigurationExitError("isFilterBarVisible",a.config.applicationComponent,e);r.errorHandler.onError(n)}}var l=t!==0||a.config.showSearchBarForNoResults;r.adjustSearchContainerHeightClasses(l,o);return o}});this.oFooter=this.createFooter(this.getId());if(this.oFooter){this.oFooter.bindProperty("visible",{parts:[{path:"/errors/length"}],formatter:function e(t){var r=t>0?true:false;return r}})}this.searchContainer=this.createSearchContainer(t);var s=[this.oSearchBar,this.oFilterBar,this.searchContainer];return s},createNoResultScreen:function e(t,r){var a=[];var s=ne.Auto;var i;var o;var n;if(r==="folder"){i={parts:[{path:"/queryFilter/searchTerm"}],formatter:function e(t){return Te.getText("no_results_info_1_folderEmpty",[t])}};o=Te.getText("no_results_info_2_folderEmpty");n=oe.EmptyList}else{i={parts:[{path:"/queryFilter/searchTerm"}],formatter:function e(t){return Te.getText("no_results_info_1",[t])}};o=Te.getText("no_results_info_2");n=oe.NoSearchResults}var l={title:i,description:o,illustrationSize:s,illustrationType:n,additionalContent:a};var u;if(r==="folder"){u="".concat(t,"-searchContainerResultsView-noResultFolderScreen")}else{u="".concat(t,"-searchContainerResultsView-noResultScreen")}var c=new ie("".concat(u,"-searchContainerResultsView-noResultScreen-illustratedMessage"),l).addStyleClass("sapElisaNoResultScreen");c.addStyleClass("sapUiMediumMarginTop");var h=new Z("".concat(u,"-searchContainerResultsView-noResultScreen"),{items:c,width:"100%",justifyContent:Pe.Center,visible:{parts:[{path:"/count"},{path:"/isBusy"},{path:"/firstSearchWasExecuted"}],formatter:function e(t,r,a){return t===0&&!r&&a}}});if(r==="folder"){this.noResultScreenFolder=h}else{this.noResultScreen=h}return h},createSearchContainer:function e(t){var r=this;var a=this.getModel();this.countBreadcrumbsHiddenElement=this.assembleCountBreadcrumbsHiddenElement();this.centerArea=this.assembleCenterArea(t);this.oSearchCountBreadcrumbs=new d(this.getId()+"-SearchCountBreadcrumbs").addStyleClass("sapElisaSearchContextBarContent");this.oContextBar=new V(this.getId()+"-searchContextBar",{contentLeft:this.oSearchCountBreadcrumbs,design:{parts:[{path:"/isFolderMode"}],formatter:function e(t){if(a.config.folderMode===true&&t===true){r.oContextBar.addStyleClass("sapElisaSearchContextBarFolderMode")}else{r.oContextBar.removeStyleClass("sapElisaSearchContextBarFolderMode")}return ze.Auto}}}).addStyleClass("sapElisaSearchContextBar");this.oContextBarContainer=new R("",{content:[this.oContextBar]});this.oContextBarContainer.addStyleClass("sapElisaSearchContextBarContainer");this.oContextBarContainer.addStyleClass("sapUiNoMarginBegin");this.oContextBarContainer.addStyleClass("sapUiNoMarginEnd");this.oSearchResultContainer=new o("".concat(t,"-searchContainerResultsView"),{centerArea:this.centerArea,contextBarContainer:this.oContextBarContainer,noResultScreen:this.createNoResultScreen(t,"default")});var s={resultContainer:this.oSearchResultContainer,searchIsBusy:{path:"/isBusy"},busyDelay:{path:"/busyDelay"},facetPanelResizable:a.config.facetPanelResizable,facetPanelWidthInPercent:a.config.facetPanelWidthInPercent,facetPanelContent:new S("".concat(this.getId(),"-SearchFacetFilter")),showFacets:{parts:[{path:"/count"},{path:"/facetVisibility"},{path:"/uiFilter/rootCondition"},{path:"/isBusy"},{path:"/config"}],formatter:function e(t,r,a,s,i){var o=true;if(!r){o=false}var n=a&&a.conditions&&a.conditions.length>0;if(t===0&&!i.displayFacetPanelInCaseOfNoResults&&!n&&!s){o=false}return o}},footer:this.oFooter,showFooter:{parts:[{path:"/errors/length"}],formatter:function e(t){return t>0}}};var n=new i("".concat(this.getId(),"-searchLayout"),s).addStyleClass("sapUshellSearchLayout").addStyleClass("sapUshellSearchLayoutHeightDefault");return n},isSearchFieldGroupLocatedInsideSearchComposite:function e(t){if(typeof t==="undefined"||t===null){return false}else if(t.classList){if(t.classList.contains("sapUshellSearchInputHelpPage")){return true}else if(typeof t.parentNode!=="undefined"){return this.isSearchFieldGroupLocatedInsideSearchComposite(t.parentNode)}else{console.error("function: isSearchFieldGroupLocatedInsideSearchComposite: Element has no property 'parentNode' but has property 'classlist'");return false}}else if(t.nodeType===Node.DOCUMENT_NODE){return false}else{console.error("function: isSearchFieldGroupLocatedInsideSearchComposite: Element has no property 'classlist'");return false}},adjustSearchbarCustomGenericButtonWidth:function e(){if(this.getDomRef()===null){return}if(this.oFilterButton.getVisible()&&this.oFilterButton.getDomRef()===null){return}var t=window.document.getElementById(this.getDomRef().id).getBoundingClientRect();var r=this.oFilterButton.getVisible()?window.document.getElementById(this.oFilterButton.getDomRef().id).getBoundingClientRect().width:0;var a=0;if(this.oDataSourceTabBar.getVisible()){var s=this.oDataSourceTabBar.getItems().reduce(function(e,t){return e+t["getText"]().length},0);if(s<20){this.oDataSourceTabBar.addStyleClass("searchDataSourceTabStripBarTinyItemsTextLength")}else{this.oDataSourceTabBar.removeStyleClass("searchDataSourceTabStripBarTinyItemsTextLength")}var i=this.oDataSourceTabBar.getDomRef();if(i!==null&&i!==void 0&&i.id){a=window.document.getElementById(i.id).getBoundingClientRect().width}else{}}var o=t.width-r-a;var n=this.convertPixelToRem(o);if(a===0){if(n<30){this.oGenericItemsToolbar.setWidth("".concat(n-1.1,"rem"))}else{this.oGenericItemsToolbar.setWidth("".concat(n-3,"rem"))}}else{this.oGenericItemsToolbar.setWidth("".concat(n-2.75,"rem"))}},_resizeHandler:function e(){var t=this;setTimeout(function(){return t.adjustSearchbarCustomGenericButtonWidth()},0)},convertPixelToRem:function e(t){return t/parseFloat(getComputedStyle(document.documentElement).fontSize)},adjustSearchContainerHeightClasses:function e(t,r){var a=this.oSearchFieldGroup?this.isSearchFieldGroupLocatedInsideSearchComposite(this.oSearchFieldGroup.input.getDomRef()):false;this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefault");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBarHasSearchBar");this.searchContainer.removeStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBarHasSearchBar");if(r){if(a){if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchInputBar")}}else{if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightFilterbar")}}}else{if(a){if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBarHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchInputBar")}}else{if(t){this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefaultHasSearchBar")}else{this.searchContainer.addStyleClass("sapUshellSearchLayoutHeightDefault")}}}},createFooter:function e(t){var r=this;var a=this.getModel();this.oErrorPopover=new J(t+"-"+Qe+++"-"+"-searchMessagePopover",{placement:Fe.Top});this.oErrorPopover.setModel(a);a.setProperty("/messagePopoverControlId",this.oErrorPopover.getId());this.oErrorPopover.bindAggregation("items",{path:"/errors",factory:function e(){var t=new X("",{title:"{title}",description:"{description}"});return t}});var s=new w(this.getId()+"-searchErrorButton",{icon:D.getIconURI("alert"),text:{parts:[{path:"/errors/length"}],formatter:function e(t){return t}},visible:{parts:[{path:"/errors/length"}],formatter:function e(t){return t>0},mode:T.OneWay},type:Ie.Emphasized,tooltip:Te.getText("errorBtn"),press:function e(){if(r.oErrorPopover.isOpen()){r.oErrorPopover.close()}else{r.oErrorPopover.setVisible(true);r.oErrorPopover.openBy(s)}}});s.addStyleClass("sapUiSmallMarginBegin");s["addDelegate"]({onAfterRendering:function e(){var t=r.getModel();if(!t.getProperty("/isErrorPopovered")){s.firePress();t.setProperty("/isErrorPopovered",true)}}});s.setLayoutData(new P("",{priority:Le.NeverOverflow}));var i=new A(this.getId()+"-searchFooter",{content:[s]});i.addStyleClass("sapUiTinyMarginTop");return i},chooseNoResultScreen:function e(){var t;var r=this.getModel();var a;if(typeof(r===null||r===void 0?void 0:(t=r.config)===null||t===void 0?void 0:t.getCustomNoResultScreen)==="function"){try{a=r.config.getCustomNoResultScreen(r.getDataSource(),r)}catch(e){var s=new le.ConfigurationExitError("chooseNoResultScreen",r.config.applicationComponent,e);this.errorHandler.onError(s);a=this.oSearchResultContainer.getAggregation("noResultScreen")}}if(!a){if(r.getProperty("/isFolderMode")){if(!this.noResultScreenFolder){this.noResultScreenFolder=this.createNoResultScreen(this.getId(),"folder")}a=this.noResultScreenFolder}else{a=this.noResultScreen}}this.oSearchResultContainer.setNoResultScreen(a)},openSortDialog:function e(){this.sortDialog.unbindAggregation("sortItems",false);this.sortDialog.bindAggregation("sortItems",{path:"/sortableAttributes",factory:function e(){return new K("",{key:{path:"key"},text:{path:"name"},selected:{path:"selected"}})}});this.sortDialog.open()},openShowMoreDialog:function e(t){Ge(this.getModel(),t)},getSearchResultSet:function e(){var t=this.getModel();if(typeof t["_perspective"]==="undefined"||t["_perspective"]===null){return{items:[]}}var r=t.getProperty("/results");var a={items:r.map(function(e,r){var a={data:je(e.sinaItem),selected:e.selected,setSelected:function e(a){t.setProperty("/results/".concat(r,"/selected"),a)}};return a})};return a},getResultViewTypes:function e(){var t=this.getModel();return t===null||t===void 0?void 0:t.getResultViewTypes()},setResultViewTypes:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultViewTypes' is mandatory.\n"+'Valid example: setResultViewTypes(["searchResultList"])')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}this.setResultViewSettings({resultViewTypes:t,resultViewType:r.getResultViewType()});return this},getResultViewType:function e(){var t=this.getModel();return t===null||t===void 0?void 0:t.getResultViewType()},setResultViewType:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultlViewType' is mandatory.\n"+'Valid example: setResultViewType("searchResultList")')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}this.setResultViewSettings({resultViewTypes:r.getResultViewTypes(),resultViewType:t});return this},getResultViewSettings:function e(){var t=this.getModel();if(t){return{resultViewTypes:t.getResultViewTypes(),resultViewType:t.getResultViewType()}}},setResultViewSettings:function e(t){var r=this.getModel();if(typeof t==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"The function parameter 'resultlViewSettings' is mandatory.\n"+'Valid example: setResultViewSettings({resultViewTypes: ["searchResultList", "searchResultTable"], resultViewType: "searchResultList"})')}else if(typeof r==="undefined"||typeof r.config==="undefined"){return this}if(typeof t.resultViewTypes==="undefined"||typeof t.resultViewType==="undefined"){throw Error("Search Result View Type Error In SearchCompositeControl:\n\n"+"One of properties of function parameter is undefined.\n"+'Valid example: setResultViewSettings({resultViewTypes: ["searchResultList", "searchResultTable"], resultViewType: "searchResultList"})')}r.calculateResultViewSwitchVisibility({resultViewTypes:t.resultViewTypes,resultViewType:t.resultViewType});this.showMoreFooter.setVisible(this.isShowMoreFooterVisible());r.enableOrDisableMultiSelection();r._firePerspectiveQuery();return this},getControllerName:function e(){return"sap.esh.search.ui.container.Search"},getCssClass:function e(){return this._cssClass},setCssClass:function e(t){if(t&&!this.hasStyleClass(t)){this._cssClass=t;this.addStyleClass(t)}return this},getDataSource:function e(){if(typeof this.getModel()!=="undefined"){var t=this.getModel();var r=t.getDataSource();return r.id}},setDataSource:function e(t,r,a){if(typeof this.getModel()!=="undefined"){var s=this.getModel();s.setDataSourceById(t,r,a)}return this},getSearchTerm:function e(){if(typeof this.getModel()!=="undefined"){var t=this.getModel();return t.getSearchBoxTerm()}return qe.getMetadata().getPropertyDefaults()["searchTerm"]},setSearchTerm:function e(t,r){if(typeof this.getModel()!=="undefined"){var a=this.getModel();a.setSearchBoxTerm(t,r)}return this},getFilterRootCondition:function e(){if(this.getModel()){var t=this.getModel();return t.getFilterRootCondition()}return qe.getMetadata().getPropertyDefaults()["filterRootCondition"]},setFilterRootCondition:function e(t,r){if(this.getModel()){var a=this.getModel();a.setFilterRootCondition(t,r)}return this},renderSearchUrlFromParameters:function e(t,r,a){var s=this.getModel();if(!s){throw new He(null,"cannot construct URL because model is undefined")}return s.searchUrlParser.renderFromParameters(t,r,a)},createSearchNavigationTarget:function e(t,r){var a=this.getModel();return a.createSearchNavigationTarget(t,r)},createStaticHierarchySearchNavigationTarget:function e(t,r,a,s){var i=this.getModel();return i.sinaNext.createStaticHierarchySearchNavigationTarget(t,r,a,s)},createContextBasedNavigationTarget:function e(t,r){var a=this.getModel();return a.sinaNext._createNavigationTarget({targetFunction:r,text:t})},addEventConsumer:function e(t){var r;var a=this.getModel();a===null||a===void 0?void 0:(r=a.eventLogger)===null||r===void 0?void 0:r.addConsumer(t)},getEventConsumers:function e(){var t;var r=this.getModel();return r===null||r===void 0?void 0:(t=r.eventLogger)===null||t===void 0?void 0:t.consumers},setEventConsumers:function e(t){var r;var a=this.getModel();a===null||a===void 0?void 0:(r=a.eventLogger)===null||r===void 0?void 0:r.setConsumers(t);return this}});qe.eshCompCounter=0;qe.getUI5ControlSettings=function e(t){var r={};var a=qe.getMetadata().getProperties();for(var s in a){if(typeof t[s]==="undefined"){continue}r[s]=t[s]}return r};qe.unifyInputParameters=function e(t,r){if(typeof t!=="string"&&t!==undefined&&r===undefined){r=t;t=r&&r.id}else if(typeof r==="undefined"){r={}}if(typeof t==="string"&&t.length>0){r.id=t}if(!t||t.length===0){t="eshComp"+"GenId_"+qe.eshCompCounter++;r.id=t}if(typeof t==="string"&&t.length>0&&typeof r.id!=="undefined"){if(t!==r.id){throw new Error("Constructor of component 'sap.esh.search.ui.SearchCompositeControl' has failed\n\n"+"sId and mSettings.id are not the same. It is sufficient to set either 'id' (sId) or 'settings.id' (mSettings.id).")}}return{sId:t,settings:r}};var Qe=1;return qe})})();
//# sourceMappingURL=SearchCompositeControl.js.map