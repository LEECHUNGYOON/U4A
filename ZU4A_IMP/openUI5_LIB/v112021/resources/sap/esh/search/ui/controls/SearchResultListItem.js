/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../i18n","sap/esh/search/ui/controls/SearchText","sap/esh/search/ui/SearchHelper","sap/esh/search/ui/controls/SearchRelatedObjectsToolbar","sap/m/Button","sap/m/library","sap/m/Label","sap/m/Text","sap/m/CheckBox","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ui/core/Control","../eventlogging/UserEvents","../UIUtil","./SearchLink","../sinaNexTS/sina/NavigationTarget"],function(e,t,i,s,a,r,n,l,o,d,h,c,u,p,g,m,f){function v(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}var b=v(e);var I=r["ButtonType"];var y=r["ListType"];var S=p["UserEventType"];var A=g["registerHandler"];var L=v(m);var _=f["NavigationTarget"];var x=u.extend("sap.esh.search.ui.controls.SearchResultListItem",{renderer:{apiVersion:2,render:function e(t,i){i._renderer(t,i)}},metadata:{properties:{dataSource:"object",itemId:"string",title:"string",titleDescription:"string",titleNavigation:"object",titleIconUrl:"string",titleInfoIconUrl:"string",geoJson:"object",type:"string",imageUrl:"string",imageFormat:"string",imageNavigation:"object",attributes:{type:"object",multiple:true},navigationObjects:{type:"object",multiple:true},selected:"boolean",expanded:"boolean",parentListItem:"object",additionalParameters:"object",positionInList:"int",resultSetId:"string",layoutCache:"object",countBreadcrumbsHiddenElement:"object"},aggregations:{_titleLink:{type:"sap.esh.search.ui.controls.SearchLink",multiple:false,visibility:"hidden"},_titleLinkDescription:{type:"sap.esh.search.ui.controls.SearchText",multiple:false,visibility:"hidden"},_titleInfoIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_titleDelimiter:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_typeText:{type:"sap.esh.search.ui.controls.SearchText",multiple:false,visibility:"hidden"},_typeLink:{type:"sap.esh.search.ui.controls.SearchLink",multiple:false,visibility:"hidden"},_typeLinkAriaDescription:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_multiLineDescriptionText:{type:"sap.esh.search.ui.controls.SearchText",multiple:false,visibility:"hidden"},_selectionCheckBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"},_expandButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"},_attributeLabels:{type:"sap.m.Label",multiple:true,visibility:"hidden"},_attributeValues:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},_attributeValuesWithoutWhyfoundHiddenTexts:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},_relatedObjectActionsToolbar:{type:"sap.esh.search.ui.controls.SearchRelatedObjectsToolbar",multiple:false,visibility:"hidden"},_titleLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_attributesLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_expandStateLabeledByText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},constructor:function e(i,r){var n=this;u.prototype.constructor.call(this,i,r);this._visibleAttributes=undefined;this._detailsArea=undefined;this._showExpandButton=false;this.setAggregation("_titleLink",new L("".concat(this.getId(),"--titleLink")).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-Title").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));this.setAggregation("_titleLinkDescription",new t("".concat(this.getId(),"--titleLinkDescription")).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));var h={src:{path:"titleInfoIconUrl"}};var p=new d("".concat(this.getId(),"--titleInfoIcon"),h);p.addStyleClass("sapUiSmallMarginEnd");this.setAggregation("_titleInfoIcon",p);p.addStyleClass("sapUshellSearchResultListItem-TitleInfoIcon");var g=new l("".concat(this.getId(),"--titleDelimiter"),{text:"|"});g.addEventDelegate({onAfterRendering:function e(){$(g.getDomRef()).attr("aria-hidden","true")}});this.setAggregation("_titleDelimiter",g.addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleDelimiter").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));this.setAggregation("_typeText",new t("".concat(this.getId(),"--typeText")).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleCategory").addStyleClass("sapUshellSearchResultListItem-MightOverflow"));this.setAggregation("_typeLinkAriaDescription",new c({text:b.getText("result_list_item_type_link_description")}));this.setAggregation("_typeLink",new L("".concat(this.getId(),"--typeLink")).addStyleClass("sapUshellSearchResultListItem-HeaderEntry").addStyleClass("sapUshellSearchResultListItem-TitleCategoryLink").addStyleClass("sapUshellSearchResultListItem-MightOverflow").addAriaDescribedBy(this.getAggregation("_typeLinkAriaDescription")));this.setAggregation("_multiLineDescriptionText",new t("".concat(this.getId(),"--multilineDescription"),{maxLines:5}).addStyleClass("sapUshellSearchResultListItem-MultiLineDescription").addStyleClass("sapUshellSearchResultListItem-MightOverflow").data("islongtext","true",true));this.setAggregation("_selectionCheckBox",new o("".concat(this.getId(),"--selectionCheckbox"),{select:function e(t){n.setProperty("selected",t.getParameter("selected"),true);var i=n.getModel();i.updateMultiSelectionSelected();if(t.getParameter("selected")){n.addStyleClass("sapUshellSearchResultListItem-Selected")}else{n.removeStyleClass("sapUshellSearchResultListItem-Selected")}}}));this.setAggregation("_expandButton",new a("".concat(this.getId(),"--expandButton"),{type:I.Transparent,press:function e(){n.toggleDetails()}}));this.setAggregation("_relatedObjectActionsToolbar",new s("".concat(this.getId(),"--relatedObjectActionsToolbar")));this.setAggregation("_titleLabeledByText",new c);this.setAggregation("_attributesLabeledByText",new c);this.setAggregation("_expandStateLabeledByText",new c)},_renderer:function e(t,i){var s=$(this.getDomRef());var a=s.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");if(a.css("display")==="none"){var r=this.getModel();if(r.config.optimizeForValueHelp){a.css("display","block")}}this._registerItemPressHandler();this._resetPrecalculatedValues();this._renderContainer(t,i);this._renderAccessibilityInformation(t)},_renderContainer:function e(t,i){var s;var a=this.getModel();t.openStart("div",this);t["class"]("sapUshellSearchResultListItem-Container");if(this.getProperty("imageUrl")){t["class"]("sapUshellSearchResultListItem-WithImage")}if(((s=this.getProperty("imageFormat"))===null||s===void 0?void 0:s.toLowerCase())==="documentthumbnail"){t["class"]("sapUshellSearchResultListItem-Document")}t.openEnd();this._renderContentContainer(t,i);if(!a.config.optimizeForValueHelp){this._renderExpandButtonContainer(t)}t.close("div")},_renderContentContainer:function e(t,i){var s=i.getModel();t.openStart("div",i.getId()+"-content");t["class"]("sapUshellSearchResultListItem-Content");if(!s.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-ContentValueHelp")}t.openEnd();this._renderTitleContainer(t,i);this._renderAttributesContainer(t);t.close("div")},_renderExpandButtonContainer:function e(t){var i=this;t.openStart("div",this.getId()+"-expand-button-container");t["class"]("sapUshellSearchResultListItem-ExpandButtonContainer");t.openEnd();t.openStart("div",this.getId()+"-expand-button");t["class"]("sapUshellSearchResultListItem-ExpandButton");t.openEnd();var s,a;var r=this.getProperty("expanded");if(r){s=h.getIconURI("slim-arrow-up");a=b.getText("hideDetailBtn_tooltip")}else{s=h.getIconURI("slim-arrow-down");a=b.getText("showDetailBtn_tooltip")}var n=this.getAggregation("_expandButton");n.setIcon(s);n.setTooltip(a);n.addEventDelegate({onAfterRendering:function e(){i.setAriaExpandedState()}});t.renderControl(n);t.close("div");t.close("div")},_renderTitleContainer:function e(t,i){var s=this;var a=this.getModel();if(!a.config.optimizeForValueHelp){t.openStart("div",this.getId()+"-title-and-image-container");t["class"]("sapUshellSearchResultListItem-TitleAndImageContainer");t.openEnd()}t.openStart("div",this.getId()+"-title-container");t["class"]("sapUshellSearchResultListItem-TitleContainer");if(a.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-TitleContainerValueHelp")}t.openEnd();this._renderCheckbox(t);var r=this.getAggregation("_titleLink");var n=this.getProperty("title");if(!n||n.trim().length===0){n=x.noValue}else{var l=this.getProperty("titleNavigation");r.setNavigationTarget(l);if(this.isHierarchyItem()){setTimeout(function(){if(s.supportsDragAndDrop(r,a)){r.getDomRef()["draggable"]=false;s.addStyleClass("sapUshellSearchResultListItem-NotDraggableNotClickable")}},100)}else if(a.config.optimizeForValueHelp){setTimeout(function(){if(s.supportsDragAndDrop(r,a)){r.getDomRef()["draggable"]=false}},100)}}r.setText(n);r.addEventDelegate({onAfterRendering:function e(){s.forwardEllipsis($(r.getDomRef()))}});if(this.getProperty("titleIconUrl")){var o=r.getAggregation("icon");if(o!==null){o.destroy()}var h=new d("".concat(this.getId(),"--titleIcon"),{src:this.getProperty("titleIconUrl")});h===null||h===void 0?void 0:h.addStyleClass("sapUshellSearchResultListItem-Clickable");r.setAggregation("icon",h);setTimeout(function(){if(!s.isHierarchyItem()&&s.supportsDragAndDrop(r,a)){var e=h===null||h===void 0?void 0:h.getDomRef();if(e){e["draggable"]=false}}},100)}t.renderControl(r);if(i.getProperty("titleInfoIconUrl")){var c=i.getAggregation("_titleInfoIcon");if(c){if(a.config.optimizeForValueHelp){c.addStyleClass("sapUshellSearchResultListItem-TitleInfoIconValueHelp")}t.renderControl(c)}}if(!a.config.optimizeForValueHelp){var u=this.getProperty("titleDescription");if(u&&u.trim().length>0){var p=this.getAggregation("_titleLinkDescription");p.setText(u);t.renderControl(p)}}if(a.config.optimizeForValueHelp){this._renderRelatedObjectsToolbar(t)}else{var g=this.getAggregation("_titleDelimiter");t.renderControl(g);if(a.getDataSource()===this.getProperty("dataSource")){var m=this.getAggregation("_typeText");m.setText(this.getProperty("type"));t.renderControl(m)}else{var f=this.getModel().getProperty("/uiFilter").clone();f.setDataSource(this.getProperty("dataSource"));var v=a.createSearchNavigationTarget(f,this.getProperty("type"));var I=this.getAggregation("_typeLink");I.setNavigationTarget(v);I.setText(this.getProperty("type"));I.setTooltip(b.getText("searchInDataSourceTooltip",[this.getProperty("dataSource").labelPlural]));t.renderControl(this.getAggregation("_typeLinkAriaDescription"));t.renderControl(I)}}t.close("div");if(!a.config.optimizeForValueHelp){this._renderImageForPhone(t);t.close("div")}},_renderCheckbox:function e(t){t.openStart("div",this.getId()+"-checkbox-expand-container");t["class"]("sapUshellSearchResultListItem-CheckboxExpandContainer");t.openEnd();t.openStart("div",this.getId()+"-checkbox-container");t["class"]("sapUshellSearchResultListItem-CheckboxContainer");t.openEnd();t.openStart("div",this.getId()+"-checkbox-alignment-container");t["class"]("sapUshellSearchResultListItem-CheckboxAlignmentContainer");t.openEnd();var i=this.getAggregation("_selectionCheckBox");var s=this.getProperty("selected");i.setSelected(s);t.renderControl(i);t.close("div");t.close("div");t.close("div")},_renderImageForPhone:function e(t){if(this.getProperty("imageUrl")){t.openStart("div",this.getId()+"-title-image");t["class"]("sapUshellSearchResultListItem-TitleImage");if(this.getProperty("imageFormat")==="round"){t["class"]("sapUshellSearchResultListItem-ImageContainerRound")}t.openEnd();t.openStart("div",this.getId()+"-image-container-aligmnent-helper");t["class"]("sapUshellSearchResultListItem-ImageContainerAlignmentHelper");t.openEnd();t.close("div");t.openStart("img",this.getId()+"-image-1");t["class"]("sapUshellSearchResultListItem-Image");t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("div");t.close("div")}},_renderImageForDocument:function e(t){if(this.getProperty("imageFormat")&&this.getProperty("imageFormat").toLowerCase()==="documentthumbnail"){var i=this.getProperty("imageNavigation");var s=i?i.targetUrl:"";if(typeof this._zoomIcon!=="undefined"){this._zoomIcon.destroy()}this._zoomIcon=new d("",{src:h.getIconURI("search"),useIconTooltip:false});this._zoomIcon.addStyleClass("".concat(this.getId(),"--zoomIcon"));this._zoomIcon.addStyleClass("sapUshellSearchResultListItem-DocumentThumbnailZoomIcon");var a=this.getProperty("imageUrl");t.openStart("div",this.getId()+"-document-thumbnail-container");t["class"]("sapUshellSearchResultListItem-DocumentThumbnailContainer");t.openEnd();if(s&&s.length>0){t.openStart("a",this.getId()+"-document-thumbnail-border-1");t.attr("href",s);t["class"]("sapUshellSearchResultListItem-DocumentThumbnailBorder");t.openEnd();t.openStart("div",this.getId()+"-document-thumbnail-dogear-1");t["class"]("sapUshellSearchResultListItem-DocumentThumbnail-DogEar");t.openEnd();t.close("div");t.renderControl(this._zoomIcon);if(a&&a.length>0){t.openStart("img",this.getId()+"-document-thumbnail-1");t["class"]("sapUshellSearchResultListItem-DocumentThumbnail");t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("img")}t.close("a")}else{t.openStart("div",this.getId()+"-document-thumbnail-border-2");t["class"]("sapUshellSearchResultListItem-DocumentThumbnailBorder");t.openEnd();t.openStart("div",this.getId()+"-document-thumbnail-dogear-2");t["class"]("sapUshellSearchResultListItem-DocumentThumbnail-DogEar");t.openEnd();t.close("div");t.renderControl(this._zoomIcon);if(a&&a.length>0){t.openStart("img",this.getId()+"-document-thumbnail-2");t["class"]("sapUshellSearchResultListItem-DocumentThumbnail");t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("img")}t.close("div")}t.close("div")}},_cutDescrAttributeOutOfAttributeList:function e(){var t=this.getProperty("attributes");for(var i=0;i<t.length;i++){var s=t[i];if(s.longtext){t.splice(i,1);this.setProperty("attributes",t);return s}}return undefined},_renderMultiLineDescription:function e(t){var i;var s=this.getModel();if(((i=this.getProperty("imageFormat"))===null||i===void 0?void 0:i.toLowerCase())==="documentthumbnail"){var a;var r=this._cutDescrAttributeOutOfAttributeList();if((r===null||r===void 0?void 0:(a=r.value)===null||a===void 0?void 0:a.length)>0){var n=this.getAggregation("_multiLineDescriptionText");n.setText(r.value);if(r.whyfound){n.data("ishighlighted","true",true)}else{n.data("ishighlighted","false",true)}if(r.valueWithoutWhyfound){var l=new c({});l.setText(r.valueWithoutWhyfound);n.data("tooltippedBy",l.getId(),true);n.addEventDelegate({onAfterRendering:function e(){var t=$(n.getDomRef());t.attr("aria-describedby",t.attr("data-tooltippedby"))}});this.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",l,true);t.renderControl(l)}this.adjustCssDragAndDrop(n,s);t.renderControl(n)}else{t.openStart("div",this.getId()+"-multiline-description");t["class"]("sapUshellSearchResultListItem-MultiLineDescription");t.openEnd();t.close("div")}}},_renderAttributesContainer:function e(t){var i=this.getModel();t.openStart("div",this.getId()+"-attribute-expand-container");t["class"]("sapUshellSearchResultListItem-AttributesExpandContainer");if(i.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-AttributesExpandContainerValueHelp")}var s=this.getProperty("expanded");if(s){t["class"]("sapUshellSearchResultListItem-AttributesExpanded")}t.openEnd();t.openStart("div",this.getId()+"-attributes-and-actions");t["class"]("sapUshellSearchResultListItem-AttributesAndActions");t.openEnd();if(!i.config.optimizeForValueHelp){this._renderImageForDocument(t);this._renderMultiLineDescription(t)}t.openStart("ul",this.getId()+"-attributes");t["class"]("sapUshellSearchResultListItem-Attributes");t.openEnd();var a=this.getProperty("attributes");if(!i.config.optimizeForValueHelp){this._renderImageAttribute(t,a.length===0)}this._renderAllAttributes(t,a);if(!i.config.optimizeForValueHelp){t.openStart("li",this.getId()+"-expand-spacer-attribute");t["class"]("sapUshellSearchResultListItem-ExpandSpacerAttribute");t.attr("aria-hidden","true");t.openEnd();t.close("li")}t.close("ul");if(!i.config.optimizeForValueHelp){this._renderRelatedObjectsToolbar(t)}t.close("div");t.close("div")},_renderAllAttributes:function e(i,s){var a=this;var r=this.getModel();if(s.length===0){i.openStart("li",this.getId()+"-generic-attribute-1");i["class"]("sapUshellSearchResultListItem-GenericAttribute");if(r.config.optimizeForValueHelp){i["class"]("sapUshellSearchResultListItem-GenericAttributeValueHelp")}i["class"]("sapUshellSearchResultListItem-MainAttribute");i["class"]("sapUshellSearchResultListItem-EmptyAttributePlaceholder");i.attr("aria-hidden","true");i.openEnd();i.close("li");return}var l;var o;var h;var u;var p,g,m;var f;var v;var b=this.getProperty("layoutCache")||{};this.setProperty("layoutCache",b,true);if(!b.attributes){b.attributes={}}var I=0,y=0;var S=4;var A=3;var R=[0,0,0];var T=[0,0,0,0];var C=2;var U=2;var D;var E=this.getProperty("imageFormat")&&this.getProperty("imageFormat").toLowerCase()==="documentthumbnail";var P=this.getProperty("imageUrl")&&!E&&!r.config.optimizeForValueHelp;if(E&&!r.config.optimizeForValueHelp){S=A=2;R=T=[0,0];C=U=4}var w=S*R.length;var O=A*T.length;if(P){w--;O--;R[0]++;T[0]++}this.destroyAggregation("_attributeLabels");this.destroyAggregation("_attributeValues");this.destroyAggregation("_attributeValuesWithoutWhyfoundHiddenTexts");var H=function e(t){return function(){var e=$(a.getDomRef());e.attr("aria-describedby",e.attr("data-tooltippedby"))}};for(I=0;!(C<=0&&U<=0)&&I<s.length;I++){l=s[I];var F=this.getModel();if(F.config.optimizeForValueHelp&&!l.whyfound){continue}if(E&&y>=4){break}if(l.isTitle){continue}if(w<=0&&O<=0&&!l.whyfound){continue}o=l.name;h=l.value;if(o===undefined||h===undefined){continue}if(!h||h.trim().length===0){h=x.noValue}if(l.longtext===undefined||l.longtext===null||l.longtext===""){m=false}else{m=true}u=l.valueWithoutWhyfound;var k=-1,B=-1,V={desktop:1,tablet:1};var j=b.attributes[l.key]||{};b.attributes[l.key]=j;i.openStart("li",this.getId()+"-generic-attribute-2-"+I);i["class"]("sapUshellSearchResultListItem-GenericAttribute");if(F.config.optimizeForValueHelp){i["class"]("sapUshellSearchResultListItem-GenericAttributeValueHelp")}i["class"]("sapUshellSearchResultListItem-MainAttribute");if(m){D=j.longTextColumnNumber||this._howManyColumnsToUseForLongTextAttribute(u);j.longTextColumnNumber=D;V=D;i["class"]("sapUshellSearchResultListItem-LongtextAttribute")}if(w<=0){if(l.whyfound&&C>0){i["class"]("sapUshellSearchResultListItem-WhyFoundAttribute-Desktop");C--}else{i["class"]("sapUshellSearchResultListItem-DisplayNoneAttribute-Desktop")}}if(O<=0){if(l.whyfound&&U>0){i["class"]("sapUshellSearchResultListItem-WhyFoundAttribute-Tablet");U--}else{i["class"]("sapUshellSearchResultListItem-DisplayNoneAttribute-Tablet")}}if(m&&P&&R[0]===1){B=0;D=j.longTextColumnNumber.desktop<S?j.longTextColumnNumber.desktop:S-1;R[0]+=D;w-=D}else{for(var M=0;M<R.length;M++){if(R[M]+V.desktop<=S){R[M]+=V.desktop;w-=V.desktop;B=M;break}}}if(B<0){B=R.length}if(m&&P&&T[0]===1){k=0;D=j.longTextColumnNumber.tablet<A?j.longTextColumnNumber.tablet:A-1;T[0]+=D;O-=D}else{for(var z=0;z<T.length;z++){if(T[z]+V.tablet<=A){T[z]+=V.tablet;O-=V.tablet;k=z;break}}}if(k<0){k=T.length}i["class"]("sapUshellSearchResultListItem-OrderTablet-"+k);i["class"]("sapUshellSearchResultListItem-OrderDesktop-"+B);if(m){i.attr("data-sap-searchresultitem-attributeweight-desktop",V.desktop);i.attr("data-sap-searchresultitem-attributeweight-tablet",V.tablet)}i.openEnd();p=new n("".concat(this.getId(),"--attr").concat(I,"_labelText"),{displayOnly:true});p.setText(o);p.addStyleClass("sapUshellSearchResultListItem-AttributeKey");p.addStyleClass("sapUshellSearchResultListItem-MightOverflow");this.adjustCssDragAndDrop(p,F);i.renderControl(p);i.openStart("span",this.getId()+"-attribute-value-container-"+I);i["class"]("sapUshellSearchResultListItem-AttributeValueContainer");if(F.config.optimizeForValueHelp){i["class"]("sapUshellSearchResultListItem-AttributeValueContainerValueHelp")}i.openEnd();v=undefined;if(l.iconUrl){v=new d("".concat(this.getId(),"--attr").concat(I,"_itemAttributeIcon"),{src:l.iconUrl});v.addStyleClass("sapUshellSearchResultListItem-AttributeIcon")}if(l.defaultNavigationTarget instanceof _){var N=l.defaultNavigationTarget;g=new L("".concat(this.getId(),"--attr").concat(I,"_defNavTarget_Link"),{navigationTarget:null,wrapping:false,tooltip:l.tooltip||""});g.setNavigationTarget(N);g.setText(h);g.addStyleClass("sapUshellSearchResultListItem-AttributeLink")}else{g=new t("".concat(this.getId(),"--attr").concat(I,"_noDefNavTarget_Text"));g.setText(h)}if(v){g.setAggregation("icon",v)}g.addStyleClass("sapUshellSearchResultListItem-AttributeValue");g.addStyleClass("sapUshellSearchResultListItem-MightOverflow");if(l.whyfound){g.data("ishighlighted","true",true);g.addStyleClass("sapUshellSearchResultListItem-AttributeValueHighlighted")}if(m){g.data("islongtext","true",true)}if(u&&!(g instanceof L&&g.getTooltip())){f=new c({});f.addStyleClass("sapUshellSearchResultListItem-AttributeValueContainer-HiddenText");f.setText(u);g.data("tooltippedBy",f.getId(),true);g.addEventDelegate({onAfterRendering:H(g)});this.addAggregation("_attributeValuesWithoutWhyfoundHiddenTexts",f,true);i.renderControl(f)}this.adjustCssDragAndDrop(g,F);i.renderControl(g);i.close("span");i.close("li");this.addAggregation("_attributeLabels",p,true);this.addAggregation("_attributeValues",g,true);y++}if(P){var W=S-R[0];var G=A-T[0];if(W>0||G>0){i.openStart("li",this.getId()+"-generic-attribute-3");i["class"]("sapUshellSearchResultListItem-GenericAttribute");if(r.config.optimizeForValueHelp){i["class"]("sapUshellSearchResultListItem-GenericAttributeValueHelp")}i["class"]("sapUshellSearchResultListItem-MainAttribute");i["class"]("sapUshellSearchResultListItem-OrderTablet-0");i["class"]("sapUshellSearchResultListItem-OrderDesktop-0");i.attr("data-sap-searchresultitem-attributeweight-desktop",W);i.attr("data-sap-searchresultitem-attributeweight-tablet",G);i.openEnd();i.close("li")}}},_howManyColumnsToUseForLongTextAttribute:function e(t){if(t.length<50){return{tablet:1,desktop:1}}if(t.length<85){return{tablet:2,desktop:2}}if(t.length<135){return{tablet:3,desktop:3}}return{tablet:3,desktop:4}},_renderImageAttribute:function e(t,i){var s=this.getModel();if(!this.getProperty("imageUrl")||this.getProperty("imageFormat")&&this.getProperty("imageFormat").toLowerCase()==="documentthumbnail"){return}t.openStart("li",this.getId()+"-generic-attribute-4");t["class"]("sapUshellSearchResultListItem-GenericAttribute");if(s.config.optimizeForValueHelp){t["class"]("sapUshellSearchResultListItem-GenericAttributeValueHelp")}t["class"]("sapUshellSearchResultListItem-ImageAttribute");if(i){t["class"]("sapUshellSearchResultListItem-LonelyImageAttribute")}t.openEnd();t.openStart("div",this.getId()+"-image-container");t["class"]("sapUshellSearchResultListItem-ImageContainer");if(this.getProperty("imageFormat")==="round"){t["class"]("sapUshellSearchResultListItem-ImageContainerRound")}t.openEnd();if(this.getProperty("imageUrl")){t.openStart("img",this.getId()+"-image-2");t["class"]("sapUshellSearchResultListItem-Image");if(this.getProperty("imageFormat")==="round"){}t.attr("src",this.getProperty("imageUrl"));t.openEnd();t.close("img")}if(this.getProperty("imageFormat")!=="round"){t.openStart("div",this.getId()+"-image-container-aligment-helper");t["class"]("sapUshellSearchResultListItem-ImageContainerAlignmentHelper");t.openEnd();t.close("div")}t.close("div");t.close("li")},_renderRelatedObjectsToolbar:function e(t){var i=this.getProperty("navigationObjects");if(!i||i.length===0){return}this._showExpandButton=true;var s=this.getAggregation("_relatedObjectActionsToolbar");s.setProperty("navigationObjects",i);s.setProperty("positionInList",this.getProperty("positionInList"));t.renderControl(s)},_renderAccessibilityInformation:function e(t){var i=this;var s=this.getProperty("parentListItem");if(s){this._renderAriaDescriptionElementForTitle(t,true,true);this._renderAriaDescriptionElementForAttributes(t,true);this._renderAriaDescriptionElementForCollapsedOrExpandedState(t,true);s.addEventDelegate({onAfterRendering:function e(){var a=$(s.getDomRef());i._addAriaDescriptionToParentListElement(s,true);A("acc-listitem-focusin",a,"focusin",function(e){var a=$(e.relatedTarget);if(a.hasClass("sapUshellSearchResultListItem")||a.closest(".sapUshellSearchResultListItemApps").length>0&&!a.hasClass("sapUshellResultListMoreFooter")){i._renderAriaDescriptionElementForTitle(t,false,false);i._renderAriaDescriptionElementForAttributes(t,false);i._renderAriaDescriptionElementForCollapsedOrExpandedState(t,false);i._addAriaDescriptionToParentListElement(s,false)}else{i._renderAriaDescriptionElementForTitle(t,true,false);i._renderAriaDescriptionElementForAttributes(t,false);i._renderAriaDescriptionElementForCollapsedOrExpandedState(t,false);i._addAriaDescriptionToParentListElement(s,true)}})},onsapspace:function e(t){if(t["target"]===t["currentTarget"]){i.toggleDetails()}},onsapenter:function e(t){if(t["target"]===t["currentTarget"]){var s=i.getProperty("titleNavigation");if(s instanceof _){s.performNavigation()}}}})}},getAccessibilityInfo:function e(){var t={};if(u.prototype.getAccessibilityInfo){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++){s[a]=arguments[a]}t=u.prototype.getAccessibilityInfo.apply(this,s)||t}t["description"]="";return t},_renderAriaDescriptionElementForTitle:function e(t,i,s){this._searchResultListPrefix=this._searchResultListPrefix||b.getText("result_list_announcement_screenreaders");var a=this.getProperty("title")+", "+this.getProperty("type")+".";if(i){a=this._searchResultListPrefix+" "+a}var r=this.getAggregation("_titleLabeledByText");if(r){r.setText(a)}if(s&&t){t.renderControl(r)}},_renderAriaDescriptionElementForAttributes:function e(t,i){var s=this.getAggregation("_attributesLabeledByText");var a=$(this.getDomRef()).find(".sapUshellSearchResultListItem-Attributes").find(".sapUshellSearchResultListItem-MainAttribute");var r;if(a.length===0){r=b.getText("result_list_item_aria_no_attributes")}else{r=b.getText("result_list_item_aria_has_attributes");a.each(function(){var e=$(this);if(e.is(":visible")&&e.attr("aria-hidden")!=="true"){var t=e.find(".sapUshellSearchResultListItem-AttributeKey").text();var i=e.find(".sapUshellSearchResultListItem-AttributeValueContainer");var s=i.find(".sapUshellSearchResultListItem-AttributeValueContainer-HiddenText");if(s.length===0){s=i.find(".sapUshellSearchResultListItem-AttributeValue")}var a=s.text();r+=b.getText("result_list_item_aria_attribute_and_value",[t,a])}})}if(s){s.setText(r)}if(i&&t){t.renderControl(s)}},_renderAriaDescriptionElementForCollapsedOrExpandedState:function e(t,i){var s=this.getAggregation("_expandStateLabeledByText");var a;var r=this.getAggregation("_expandButton");if(!r){return}var n=$(r.getDomRef());if(n.css("visibility")!=="hidden"){if(this.isShowingDetails()){a=b.getText("result_list_item_aria_expanded");var l=this.getProperty("navigationObjects");if(Array.isArray(l)&&l.length>0){a=b.getText("result_list_item_aria_has_links")+a}}else{a=b.getText("result_list_item_aria_collapsed")}}s.setText(a);if(i&&t){t.renderControl(s)}},_addAriaDescriptionToParentListElement:function e(t,i){var s=this.getAggregation("_titleLabeledByText");if(!s){return}var a=s.getId();if(i){var r=this.getProperty("countBreadcrumbsHiddenElement");if(r){a+=" "+r.getId()}}var n=this.getAggregation("_attributesLabeledByText");a+=" "+n.getId();var l=this.getAggregation("_expandStateLabeledByText");a+=" "+l.getId();var o=$(t.getDomRef());o.attr("aria-labelledby",a)},_getExpandAreaObjectInfo:function e(){var t=this.getModel();var i=$(this.getDomRef());i.addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var s=i.find(".sapUshellSearchResultListItem-AttributesExpandContainer");var a=i.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var r=false;if(a.css("display")==="none"&&!t.config.optimizeForValueHelp){a.css("display","block");r=true}var n=s.height();var l=i.find(".sapUshellSearchResultListItem-AttributesAndActions").height();i.removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");if(r){a.css("display","")}var o=this._getElementsInExpandArea();var d=200;var h=d/10;var c={resultListItem:i,attributesExpandContainer:s,currentHeight:n,expandedHeight:l,elementsToFadeInOrOut:o,expandAnimationDuration:d,fadeInOrOutAnimationDuration:h,relatedObjectsToolbar:a};return c},_getElementsInExpandArea:function e(){var t=$(this.getDomRef());var i=[];t.addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var s=t.find(".sapUshellSearchResultListItem-GenericAttribute:not(.sapUshellSearchResultListItem-ImageAttribute)");if(s.length>0){var a=s.position().top;s.each(function(){if($(this).position().top>a){i.push(this)}})}t.removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");return i},isShowingDetails:function e(){var t=this._getExpandAreaObjectInfo();if(t.currentHeight<t.expandedHeight){return false}return true},showDetails:function e(){var t=this;if(this.isShowingDetails()){return}var i=this._getExpandAreaObjectInfo();i.relatedObjectsToolbar["css"]("opacity",0);i.relatedObjectsToolbar["css"]("display","block");var s=this.getAggregation("_relatedObjectActionsToolbar");if(s){s.layoutToolbarElements()}this.forwardEllipsis($(t.getDomRef()).find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));$(this.getDomRef()).addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var a,r=false;var n=i.attributesExpandContainer["animate"]({height:i.expandedHeight},{duration:i.expandAnimationDuration,progress:function e(s,l,o){if(!r&&l>.5){a=i.relatedObjectsToolbar["animate"]({opacity:1},o).promise();r=true;jQuery.when(n,a).done(function(){t.setProperty("expanded",true,true);$(this).addClass("sapUshellSearchResultListItem-AttributesExpanded");$(this).css("height","");$(i.elementsToFadeInOrOut).css("opacity","");$(t.getDomRef()).removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");var e=h.getIconURI("slim-arrow-up");var s=t.getAggregation("_expandButton");if(s){s.setTooltip(b.getText("hideDetailBtn_tooltip"));s.setIcon(e);s.rerender()}i.relatedObjectsToolbar["css"]("display","");i.relatedObjectsToolbar["css"]("opacity","");t._renderAriaDescriptionElementForAttributes(undefined,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(undefined,false)}.bind(this))}}}).promise();$(i.elementsToFadeInOrOut).animate({opacity:1},i.fadeInOrOutAnimationDuration)},hideDetails:function e(){var t=this;var i=$(this.getDomRef());if(!this.isShowingDetails()){return}var s=this._getExpandAreaObjectInfo();s.relatedObjectsToolbar["css"]("opacity",1);s.relatedObjectsToolbar["animate"]({opacity:0},s.expandAnimationDuration/2);var a=i.find(".sapUshellSearchResultListItem-MainAttribute").outerHeight(true)+i.find(".sapUshellSearchResultListItem-ExpandSpacerAttribute").outerHeight(true);var r=false;var n=s.attributesExpandContainer["animate"]({height:a},{duration:s.expandAnimationDuration,progress:function e(i,a,l){if(!r&&l<=s.fadeInOrOutAnimationDuration){r=true;var o=$(s.elementsToFadeInOrOut).animate({opacity:0},s.fadeInOrOutAnimationDuration).promise();jQuery.when(n,o).done(function(){t.setProperty("expanded",false,true);s.attributesExpandContainer["removeClass"]("sapUshellSearchResultListItem-AttributesExpanded");$(s.elementsToFadeInOrOut).css("opacity","");s.relatedObjectsToolbar["css"]("opacity","");var e=h.getIconURI("slim-arrow-down");var i=t.getAggregation("_expandButton");i.setTooltip(b.getText("showDetailBtn_tooltip"));i.setIcon(e);i.rerender();t._renderAriaDescriptionElementForAttributes(undefined,false);t._renderAriaDescriptionElementForCollapsedOrExpandedState(undefined,false)})}}}).promise()},toggleDetails:function e(){var t;var i=this.getModel();if(this.isShowingDetails()){t=S.ITEM_HIDE_DETAILS;this.hideDetails()}else{t=S.ITEM_SHOW_DETAILS;this.showDetails()}i.eventLogger.logEvent({type:t,itemPosition:this.getProperty("positionInList"),executionId:this.getProperty("resultSetId")})},isSelectionModeEnabled:function e(){var t=false;var i=$(this.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");if(i){t=i.css("opacity")>0}return t},enableSelectionMode:function e(){var t=$(this.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var i=t.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var s=200;var a=false;t.animate({width:"2rem"},{duration:s,progress:function e(t,r){if(!a&&r>.5){i.css("display","");i.animate({opacity:"1.0"},s/2);a=true}}})},disableSelectionMode:function e(){var t=$(this.getDomRef()).find(".sapUshellSearchResultListItem-multiSelect-innerContainer");var i=t.find(".sapUshellSearchResultListItem-multiSelect-selectionBoxContainer");var s=200;i.animate({opacity:"0.0"},s/2,function(){i.css("display","none")});t.animate({width:"0"},s)},toggleSelectionMode:function e(t){if(this.isSelectionModeEnabled()){this.disableSelectionMode()}else{this.enableSelectionMode()}},onAfterRendering:function e(){var t=$(this.getDomRef());this._showOrHideExpandButton();this._setListItemStatusBasedOnWindowSize();this._renderAriaDescriptionElementForTitle(undefined,false,false);this._renderAriaDescriptionElementForAttributes(undefined,false);this._renderAriaDescriptionElementForCollapsedOrExpandedState(undefined,false);this.forwardEllipsis(t.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));i.attachEventHandlersForTooltip(this.getDomRef())},resizeEventHappened:function e(){var t=$(this.getDomRef());this._showOrHideExpandButton();this._setListItemStatusBasedOnWindowSize();this.getAggregation("_titleLink").rerender();this.forwardEllipsis(t.find(".sapUshellSearchResultListItem-Title, .sapUshellSearchResultListItem-AttributeKey, .sapUshellSearchResultListItem-AttributeValueHighlighted"));var i=this.getAggregation("_titleLink");var s=this.getModel();if(this.supportsDragAndDrop(i,s)){if(s.config.optimizeForValueHelp){i.getDomRef()["draggable"]=false}}},isHierarchyItem:function e(){return this.getProperty("titleIconUrl")==="sap-icon://folder-blank"},supportsDragAndDrop:function e(t,i){return typeof i.getSearchCompositeControlInstanceByChildControl(t)!=="undefined"&&i.getSearchCompositeControlInstanceByChildControl(t).getDragDropConfig().length>0},_getPhoneSize:function e(){return 767},_resetPrecalculatedValues:function e(){this._visibleAttributes=undefined;this._detailsArea=undefined;this._showExpandButton=false},_setListItemStatusBasedOnWindowSize:function e(){var t=window.innerWidth;var i=this.getProperty("parentListItem");if(this.getProperty("titleNavigation")&&t<=this._getPhoneSize()){i.setType(y.Active)}else{i.setType(y.Inactive)}},_showOrHideExpandButton:function e(){var t;var i=$(this.getDomRef());var s=i.find(".sapUshellSearchResultListItem-ExpandButtonContainer");var a=s.css("visibility")!=="hidden";var r=false;var n=((t=this.getProperty("imageFormat"))===null||t===void 0?void 0:t.toLowerCase())==="documentthumbnail";if(!n){var l=i.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");r=l.length>0}if(!n&&!r){var o=this._getElementsInExpandArea();if(o.length>0){r=true}}if(a&&!r){s.css("visibility","hidden");s.attr("aria-hidden","true");this.setAriaExpandedState()}else if(!a&&r){s.css("visibility","");s.removeAttr("aria-hidden");this.setAriaExpandedState()}},setAriaExpandedState:function e(){var t=this.getAggregation("_expandButton");if(!t){return}var i=$(t.getDomRef());var s=$(this.getDomRef());var a=this.getProperty("parentListItem")?$(this.getProperty("parentListItem").getDomRef()):s.closest("li");var r=s.find(".sapUshellSearchResultListItem-ExpandButtonContainer");if(r.css("visibility")==="hidden"){i.removeAttr("aria-expanded");a.removeAttr("aria-expanded")}else{var n=this.getProperty("expanded");if(n){i.attr("aria-expanded","true");a.attr("aria-expanded","true")}else{i.attr("aria-expanded","false");a.attr("aria-expanded","false")}}},_registerItemPressHandler:function e(){var t=this;var i=this.getProperty("parentListItem");if(i){i.attachPress(function(e){t._performTitleNavigation({event:e})});this._registerItemPressHandler=function(){}}},_performTitleNavigation:function e(t){var i=this.getProperty("titleNavigation");if(i instanceof _){i.performNavigation({event:t===null||t===void 0?void 0:t.event})}},adjustCssDragAndDrop:function e(t,i){setTimeout(function(){if(typeof i.getSearchCompositeControlInstanceByChildControl(t)!=="undefined"&&i.getSearchCompositeControlInstanceByChildControl(t).getDragDropConfig().length>0){t.addStyleClass("sapUshellSearchResultListItem-SupportsDragAndDrop")}})},forwardEllipsis:function e(t){var s=$(this.getDomRef());s.addClass("sapUshellSearchResultListItem-AttributesPrepareExpansion");t.each(function(e,t){i.forwardEllipsis4Whyfound(t)});s.removeClass("sapUshellSearchResultListItem-AttributesPrepareExpansion")}});x.noValue="â€“";return x})})();
//# sourceMappingURL=SearchResultListItem.js.map