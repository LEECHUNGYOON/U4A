// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/Device","sap/ushell/utils","sap/ushell/Container"],function(e,t,n){"use strict";var i=function(e,t){this.x=e||0;this.y=t||0};i.prototype.getDistance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.floor(Math.sqrt(t*t+n*n))};i.prototype.getSegment=function(e){if(this.x<=e.x&&this.y<=e.y){return 1}if(this.x<=e.x&&this.y>=e.y){return 2}if(this.x>=e.x&&this.y>=e.y){return 3}if(this.x>=e.x&&this.y<=e.y){return 4}};i.prototype.offset=function(e,t){this.x=this.x+e;this.y=this.y+t};var r=function(e,t,n,i){this.x={min:e,max:t};this.y={min:n,max:i}};var s=window.innerWidth>0?window.innerWidth:screen.width;var o=window.innerHeight>0?window.innerHeight:screen.height;var a={cpr1:new r(0,s/4,0,o/4),cpr2:new r(s/2,s,0,o/4),cpr3:new r(s/4,3*s/4,o*3/4,o)};var h=function(){this.init()};h.prototype={radiusRange:{min:800,max:900},_getCanvas:function(){var e=document.getElementById("shell-shapes");if(e){return e}return this._createCanvas("shell-shapes")},_createCanvas:function(e){var t=document.createElement("canvas");t.setAttribute("id",e);t.setAttribute("role","presentation");this._updateCanvasDimensions(t);n.getRenderer().setShellShapes(t);return t},_updateCanvasDimensions:function(e){e.height=window.innerHeight>0?window.innerHeight:screen.height+"px";e.width=window.innerWidth>0?window.innerWidth:screen.width+"px"},init:function(){var t={cpr1:a.cpr1,cpr2:a.cpr2,cpr3:a.cpr3},n,i,r,s,o;this.shapes=[];this.bIsDirty=true;for(o in t){n=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;i=this.getRandomPoint(t[o]);r=this._getSquarePoints(n,i);s=this._calculatebezierCurves(n,r);this.shapes.push({bezierCurves:s,centerPoint:i})}for(var h in this.shapes){var u=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],u.edge0.edgeNum,u.edge0.xOffSet,u.edge0.yOffSet,u.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],u.edge1.edgeNum,u.edge1.xOffSet,u.edge1.yOffSet,u.edge1.xStretch)}sap.ui.getCore().attachThemeChanged(this.onThemeChanged.bind(this));e.resize.attachHandler(this.resizeHandler,this)},_generateRandomAmorphousShapeValues:function(){var e={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var t=this._getRandomInt(0,3);for(var n in e){e[n].edgeNum=t;e[n].xOffSet=this._getRandomInt(200,400);e[n].yOffSet=this._getRandomInt(-200,-400);t+=this._getRandomInt(0,1)<.5?-1:1;if(t===-1){t=3}if(t===4){t=0}}t=this._getRandomInt(0,1);if(t<.5){t=t<.25?0:1;e["edge"+t].xStretch=this._getRandomInt(0,200)}return e},getPoint:function(e,t){return new i(e,t)},getRandomPoint:function(e){var t=Math.floor(Math.random()*(e.x.max-e.x.min)+e.x.min),n=Math.floor(Math.random()*(e.y.max-e.y.min)+e.y.min);return new i(t,n)},onThemeChanged:async function(){const[e]=await t.getThemingParameters(["sapUiShellBackgroundPatternColor"]);if(e&&e!=="transparent"){this.sShapesColor=e;this.bIsDirty=true;this.drawShapes()}},resizeHandler:function(){var e=this._getCanvas();if(e){this._updateCanvasDimensions(e);this.bIsDirty=true;this.onThemeChanged()}},enableAnimationDrawing:function(e){this._enableDrawing=e},makeAmorphousShape:function(e,t,n,i){var r,s,o;switch(t){case 0:r=e.bezierCurves[0].controlPoint1;s=e.bezierCurves[3].controlPoint2;o=this._rotatePoints(n,i,r,s);e.bezierCurves[0].controlPoint1=o[0];e.bezierCurves[3].controlPoint2=o[1];break;case 1:r=e.bezierCurves[0].controlPoint2;s=e.bezierCurves[1].controlPoint1;o=this._rotatePoints(n,i,r,s);e.bezierCurves[0].controlPoint2=o[0];e.bezierCurves[1].controlPoint1=o[1];break;case 2:r=e.bezierCurves[1].controlPoint2;s=e.bezierCurves[2].controlPoint1;o=this._rotatePoints(n,i,r,s);e.bezierCurves[1].controlPoint2=o[0];e.bezierCurves[2].controlPoint1=o[1];break;case 3:r=e.bezierCurves[2].controlPoint2;s=e.bezierCurves[3].controlPoint1;o=this._rotatePoints(n,i,r,s);e.bezierCurves[2].controlPoint2=o[0];e.bezierCurves[3].controlPoint1=o[1];break}return e},_rotatePoints:function(e,t,n,r){var s,o,a=[];s=n.x+e;o=n.y+t;a.push(new i(s,o));s=r.x-e;o=r.y-t;a.push(new i(s,o));return a},_getSquarePoints:function(e,t){var n=[];n[0]=new i(t.x+e,t.y);n[1]=new i(t.x,t.y-e);n[2]=new i(t.x-e,t.y);n[3]=new i(t.x,t.y+e);return n},_getRandomInt:function(e,t){if(e==0&&t==1){return Math.random()}return Math.floor(Math.random()*(t-e+1))+e},_calculatebezierCurves:function(e,t){var n=[],r,s,o,a;a=t[0];o=t[1];r=new i(a.x,a.y-e/2);s=new i(a.x-e/2,a.y-e);n.push({startPoint:a,endPoint:o,controlPoint1:r,controlPoint2:s});a=t[1];o=t[2];r=new i(a.x-e/2,a.y);s=new i(a.x-e,a.y+e/2);n.push({startPoint:a,endPoint:o,controlPoint1:r,controlPoint2:s});a=t[2];o=t[3];r=new i(a.x,a.y+e/2);s=new i(a.x+e/2,a.y+e);n.push({startPoint:a,endPoint:o,controlPoint1:r,controlPoint2:s});a=t[3];o=t[0];r=new i(a.x+e/2,a.y);s=new i(a.x+e,a.y-e/2);n.push({startPoint:a,endPoint:o,controlPoint1:r,controlPoint2:s});return n},drawShapes:async function(){var e=this._getCanvas();if(this.bIsDirty&&e&&e.getContext){var n=e.getContext("2d"),i,r,a,h;n.clearRect(0,0,s*2,o*2);if(!this.sShapesColor){const[e]=await t.getThemingParameters(["sapUiShellBackgroundPatternColor"]);this.sShapesColor=e}if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var u=0;u<this.shapes.length;u++){n.beginPath();i=this.shapes[u].bezierCurves[0].startPoint;n.moveTo(i.x,i.y);for(var c=0;c<this.shapes[u].bezierCurves.length;c++){r=this.shapes[u].bezierCurves[c].endPoint;a=this.shapes[u].bezierCurves[c].controlPoint1;h=this.shapes[u].bezierCurves[c].controlPoint2;n.bezierCurveTo(Math.floor(a.x),Math.floor(a.y),Math.floor(h.x),Math.floor(h.y),Math.floor(r.x),Math.floor(r.y))}n.closePath();n.fillStyle=this.sShapesColor;n.fill()}}this.bIsDirty=false}}};var u=new h;return u},false);
//# sourceMappingURL=CanvasShapesManager.js.map