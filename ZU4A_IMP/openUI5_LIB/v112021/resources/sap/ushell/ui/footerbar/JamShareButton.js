// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/collaboration/components/fiori/sharing/dialog/Component","sap/m/Button","sap/m/ButtonRenderer","sap/ui/core/Component","sap/ushell/library","sap/ushell/resources"],function(e,t,o,n,i,r,s){"use strict";var a=o.extend("sap.ushell.ui.footerbar.JamShareButton",{metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}},renderer:n});a.prototype.init=function(){if(o.prototype.init){o.prototype.init.apply(this,arguments)}this.setEnabled();this.setIcon("sap-icon://share-2");this.setText(s.i18n.getText("shareBtn"));this.attachPress(function(){if(this.getBeforePressHandler()){this.getBeforePressHandler()()}this.showShareDialog(this.getAfterPressHandler())}.bind(this))};a.prototype._createShareComponent=function(){this.oShareComponentPromise=i.create({name:"sap.collaboration.components.fiori.sharing.dialog",settings:this.getJamData()});return this.oShareComponentPromise};a.prototype.showShareDialog=function(t){if(!this.oShareComponentPromise){this.oShareComponentPromise=this._createShareComponent()}if(sap.ushell.Container&&sap.ushell.Container.inAppRuntime()){this.adjustFLPUrl(this.getJamData()).then(function(){return this.oShareComponentPromise.then(function(e){e.open();if(t){t()}})}.bind(this),function(t){e.error("Could not retrieve FLP URL",t,"sap.ushell.ui.footerbar.JamShareButton");return undefined})}else{return this.oShareComponentPromise.then(function(e){e.open();if(t){t()}})}};a.prototype.exit=function(){if(this.shareComponentPromise){this.shareComponentPromise.then(function(e){e.destroy()})}if(o.prototype.exit){o.prototype.exit.apply(this,arguments)}};a.prototype.setEnabled=function(t){if(sap.ushell.Container){var n=sap.ushell.Container.getUser();if(!(n&&n.isJamActive())){if(!t){e.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton")}t=false;this.setVisible(false)}}else{if(!t){e.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton")}t=false}o.prototype.setEnabled.call(this,t)};a.prototype.adjustFLPUrl=function(e){if(e&&e.object&&e.object.id&&typeof e.object.id==="string"&&e.object.id===document.URL){return sap.ushell.Container.getFLPUrl(true).then(function(t){e.object.id=t})}return Promise.resolve()};return a},true);
//# sourceMappingURL=JamShareButton.js.map