//@ui5-bundle sap/ushell/components/shell/NavigationBarMenu/Component-preload.js
sap.ui.require.preload({
	"sap/ushell/components/shell/NavigationBarMenu/Component.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent"],function(n){"use strict";return n.extend("sap.ushell.components.shell.NavigationBarMenu.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){n.prototype.init.apply(this,arguments)}})});
},
	"sap/ushell/components/shell/NavigationBarMenu/controller/NavigationBarMenu.controller.js":function(){
// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ushell/resources","sap/ushell/utils/WindowUtils"],function(e,t,n,r,i,a,s,o,p){"use strict";var d=t.dnd.RelativeDropPosition;var c=t.InvisibleMessageMode;return n.extend("sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenu",{onInit:function(){this.pMenuServicePromise=sap.ushell.Container.getServiceAsync("Menu");this._oInvisibleMessageInstance=e.getInstance()},onExit:function(){if(this._oInvisibleMessageInstance){this._oInvisibleMessageInstance.destroy()}},_onPinnedSpacesUpdateFinished:function(e){var t=o.i18n.getText("NavigationBarMenu.PinnedSpaces.Title",[e.getParameter("total")||0]);this.byId("PinnedSpacesTreeTitle").setText(t)},openNavigationBarMenuPopover:function(e){var t=e.getSource();if(!this._pPopoverPromise){this._pPopoverPromise=r.load({type:"XML",id:this.getView().getId(),controller:this,name:"sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenuPopover"}).then(function(e){this.oModel=this.getOwnerComponent().oPropagatedProperties.oModels.menu;e.setModel(this.oModel,"spaces");this.getView().addDependent(e);return e}.bind(this))}this._pPopoverPromise.then(function(e){this._bindPinnedSpaces().then(function(){e.openBy(t)})}.bind(this))},closeNavigationBarMenuPopover:function(){this._pPopoverPromise.then(function(e){e.close()})},handlePinButtonPress:function(e){var t=e.getSource();var n=t.getBindingContext("spaces").getPath();var r=this.oModel.getProperty(n+"/pinned");if(!r){this._pinSpace(n)}else{this._unpinSpace(n,true)}if(t.getId().includes("PinnedSpaces")){var i=this.byId("NavigationBarMenuPopover");i.focus();var a=this.byId("PinnedSpaces");var s={onAfterRendering:function(){a.focus();a.removeEventDelegate(s)}};a.addEventDelegate(s)}},unpinAllSpaces:function(){var e=this.byId("PinnedSpaces");var t=e.getModel("spaces").getData();t=t.map(function(e){e.pinnedSortOrder=parseInt(e.pinnedSortOrder,10);return e});var n=t.sort(function(e,t){if(e.pinnedSortOrder<t.pinnedSortOrder){return-1}if(e.pinnedSortOrder>t.pinnedSortOrder){return 1}return 0});var r;var i=false;for(var a=0;a<n.length;++a){r=n[a];if(i){r.pinned=false;r.pinnedSortOrder="-1"}else{r.pinnedSortOrder=""+r.pinnedSortOrder;if(r.type==="separator"){i=true}}}this._savePinnedSpaces()},rearrangePinnedSpaces:function(e){var t=e.getParameter("draggedControl").getBindingContext("spaces");var n=this.oModel.getProperty(t.getPath()).pinnedSortOrder;var r=e.getParameter("droppedControl");var i=r.getBindingContext("spaces");var a=this.oModel.getProperty(i.getPath()).pinnedSortOrder;var s=e.getParameter("dropPosition");var o=a+(s===d.After?1:0);this._rearrangePinnedSpaces(n,o,r,s)},_rearrangePinnedSpaces:function(e,t,n,r){this.pMenuServicePromise.then(function(i){i.moveMenuEntry(e,t);var a=this.byId("PinnedSpaces");var s={onAfterRendering:function(){var i=a.getItems();var o=a.indexOfItem(n);var p;if(e<t){p=o-(r===d.Before?1:0)}else{p=o+(r===d.After?1:0)}var c=i[p];if(c){c.focus()}n.removeEventDelegate(s)}};n.addEventDelegate(s);var p=o.i18n.getText("NavigationBarMenu.PinnedSpaces.Moved");this._oInvisibleMessageInstance.announce(p,c.Polite);this._savePinnedSpaces()}.bind(this))},_bindPinnedSpaces:function(){var e=this.byId("PinnedSpaces");if(!this._pCustomTreeItemPromise){this._pCustomTreeItemPromise=r.load({type:"XML",async:true,controller:this,name:"sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"}).then(function(t){t.addEventDelegate({onsapdownmodifiers:this._handleSpacesSwap.bind(this),onsapupmodifiers:this._handleSpacesSwap.bind(this)});e.bindItems({path:"spaces>/",filters:[new i({path:"pinned",operator:a.EQ,value1:true}),new i({path:"type",operator:a.NE,value1:"separator"}),new i({path:"isHomeEntry",operator:a.EQ,value1:false})],sorter:[new s({path:"pinnedSortOrder",descending:false})],parameters:{arrayNames:["menuEntries"]},template:t,templateShareable:false})}.bind(this))}return this._pCustomTreeItemPromise},_handleSpacesSwap:function(e){var t=this.byId("PinnedSpaces");var n=t.getItems();var r;for(var i=0;i<n.length;i++){r=n[i];if(document.activeElement===r.getFocusDomRef()){var a=r.getBindingContext("spaces");var s=this.oModel.getProperty(a.getPath()).pinnedSortOrder;var o;var p;if(e.type==="sapupmodifiers"){var c=n[i-1];if(c){o=c.getBindingContext("spaces");p=this.oModel.getProperty(o.getPath()).pinnedSortOrder;this._rearrangePinnedSpaces(s,p,c,d.Before);e.preventDefault();e.stopPropagation()}}else if(e.type==="sapdownmodifiers"){var l=n[i+1];if(l){o=l.getBindingContext("spaces");p=this.oModel.getProperty(o.getPath()).pinnedSortOrder;this._rearrangePinnedSpaces(s,p+1,l,d.After);e.preventDefault();e.stopPropagation()}}return}}},allSpacesFactory:function(e,t){var n=t.getModel().getProperty(t.getPath());var r=n.menuEntries||[];var i=this.byId("AllSpaces").getDependents()[0].clone(e);i.setType("Active");i.attachPress(this.onMenuItemSelection,this);if(r.length<1){i.addStyleClass("sapMTreeItemBaseLeaf")}if(n.type==="separator"||n.isHomeEntry){i.setVisible(false)}return i},_unpinSpace:function(e,t){this.oModel.setProperty(e+"/pinned",false);this.oModel.setProperty(e+"/pinnedSortOrder","-1");if(t){this._savePinnedSpaces()}},_pinSpace:function(e){var t=this.byId("PinnedSpaces").getItems().length;var n=2;if(t>0){var r=this.byId("PinnedSpaces").getItems()[t-1];var i=r.getBindingContextPath("spaces");n=this.oModel.getProperty(i+"/pinnedSortOrder")+1}this.oModel.setProperty(e+"/pinnedSortOrder",n);this.oModel.setProperty(e+"/pinned",true);this._savePinnedSpaces()},_performNavigation:function(e){return sap.ushell.Container.getServiceAsync("Navigation").then(function(t){var n={};e.parameters.forEach(function(e){if(e.name&&e.value){n[e.name]=[e.value]}});return t.navigate({target:{semanticObject:e.semanticObject,action:e.action},params:n})})},_openURL:function(e){p.openURL(e.url,"_blank")},onMenuItemSelection:function(e){var t=e.getSource();var n=t.getBindingContextPath("spaces");var r=this.oModel.getProperty(n);var i=e.getParameter("id").includes("AllSpaces");if(!i){return}if(t.isLeaf()){if(r.type==="IBN"){this._performNavigation(r.target).then(this.closeNavigationBarMenuPopover.bind(this))}if(r.type==="URL"){this._openURL(r.target);this.closeNavigationBarMenuPopover()}return}},_savePinnedSpaces:function(){this.pMenuServicePromise.then(function(e){this.oModel.refresh(true);return e.savePersonalization()}.bind(this))}})});
},
	"sap/ushell/components/shell/NavigationBarMenu/manifest.json":'{"_version":"1.48.0","sap.app":{"id":"sap.ushell.components.shell.NavigationBarMenu","applicationVersion":{"version":"1.120.20"},"i18n":{"bundleUrl":"../../../renderer/resources/resources.properties","fallbackLocale":"en"},"type":"component","ach":"CA-FLP-FE-COR","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"phone":true,"tablet":true}},"sap.ui5":{"rootView":{"viewName":"sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenu","type":"XML","async":true},"dependencies":{"minUI5Version":"1.114","libs":{"sap.m":{},"sap.tnt":{},"sap.ui.core":{}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"sap.ushell.renderer.resources.resources"}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/NavigationBarMenu/view/CustomTreeItem.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><CustomTreeItem tooltip="{spaces>title}"><content><HBox\n                alignItems="Center"\n                width="100%"><Text\n                    id="spaceTitle"\n                    text="{spaces>title}"\n                    tooltip="{spaces>title}"><layoutData><FlexItemData growFactor="1" /></layoutData></Text><Button\n                    type="Transparent"\n                    class="sapUiTinyMarginEnd"\n                    icon="{= ${spaces>pinned} ? \'sap-icon://pushpin-on\' : \'sap-icon://pushpin-off\' }"\n                    press=".handlePinButtonPress"\n                    tooltip="{= ${spaces>pinned} ? ${i18n>NavigationBarMenu.Button.UnpinSpace} : ${i18n>NavigationBarMenu.Button.PinSpace} }"\n                    visible="{= ${spaces>pinned} === undefined ? false : true }"\n                    ariaDescribedBy="spaceTitle" /></HBox></content></CustomTreeItem></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenu.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    id="NavigationBarMenu"\n    controllerName="sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenu"><Button\n        id="navigationBarMenuButton"\n        icon="sap-icon://menu2"\n        press=".openNavigationBarMenuPopover"\n        tooltip="{i18n>NavigationBarMenu.Button.OpenPopover}"\n        ariaHasPopup="Dialog"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData><customData><core:CustomData\n                key="help-id"\n                value="shell-navigationBarPersonalizationButton"\n                writeToDom="true" /></customData></Button></mvc:View>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenuPopover.fragment.xml":'<core:FragmentDefinition\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Popover\n        id="NavigationBarMenuPopover"\n        class="sapUiContentPadding"\n        placement="Bottom"\n        showHeader="false"\n        modal="false"\n        initialFocus="PinnedSpaces"\n        contentWidth="30rem"><content><Tree\n                id="PinnedSpaces"\n                showSeparators="None"\n                noDataText="{i18n>NavigationBarMenu.PinnedSpaces.NoDataText}"\n                updateFinished="._onPinnedSpacesUpdateFinished"><dragDropConfig><dnd:DragDropInfo\n                        sourceAggregation="items"\n                        targetAggregation="items"\n                        dropPosition="Between"\n                        drop=".rearrangePinnedSpaces" /></dragDropConfig><headerToolbar><Toolbar><Title\n                            id="PinnedSpacesTreeTitle"\n                            text="{i18n>NavigationBarMenu.PinnedSpaces.Title}" /><ToolbarSpacer /><Button\n                            id="UnpinAllSpaces"\n                            text="{i18n>NavigationBarMenu.Button.UnpinAll}"\n                            tooltip="{i18n>NavigationBarMenu.Button.UnpinAll.Tooltip}"\n                            press=".unpinAllSpaces"><customData><core:CustomData\n                                    key="help-id"\n                                    value="shell-navigationBarMenu-unpinAllButton"\n                                    writeToDom="true" /></customData></Button></Toolbar></headerToolbar></Tree><Tree\n                id="AllSpaces"\n                showSeparators="None"\n                noDataText="{i18n>NavigationBarMenu.AllSpaces.NoDataText}"\n                items="{path: \'spaces>/\', parameters: {arrayNames: [\'menuEntries\']}, factory: \'.allSpacesFactory\'}"><headerToolbar><Toolbar><Title text="{i18n>NavigationBarMenu.AllSpaces.Title}" /></Toolbar></headerToolbar><dependents><core:Fragment\n                        fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"\n                        type="XML" /></dependents></Tree></content></Popover></core:FragmentDefinition>\n'
});
//# sourceMappingURL=Component-preload.js.map
