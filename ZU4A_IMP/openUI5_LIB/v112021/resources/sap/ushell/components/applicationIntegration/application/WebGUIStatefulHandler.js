// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils","sap/ushell/components/applicationIntegration/application/PostMessageUtils"],function(e,t){"use strict";var a={};a.guiStatefulCreateApp=function(e,a,s){if(a.setCurrentAppUrl){a.setProperty("currentAppUrl",s.url,true)}if(a.setCurrentAppTargetResolution){a.setProperty("currentAppTargetResolution",s,true)}a.setProperty("iframeReusedForApp",true,true);return t.postMessageToIframeApp(a,"sap.gui","triggerCloseSessionImmediately",{},true).then(function(){return r(a,s).then(function(){e.navTo(a.getId());if(a.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){a.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}else{a.toggleStyleClass("hidden",false)}})})};a.guiStatefulCloseCurrentApp=function(e){t.postMessageToIframeApp(e,"sap.gui","triggerCloseSession",{},false)};function r(a,r){return new Promise(async function(s,n){var i,p,l=r.url;function o(){if(p){p["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);p["system-alias"]=a.getSystemAlias();i["sap-flp-params"]=p}t.postMessageToIframeApp(a,"sap.its","startService",i,true).then(s,n)}l=await e.appendSapShellParam(l);l=e.filterOutParamsFromLegacyAppURL(l);i={url:l};if(a.getIframeWithPost&&a.getIframeWithPost()===true){var u=e.getParamKeys(l);if(u.aAppStateNamesArray.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(u.aAppStateKeysArray).then(function(e){p={};u.aAppStateNamesArray.forEach(function(t,a){if(e[a][0]){p[t]=e[a][0]}});o()},function(e){o()})})}else{p={};o()}}else{o()}})}return a},false);
//# sourceMappingURL=WebGUIStatefulHandler.js.map