// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/URI","sap/base/Log"],function(e,n){"use strict";var i={},r={};function t(){i={};r={}}function a(e){if(e){return Object.keys(r).length}return Object.keys(i).length}function o(e,n,t){var a=l(e);if(t){if(!r.hasOwnProperty(a.sKey)){r[a.sKey]=[]}r[a.sKey].push(n)}else{i[a.sKey]={oContainer:n,oKeyValues:a}}}function s(e){if(e){var n=l(e).sKey;if(i[n]){delete i[n]}}}function f(e){if(e){var n=Object.keys(i);n.forEach(function(n){if(i[n].oContainer===e){delete i[n]}})}}function u(e,n){var t;if(e===undefined||a(n)===0){return undefined}var o=l(e).sKey;if(n===true){if(r.hasOwnProperty(o)&&r[o].length>0){t=r[o].shift();if(r[o].length===0){delete r[o]}}return t}return o&&i.hasOwnProperty(o)?i[o].oContainer:undefined}function p(e){for(var n in i){if(i.hasOwnProperty(n)){var r=i[n].oContainer;if(r.sId===e){return r}}}return undefined}function c(e){Object.keys(r).forEach(function(n){r[n].forEach(function(n){e(n)})})}function l(i){var r,t,a,o="",s="",f="",u="",p={sKey:"",sOrigin:"",sIframeHint:"",sUI5Version:"",sKeepAlive:""};if(i===undefined||i===""||i==="../"){p.sKey=i;return p}try{r=new e(i);if(i.charAt(0)==="/"){t=window.location.origin}else{t=r.origin()}if(t===undefined||t===""){t=r.path();if(t===undefined||t===""){t=i}}a=r.query(true);if(a.hasOwnProperty("sap-iframe-hint")){p.sIframeHint=a["sap-iframe-hint"];o="@"+p.sIframeHint}if(a.hasOwnProperty("sap-ui-version")){p.sUI5Version=a["sap-ui-version"];s="@"+p.sUI5Version}if((o==="@GUI"||o==="@WDA"||o==="@WCF")&&a.hasOwnProperty("sap-keep-alive")){p.sKeepAlive=a["sap-keep-alive"];f="@"+p.sKeepAlive+"-"+i}if(a.hasOwnProperty("sap-testcflp-iframeid")){u="@"+a["sap-testcflp-iframeid"]}}catch(e){n.error("URL '"+i+"' can not be parsed: "+e,"sap.ushell.components.applicationIntegration.application.BlueBoxHandler");t=i}p.sOrigin=t;p.sKey=t+o+s+f+u;return p}return{init:t,getSize:a,add:o,remove:s,removeByContainer:f,get:u,getById:p,forEach:c,getBlueBoxCacheKeyValues:l,_getStorageForDebug:function(){return{oCacheStorage:i,oKeepAliveIframePool:r}}}},false);
//# sourceMappingURL=BlueBoxesCache.js.map