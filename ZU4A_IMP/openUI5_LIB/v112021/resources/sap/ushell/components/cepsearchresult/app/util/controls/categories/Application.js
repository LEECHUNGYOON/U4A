// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["../Category","sap/ushell/services/VisualizationInstantiation","sap/ui/thirdparty/jquery"],function(t,e,jQuery){"use strict";var i=t.extend("sap.ushell.components.cepsearchresult.app.util.controls.categories.Application",{renderer:t.getMetadata().getRenderer()});var a=new e;var n=500;i.prototype.getViewSettings=function(){return{views:[{key:"list",icon:"sap-icon://text-align-justified"},{key:"tile",icon:"sap-icon://grid"}],default:"tile"}};i.prototype.createListItemTemplate=function(){var e=t.prototype.createListItemTemplate.apply(this);e.attachModelContextChange(this.addTile.bind(this));return e};i.prototype.createCardItemTemplate=function(){var e=t.prototype.createListItemTemplate.apply(this);e.attachModelContextChange(this.addTile.bind(this));return e};i.prototype.createTileItemTemplate=function(){var e=new t.CustomListItem({});e.attachModelContextChange(this.addTile.bind(this));return e};i.prototype.addTile=function(t){var e=t.getSource();if(e.getBindingContext("data")){var i=e.getBindingContext("data").getObject(),r=i.visualization;if(!r){return}if(e._oViz){e._oViz.destroy()}var o=a.instantiateVisualization(r);o.addStyleClass(r.displayFormatHint);e._oViz=o;if(this.getCurrentView()==="tile"){e.destroyContent();e.addContent(o);this.activateTile(o,true,n)}else{e.addContent(o.addStyleClass("hiddentile"))}}};i.prototype.activateTile=function(t,e,i){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(){t.setActive(e,false);this.activateTile(t,false,1e3)}.bind(this))}}.bind(this),i)};i.prototype.itemNavigate=function(t){if(this.isLoading()){return}var e=t.getSource();if(e.isA("sap.m.ObjectIdentifier")){e=e.getParent().getParent().getParent()}jQuery(e._oViz.getDomRef().querySelector("a")).trigger("tap")};i.prototype._getSearchParameters=function(t,e,i){return{includeAppsWithoutVisualizations:false,enableVisualizationPreview:false,searchTerm:t,skip:e,top:i,filter:{filters:[{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_SEARCHAPP"},{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_HOMEPAGE"}],and:true},sort:{path:"title",descending:false}}};i.prototype.fetchData=function(t,e,i){return this.getMaxRowItemsAsync().then(function(a){var n=Math.ceil(i/a)*a;return this.getData(this._getSearchParameters(t,e,n)).then(function(t){var e=t.data;e.forEach(function(t,a){if(e.length>i&&t.visualization.displayFormatHint==="standardWide"){e.pop()}});t.pageGap=e.length-i;return t})}.bind(this))};i.prototype.fetchCount=function(t,e,i){return this.getData(this._getSearchParameters(t,e,i))};i.prototype.getPlaceholderData=function(){return{title:new Array(10).join(" "),description:new Array(35).join(" "),keywords:"",icon:"sap-icon://person-placeholder",label:new Array(17).join(" "),url:""}};i.prototype.getData=function(t){var e={data:[],count:0};if(sap.ushell.Container&&sap.ushell.Container.getServiceAsync){return sap.ushell.Container.getServiceAsync("SearchCEP").then(function(e){return e.search(t)})}return Promise.resolve(e)};return i});
//# sourceMappingURL=Application.js.map