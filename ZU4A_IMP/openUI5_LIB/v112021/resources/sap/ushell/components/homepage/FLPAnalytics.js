// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/core/Core","sap/ushell/services/AppConfiguration"],function(e,a,i){"use strict";var t=["deleteTile","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"];var n=a.getEventBus();var o=this;var r={};function l(e,a,i){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(t){t.logCustomEvent(e,a,i)})}function c(e){var a=i.getMetadata();r[e]={};r[e].startTime=new Date;r[e].title=a.title}function s(a){try{var i=(new Date-r[a].startTime)/1e3;var t=r[a].title;l("FLP: Time in Application (sec)",i,[t])}catch(i){e.warning("Duration in application "+a+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics")}}function p(e,a,i){var t=hasher.getHash(),o;window.swa.custom1={ref:t};switch(a){case"appOpened":c(t);l("FLP: Application Opened","Direct Launch",[r[t].title]);n.unsubscribe("sap.ushell","appOpened",p);break;case"bookmarkTileAdded":o=window.document.title;l("FLP: Personalization","Save as Tile",[o,i&&i.group&&i.group.title?i.group.title:"",i&&i.group&&i.group.id?i.group.id:"",i&&i.tile&&i.tile.title?i.tile.title:o]);break;case"actionModeActive":l("FLP: Personalization","Enter Action Mode",[i.source]);break;case"catalogTileClick":l("FLP: Application Launch point","Catalog",[]);break;case"dashboardTileClick":l("FLP: Application Launch point","Homepage",[]);break;case"dashboardTileLinkClick":l("FLP: Application Launch point","Tile Group Link",[]);break;default:break}}function u(e){var a,i,t;if(e.getParameter("from")&&e.getParameter("to")){a=e.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:a};s(a);t=e.getParameter("to");i=t.getId().replace("application-","").replace("applicationShellPage-","");c(i);window.swa.custom1={ref:i};l("FLP: Application Opened","Fiori Navigation",[r[i].title])}}window.addEventListener("pagehide",function(e){var a=window.location.hash.substring(1);s(a)});try{a.byId("viewPortContainer").attachAfterNavigate(u,o)}catch(a){e.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics")}n.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",p,o);t.forEach(function(e){n.subscribe("launchpad",e,p,o)});n.subscribe("sap.ushell","appOpened",p,o)});
//# sourceMappingURL=FLPAnalytics.js.map