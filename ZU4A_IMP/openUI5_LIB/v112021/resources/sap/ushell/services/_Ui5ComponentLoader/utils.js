// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/deepExtend","sap/base/util/UriParameters","sap/ui/core/Component","sap/ui/core/util/AsyncHintsHelper","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(e,a,t,r,n,jQuery,s,i){"use strict";let o=["sap.ui.unified"];(function(){o=["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]})();function p(e,a){var t=new jQuery.Deferred;e.componentData=a;if(e.manifest===undefined){e.manifest=false}else if(a.technicalParameters&&a.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var n=new s(e.manifest);n.addQuery("version",a.technicalParameters["sap-ui-fl-version"][0]);e.manifest=n.toString()}}r.create(e).then(function(e){t.resolve(e)},function(e){t.reject(e)});return t.promise()}function u(e){var a=true;if(e.hasOwnProperty("loadCoreExt")){a=e.loadCoreExt}return a}function c(e,a){var t=true;if(e.hasOwnProperty("loadDefaultDependencies")){t=e.loadDefaultDependencies}if(a&&a.hasOwnProperty("loadDefaultDependencies")){t=t&&a.loadDefaultDependencies}return t}function l(e){var a=e.semanticObject||null;var t=e.action||null;if(!a||!t){return null}return"application-"+a+"-"+t+"-component"}function f(e){return e&&e.indexOf("?")>=0}function d(e){var a=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(a,"")}function m(e){if(!e){return e}var a=e.indexOf("?");if(a>=0){return e.slice(0,a)}return e}function y(a,t,r,n,s){var i="The issue is most likely caused by application "+a,o="Failed to load UI5 component with properties: '"+s+"'.";if(n){o+=" Error likely caused by:\n"+n}else{o+=" Error: '"+t+"'"}if(r==="parsererror"){i+=", as one or more of its resources could not be parsed"}i+=". Please create a support incident and assign it to the support component of the respective application.";e.error(i,o,a)}function h(e){var a=t.fromURL(e||window.location.href).mParams,r=a["sap-xapp-state"],n=a["sap-xapp-state-data"],s;delete a["sap-xapp-state"];delete a["sap-xapp-state-data"];s={startupParameters:a};if(n){s["sap-xapp-state"]=n}if(r){s["sap-xapp-state"]=r}return s}function v(a,t){if(!Array.isArray(t)){return}t.forEach(function(t){var r=String.prototype.toLowerCase.call(t.severity||"");r=["trace","debug","info","warning","error","fatal"].indexOf(r)!==-1?r:"error";e[r](t.text,t.details,a)})}function x(a){if(!Array.isArray(a)){e.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(a.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(t){e.error("Ui5ComponentLoader: failed to load bundle resources: ["+a.join(", ")+"]");return Promise.reject(t)})}function P(e,t,r,s,i,p,u,c,l){var f=a({},i);if(!f.asyncHints){f.asyncHints=t?{libs:o}:{}}if(e){f.asyncHints.preloadBundles=f.asyncHints.preloadBundles||[];f.asyncHints.preloadBundles=f.asyncHints.preloadBundles.concat(l)}if(s){f.asyncHints.waitFor=s}if(!f.name){f.name=p}if(u){f.url=m(u)}if(c){f.id=c}if(r&&f.asyncHints){n.modifyUrls(f.asyncHints,d)}return f}function D(e,t,r,n){var s=a({startupParameters:{}},e);if(r){s.config=r}if(n){s.technicalParameters=n}if(f(t)){var i=h(t);s.startupParameters=i.startupParameters;if(i["sap-xapp-state-data"]){s["sap-xapp-state"]=i["sap-xapp-state-data"]}if(i["sap-xapp-state"]){s["sap-xapp-state"]=i["sap-xapp-state"]}}return s}function g(e){o=e}return{constructAppComponentId:l,getParameterMap:h,logAnyApplicationDependenciesMessages:v,logInstantiateComponentError:y,shouldLoadCoreExt:u,shouldLoadDefaultDependencies:c,urlHasParameters:f,removeParametersFromUrl:m,createUi5Component:p,loadBundle:x,createComponentProperties:P,createComponentData:D,_setDefaultDependencies:g}},false);
//# sourceMappingURL=utils.js.map