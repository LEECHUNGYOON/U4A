// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/_UserRecents/UserRecentsBase"],function(e){"use strict";var t=e.extend("sap.ushell.services.UserRecents.RecentsList");t.prototype._updateIfAlreadyIn=function(e,t){return this.aRecents.some(function(s){var i;if(this._compareItems(s.oItem,e)){s.oItem=e;s.iTimestamp=t;s.iCount=s.iCount+1;i=true}else{i=false}return i}.bind(this))};t.prototype._insertNew=function(t,s){var i={oItem:t,iTimestamp:s,iCount:1};if(this.aRecents.length===this.iMaxItems){this.aRecents.sort(e.itemSorter);this.aRecents.pop()}this.aRecents.push(i)};t.prototype.clearAllActivities=function(){return this.save([])};t.prototype.newItem=function(e){return new Promise((t,s)=>{const i=Date.now();let n;this.load().then(r=>{this.aRecents=r||[];n=this._updateIfAlreadyIn(e,i);if(!n){this._insertNew(e,i)}this.save(this.aRecents).then(()=>{t()}).catch(e=>{s(e)})})})};t.prototype.getRecentItems=function(){return new Promise((t,s)=>{this.load().then(s=>{s=s||[];s.sort(e.itemSorter);this.aRecents=s.slice(0,this.iMaxItems);t(this.aRecents.map(e=>e.oItem))}).catch(e=>{s(e)})})};return t});
//# sourceMappingURL=RecentsList.js.map