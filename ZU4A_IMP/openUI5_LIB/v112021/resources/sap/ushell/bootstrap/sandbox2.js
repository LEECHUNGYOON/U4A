// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
(function(){"use strict";window["sap-ui-config"]={"xx-bootTask":function(o){t().then(t=>{t(o)})}};function t(){return new Promise(function(t){sap.ui.require(["sap/base/util/UriParameters","sap/base/Log","sap/base/util/ObjectPath","sap/ushell/bootstrap/common/common.util","sap/ushell/Container"],function(o,e,i,n){async function s(t){function o(){e.error("Failed to load Fiori Launchpad Sandbox configuration",t)}try{const e=await fetch(t,{headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json();return t}o()}catch(t){o()}}function a(t,o,e){if(typeof o!=="object"){return}const i=e?JSON.parse(JSON.stringify(o)):o;Object.entries(i).forEach(([o,e])=>{if(Object.prototype.toString.apply(t[o])==="[object Object]"&&Object.prototype.toString.apply(e)==="[object Object]"){a(t[o],e,false);return}t[o]=e})}function c(t){function o(t){return t.additionalInformation.replace("SAPUI5.Component=","")}function e(t,e){const i=o(t);const n=t.title||i.split(".").pop();const s=e.split("-");const a={"sap.app":{id:i,title:n,subTitle:t.description||"",ach:"CA-FLP-FE-COR",applicationVersion:{version:"1.0.0"},crossNavigation:{inbounds:{target:{semanticObject:s[0],action:s[1],signature:{parameters:{},additionalParameters:"allowed"}}}},tags:{keywords:n.split(" ")}},"sap.flp":{type:"application"},"sap.ui":{technology:"UI5",icons:{icon:"sap-icon://Fiori2/F0018"},deviceTypes:{desktop:true,tablet:false,phone:false}},"sap.ui5":{componentName:i},"sap.platform.runtime":{componentProperties:{url:t.url}}};return a}function n(t){const e=t.resolutionResult||{};const i=e.ui5ComponentName||o(e);const n=t.title||i.split(".").pop();const s={"sap.app":{id:i,title:n,subTitle:e.description||"",ach:"CA-FLP-FE-COR",applicationVersion:{version:"1.0.0"},crossNavigation:{inbounds:{target:{semanticObject:t.semanticObject,action:t.action,signature:t.signature}}},tags:{keywords:n.split(" ")}},"sap.flp":{type:"application"},"sap.ui":{technology:"UI5",icons:{icon:"sap-icon://Fiori2/F0018"},deviceTypes:t.deviceTypes},"sap.ui5":{componentName:i},"sap.platform.runtime":{componentProperties:{url:e.url}}};return s}function s(t,e){const i=o(t);const n=t.title||i.split(".").pop();const s={vizType:"sap.ushell.StaticAppLauncher",businessApp:i||"sap.ushell.sanbox.BusinessApp",vizConfig:{"sap.app":{title:n,subTitle:t.description||""},"sap.ui":{icons:{icon:t.icon},deviceTypes:{desktop:true,tablet:true,phone:true}},"sap.flp":{target:{type:"URL",url:"#"+e}}}};return s}const a=t.services.CommonDataModel.adapter.config.siteData;const c=i.get("applications",t)||{};for(let[t,o]of Object.entries(c)){const i="custom_viz_"+t;const n=a.pages.page1.payload.sections.APPS;a.applications[t]=e(o,t);a.visualizations[t]=s(o,t);n.layout.vizOrder.push(i);n.viz[i]={id:i,vizId:t}}const p=i.get("services.NavTargetResolution.adapter.config.applications",t)||{};for(let[t,o]of Object.entries(p)){if(o.additionalInformation){a.applications[t]=e(o,t)}}const r=i.get("services.ClientSideTargetResolution.adapter.config.inbounds",t)||{};for(let t of Object.values(r)){a.applications[t.semanticObject+"-"+t.action]=n(t)}const l=i.get("services.LaunchPage.adapter.config.groups",t)||[];l.forEach((t,o)=>{const e=t.id||"GROUP_"+o;const i=a.pages.page1;i.payload.layout.sectionOrder.splice(o+1,0,e);i.payload.sections[e]={id:e,title:t.title,layout:{vizOrder:[]},viz:{}};const n=i.payload.sections[e];(t.tiles||[]).forEach((t,o)=>{const i=t.id||e+"_tile_"+o;n.layout.vizOrder.push(i);const s=t.formFactor||"Desktop,Tablet,Phone";const c=t.properties||{};const p={vizType:"sap.ushell.StaticAppLauncher",businessApp:"sap.ushell.sanbox.BusinessApp",vizConfig:{"sap.app":{title:t.title||c.title||"",subTitle:c.subtitle||""},"sap.ui":{icons:{icon:c.icon},deviceTypes:{desktop:s.indexOf("Desktop")>-1,tablet:s.indexOf("Tablet")>-1,phone:s.indexOf("Phone")>-1}},"sap.flp":{target:{type:"URL",url:c.targetURL||c.href||"#"}}}};a.visualizations[i]=p;n.viz[i]={id:i,vizId:i}})});delete t.applications;return t}function p(t){a(window["sap-ushell-config"],t,true)}function r(t){const o=window["sap-ushell-config"].services.CommonDataModel.adapter.config;o.siteData=t;delete o.siteDataUrl}async function l(t){const o=/\.json/i.test(t)?t:t+".json";const e=await s(o);if(e){a(window["sap-ushell-config"],e,true)}}function u(){const t=window.document.getElementById("sap-ushell-bootstrap");const o=t.src.split("?")[0].split("/").slice(0,-1).join("/")+"/";return o}async function d(t){const e=o.fromURL(window.location.href).getAll("sap-ushell-sandbox-config");const i=u();const a=i+"./sandbox2/sandboxConfig.json";const d=i+"./sandbox2/sandboxSite.json";if(e.length===0){e.push("/appconfig/fioriSandboxConfig.json")}if(!window["sap-ushell-config"]){window["sap-ushell-config"]={}}const[f,g]=await Promise.all([s(a),s(d)]);p(f);r(g);for(const t of e){await l(t)}const b=c(window["sap-ushell-config"]);n.migrateV2ServiceConfig(b);if(b.modulePaths){const t=Object.keys(b.modulePaths).reduce((t,o)=>{t[o.replace(/\./g,"/")]=b.modulePaths[o];return t},{});sap.ui.loader.config({paths:t})}sap.ushell.bootstrap("cdm").done(t)}t(d)})})}})();
//# sourceMappingURL=sandbox2.js.map