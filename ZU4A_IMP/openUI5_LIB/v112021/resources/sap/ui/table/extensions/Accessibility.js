sap.ui.define(["./ExtensionBase","./AccessibilityRender","../utils/TableUtils","../library","sap/ui/thirdparty/jquery","sap/ui/core/Configuration"],(function(e,t,a,o,jQuery,i){"use strict";var r=o.SelectionMode,l=a.CELLTYPE,n={getAccInfoOfControl:function(e){var t=null;if(e&&"function"==typeof e.getAccessibilityInfo){if("function"!=typeof e.getVisible||e.getVisible()){var o=e.getAccessibilityInfo();if(o){var i={};n._flatten(o,i),t=i}}else t=n._normalize({});t&&!t.description&&(t.description=a.getResourceText("TBL_CTRL_STATE_EMPTY"))}return t},_normalize:function(e){return e?(e._normalized||(e.role=e.role||"",e.type=e.type||"",e.description=e.description||"",e.enabled=!0===e.enabled||!1===e.enabled?e.enabled:null,e.editable=!0===e.editable||!1===e.editable?e.editable:null,e.children=e.children||[],e._normalized=!0),e):null},_flatten:function(e,t,a){a=a||0,n._normalize(e),0==a&&(n._normalize(t),t._descriptions=[]),t._descriptions.push(n._getFullDescription(e)),e.children.forEach((function(e){if(e.getAccessibilityInfo&&(!e.getVisible||e.getVisible())){var o=e.getAccessibilityInfo();o&&n._flatten(o,t,a+1)}})),0==a&&(t.description=t._descriptions.join(" ").trim(),t._descriptions=void 0)},_getFullDescription:function(e){var t=e.type+" "+e.description;return!1===e.enabled?t=t+" "+a.getResourceText("TBL_CTRL_STATE_DISABLED"):!1===e.editable?t=t+" "+a.getResourceText("TBL_CTRL_STATE_READONLY"):!0===e.required&&(t=t+" "+a.getResourceText("TBL_CTRL_STATE_REQUIRED")),t.trim()}},s={getColumnIndexOfFocusedCell:function(e){var t=e.getTable();return a.getFocusedItemInfo(t).cellInRow-(a.hasRowHeader(t)?1:0)},getInfoOfFocusedCell:function(e){var t=e.getTable(),o=t._getItemNavigation(),i=t.getDomRef();if(!e.getAccMode()||!i||!o)return null;var r=o.getFocusedDomRef();return r&&r===document.activeElement?a.getCellInfo(r):null},getRelevantColumnHeaders:function(e,t){var o=[];if(!e||!t||!e.getColumnHeaderVisible())return o;var i=a.getHeaderRowCount(e);if(i>0){var r=t.getId();o.push(r);for(var l=1;l<i;l++)o.push(r+"_"+l);var n=a.Column.getParentSpannedColumns(e,r);if(n&&n.length)for(var s=0;s<n.length;s++){var c=n[s].level,u=n[s].column.getId();o[c]=0===c?u:u+"_"+c}}return o},isHiddenCell:function(e,t){var o=a.Grouping.isInGroupHeaderRow(e),i=a.Grouping.isInSummaryRow(e),r=!!t&&!!t.hasStyleClass,l=e.parent().hasClass("sapUiTableRowHidden"),n=e.hasClass("sapUiTableCellHidden"),s=o&&r&&t.hasStyleClass("sapUiAnalyticalTableGroupCellHidden"),c=i&&r&&t.hasStyleClass("sapUiAnalyticalTableSumCellHidden");return l||n||s||c},isTreeColumnCell:function(e,t){return a.Grouping.isInTreeMode(e.getTable())&&t.hasClass("sapUiTableCellFirst")},getColumnTooltip:function(e){if(!e)return null;var t=e.getLabel();function o(e){return!!e&&e==(t&&t.getText?t.getText():"")}var i=e.getTooltip_AsString();return o(i)?(a.isA(t,"sap.ui.core.Control")&&(i=t.getTooltip_AsString()),o(i)?null:i):i},getGridSize:function(e){var t=a.hasRowHeader(e),o=a.hasRowActions(e),i=a.getVisibleColumnCount(e)+(t?1:0)+(o?1:0),r=a.isNoDataVisible(e)?0:Math.max(e._getTotalRowCount(),e._getRowCounts()._fullsize);return{columnCount:i,rowCount:a.getHeaderRowCount(e)+r}},getRowIndex:function(e){return e.getIndex()+1+a.getHeaderRowCount(e.getTable())},updateRowColCount:function(e){var t=e.getTable(),o=t._getItemNavigation(),i=!1,r=!1,l=!1,n=a.hasRowHeader(t);if(o){var c=s.getColumnIndexOfFocusedCell(e)+1+(n?1:0),u=t.getRows()[a.getRowIndexOfFocusedCell(t)],d=u?s.getRowIndex(u):0,E=s.getGridSize(t);i=e._iLastRowNumber!=d||e._iLastRowNumber==d&&e._iLastColumnNumber==c,r=e._iLastColumnNumber!=c,l=null==e._iLastRowNumber&&null==e._iLastColumnNumber,t.$("rownumberofrows").text(i&&d>0?a.getResourceText("TBL_ROW_ROWCOUNT",[d,E.rowCount]):"."),t.$("colnumberofcols").text(r?a.getResourceText("TBL_COL_COLCOUNT",[c,E.columnCount]):"."),t.$("ariacount").text(l?a.getResourceText("TBL_DATA_ROWS_COLS",[E.rowCount,E.columnCount]):"."),e._iLastRowNumber=d,e._iLastColumnNumber=c}return{rowChange:i,colChange:r,initial:l}},cleanupCellModifications:function(e){e._cleanupInfo&&(e._cleanupInfo.cell.attr(e._cleanupInfo.attr),e._cleanupInfo=null)},storeDefaultsBeforeCellModifications:function(e,t,a,o){e._cleanupInfo={cell:t,attr:{"aria-labelledby":a&&a.length?a.join(" "):null,"aria-describedby":o&&o.length?o.join(" "):null}}},performCellModifications:function(e,t,o,i,l,n,c,u){s.storeDefaultsBeforeCellModifications(e,t,o,i);var d=s.updateRowColCount(e),E=e.getTable();E.$("cellacc").text(c||"."),u&&u(l,n,d.rowChange,d.colChange,d.initial);var T="";if(d.initial&&(T=E.getId()+"-ariacount",E.getSelectionMode()!==r.None&&(T=T+" "+E.getId()+"-ariaselection")),l&&l.length&&(T=T+" "+l.join(" ")),(d.initial||d.rowChange)&&a.hasRowNavigationIndicators(E)){var g=a.getCellInfo(t);if(g.type!==a.CELLTYPE.COLUMNHEADER&&g.type!==a.CELLTYPE.COLUMNROWHEADER)E.getRows()[g.rowIndex].getAggregation("_settings").getNavigated()&&(T=T+" "+E.getId()+"-rownavigatedtext")}t.attr({"aria-labelledby":T||null,"aria-describedby":n&&n.length?n.join(" "):null})},modifyAccOfDATACELL:function(e){var t=this.getTable(),o=t.getId(),i=t._getItemNavigation(),r=e.cell;if(i){var l=a.getRowIndexOfFocusedCell(t),u=s.getColumnIndexOfFocusedCell(this),d=a.getRowColCell(t,l,u,!1);if(d?.row&&d.cell&&d.column){var E=null,T=d.row,g=T.getId(),p=s.isHiddenCell(r,d.cell),b=s.isTreeColumnCell(this,r),f=s.getAriaAttributesFor(this,c.ELEMENTTYPES.DATACELL,{index:u,column:d.column,fixed:a.isFixedColumn(t,u)})["aria-labelledby"]||[],R=[o+"-rownumberofrows",o+"-colnumberofcols"],C=T.isGroupHeader(),h=T.isSummary();C?R.push(o+"-ariarowgrouplabel"):T.isTotalSummary()?R.push(o+"-ariagrandtotallabel"):T.isGroupSummary()&&R.push(o+"-ariagrouptotallabel"),!a.hasRowHighlights(t)||C||h||R.push(g+"-highlighttext"),R=R.concat(f),p||(E=n.getAccInfoOfControl(d.cell),R.push(E?o+"-cellacc":d.cell.getId()),null!==a.getInteractiveElements(r)&&R.push(o+"-toggleedit"));var A=E?E.description:".";if(b&&!p){var w=s.getAriaAttributesFor(this,c.ELEMENTTYPES.TREEICON,{row:d.row});w&&w["aria-label"]&&(A=w["aria-label"]+" "+A)}s.performCellModifications(this,r,f,null,R,[],A,(function(e,o,i,l){C&&i&&e.splice(3,0,g+"-groupHeader"),(1==r.find(".sapUiTableTreeIcon").not(".sapUiTableTreeIconLeaf").length||C)&&(i||l)?o.push(t.getId()+(T.isExpanded()?"-rowcollapsetext":"-rowexpandtext")):p||C||h||!a.isRowSelectionAllowed(t)||!i||e.push(g+"-rowselecttext")}))}}},modifyAccOfROWHEADER:function(e){var t=this.getTable(),o=t.getId(),i=e.cell,r=t.getRows()[e.rowIndex],l=r.getId(),n=s.getAriaAttributesFor(this,c.ELEMENTTYPES.ROWHEADER)["aria-labelledby"]||[],u=n.concat([o+"-rownumberofrows",o+"-colnumberofcols"]);r.isSummary()||r.isGroupHeader()||r.isContentHidden()||(u.push(l+"-rowselecttext"),a.hasRowHighlights(t)&&u.push(l+"-highlighttext")),r.isGroupHeader()&&(u.push(o+"-ariarowgrouplabel"),u.push(l+"-groupHeader"),u.push(o+(r.isExpanded()?"-rowcollapsetext":"-rowexpandtext"))),r.isTotalSummary()?u.push(o+"-ariagrandtotallabel"):r.isGroupSummary()&&u.push(o+"-ariagrouptotallabel"),s.performCellModifications(this,i,n,null,u,null,null)},modifyAccOfCOLUMNHEADER:function(e){var t=this.getTable(),o=e.cell,i=sap.ui.getCore().byId(o.attr("data-sap-ui-colid"));if(-1!==t.getColumns().findIndex((e=>e===i))){var r=a.Column.getHeaderLabel(i),l=s.getAriaAttributesFor(this,c.ELEMENTTYPES.COLUMNHEADER,{headerId:o.attr("id"),column:i,index:o.attr("data-sap-ui-colindex")}),n=s.getColumnTooltip(i),u=[t.getId()+"-colnumberofcols"].concat(l["aria-labelledby"]),d=e.columnSpan;r?.getRequired?.()&&u.push(t.getId()+"-ariarequired"),d>1&&(u.push(t.getId()+"-ariacolspan"),t.$("ariacolspan").text(a.getResourceText("TBL_COL_DESC_SPAN",[""+d]))),n&&u.push(t.getId()+"-cellacc"),d<=1&&i&&i.getFiltered()&&u.push(t.getId()+"-ariacolfiltered"),s.performCellModifications(this,o,l["aria-labelledby"],l["aria-describedby"],u,l["aria-describedby"],n)}},modifyAccOfCOLUMNROWHEADER:function(e){var t=this.getTable(),a=e.cell,o=a.hasClass("sapUiTableSelAllVisible"),i=s.getAriaAttributesFor(this,c.ELEMENTTYPES.COLUMNROWHEADER,{enabled:o,checked:o&&!t.$().hasClass("sapUiTableSelAll")}),r=[t.getId()+"-colnumberofcols"].concat(i["aria-labelledby"]);s.performCellModifications(this,a,i["aria-labelledby"],i["aria-describedby"],r,i["aria-describedby"],null)},modifyAccOfROWACTION:function(e){var t=this.getTable(),o=t.getId(),i=e.cell,r=t.getRows()[e.rowIndex],l=r.getId(),n=s.isHiddenCell(i),u=s.getAriaAttributesFor(this,c.ELEMENTTYPES.ROWACTION)["aria-labelledby"]||[],d=[o+"-rownumberofrows",o+"-colnumberofcols"].concat(u),E=[],T=r.isGroupHeader();T&&(d.push(o+"-ariarowgrouplabel"),d.push(o+(r.isExpanded()?"-rowcollapsetext":"-rowexpandtext"))),r.isTotalSummary()?d.push(o+"-ariagrandtotallabel"):r.isGroupSummary()&&d.push(o+"-ariagrouptotallabel"),!a.hasRowHighlights(t)||r.isGroupHeader()||r.isSummary()||d.push(l+"-highlighttext");var g="";if(!n){var p=r.getRowAction();if(p){var b=p.getAccessibilityInfo();b&&(d.push(o+"-cellacc"),g=b.description,null!==a.getInteractiveElements(i)&&E.push(o+"-toggleedit"))}}s.performCellModifications(this,i,u,[],d,E,g,(function(e,t,a){if(T&&a){var i=e.indexOf(o+"-ariarowgrouplabel")+1;e.splice(i,0,l+"-groupHeader")}}))},getAriaAttributesFor:function(e,t,o){var i={},l=e.getTable(),n=l.getId();function u(e,t,o,r){var l="";o&&r?l="overlay,nodata":o&&!r?l="overlay":!o&&r&&(l="nodata");var n=!1;(o&&e.getShowOverlay()||r&&a.isNoDataVisible(e))&&(n=!0),n&&(i["aria-hidden"]="true"),l&&(i["data-sap-ui-table-acc-covered"]=l)}switch(t){case c.ELEMENTTYPES.COLUMNROWHEADER:var d=l._getSelectionPlugin().getRenderConfig();d.headerSelector.visible&&("toggle"===d.headerSelector.type?(i.role=["checkbox"],o&&o.enabled&&(i["aria-checked"]=o.checked?"true":"false")):"clear"===d.headerSelector.type&&(i.role=["button"],o&&o.enabled||(i["aria-disabled"]="true")));break;case c.ELEMENTTYPES.ROWHEADER:i.role="gridcell",i["aria-colindex"]=1,a.hasRowHeader(l)&&l.getSelectionMode()===r.None&&(i["aria-labelledby"]=[n+"-rowselecthdr"]);break;case c.ELEMENTTYPES.ROWACTION:i.role="gridcell",i["aria-colindex"]=a.getVisibleColumnCount(l)+1+(a.hasRowHeader(l)?1:0),i["aria-labelledby"]=[n+"-rowacthdr"];break;case c.ELEMENTTYPES.COLUMNHEADER:var E=o&&o.column,T=o&&o.colspan;i.role="columnheader",i["aria-colindex"]=o.index+1+(a.hasRowHeader(l)?1:0);var g=[];if(o&&o.headerId){var p=s.getRelevantColumnHeaders(l,E),b=p.indexOf(o.headerId);g=b>0?p.slice(0,b+1):[o.headerId]}for(var f=0;f<g.length;f++)g[f]=g[f]+"-inner";if(i["aria-labelledby"]=g,o&&o.index<l.getComputedFixedColumnCount()&&i["aria-labelledby"].push(n+"-ariafixedcolumn"),!T&&E&&(i["aria-sort"]=E.getSortOrder().toLowerCase(),E.getSorted()||delete i["aria-sort"]),!T&&E){var R=E.getHeaderMenuInstance();if(R){var C=R.getAriaHasPopupType();"None"!==C&&(i["aria-haspopup"]=C.toLowerCase())}!R&&E._menuHasItems()&&(i["aria-haspopup"]="menu")}break;case c.ELEMENTTYPES.DATACELL:if(i.role="gridcell",i["aria-colindex"]=o.index+1+(a.hasRowHeader(l)?1:0),o.column){for(g=s.getRelevantColumnHeaders(l,o.column),f=0;f<g.length;f++)g[f]=g[f]+"-inner";o&&o.fixed&&g.push(n+"-ariafixedcolumn"),i["aria-labelledby"]=g}break;case c.ELEMENTTYPES.ROOT:break;case c.ELEMENTTYPES.TABLE:i.role="presentation",u(l,0,!0,!0);break;case c.ELEMENTTYPES.CONTAINER:break;case c.ELEMENTTYPES.CONTENT:i.role=a.Grouping.isInGroupMode(l)||a.Grouping.isInTreeMode(l)?"treegrid":"grid",i["aria-labelledby"]=[].concat(l.getAriaLabelledBy()),l.getTitle()&&i["aria-labelledby"].push(l.getTitle().getId()),l.getSelectionMode()===r.MultiToggle&&(i["aria-multiselectable"]="true");var h=l._getRowCounts(),A=a.hasFixedColumns(l),w=h.fixedTop>0,L=h.fixedBottom>0,m=a.hasRowHeader(l),O=a.hasRowActions(l),_=s.getGridSize(l);i["aria-owns"]=[n+"-table"],A&&i["aria-owns"].push(n+"-table-fixed"),w&&(i["aria-owns"].push(n+"-table-fixrow"),A&&i["aria-owns"].push(n+"-table-fixed-fixrow")),L&&(i["aria-owns"].push(n+"-table-fixrow-bottom"),A&&i["aria-owns"].push(n+"-table-fixed-fixrow-bottom")),m&&i["aria-owns"].push(n+"-sapUiTableRowHdrScr"),O&&i["aria-owns"].push(n+"-sapUiTableRowActionScr"),i["aria-rowcount"]=_.rowCount,i["aria-colcount"]=_.columnCount,l.isA("sap.ui.table.AnalyticalTable")&&(i["aria-roledescription"]=a.getResourceText("TBL_ANALYTICAL_TABLE_ROLE_DESCRIPTION"));break;case c.ELEMENTTYPES.TABLEHEADER:i.role="heading",i["aria-level"]="2",u(l,0,!0,!1);break;case c.ELEMENTTYPES.COLUMNHEADER_TBL:i.role="presentation";break;case c.ELEMENTTYPES.COLUMNHEADER_ROW:i.role="row",u(l,0,!0,!1);break;case c.ELEMENTTYPES.CREATIONROW_TBL:i.role="presentation";break;case c.ELEMENTTYPES.CREATIONROW:i.role="form",i["aria-labelledby"]=o.creationRow.getId()+"-label",u(l,0,!0,!1);break;case c.ELEMENTTYPES.ROWHEADER_COL:u(l,0,!0,!0);break;case c.ELEMENTTYPES.TH:i.role="presentation",i.scope="col",i["aria-hidden"]="true";break;case c.ELEMENTTYPES.TR:if(i.role="row",o.rowNavigated&&(i["aria-current"]=!0),!o.fixedCol){if(i["aria-owns"]=[],a.hasRowHeader(l)&&i["aria-owns"].push(n+"-rowsel"+o.index),a.hasFixedColumns(l))for(var S=0;S<l.getComputedFixedColumnCount();S++)i["aria-owns"].push(n+"-rows-row"+o.index+"-col"+S);a.hasRowActions(l)&&i["aria-owns"].push(n+"-rowact"+o.index)}break;case c.ELEMENTTYPES.TREEICON:if(a.Grouping.isInTreeMode(l)&&(i={"aria-label":"",title:"",role:""},l.getBinding()&&o&&o.row))if(o.row.isExpandable()){var N=a.getResourceText("TBL_COLLAPSE_EXPAND");i.title=N,i["aria-expanded"]=""+!!o.row.isExpanded(),i["aria-hidden"]="false",i.role="button"}else i["aria-label"]=a.getResourceText("TBL_LEAF"),i["aria-hidden"]="true";break;case c.ELEMENTTYPES.NODATA:var y=a.getNoContentMessage(l);g=[];if(i.role="gridcell",a.isA(y,"sap.ui.core.Control"))if(y.getAccessibilityReferences instanceof Function){var x=y.getAccessibilityReferences();g.push(x.title),g.push(x.description)}else g.push(y.getId());else g.push(n+"-noDataMsg");i["aria-labelledby"]=g,u(l,0,!0,!1);break;case c.ELEMENTTYPES.OVERLAY:i.role="region",i["aria-labelledby"]=[].concat(l.getAriaLabelledBy()),l.getTitle()&&i["aria-labelledby"].push(l.getTitle().getId()),i["aria-labelledby"].push(n+"-ariainvalid");break;case c.ELEMENTTYPES.TABLEFOOTER:case c.ELEMENTTYPES.TABLESUBHEADER:u(l,0,!0,!1);break;case c.ELEMENTTYPES.ROWACTIONHEADER:i["aria-hidden"]="true";break;case"PRESENTATION":i.role="presentation"}return i}},c=e.extend("sap.ui.table.extensions.Accessibility",{_init:function(o,r,l){return this._accMode=i.getAccessibility(),this._busyCells=[],a.addDelegate(o,this),e.enrich(o,t),"AccExtension"},_attachEvents:function(){a.Hook.register(this.getTable(),a.Hook.Keys.Table.TotalRowCountChanged,this._updateAriaRowCount,this)},_detachEvents:function(){a.Hook.deregister(this.getTable(),a.Hook.Keys.Table.TotalRowCountChanged,this._updateAriaRowCount,this)},_debug:function(){this._ExtensionHelper=s,this._ACCInfoHelper=n},destroy:function(){this.getTable().removeEventDelegate(this),this._busyCells=[],e.prototype.destroy.apply(this,arguments)},getAriaAttributesFor:function(e,t){return s.getAriaAttributesFor(this,e,t)},onfocusin:function(e){var t=this.getTable();t&&null!=a.getCellInfo(e.target).cell&&(t._mTimeouts._cleanupACCExtension&&(clearTimeout(t._mTimeouts._cleanupACCExtension),t._mTimeouts._cleanupACCExtension=null),this.updateAccForCurrentCell("Focus"))},onfocusout:function(e){var t=this.getTable();t&&(t._mTimeouts._cleanupACCExtension=setTimeout(function(){var e=this.getTable();e&&(this._iLastRowNumber=null,this._iLastColumnNumber=null,s.cleanupCellModifications(this),e._mTimeouts._cleanupACCExtension=null)}.bind(this),100))}});return c.ELEMENTTYPES={DATACELL:"DATACELL",COLUMNHEADER:"COLUMNHEADER",ROWHEADER:"ROWHEADER",ROWACTION:"ROWACTION",COLUMNROWHEADER:"COLUMNROWHEADER",ROOT:"ROOT",CONTAINER:"CONTAINER",CONTENT:"CONTENT",TABLE:"TABLE",TABLEHEADER:"TABLEHEADER",TABLEFOOTER:"TABLEFOOTER",TABLESUBHEADER:"TABLESUBHEADER",COLUMNHEADER_TBL:"COLUMNHEADER_TABLE",COLUMNHEADER_ROW:"COLUMNHEADER_ROW",CREATIONROW_TBL:"CREATIONROW_TABLE",CREATIONROW:"CREATIONROW",ROWHEADER_COL:"ROWHEADER_COL",TH:"TH",TR:"TR",TREEICON:"TREEICON",ROWACTIONHEADER:"ROWACTIONHEADER",NODATA:"NODATA",OVERLAY:"OVERLAY"},c.prototype.getAccMode=function(){return this._accMode},c.prototype._updateAriaRowIndices=function(){if(this._accMode){var e,t,a,o=this.getTable().getRows();for(t=0;t<o.length;t++)(a=(e=o[t]).getDomRefs(!0)).row.not(a.rowHeaderPart).not(a.rowActionPart).attr("aria-rowindex",s.getRowIndex(e))}},c.prototype._updateAriaRowCount=function(){var e=this.getTable(),t=e.$("sapUiTableGridCnt");t&&t.attr("aria-rowcount",s.getGridSize(e).rowCount)},c.prototype.updateAccForCurrentCell=function(e){if(this._accMode&&this.getTable()._getItemNavigation()){"Focus"!==e&&e!==a.RowsUpdateReason.Expand&&e!==a.RowsUpdateReason.Collapse||s.cleanupCellModifications(this);var t,o=s.getInfoOfFocusedCell(this);if(o&&o.isOfType(l.ANY)&&(o.isOfType(l.DATACELL)?t=c.ELEMENTTYPES.DATACELL:o.isOfType(l.COLUMNHEADER)?t=c.ELEMENTTYPES.COLUMNHEADER:o.isOfType(l.ROWHEADER)?t=c.ELEMENTTYPES.ROWHEADER:o.isOfType(l.ROWACTION)?t=c.ELEMENTTYPES.ROWACTION:o.isOfType(l.COLUMNROWHEADER)&&(t=c.ELEMENTTYPES.COLUMNROWHEADER),s["modifyAccOf"+t])){if("Focus"!==e&&e!==a.RowsUpdateReason.Expand&&e!==a.RowsUpdateReason.Collapse){if(!o.isOfType(l.ANYCONTENTCELL))return;o.cell.attr("role","status"),o.cell.attr("role","gridcell")}s["modifyAccOf"+t].apply(this,[o])}}},c.prototype.updateRowTooltips=function(e,t,o){if(this._accMode){var i=this.getTable(),r=!(e.isEmpty()||e.isGroupHeader()||e.isSummary()||i._getHideStandardTooltips());if(t.row&&(r&&a.isRowSelectionAllowed(i)&&!t.row.hasClass("sapUiTableRowHidden")?t.row.attr("title",o):t.row.removeAttr("title")),t.rowSelector&&(r&&a.isRowSelectorSelectionAllowed(i)?t.rowSelector.attr("title",o):t.rowSelector.removeAttr("title")),t.rowScrollPart){var l=t.rowScrollPart.add(t.rowFixedPart).add(t.rowActionPart);r&&a.isRowSelectionAllowed(i)?l.attr("title",o):l.removeAttr("title")}}},c.prototype.updateSelectionStateOfRow=function(e){if(this._accMode){var t=e.getDomRefs(!0),a="",o="";if(!e.isEmpty()&&!e.isGroupHeader()&&!e.isSummary()){var i=this.getAriaTextsForSelectionMode(!0),r=this.getTable()._getSelectionPlugin().isSelected(e);t.row&&t.row.not(t.rowHeaderPart).not(t.rowActionPart).add(t.row.children(".sapUiTableCell")).attr("aria-selected",r?"true":"false"),r?(a=i.keyboard.rowDeselect,o=i.mouse.rowDeselect):(a=i.keyboard.rowSelect,o=i.mouse.rowSelect)}t.rowSelectorText&&t.rowSelectorText.text(a),this.updateRowTooltips(e,t,o)}},c.prototype.updateAriaExpandAndLevelState=function(e){if(this._accMode){var t=e.getDomRefs(!0),a=t.row.find(".sapUiTableTreeIcon");t.rowHeaderPart&&t.rowHeaderPart.attr({"aria-haspopup":e.isGroupHeader()?"menu":null}),t.row.not(t.rowHeaderPart).not(t.rowActionPart).attr({"aria-expanded":e.isExpandable()?e.isExpanded()+"":null,"aria-level":e.getLevel()}),a&&a.attr(s.getAriaAttributesFor(this,c.ELEMENTTYPES.TREEICON,{row:e}))}},c.prototype.updateAriaStateOfRowHighlight=function(e){if(this._accMode&&e){var t=e._getRow(),a=t?t.getDomRef("highlighttext"):null;a&&(a.innerText=e._getHighlightText())}},c.prototype._updateAriaStateOfNavigatedRow=function(e){if(this._accMode&&e){var t=e._getRow(),a=e.getNavigated();t.getDomRefs(!0).row.attr("aria-current",!!a||null)}},c.prototype.updateAriaStateForOverlayAndNoData=function(){var e=this.getTable();e&&e.getDomRef()&&this._accMode&&(e.getShowOverlay()?e.$().find("[data-sap-ui-table-acc-covered*='overlay']").attr("aria-hidden","true"):(e.$().find("[data-sap-ui-table-acc-covered*='overlay']").removeAttr("aria-hidden"),a.isNoDataVisible(e)?e.$().find("[data-sap-ui-table-acc-covered*='nodata']").attr("aria-hidden","true"):e.$().find("[data-sap-ui-table-acc-covered*='nodata']").removeAttr("aria-hidden")))},c.prototype.getAriaTextsForSelectionMode=function(e,t){var o=this.getTable();t||(t=o.getSelectionMode());var i=!o._getHideStandardTooltips(),l={mouse:{rowSelect:"",rowDeselect:""},keyboard:{rowSelect:"",rowDeselect:""}},n=o._getSelectionPlugin().getSelectedCount();return t===r.Single?(l.mouse.rowSelect=i?a.getResourceText("TBL_ROW_SELECT"):"",l.mouse.rowDeselect=i?a.getResourceText("TBL_ROW_DESELECT"):"",l.keyboard.rowSelect=a.getResourceText("TBL_ROW_SELECT_KEY"),l.keyboard.rowDeselect=a.getResourceText("TBL_ROW_DESELECT_KEY")):t===r.MultiToggle&&(l.mouse.rowSelect=i?a.getResourceText("TBL_ROW_SELECT_MULTI_TOGGLE"):"",l.mouse.rowDeselect=i?a.getResourceText("TBL_ROW_DESELECT"):"",l.keyboard.rowSelect=a.getResourceText("TBL_ROW_SELECT_KEY"),l.keyboard.rowDeselect=a.getResourceText("TBL_ROW_DESELECT_KEY"),!0===e&&0===n&&(l.mouse.rowSelect=i?a.getResourceText("TBL_ROW_SELECT"):"")),l},c.prototype.setSelectAllState=function(e){var t=this.getTable();this._accMode&&t&&t.$("selall").attr("aria-checked",e?"true":"false")},c.prototype.addColumnHeaderLabel=function(e,t){var a=this.getTable();if(this._accMode&&t.getAriaLabelledBy&&a){var o=a.getColumnHeaderVisible()?e.getId():null;if(!o){var i=e.getAggregation("label");i&&(o=i.getId())}var r=t.getAriaLabelledBy();o&&r.indexOf(o)<0&&t.addAriaLabelledBy(o)}},c}));