sap.ui.define(["sap/ui/core/CalendarType","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/LocaleData","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/DateTypeRange","./calendar/Header","./calendar/Month","./calendar/MonthPicker","./calendar/YearPicker","./calendar/YearRangePicker","./calendar/CalendarDate","sap/ui/core/date/UniversalDate","sap/ui/core/date/UI5Date","./library","sap/ui/Device","sap/ui/core/format/DateFormat","sap/ui/core/ResizeHandler","sap/ui/core/Locale","sap/ui/events/KeyCodes","./CalendarRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/ui/core/Configuration","sap/ui/core/date/CalendarWeekNumbering"],(function(e,t,a,i,r,s,o,n,h,g,d,l,c,u,_,p,D,y,m,f,M,P,C,S,v,T){"use strict";var Y=t.extend("sap.ui.unified.Calendar",{metadata:{library:"sap.ui.unified",designtime:"sap/ui/unified/designtime/Calendar.designtime",properties:{intervalSelection:{type:"boolean",group:"Behavior",defaultValue:!1},singleSelection:{type:"boolean",group:"Behavior",defaultValue:!0},months:{type:"int",group:"Appearance",defaultValue:1},firstDayOfWeek:{type:"int",group:"Appearance",defaultValue:-1},nonWorkingDays:{type:"int[]",group:"Appearance",defaultValue:null},primaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance"},secondaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},showWeekNumbers:{type:"boolean",group:"Appearance",defaultValue:!0},showCurrentDateButton:{type:"boolean",group:"Behavior",defaultValue:!1},_currentPicker:{type:"string",group:"Appearance",visibility:"hidden"},calendarWeekNumbering:{type:"sap.ui.core.date.CalendarWeekNumbering",group:"Appearance",defaultValue:null},initialFocusedDate:{type:"object",group:"Data",defaultValue:null}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:!0,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:!0,singularName:"specialDate"},disabledDates:{type:"sap.ui.unified.DateRange",multiple:!0,singularName:"disabledDate"},header:{type:"sap.ui.core.Control",multiple:!1,visibility:"hidden"},secondMonthHeader:{type:"sap.ui.unified.calendar.Header",multiple:!1,visibility:"hidden"},month:{type:"sap.ui.unified.calendar.Month",multiple:!0,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:!1,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:!1,visibility:"hidden"},yearRangePicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:!1,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:!0,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:!1}},events:{select:{},cancel:{},startDateChange:{},weekNumberSelect:{allowPreventDefault:!0,parameters:{weekNumber:{type:"int"},weekDays:{type:"sap.ui.unified.DateRange"}}}}},renderer:M}),k={MONTH:"month",MONTH_PICKER:"monthPicker",YEAR_PICKER:"yearPicker",YEAR_RANGE_PICKER:"yearRangePicker"};function b(){var e=this.getSelectedDates(),t=this._getPrimaryCalendarType();e&&e[0]&&e[0].getStartDate()?this._oFocusedDate=l.fromLocalJSDate(e[0].getStartDate(),t):this._oFocusedDate=l.fromLocalJSDate(u.getInstance(),t),this._oFocusedDate.isBefore(this._oMinDate)?this._oFocusedDate=new l(this._oMinDate,t):this._oFocusedDate.isAfter(this._oMaxDate)&&(this._oFocusedDate=new l(this._oMaxDate,t))}function A(e){var t=e.size.width;if(!(t<=0)&&t!==this._iPrevWidth){this._iPrevWidth=t;var a=this._iSize;t<this._iBreakPointTablet?this._iSize=0:t<this._iBreakPointDesktop?this._iSize=1:t<this._iBreakPointLargeDesktop?this._iSize=2:this._iSize=3;var i=F.call(this);if(a!=this._iSize||this._bInitMonth){switch(this._iSize){case 1:this._setColumns(2);break;case 2:this._setColumns(3);break;case 3:this._setColumns(4);break;default:this._setColumns(1)}if(i<this._getColumns()&&this._setColumns(i),this._getColumns()>2&&i>this._getColumns()){for(var r=this._getColumns(),s=0,o=this._getColumns();r>=2;){var n=i%r;if(0==n){o=r;break}var h=n/r;h>s&&(s=h,o=r),r--}this._setColumns(o)}var g,d=this.getAggregation("month");this._getColumns()>1?(g=100/this._getColumns()+"%",this.$("content").removeClass("sapUiCalContentSingle")):(g="100%",this.$("content").addClass("sapUiCalContentSingle"));for(var l=0;l<d.length;l++){d[l].setWidth(g)}this.invalidate()}this._setPrimaryHeaderMonthButtonText(),this._toggleTwoMonthsInColumnsCSS()}}function w(e){var t=new l(e,this._getPrimaryCalendarType());t.setDate(1);var a=F.call(this);if(a<=12){var i=e.getMonth();12%a>0&&i+a>11&&(i=12-a),t.setMonth(i)}return t}function x(){var e,t,a;this._bNamesLengthChecked||(e=this._getMonthPicker(),this._bLongMonth=e._bLongMonth,this._bNamesLengthChecked=!0,this.setProperty("_currentPicker",k.MONTH),this._bLongMonth||(a=(t=this.getAggregation("month")).length>1?l.fromLocalJSDate(t[0].getDate(),this._getPrimaryCalendarType()):this._getFocusedDate(),this._setHeaderText(a),this._setPrimaryHeaderMonthButtonText(),this._toggleTwoMonthsInTwoColumnsCSS()))}function H(e,t){var a,i,s=this._getPrimaryCalendarType();if(e){if(i=(a=l.fromLocalJSDate(e,s)).getYear(),r._checkYearInValidRange(i,s),r._isOutside(a,this._oMinDate,this._oMaxDate))throw new Error("Date must not be in valid range (minDate and maxDate); "+this);this._setFocusedDate(a),this.getDomRef()&&0==this._iMode&&this._renderMonth(t,!0)}}function F(){return p.system.phone?1:this.getMonths()}function R(e){this.fireEvent("_renderMonth",{days:e.getParameter("days")})}function B(e){this._oSelectedMonth=e.oSource,this.fireSelect()}function L(e){var t,a,i;if(F.call(this)>1)for(t=this.getAggregation("month"),i=0;i<t.length;i++)(a=t[i]).getId()!=e.oSource.getId()&&a._bindMousemove()}function I(e){var t,a,i;if(F.call(this)>1)for(t=this.getAggregation("month"),i=0;i<t.length;i++)(a=t[i]).getId()!=e.oSource.getId()&&a._unbindMousemove()}function N(e){var t=e.getParameter("offset");t>0&&this._handleNext(e),t<0&&this._handlePrevious(e)}function E(){this._updateHeadersYearPrimaryText(this._getYearString())}return Y.prototype.init=function(){this._iBreakPointTablet=p.media._predefinedRangeSets[p.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0],this._iBreakPointDesktop=p.media._predefinedRangeSets[p.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1],this._iBreakPointLargeDesktop=p.media._predefinedRangeSets[p.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2],this._iColumns=1,this.setProperty("_currentPicker",k.MONTH_PICKER),this._oYearFormat=D.getDateInstance({format:"y",calendarType:this._getPrimaryCalendarType()}),this.data("sap-ui-fastnavgroup","true",!0),this._oMinDate=r._minDate(this._getPrimaryCalendarType()),this._oMaxDate=r._maxDate(this._getPrimaryCalendarType()),this._initializeHeader(),this._initializeSecondMonthHeader();var e=this._createMonth(this.getId()+"--Month0");e.attachEvent("focus",this._handleFocus,this),e.attachEvent("select",B,this),e.attachEvent("_renderMonth",R,this),e.attachEvent("_bindMousemove",L,this),e.attachEvent("_unbindMousemove",I,this),e._bNoThemeChange=!0,this.addAggregation("month",e),this._initializeMonthPicker(),this._initializeYearPicker(),this._initializeYearRangePicker(),this._resizeProxy=A.bind(this),this._oSelectedMonth,this._bSkipCancelButtonRendering=!1,this._bActionTriggeredFromSecondHeader=!1},Y.prototype.exit=function(){this._sInvalidateMonth&&clearTimeout(this._sInvalidateMonth),this._afterHeaderRenderAdjustCSS&&(this.removeDelegate(this._afterHeaderRenderAdjustCSS),this._afterHeaderRenderAdjustCSS=null),this._afterSecondHeaderRenderAdjustCSS&&(this.removeDelegate(this._afterSecondHeaderRenderAdjustCSS),this._afterSecondHeaderRenderAdjustCSS=null),this._sResizeListener&&(y.deregister(this._sResizeListener),this._sResizeListener=void 0),this._oSelectedMonth=null},Y.prototype._initializeHeader=function(){var e=new o(this.getId()+"--Head");e.attachEvent("pressPrevious",this._handlePrevious,this),e.attachEvent("pressNext",this._handleNext,this),e.attachEvent("pressCurrentDate",this._handleCurrentDate,this),e.attachEvent("pressButton1",this._handleButton1,this),e.attachEvent("pressButton2",this._handleButton2,this),e.attachEvent("pressButton3",this._handleButton1,this),e.attachEvent("pressButton4",this._handleButton2,this),this._afterHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(e),e.addDelegate(this._afterHeaderRenderAdjustCSS),this.setAggregation("header",e)},Y.prototype._createOnAfterRenderingDelegate=function(e){return{onAfterRendering:function(){e.getVisible()&&!e.getVisibleButton1()&&e.$().find(".sapUiCalHeadB2").addClass("sapUiCalSingleYearButton"),e.getVisible()&&!e._getVisibleButton3()&&this._isTwoMonthsInTwoColumns()&&e.$().find(".sapUiCalHeadB4").addClass("sapUiCalSingleYearButton")}.bind(this)}},Y.prototype._initializeSecondMonthHeader=function(){var e=new o(this.getId()+"--SecondMonthHead",{visible:!1});e.addStyleClass("sapUiCalHeadSecondMonth"),e.attachEvent("pressPrevious",this._handlePrevious,this),e.attachEvent("pressNext",this._handleNext,this),e.attachEvent("pressButton1",this._handleButton1,this),e.attachEvent("pressButton2",this._handleButton2,this),this._afterSecondHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(e),e.addDelegate(this._afterSecondHeaderRenderAdjustCSS),this.setAggregation("secondMonthHeader",e)},Y.prototype._initializeMonthPicker=function(){var e=new h(this.getId()+"--MP");e._bCalendar=!0,e.attachEvent("select",this._selectMonth,this),e.attachEvent("pageChange",N,this),e._bNoThemeChange=!0,this.setAggregation("monthPicker",e),e._setSelectedDatesControlOrigin(this)},Y.prototype._initializeYearPicker=function(){var e=new g(this.getId()+"--YP");e._bCalendar=!0,e.attachEvent("select",this._selectYear,this),e.attachEvent("pageChange",E,this),this.setAggregation("yearPicker",e),e._setSelectedDatesControlOrigin(this)},Y.prototype._initializeYearRangePicker=function(){var e=new d(this.getId()+"--YRP");e.attachEvent("select",this._selectYearRange,this),e.setPrimaryCalendarType(this._getPrimaryCalendarType()),this.setAggregation("yearRangePicker",e)},Y.prototype._createMonth=function(e){var t=new n(e,{width:"100%",calendarWeekNumbering:this.getCalendarWeekNumbering()});return t._bCalendar=!0,t.attachEvent("datehovered",this._handleDateHovered,this),t.attachEvent("weekNumberSelect",this._handleWeekNumberSelect,this),t},Y.prototype._handleWeekNumberSelect=function(e){var t=e.getParameter("weekDays"),a=this.fireWeekNumberSelect({weekNumber:e.getParameter("weekNumber"),weekDays:t});if(null!=t)return this._focusDate(l.fromLocalJSDate(t.getStartDate(),this._getPrimaryCalendarType()),!0,!1,!1),a||e.preventDefault(),this},Y.prototype._handleDateHovered=function(e){var t,a=this.getAggregation("month"),i=e.getParameter("date1"),r=e.getParameter("date2");for(t=0;t<a.length;t++)a[t]._markDatesBetweenStartAndHoveredDate(i,r)},Y.prototype.onBeforeRendering=function(){var e,t=this.getAggregation("month"),a=t[0].getDate(),i=this._getFocusedDate();-1!==this.getFirstDayOfWeek()&&"Default"!==this.getCalendarWeekNumbering()&&S.warning("Both properties firstDayOfWeek and calendarWeekNumbering should not be used at the same time!"),e=t.length>1&&a?l.fromLocalJSDate(a,this._getPrimaryCalendarType()):t.length>1?w.call(this,this._getFocusedDate()):i;for(var r=0;r<t.length;r++){a=new l(e),r>0&&a.setMonth(a.getMonth()+r,1);var s=a;i.getYear()===a.getYear()&&i.getMonth()===a.getMonth()&&(s=i),t[r].displayDate(s.toLocalJSDate()),t[r].setShowWeekNumbers(this.getShowWeekNumbers())}this._getMonthPicker()&&this._setDisabledMonths(i.getYear(),this._getMonthPicker()),this._updateHeader(e),this._updateHeadersButtons(),this._adjustYearRangeDisplay(),this._updateLegendParent(),this.getInitialFocusedDate()&&this.focusDate(this.getInitialFocusedDate())},Y.prototype.onAfterRendering=function(e){this._getSucessorsPickerPopup()||x.call(this),(F.call(this)>1||this._bInitMonth)&&(e.size={width:this.getDomRef().offsetWidth},A.call(this,e,!0),this._sResizeListener||(this._sResizeListener=y.register(this,this._resizeProxy)),this._bInitMonth=void 0)},Y.prototype.removeSelectedDate=function(e){return this._bDateRangeChanged=!0,this.removeAggregation("selectedDates",e)},Y.prototype.removeAllSelectedDates=function(){return this._bDateRangeChanged=!0,this.removeAllAggregation("selectedDates")},Y.prototype.destroySelectedDates=function(){return this._bDateRangeChanged=!0,this.destroyAggregation("selectedDates")},Y.prototype.removeAllSpecialDates=function(){return this._bDateRangeChanged=!0,this.removeAllAggregation("specialDates")},Y.prototype.destroySpecialDates=function(){return this._bDateRangeChanged=!0,this.destroyAggregation("specialDates")},Y.prototype._setSpecialDatesControlOrigin=function(e){this._oSpecialDatesControlOrigin=e},Y.prototype.getSpecialDates=function(){var e=this.getParent();return this._oSpecialDatesControlOrigin?this._oSpecialDatesControlOrigin.getSpecialDates():e&&e.getSpecialDates?e.getSpecialDates():this.getAggregation("specialDates",[])},Y.prototype.removeAllDisabledDates=function(){return this._bDateRangeChanged=!0,this.removeAllAggregation("disabledDates")},Y.prototype.destroyDisabledDates=function(){return this._bDateRangeChanged=!0,this.destroyAggregation("disabledDates")},Y.prototype.setLocale=function(e){return this._sLocale!=e&&(this._sLocale=e,this._oLocaleData=void 0,this.invalidate(),this._toggleTwoMonthsInColumnsCSS()),this},Y.prototype.getLocale=function(){return this._sLocale||(this._sLocale=v.getFormatSettings().getFormatLocale().toString()),this._sLocale},Y.prototype._getFocusedDate=function(){return this._oFocusedDate||b.call(this),this._oFocusedDate},Y.prototype._setFocusedDate=function(e){r._checkCalendarDate(e),this._oFocusedDate=new l(e,this._getPrimaryCalendarType())},Y.prototype.focusDate=function(e){return H.call(this,e,!1),this._addMonthFocusDelegate(),this},Y.prototype.displayDate=function(e){return H.call(this,e,!0),this},Y.prototype.getStartDate=function(){var e;if(this.getDomRef()){var t=this.getAggregation("month");e=l.fromLocalJSDate(t[0].getDate(),this._getPrimaryCalendarType())}else e=new l(this._getFocusedDate());return e.setDate(1),e.toLocalJSDate()},Y.prototype.setCalendarWeekNumbering=function(e){var t=this.getAggregation("month");this.setProperty("calendarWeekNumbering",e);for(var a=0;a<t.length;a++)t[a].setProperty("calendarWeekNumbering",e);return this},Y.prototype.setMonths=function(e){e=Math.max(1,e),this._bDateRangeChanged=void 0,this.setProperty("months",e),e=F.call(this);var t,a=this.getAggregation("month"),i=0;if(a.length<e){for(i=a.length;i<e;i++)(t=this._createMonth(this.getId()+"--Month"+i)).attachEvent("focus",this._handleFocus,this),t.attachEvent("select",B,this),t.attachEvent("_renderMonth",R,this),t.attachEvent("_bindMousemove",L,this),t.attachEvent("_unbindMousemove",I,this),t._bNoThemeChange=!0,t.setCalendarWeekNumbering(this.getCalendarWeekNumbering()),t.setSecondaryCalendarType(this._getSecondaryCalendarType()),this.addAggregation("month",t);this._toggleTwoMonthsInColumnsCSS()}else if(a.length>e){for(i=a.length;i>e;i--)(t=this.removeAggregation("month",i-1)).destroy();1==e&&(this._bInitMonth=!0),this._toggleTwoMonthsInColumnsCSS()}return e>1&&a[0].getDate()&&a[0].setProperty("date",null,!0),this},Y.prototype.setPrimaryCalendarType=function(e){var t,a=this.getAggregation("month");for(this.setProperty("primaryCalendarType",e),this._oYearFormat=D.getDateInstance({format:"y",calendarType:e}),this._oFocusedDate&&(this._oFocusedDate=new l(this._oFocusedDate,e)),this._oMinDate=new l(this._oMinDate,e),this._oMaxDate=new l(this._oMaxDate,e),t=0;t<a.length;t++)a[t].setPrimaryCalendarType(e);return this._getSucessorsPickerPopup()||(this._getMonthPicker().setPrimaryCalendarType(e),this._getYearPicker().setPrimaryCalendarType(e),this.getAggregation("yearRangePicker").setPrimaryCalendarType(e)),this},Y.prototype.setSecondaryCalendarType=function(e){this.setProperty("secondaryCalendarType",e),this._oYearFormatSecondary=D.getDateInstance({format:"y",calendarType:e});for(var t=this.getAggregation("month"),a=0;a<t.length;a++){t[a].setSecondaryCalendarType(e)}return this._getMonthPicker().setSecondaryCalendarType(e),this._getYearPicker().setSecondaryCalendarType(e),this._getYearRangePicker().setSecondaryCalendarType(e),this},Y.prototype._getPrimaryCalendarType=function(){return this.getProperty("primaryCalendarType")||v.getCalendarType()},Y.prototype._getSecondaryCalendarType=function(){var e=this.getSecondaryCalendarType();if(e!==this._getPrimaryCalendarType())return e},Y.prototype._getActiveHeaderAggregation=function(){return this._bActionTriggeredFromSecondHeader&&this._isTwoMonthsInOneColumn()?this.getAggregation("secondMonthHeader"):this.getAggregation("header")},Y.prototype._saveTriggeredHeader=function(e){"secondMonthHeader"===e.getSource().sParentAggregationName||"pressButton3"===e.sId||"pressButton4"===e.sId?this._bActionTriggeredFromSecondHeader=!0:this._bActionTriggeredFromSecondHeader=!1},Y.prototype.setMinDate=function(e){var t,a=this.getAggregation("month"),i=this._getPrimaryCalendarType();if(C(e,this.getMinDate()))return this;if(e){r._checkJSDateObject(e),this._oMinDate=l.fromLocalJSDate(e,i);var s=this._oMinDate.getYear();r._checkYearInValidRange(s,i),this._oMaxDate.isBefore(this._oMinDate)&&(S.warning("minDate > maxDate -> maxDate set to end of the month",this),this._oMaxDate=l.fromLocalJSDate(e,i),this._oMaxDate.setDate(r._daysInMonth(this._oMaxDate)),this.setProperty("maxDate",this._oMaxDate.toLocalJSDate(),!0)),this._setMinMaxDateExtend(l.fromLocalJSDate(e,i))}else this._oMinDate=r._minDate(i);this.setProperty("minDate",e,!1),this._getSucessorsPickerPopup()||(t=this._oMinDate.getYear(),this._getYearPicker()._oMinDate.setYear(t),this._getYearRangePicker()._oMinDate.setYear(t));for(var o=0;o<a.length;o++)a[o]._oMinDate=new l(this._oMinDate);return this},Y.prototype.setMaxDate=function(e){var t,a=this.getAggregation("month"),i=this._getPrimaryCalendarType();if(C(e,this.getMaxDate()))return this;if(e){r._checkJSDateObject(e),this._oMaxDate=l.fromLocalJSDate(e,i);var s=this._oMaxDate.getYear();r._checkYearInValidRange(s,i),this._oMinDate.isAfter(this._oMaxDate)&&(S.warning("maxDate < minDate -> minDate set to begin of the month",this),this._oMinDate=l.fromLocalJSDate(e,i),this._oMinDate.setDate(1),this.setProperty("minDate",this._oMinDate.toLocalJSDate(),!0)),this._setMinMaxDateExtend(l.fromLocalJSDate(e,i))}else this._oMaxDate=r._maxDate(i);this.setProperty("maxDate",e,!1),this._getSucessorsPickerPopup()||(t=this._oMaxDate.getYear(),this._getYearPicker()._oMaxDate.setYear(t),this._getYearRangePicker()._oMaxDate.setYear(t));for(var o=0;o<a.length;o++)a[o]._oMaxDate=new l(this._oMaxDate);return this},Y.prototype.setShowCurrentDateButton=function(e){return this.getAggregation("header").setVisibleCurrentDateButton(e),this.setProperty("showCurrentDateButton",e)},Y.prototype._setMinMaxDateExtend=function(e){this._oFocusedDate&&r._isOutside(this._oFocusedDate,this._oMinDate,this._oMaxDate)&&(S.warning("focused date is not between [minDate - maxDate] -> refocus to the new max/min date: "+e.toString(),this),this.focusDate(e.toLocalJSDate()))},Y.prototype._getLocaleData=function(){if(!this._oLocaleData){var e=this.getLocale(),t=new m(e);this._oLocaleData=i.getInstance(t)}return this._oLocaleData},Y.prototype._getShowMonthHeader=function(){return F.call(this)>2},Y.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker")},Y.prototype._getYearPicker=function(){return this.getAggregation("yearPicker")},Y.prototype._getYearRangePicker=function(){return this.getAggregation("yearRangePicker")},Y.prototype.onclick=function(e){var t=e.target;e.isMarked("delayedMouseEvent")||t.id==this.getId()+"-cancel"&&this.onsapescape(e)},Y.prototype.onmousedown=function(e){e.cancelable&&e.preventDefault(),e.setMark("cancelAutoClose")},Y.prototype.onsapescape=function(e){this.fireCancel(),this._closePickers(),this._addMonthFocusDelegate(),this._getSucessorsPickerPopup()||this._setHeaderText(this._getFocusedDate())},Y.prototype.onsapshow=function(e){var t=e.which||e.keyCode;this._bPoupupMode&&t!==f.F4&&(this._closePickers(),this._addMonthFocusDelegate(),this.fireCancel(),e.preventDefault())},Y.prototype.onkeydown=function(e){var t=e.which||e.keyCode,a=e.shiftKey;if(t===f.F4)switch(e.preventDefault(),this._iMode){case 0:a?this._showYearPicker():this._showMonthPicker();break;case 1:a&&this._showYearPicker();break;case 2:a&&this._showYearRangePicker()}},Y.prototype.onsaphide=Y.prototype.onsapshow,Y.prototype.getFocusDomRef=function(){var e=this._oSelectedMonth?this._oSelectedMonth:this.getAggregation("month")[0],t=this._getMonthPicker(),a=this._getYearPicker(),i=this._getYearRangePicker();switch(this._iMode){case 0:return e.getFocusDomRef();case 1:return t.getFocusDomRef();case 2:return a.getFocusDomRef();case 3:return i.getFocusDomRef();default:return}},Y.prototype.onThemeChanged=function(){var e,t=arguments;if(this.getDomRef()){if(this._bNamesLengthChecked=void 0,!this._getSucessorsPickerPopup()){var a={onAfterRendering:function(){e.onThemeChanged(t),e._bNoThemeChange=!0,x.call(this),this._bLongMonth=e._bLongMonth,this._closePickers(),e.removeEventDelegate(a)}};e=this._getMonthPicker(),this._showMonthPicker(!0),e._bNoThemeChange=!1,e.addEventDelegate(a,this)}for(var i,r=this.getAggregation("month"),s=0;s<r.length;s++){var o=r[s];o._bNoThemeChange=!1,o.onThemeChanged(arguments),o._bNoThemeChange=!0}i=r.length>1?l.fromLocalJSDate(r[0].getDate(),this._getPrimaryCalendarType()):this._getFocusedDate(),this._setHeaderText(i),this._setPrimaryHeaderMonthButtonText(),this._toggleTwoMonthsInColumnsCSS()}},Y.prototype._updateLegendParent=function(){var e=this.getLegend(),t=a.byId(e);t&&t._setParent(this)},Y.prototype._updateHeader=function(e){switch(this._setHeaderText(e),this._iMode){case 0:this._togglePrevNext(e,!0);break;case 1:this._togglePrevNext(e,!1);break;case 2:case 3:this._togglePrevNexYearPicker()}},Y.prototype._togglePrevNext=function(e,t){var a=this._oMaxDate.getYear(),i=this._oMinDate.getYear(),s=this._oMaxDate.getMonth(),o=this._oMinDate.getMonth(),n=this.getAggregation("header"),h=F.call(this),g=new l(e,this._getPrimaryCalendarType());1===this._iMode&&h>1?((g=w.call(this,e)).setMonth(g.getMonth()+h-1),g.setDate(r._daysInMonth(g))):g.setDate(r._daysInMonth(g));var d=g.getYear(),c=g.getMonth();(0===this._iMode||1===this._iMode)&&h>1&&(c+=h-1),d>a||d===a&&(!t||c>=s)||(0===this._iMode||1===this._iMode)&&this._getSucessorsPickerPopup()?n.setEnabledNext(!1):n.setEnabledNext(!0),1===this._iMode&&h>1?g.setMonth(g.getMonth()-h+1,1):g.setDate(1),d=g.getYear(),c=g.getMonth(),d<i||d==i&&(!t||c<=o)||1==this._iMode&&this._getSucessorsPickerPopup()?n.setEnabledPrevious(!1):n.setEnabledPrevious(!0)},Y.prototype._togglePrevNexYearPicker=function(){var e,t,a,i,r=this.getAggregation("yearRangePicker"),s=this._getYearPicker(),o=this._getPrimaryCalendarType(),n=new l(this._oMinDate,o),h=new l(this._oMaxDate,o),g=this.getAggregation("header"),d=1;3===this._iMode?(a=r.getYears(),d=r.getRangeSize(),e=new l(r.getProperty("_middleDate")),t=new l(e),e.setYear(e.getYear()-d*a/2),t.setYear(t.getYear()+d*a/2-1)):(a=s.getYears(),i=s.getProperty("_middleDate")?s.getProperty("_middleDate"):l.fromLocalJSDate(u.getInstance()),e=new l(i),t=new l(i),e.setYear(e.getYear()-a/2),t.setYear(t.getYear()+a/2-1)),g.setEnabledNext(t.getYear()<h.getYear()),g.setEnabledPrevious(e.getYear()>n.getYear())},Y.prototype._handlePrevious=function(){var e,t=this._getFocusedDate(),a=F.call(this);switch(this._iMode){case 0:a>1?((e=l.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this._getPrimaryCalendarType())).setDate(1),this._setFocusedDate(e),t=this._getFocusedDate()):t.setDate(1),t.setDate(t.getDate()-1),this._renderMonth(!1,!1),this._addMonthFocusDelegate();break;case 1:t.setYear(t.getYear()-1),this._updateHeadersYearPrimaryText(this._oYearFormat.format(t.toUTCJSDate(),!0)),this._updateHeadersYearAdditionalTextHelper(),this._togglePrevNext(t),this._setDisabledMonths(t.getYear());var i=this._getMonthPicker();i._setYear(t.getYear()),i._setDate(t),i.invalidate(),this.setProperty("_currentPicker",k.MONTH_PICKER);break;case 2:this._getYearPicker().previousPage(),this._togglePrevNexYearPicker(),this._updateHeadersYearPrimaryText(this._getYearString()),this._updateHeadersYearAdditionalTextHelper();break;case 3:this.getAggregation("yearRangePicker").previousPage(),this._togglePrevNexYearPicker(),this._updateHeadersYearPrimaryText(this._getYearString())}},Y.prototype._handleNext=function(){var e,t=this._getFocusedDate(),a=F.call(this);switch(this._iMode){case 0:a>1&&((e=l.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this._getPrimaryCalendarType())).setMonth(e.getMonth(),1),this._setFocusedDate(e),t=this._getFocusedDate()),t.setMonth(t.getMonth()+1,1),this._renderMonth(!1,!1),this._addMonthFocusDelegate();break;case 1:t.setYear(t.getYear()+1),this._updateHeadersYearPrimaryText(this._oYearFormat.format(t.toUTCJSDate(),!0)),this._updateHeadersYearAdditionalTextHelper(),this._togglePrevNext(t),this._setDisabledMonths(t.getYear());var i=this._getMonthPicker();i._setYear(t.getYear()),i._setDate(t),i.invalidate(),this.setProperty("_currentPicker",k.MONTH_PICKER);break;case 2:this._getYearPicker().nextPage(),this._togglePrevNexYearPicker(),this._updateHeadersYearPrimaryText(this._getYearString()),this._updateHeadersYearAdditionalTextHelper();break;case 3:this.getAggregation("yearRangePicker").nextPage(),this._togglePrevNexYearPicker(),this._updateHeadersYearPrimaryText(this._getYearString())}},Y.prototype._updateHeadersYearAdditionalTextHelper=function(){if(this._getSecondaryCalendarType()){var e=this._getDisplayedSecondaryYears();if(e.start.getYear()===e.end.getYear())this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(e.start.toUTCJSDate(),!0));else{var t=this._getLocaleData().getIntervalPattern().replace(/\{0\}/,this._oYearFormatSecondary.format(e.start.toUTCJSDate(),!0)).replace(/\{1\}/,this._oYearFormatSecondary.format(e.end.toUTCJSDate(),!0));this._updateHeadersYearAdditionalText(t)}}},Y.prototype._handleCurrentDate=function(){var e=u.getInstance(),t=this.getMaxDate(),a=this.getMinDate();this.setProperty("_currentPicker",k.MONTH),t&&t.getTime()<e.getTime()?this.focusDate(t):a&&a.getTime()>e.getTime()?this.focusDate(a):this.focusDate(e)},Y.prototype._getYearString=function(){var e=this._getYearPicker(),t=e.getDomRef(),a=this._getFocusedDate();return e&&t&&""===t.style.display&&(a=e.getProperty("_middleDate")).setDate(1),this._oYearFormat.format(c.getInstance(a.toUTCJSDate(),a.getCalendarType()),!0)},Y.prototype._getDisplayedMonths=function(e){var t=[],a=e.getMonth(),i=F.call(this);if(i>1)for(var r=0;r<i;r++)t.push((a+r)%12);else t.push(a);return t},Y.prototype._getDisplayedSecondaryMonths=function(){var e,t=this._getPrimaryCalendarType(),a=this._getSecondaryCalendarType(),i=this.getAggregation("month"),s=l.fromLocalJSDate(i[0].getDate(),t),o=l.fromLocalJSDate(i[i.length-1].getDate(),t);return s.setDate(1),e=(s=new l(s,a)).getMonth(),(o=l.fromLocalJSDate(i[i.length-1].getDate(),t)).setDate(r._daysInMonth(o)),{start:e,end:(o=new l(o,a)).getMonth()}},Y.prototype._getDisplayedSecondaryYears=function(){var e,t,a,i,s,o,n,h=this._getPrimaryCalendarType(),g=this._getSecondaryCalendarType();switch(this._iMode){case 0:s=this.getAggregation("month"),(e=l.fromLocalJSDate(s[0].getDate(),h)).setDate(1),e=new l(e,g),(t=l.fromLocalJSDate(s[s.length-1].getDate(),h)).setDate(r._daysInMonth(t)),t=new l(t,g);break;case 1:a=this._getFocusedDate(),(i=new l(a,h)).setMonth(0,1),e=new l(i,h),e=new l(e,g),i.setYear(i.getYear()+1),i.setDate(i.getDate()-1),t=new l(i,h),t=new l(t,g);break;case 2:n=(o=this._getYearPicker()).getYears()/2-1,a=o.getProperty("_middleDate"),(e=new l(a,h)).setYear(a.getYear()-n-1),e.setMonth(0,1),e=new l(e,g),(t=new l(a,h)).setYear(t.getYear()+n+1),e.setMonth(0,1),t.setDate(t.getDate()-1),t=new l(t,g)}return{start:e,end:t}},Y.prototype._closePickers=function(){this.setProperty("_currentPicker",k.MONTH),this._togglePrevNext(this._getFocusedDate(),!0),this.getAggregation("month").length>1&&this.getAggregation("month").forEach((function(e){e._oItemNavigation.iActiveTabIndex=0}))},Y.prototype._setDisabledMonths=function(e,t){var a=0,i=11;e===this._oMinDate.getYear()&&(a=this._oMinDate.getMonth()),e===this._oMaxDate.getYear()&&(i=this._oMaxDate.getMonth()),t||(t=this._getMonthPicker()),t.setMinMax(a,i)},Y.prototype._handleFocus=function(e){var t=l.fromLocalJSDate(e.getParameter("date"),this._getPrimaryCalendarType()),a=e.getParameter("otherMonth"),i=e.getParameter("restoreOldDate");this.getIntervalSelection()&&this.getAggregation("month").forEach((function(e){e.setProperty("_focusedDate",t)})),i?C(this._getFocusedDate(),t)||this._renderMonth(!1,!0):this._focusDate(t,a,!1,!0)},Y.prototype._getVisibleDays=function(){var e=this.getAggregation("month")[0];return e._getVisibleDays(e._getDate(),!1)},Y.prototype._renderMonth=function(e,t){var a,i,s=this._getFocusedDate(),o=this.getAggregation("month"),n=w.call(this,new l(s,this._getPrimaryCalendarType())),h=0,g=o[0].checkDateFocusable(s.toLocalJSDate()),d=!t&&!g;for(h=0;h<o.length;h++)a=o[h],(i=new l(n,this._getPrimaryCalendarType())).setMonth(n.getMonth()+h),!e&&r._isSameMonthAndYear(i,s)?a.setDate(s.toLocalJSDate()):a.displayDate(i.toLocalJSDate());this._updateHeader(n),this._setPrimaryHeaderMonthButtonText(),this._toggleTwoMonthsInColumnsCSS(),d&&this.fireStartDateChange()},Y.prototype._updateMonthButtonVisibility=function(){var e=this._getActiveHeaderAggregation();return this._bActionTriggeredFromSecondHeader?this._isTwoMonthsInOneColumn()?e.setVisibleButton1(!e.getVisibleButton1()):e._setVisibleButton3(!e._getVisibleButton3()):e.setVisibleButton1(!1),this},Y.prototype._showMonthPicker=function(e){var t=this._getFocusedDate(),a=this._getMonthPicker(),i=new l(this._getFocusedDate());this._updateActiveHeaderYearButtonVisibility(),this._updateMonthButtonVisibility(),this.setProperty("_currentPicker",k.MONTH_PICKER),this._bActionTriggeredFromSecondHeader?(i.setDate(1),i.setMonth(i.getMonth()+1),a._setYear(i.getYear()),a._setDate(i)):(a._setYear(t.getYear()),a._setDate(t)),!e&&this._bActionTriggeredFromSecondHeader?(a.setMonth(i.getMonth()),this._setDisabledMonths(i.getYear(),a)):e||(a.setMonth(t.getMonth()),this._setDisabledMonths(t.getYear(),a)),this.getAggregation("month").length>1&&this.getProperty("_currentPicker")==k.MONTH_PICKER&&this.getAggregation("month").forEach((function(e){e._oItemNavigation.iActiveTabIndex=-1})),this._togglePrevNext(t,!0),this._setHeaderText(this._getFocusedDate())},Y.prototype._showYearPicker=function(){var e=this._getFocusedDate(),t=this._getYearPicker();if(this.setProperty("_currentPicker",k.YEAR_PICKER),t.setDate(e.toLocalJSDate()),this._togglePrevNexYearPicker(),this._isTwoMonthsInOneColumn(),this._updateActiveHeaderYearButtonVisibility(),this._bActionTriggeredFromSecondHeader&&this.getAggregation("month")[1].getDate().getFullYear()>this._getFocusedDate().getYear()){var a=e.toLocalJSDate();a.setFullYear(a.getFullYear()+1),t.setDate(a),this._updateHeadersYearPrimaryText(this._getYearString())}else t.setDate(e.toLocalJSDate()),this._updateHeadersYearPrimaryText(this._getYearString());this.getAggregation("month").length>1&&this.getProperty("_currentPicker")==k.YEAR_PICKER&&this.getAggregation("month").forEach((function(e){e._oItemNavigation.iActiveTabIndex=-1}))},Y.prototype._focusDate=function(e,t,a,i){var r,s,o=!1,n=!1,h=this.getAggregation("month");if(e.isBefore(this._oMinDate)?(r=this._oMinDate,o=!0):e.isAfter(this._oMaxDate)?(r=this._oMaxDate,o=!0):r=e,this._focusDateExtend&&(n=this._focusDateExtend(e,t,a)),this._setFocusedDate(r),i&&!this._focusDateExtend)for(s=0;s<h.length;++s)if(h[s].checkDateFocusable(r.toLocalJSDate()))return h[s].setDate(r.toLocalJSDate()),void h[s]._focusDate(r);(o||t)&&(this._renderMonth(!1,a),this._addMonthFocusDelegate()),n&&this.fireStartDateChange()},Y.prototype._setHeaderText=function(e){var t,a,i,r,s,o,n=this.getAggregation("header"),h=this.getAggregation("secondMonthHeader"),g=this._getLocaleData(),d=[],c=[],u=[],_=[],p=!1,D=this._getPrimaryCalendarType(),y=this._getSecondaryCalendarType(),m="";if(this._bLongMonth||!this._bNamesLengthChecked?d=g.getMonthsStandAlone("wide",D):(p=!0,d=g.getMonthsStandAlone("abbreviated",D),c=g.getMonthsStandAlone("wide",D)),y){u=g.getMonthsStandAlone("abbreviated",y),_=g.getMonthsStandAlone("wide",y);var f=this._getDisplayedSecondaryMonths();f.start===f.end?(r=u[f.start],m=_[f.start]):(r=(o=g.getIntervalPattern()).replace(/\{0\}/,u[f.start]).replace(/\{1\}/,u[f.end]),m=o.replace(/\{0\}/,_[f.start]).replace(/\{1\}/,_[f.end]))}n.setAdditionalTextButton1(r),n._setAdditionalTextButton3(r),h.setAdditionalTextButton1(r);var M=this._getDisplayedMonths(e);this._sFirstMonthName=a=d[M[0]],i=d[M[M.length-1]],M.length>1&&!this._bShowOneMonth?(o||(o=g.getIntervalPattern()),r=o.replace(/\{0\}/,a).replace(/\{1\}/,i),t=c.length?o.replace(/\{0\}/,c[M[0]]).replace(/\{1\}/,c[M[M.length-1]]):r,(this._isTwoMonthsInTwoColumns()||this._isTwoMonthsInOneColumn())&&(r=a)):(r=a,t=c[M[0]]||r),!this._getSucessorsPickerPopup()&&m&&(t+=", "+m),n.setTextButton1(r),n.setAriaLabelButton1(t),n._setTextButton3(i),n._setAriaLabelButton3(i),h.setTextButton1(i),h.setAriaLabelButton1(i);var P=new l(e,D);return P.setDate(1),s=this._oYearFormat.format(P.toUTCJSDate(),!0),11===P.getMonth()?this._updateHeadersYearPrimaryText(s,(parseInt(s)+1).toString()):this._updateHeadersYearPrimaryText(s,s),y&&3!==this._iMode?this._updateHeadersYearAdditionalTextHelper():this._updateHeadersYearAdditionalText(),{sMonth:r,sYear:s,sAriaLabel:t,bShort:p}},Y.prototype._handleButton1=function(e){1!=this._iMode?(this._saveTriggeredHeader(e),this._showMonthPicker()):(this.setProperty("_currentPicker",k.MONTH),this._addMonthFocusDelegate())},Y.prototype._addMonthFocusDelegate=function(){var e,t,a=this.getAggregation("month"),i=a[0].getDate(),r=this._getFocusedDate(),s={onAfterRendering:function(){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),void 0,!0),this.removeDelegate(s)}};i=a.length>1&&e?l.fromLocalJSDate(e,this._getPrimaryCalendarType()):a.length>1?w.call(this,this._getFocusedDate()):r;for(var o=0;o<a.length;o++)e=new l(i),o>0&&e.setMonth(e.getMonth()+o,1),r.getYear()===e.getYear()&&r.getMonth()===e.getMonth()&&(t=this.getAggregation("month")[o]).addDelegate(s,t)},Y.prototype._handleButton2=function(e){this._iMode<=1?(this._saveTriggeredHeader(e),this._showYearPicker()):this._showYearRangePicker()},Y.prototype._selectMonth=function(){var e=new l(this._getFocusedDate(),this._getPrimaryCalendarType()),t=this._getMonthPicker(),a=t.getProperty("_focusedMonth"),i=a||0===a?a:t.getMonth(),s=l.fromLocalJSDate(u.getInstance(),this._getPrimaryCalendarType());s=t._iYear?s.setYear(t._iYear).setMonth(i-1,1):new l(this._getFocusedDate().getYear(),i-1,1),F.call(this)>1&&(this._bActionTriggeredFromSecondHeader&&s.getYear()>=r._minDate(this._getPrimaryCalendarType()).getYear()?(e.setYear(s.getYear()),i=s.getMonth()):e.getYear()===r._maxDate(this._getPrimaryCalendarType()).getYear()&&11===i&&(i-=1)),e.setMonth(i),i!=e.getMonth()&&e.setDate(0),this._focusDate(e,!0,!1,!1),this._closePickers(),this._addMonthFocusDelegate()},Y.prototype._getSucessorsPickerPopup=function(){return this.getPickerPopup&&this.getPickerPopup()},Y.prototype._selectYear=function(){var e=new l(this._getFocusedDate(),this._getPrimaryCalendarType()),t=e.getMonth(),a=this._getYearPicker(),i=l.fromLocalJSDate(a.getDate(),this._getPrimaryCalendarType());this._bActionTriggeredFromSecondHeader?(i.setYear(11===t?i.getYear()-1:i.getYear()),i.setMonth(t,e.getDate())):i.setMonth(t,e.getDate()),e=i,this._focusDate(e,!0,!1,!1),this._closePickers(),this._addMonthFocusDelegate(),this._setHeaderText(this._getFocusedDate())},Y.prototype.setProperty=function(){var e=arguments[0],a=arguments[1];if(t.prototype.setProperty.apply(this,arguments),"_currentPicker"===e)switch(a){case"month":this._iMode=0;break;case"monthPicker":this._iMode=1;break;case"yearPicker":this._iMode=2;break;case"yearRangePicker":this._iMode=3;break;default:return}return this},Y.prototype._selectYearRange=function(){var e,t,a=this.getAggregation("yearRangePicker"),i=this.getAggregation("header"),r=a.getRangeSize(),s=this._getPrimaryCalendarType(),o=l.fromLocalJSDate(a.getDate(),s),n=new l(o.getYear()+r-1,0,1,s),h=this._getFocusedDate();h.setYear(o.getYear()+r/2),o.setMonth(0,1),h.isBefore(this._oMinDate)?h=new l(this._oMinDate,this._getPrimaryCalendarType()):h.isAfter(this._oMaxDate)&&(h=new l(this._oMaxDate,this._getPrimaryCalendarType())),this._setFocusedDate(h),this._showYearPicker(),e=this._oYearFormat.format(c.getInstance(o.toUTCJSDate(),o.getCalendarType()),!0),t=this._oYearFormat.format(c.getInstance(n.toUTCJSDate(),n.getCalendarType()),!0),i.setTextButton2(e+" - "+t),i._setTextButton4(e+" - "+t)},Y.prototype._showYearRangePicker=function(){var e=this.getAggregation("yearRangePicker"),t=this._getYearPicker(),a=l.fromLocalJSDate(t.getFirstRenderedDate(),this._getPrimaryCalendarType());this.setProperty("_currentPicker",k.YEAR_RANGE_PICKER),a.setYear(a.getYear()+Math.floor(e.getRangeSize()/2)),e.setDate(a.toLocalJSDate()),this._togglePrevNexYearPicker()},Y.prototype._setColumns=function(e){return this._iColumns=e,this},Y.prototype._getColumns=function(){return this._iColumns},Y.prototype._updateActiveHeaderYearButtonVisibility=function(){var e=this._getActiveHeaderAggregation();return this._bActionTriggeredFromSecondHeader?this._isTwoMonthsInOneColumn()?e.setVisibleButton1(!e.getVisibleButton1()):e._setVisibleButton3(!e._getVisibleButton3()):e.setVisibleButton1(!e.getVisibleButton1()),this},Y.prototype._updateHeadersButtonsHelper=function(e,t,a,i){var r=this.getAggregation("header"),s=this.getAggregation("secondMonthHeader");r.setVisibleButton1(e),r.setVisibleButton2(t),r._setVisibleButton3(a),r._setVisibleButton4(i),s.getVisible()&&(s.setVisibleButton1(e),s.setVisibleButton2(t),s._setVisibleButton3(a),s._setVisibleButton4(i))},Y.prototype._updateHeadersButtons=function(){var e=this.getAggregation("secondMonthHeader");this._isTwoMonthsInOneColumn()?(e.setVisible(!0),2===this._iMode?this._updateHeadersButtonsHelper(!1,!0,!1,!1):3===this._iMode?this._updateHeadersButtonsHelper(!1,!1,!1,!1):this._updateHeadersButtonsHelper(!0,!0,!1,!1)):this._isTwoMonthsInTwoColumns()?(e.setVisible(!1),2===this._iMode?this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(!0,!0,!1,!0):this._updateHeadersButtonsHelper(!1,!0,!0,!0):3===this._iMode?this._updateHeadersButtonsHelper(!1,!1,!1,!1):1===this._iMode?this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(!0,!0,!1,!0):this._updateHeadersButtonsHelper(!1,!0,!0,!0):this._updateHeadersButtonsHelper(!0,!0,!0,!0)):(e.setVisible(!1),1===this._iMode||2===this._iMode?this._updateHeadersButtonsHelper(!1,!0,!1,!1):3===this._iMode?this._updateHeadersButtonsHelper(!1,!1,!1,!1):this._updateHeadersButtonsHelper(!0,!0,!1,!1)),this._getSucessorsPickerPopup()&&this.getAggregation("header").setVisibleButton2(!1)},Y.prototype._setPrimaryHeaderMonthButtonText=function(){var e=this.getAggregation("header");(this._isTwoMonthsInOneColumn()||this._isTwoMonthsInTwoColumns())&&e.setTextButton1(this._sFirstMonthName)},Y.prototype._toggleTwoMonthsInColumnsCSS=function(){this._isTwoMonthsInTwoColumns()?"ja"===a.getConfiguration().getLocale().getLanguage().toLowerCase()||"zh"===a.getConfiguration().getLocale().getLanguage().toLowerCase()?(this.addStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh"),this.removeStyleClass("sapUiCalTwoMonthsTwoColumns")):(this.addStyleClass("sapUiCalTwoMonthsTwoColumns"),this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh")):(this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh"),this.removeStyleClass("sapUiCalTwoMonthsTwoColumns")),this._isTwoMonthsInOneColumn()?this.addStyleClass("sapUiCalTwoMonthsInOneColumn"):this.removeStyleClass("sapUiCalTwoMonthsInOneColumn")},Y.prototype._isTwoMonthsInOneColumn=function(){var e=F.call(this);return 1===this._getColumns()&&2===e},Y.prototype._isTwoMonthsInTwoColumns=function(){var e=F.call(this);return 2===this._getColumns()&&2===e},Y.prototype._updateHeadersYearPrimaryText=function(e,t){var a=this._getYearPicker(),i=this.getAggregation("header"),s=this.getAggregation("secondMonthHeader"),o=e,n=t||e,h=this._getPrimaryCalendarType();if(2===this._iMode&&a){var g,d,u,_=a.getProperty("_middleDate")?a.getProperty("_middleDate"):a._getDate(),p=new l(_,h),D=r._minDate(this._getPrimaryCalendarType()).getYear(),y=r._maxDate(this._getPrimaryCalendarType()).getYear();p.setDate(1),p.setYear(p.getYear()-Math.floor(a.getYears()/2)),p.getYear()<D?p.setYear(D):p.getYear()+a.getYears()>y&&p.setYear(y-a.getYears()+1),(g=new l(p,h)).setYear(g.getYear()+a.getYears()-1),d=this._oYearFormat.format(c.getInstance(p.toUTCJSDate(),p.getCalendarType()),!0),u=this._oYearFormat.format(c.getInstance(g.toUTCJSDate(),g.getCalendarType()),!0),this._bActionTriggeredFromSecondHeader?n=d+" - "+u:o=d+" - "+u}i._setTextButton4(n),i._setAriaLabelButton4(n),s.setTextButton2(n),i.setTextButton2(o)},Y.prototype._updateHeadersYearAdditionalText=function(e){var t=this.getAggregation("header"),a=this.getAggregation("secondMonthHeader");t.setAdditionalTextButton2(e),t._setAdditionalTextButton4(e),a.setAdditionalTextButton2(e)},Y.prototype._adjustYearRangeDisplay=function(){var t=this.getAggregation("yearRangePicker"),a=sap.ui.getCore().getConfiguration().getLanguage().toLocaleLowerCase(),i=this._getPrimaryCalendarType();this._getSucessorsPickerPopup()||(i==e.Japanese?(t.setColumns(1),t.setYears(4)):"ko"==a||"ko-kr"==a||i!=e.Gregorian?(t.setColumns(2),t.setYears(8)):i==e.Gregorian&&(t.setColumns(3),t.setYears(9)))},Y.prototype._getSpecialDates=function(){var e=this.getParent();if(this._oSpecialDatesControlOrigin)return this._oSpecialDatesControlOrigin._getSpecialDates();if(e&&e._getSpecialDates)return e._getSpecialDates();for(var t=this.getSpecialDates(),a=0;a<t.length;a++){if(t[a].getSecondaryType()===_.CalendarDayType.NonWorking&&t[a].getType()!==_.CalendarDayType.NonWorking){var i=new s;i.setType(t[a].getSecondaryType()),i.setStartDate(t[a].getStartDate()),t[a].getEndDate()&&i.setEndDate(t[a].getEndDate()),t.push(i)}}return t},Y}));