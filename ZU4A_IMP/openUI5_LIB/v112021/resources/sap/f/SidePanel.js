sap.ui.define(["sap/ui/Device","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/core/Popup","sap/ui/core/ResizeHandler","sap/ui/core/delegate/ScrollEnablement","sap/ui/core/delegate/ItemNavigation","sap/ui/dom/containsOrEquals","sap/m/Title","sap/m/Button","sap/m/Menu","sap/m/MenuItem","sap/ui/core/InvisibleMessage","./SidePanelItem","./SidePanelRenderer","./library","sap/ui/core/library","sap/ui/events/F6Navigation","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes"],(function(e,t,i,n,s,o,a,r,l,h,d,p,c,u,g,_,f,S,m,jQuery,y){"use strict";var v=sap.ui.getCore().getLibraryResourceBundle("sap.f"),I=S.InvisibleMessageMode,P=f.SidePanelPosition,E=t.extend("sap.f.SidePanel",{metadata:{library:"sap.f",properties:{actionBarExpanded:{type:"boolean",group:"Appearance",defaultValue:!1},ariaLabel:{type:"string",group:"Accessibility",defaultValue:"Side Panel"},sidePanelResizable:{type:"boolean",group:"Appearance",defaultValue:!1},sidePanelWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"20rem"},sidePanelMinWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"15rem"},sidePanelMaxWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"90%"},sidePanelResizeStep:{type:"int",group:"Appearance",defaultValue:10},sidePanelResizeLargerStep:{type:"int",group:"Appearance",defaultValue:100},sideContentExpanded:{type:"boolean",group:"Appearance",defaultValue:!1,visibility:"hidden"},sidePanelPosition:{type:"sap.f.SidePanelPosition",group:"Appearance",defaultValue:P.Right}},aggregations:{mainContent:{type:"sap.ui.core.Control",multiple:!0},items:{type:"sap.f.SidePanelItem",multiple:!0,singularName:"item"},_arrowButton:{type:"sap.m.Button",multiple:!1,visibility:"hidden"},_closeButton:{type:"sap.m.Button",multiple:!1,visibility:"hidden"},_overflowItem:{type:"sap.f.SidePanelItem",multiple:!1,visibility:"hidden"},_overflowMenu:{type:"sap.m.Menu",multiple:!1,visibility:"hidden"},_contextMenu:{type:"sap.m.Menu",multiple:!1,visibility:"hidden"}},associations:{selectedItem:{type:"sap.f.SidePanelItem",multiple:!1}},events:{toggle:{allowPreventDefault:!0,parameters:{item:{type:"sap.f.SidePanelItem"},expanded:{type:"boolean"}}}}},renderer:_});return E.prototype.init=function(){var t,i="v112021_sidepanel_style";(t=document.getElementById(i))||((t=document.createElement("style")).id=i,t.innerHTML=".sapFSP.sapFSPLeft .sapFSPSide .sapFSPSplitterBar {left: initial;right: -1rem;}",document.head.appendChild(t));if(this.setAggregation("_arrowButton",new d(this.getId()+"-expandCollapseButton",{type:"Transparent",press:this._toggleActionBarExpanded.bind(this)}).addStyleClass("sapFSPExpandCollapse")),this.setAggregation("_overflowItem",new g({icon:"sap-icon://overflow",text:v.getText("SIDEPANEL_MORE_ACTIONS_TEXT")})),!e.system.phone){var n=new p({itemSelected:function(e){var t=e.getParameter("item");this._mOverflowItemsMap[t.getId()]&&this._toggleItemSelection(this._mOverflowItemsMap[t.getId()])}.bind(this),closed:function(){setTimeout(function(){this._setOverflowItemSelection(!1)}.bind(this),100)}.bind(this)}).addStyleClass("sapFSPOverflowMenu");this.setAggregation("_overflowMenu",n)}this._fnOnResizeRef=this._onResize.bind(this),this._fnOnMainScroll=this._handleScroll.bind(this),this._fnOnMainFocusOut=this._onMainFocusOut.bind(this),this._fnOnTouchStart=this._onTouchStart.bind(this),this._fnOnTouchEnd=this._onTouchEnd.bind(this),this._fnOnTouchMove=this._onTouchMove.bind(this),this._fnOnDblClick=this._onDblClick.bind(this),this._iLastScrollPosition=0,this._iSidePanelPosition=1,this._bShouldAttachGlobalHandlers=!0,this._iVisibleItems=0,this._bOverflowMenuOpened=!1,this._mOverflowItemsMap={},this._oItemNavigation=null},E.prototype.exit=function(){this._detachResizeHandlers(),this._detachScrollHandler(),this._detachMainFocusOutHandler(),this._detachResizableHandlers()},E.prototype.setSidePanelWidth=function(e){return this.setProperty("sidePanelWidth",e),this.getDomRef()&&(this._sSidePanelWidth=this._getSidePanelWidth()),this},E.prototype.setSelectedItem=function(e){var t,n,s=this.getSelectedItem();return"string"==typeof e?(t=e,n=i.byId(e)):e&&e.isA("sap.f.SidePanelItem")&&(t=e.getId(),n=e),t?n&&n.getEnabled()&&t!==s&&t!==this.getAggregation("_overflowItem").getId()&&(this._toggleItemSelection(n),this.setAssociation("selectedItem",n,!0)):s&&this._toggleItemSelection(i.byId(s)),this},E.prototype.onBeforeRendering=function(){var e,t=this.getAggregation("_arrowButton"),i=this.getActionBarExpanded(),n=v.getText("SIDEPANEL_EXPAND_BUTTON_TEXT")+"/"+v.getText("SIDEPANEL_COLLAPSE_BUTTON_TEXT");if(e=P.Right===this.getSidePanelPosition()?i?"right":"left":i?"left":"right",t.setIcon("sap-icon://navigation-"+e+"-arrow"),t.setTooltip(n),this._detachResizeHandlers(),this._attachResizeHandlers(),this._detachScrollHandler(),this._detachMainFocusOutHandler(),this._detachResizableHandlers(),this._oInvisibleMessage=u.getInstance(),this._isSingleItem()){var s=i?this.getItems()[0]:null;this.setProperty("sideContentExpanded",i),this.setAssociation("selectedItem",s,!0)}},E.prototype.onAfterRendering=function(){var t,i=this._isSingleItem()&&this.getActionBarExpanded()?this.getAggregation("_closeButton"):this.getAggregation("_arrowButton");e.system.phone||(t=i.getDomRef())&&t.setAttribute("aria-expanded",this.getActionBarExpanded()?"true":"false"),!this._getSideContentExpanded()&&this._attachScrollHandler(),this._attachMainFocusOutHandler(),this._attachResizableHandlers(),e.system.phone?0===this.getDomRef().querySelector(".sapFSPMain").scrollTop&&this.setActionBarExpanded(!0):(this._determineVisibleItems(),!this._isSingleItem()&&this._iVisibleItems>0&&this._initItemNavigation(),this._getSideContentExpanded()&&this.getItems().length&&this._fixSidePanelWidth()),this._sSidePanelWidth||(this._sSidePanelWidth=this._getSidePanelWidth())},E.prototype.oncontextmenu=function(e){var t=document.activeElement===this.getDomRef().querySelector(".sapFSPSplitterBar");(t||e.target.closest(".sapFSPSide.sapFSPResizable"))&&(e.preventDefault(),t&&(this._bContextMenuFromSplitter=!0),this._showResizeContextMenu(e))},E.prototype.onkeydown=function(e){var t=e.target,n=this.getDomRef().querySelector(".sapFSPActionBarList"),s=this._getSideContentExpanded(),o=this.getActionBarExpanded()||s,a=e.ctrlKey||e.metaKey,r=document.activeElement===this.getDomRef().querySelector(".sapFSPSplitterBar");if(a&&e.which===y.ARROW_LEFT)e.preventDefault(),s&&this._focusSideContent();else if(a&&e.which===y.ARROW_RIGHT&&s)s&&(this._contentControlToFocus=i.getCurrentFocusedControlId()),this._oItemNavigation.getFocusedDomRef().focus();else if(a&&e.shiftKey&&e.which===y.P)e.preventDefault(),this._toggleActionBarExpanded(),o?(s&&this.setActionBarExpanded(!1),this._closeSideContent(),this._focusMain()):this._oItemNavigation.getFocusedDomRef().focus();else if(e.which===y.ESCAPE)e.preventDefault(),this.setActionBarExpanded(!1),this._closeSideContent(),this._focusMain();else if(r)switch(e.which){case y.ENTER:this._setSidePanelResizePosition(1);break;case y.END:this._setSidePanelResizePosition(2);break;case y.HOME:this._setSidePanelResizePosition(0);break;case y.ARROW_LEFT:case y.ARROW_UP:this._moveSidePanelResizePositionWith(e.shiftKey?this.getSidePanelResizeLargerStep():this.getSidePanelResizeStep());break;case y.ARROW_RIGHT:case y.ARROW_DOWN:this._moveSidePanelResizePositionWith(e.shiftKey?-this.getSidePanelResizeLargerStep():-this.getSidePanelResizeStep());break;case y.F10:e.shiftKey&&(e.preventDefault(),this._bContextMenuFromSplitter=!0,this._showResizeContextMenu(e))}if(l(n,t)&&t!==n)switch(e.which){case y.ENTER:e.preventDefault(),this._toggleItemSelection(e.srcControl);break;case y.SPACE:e.preventDefault()}},E.prototype.onkeyup=function(e){var t=e.target,i=this.getDomRef().querySelector(".sapFSPActionBarList");l(i,t)&&t!==i&&e.which===y.SPACE&&this._toggleItemSelection(e.srcControl)},E.prototype.ontap=function(e){var t,n=e.target,s=this.getDomRef().querySelector(".sapFSPActionBarList");if(l(s,n)&&n!==s){for(t=n;"LI"!==t.tagName;)t=t.parentElement;t&&this._toggleItemSelection(i.byId(t.id))}},E.prototype.onsapskipforward=function(e){e.preventDefault(),this._handleGroupNavigation(e,!1)},E.prototype.onsapskipback=function(e){this._handleGroupNavigation(e,!0)},E.prototype._getContextMenu=function(){var e=this.getAggregation("_contextMenu");return e||(e=new p({items:[new c({text:v.getText("SIDEPANEL_CONTEXTMENU_MAXIMUM_WIDTH"),press:function(){this._setSidePanelResizePosition(2)}.bind(this)}),new c({text:v.getText("SIDEPANEL_CONTEXTMENU_MINIMUM_WIDTH"),press:function(){this._setSidePanelResizePosition(0)}.bind(this)}),new c({text:v.getText("SIDEPANEL_CONTEXTMENU_DEFAULT_WIDTH"),press:function(){this._setSidePanelResizePosition(1)}.bind(this)})],closed:function(e){this._bContextMenuFromSplitter&&(this._bContextMenuFromSplitter=!1,this.getDomRef().querySelector(".sapFSPSplitterBar").focus())}.bind(this)}),this.setAggregation("_contextMenu",e)),e},E.prototype._getSideContentExpanded=function(){return this.getProperty("sideContentExpanded")},E.prototype._setSideContentExpanded=function(e){return this._isSingleItem()&&this.setActionBarExpanded(e),this.setProperty("sideContentExpanded",e)},E.prototype._getFocusDomRef=function(e){return e.getDomRef()},E.prototype._focusMain=function(){if(this._oPreviousFocusedMainElement)this._oPreviousFocusedMainElement.focus();else{var e=this.getMainContent();for(let t=0;t<e.length;++t)if(e[t].isFocusable()){e[t].focus();break}}},E.prototype._focusSideContent=function(){var e=this._contentControlToFocus?i.byId(this._contentControlToFocus):this.getAggregation("_closeButton");e&&e.focus()},E.prototype._closeSideContent=function(){var e=i.byId(this.getSelectedItem()),t=!0;e&&(t=this._fireToggle({item:e,expanded:!1})),t&&(this._setSideContentExpanded(!1),this.setAssociation("selectedItem",null),this._isSingleItem()&&setTimeout(function(){var e=this.getAggregation("_arrowButton");e&&e.focus()}.bind(this),0))},E.prototype._toggleActionBarExpanded=function(){var e;if(this._isSingleItem()){if(e=this.getActionBarExpanded()?null:this.getItems()[0])if(!this._fireToggle({item:e,expanded:!!e}))return;this.setAssociation("selectedItem",e),this._setSideContentExpanded(!!e),setTimeout(function(){var e=this.getAggregation("_closeButton");e&&e.focus()}.bind(this),0)}else this.setActionBarExpanded(!this.getActionBarExpanded())},E.prototype._fireToggle=function(e){return this._contentControlToFocus=void 0,this.fireToggle(e)},E.prototype._initItemNavigation=function(){var e,t,i,n=this.getItems(),s=[],o=n.length>this._iVisibleItems,a=o?this._iVisibleItems-1:n.length,l=this.getAggregation("_overflowItem"),h=this.getAggregation("_overflowMenu");n.length&&this._iVisibleItems&&(t=n[0].getDomRef().parentElement,h.destroyItems(),this._mOverflowItemsMap={},n.forEach(function(t,n){n<a?(t.getEnabled()&&((e=this._getFocusDomRef(t)).setAttribute("tabindex","-1"),s.push(e)),t.$().css("display","flex")):(t.$().css("display","none"),i=new c({text:t.getText(),icon:t.getIcon(),enabled:t.getEnabled()}),h.addItem(i),this._mOverflowItemsMap[i.getId()]=t)}.bind(this)),o?(l.$().css("visibility","visible"),(e=this._getFocusDomRef(l)).setAttribute("tabindex","-1"),s.push(e)):l.$().css("visibility","hidden"),this._oItemNavigation||(this._oItemNavigation=(new r).setCycling(!1).attachEvent(r.Events.AfterFocus,this._onItemNavigationAfterFocus,this).setDisabledModifiers({sapnext:["alt","meta","ctrl"],sapprevious:["alt","meta","ctrl"]}),this.addDelegate(this._oItemNavigation),this._bAnnounceSelected=!0),this._oItemNavigation.setRootDomRef(t).setItemDomRefs(s).setPageSize(a),-1===this._oItemNavigation.getFocusedIndex()&&this._oItemNavigation.setFocusedIndex(0))},E.prototype._onItemNavigationAfterFocus=function(e){this.getSelectedItem()===this._oItemNavigation.getFocusedDomRef().id&&this._bAnnounceSelected&&this._oInvisibleMessage.announce(v.getText("SIDEPANEL_NAV_ITEM_SELECTED"),I.Polite),this._bAnnounceSelected=!0},E.prototype._attachResizeHandlers=function(){this._iResizeHandlerId=o.register(this,this._fnOnResizeRef)},E.prototype._detachResizeHandlers=function(){this._iResizeHandlerId&&(o.deregister(this._iResizeHandlerId),this._iResizeHandlerId=null)},E.prototype._determineVisibleItems=function(){var e=this.getDomRef(),t=e&&e.querySelector(".sapFSPActionBarList");if(t){var i,n=window.getComputedStyle(t),s=parseInt(n.gap),o=parseInt(n.marginBottom),a=parseInt(n.marginTop),r=e.querySelector(".sapFSPOverflowItem"),l=r&&r.clientHeight;this._isSingleItem()||(i=e.querySelector(".sapFSPSideInner").clientHeight-o-a,this._iVisibleItems=parseInt((i+s)/(l+s)))}},E.prototype._onResize=function(t){this.getItems().length&&!e.system.phone&&(this._determineVisibleItems(),!this._isSingleItem()&&this._iVisibleItems>0&&this._initItemNavigation(),this._getSideContentExpanded()&&this._fixSidePanelWidth())},E.prototype._fixSidePanelWidth=function(){var e=this.getDomRef().querySelector(".sapFSPSide"),t=this._getControlWidth(),i=t<parseInt(window.getComputedStyle(e).width);e.style.width=i?t+"px":this._getSidePanelWidth(),e.style.minWidth=i?t+"px":this._getSidePanelMinWidth(),e.style.maxWidth=this._getSidePanelMaxWidth(),this._updateSplitViewClass(e),this.getSidePanelResizable()&&this._updateAriaValues()},E.prototype._updateSplitViewClass=function(e){parseInt(window.getComputedStyle(e).width)>560?e.classList.add("sapFSPSplitView"):e.classList.remove("sapFSPSplitView")},E.prototype._updateAriaValues=function(){var e=this.getDomRef(),t=e.querySelector(".sapFSPSplitterBar"),i=this._getControlWidth(),n=parseInt(window.getComputedStyle(e.querySelector(".sapFSPSide")).width);t.setAttribute("aria-valuenow",Math.round(n/i*100)),t.setAttribute("aria-valuemin",Math.round(parseInt(window.getComputedStyle(e.querySelector(".sapFSPMinWidth")).width)/i*100)),t.setAttribute("aria-valuemax",Math.round(parseInt(window.getComputedStyle(e.querySelector(".sapFSPMaxWidth")).width)/i*100))},E.prototype._setOverflowItemSelection=function(e){var t,i=this.getAggregation("_overflowItem");i&&i.getDomRef()&&(this._bOverflowMenuOpened=e,t=this._getOverflowItemText(),i.setText(t,!1),i.$().find(".sapFSPItemText").text(t))},E.prototype._getAriaLabelText=function(){var e=this.getAriaLabel();return e||v.getText("SIDEPANEL_DEFAULT_ARIA_LABEL")},E.prototype._getOverflowItemText=function(){return this._bOverflowMenuOpened?v.getText("SIDEPANEL_SHOW_LESS_TEXT"):v.getText("SIDEPANEL_MORE_ACTIONS_TEXT")},E.prototype._getSideContentAriaLabel=function(){return v.getText("SIDEPANEL_CONTENT_ARIA_LABEL")},E.prototype._getSplitterTitle=function(){return v.getText("SIDEPANEL_RESIZE_SPLITTER_TITLE")},E.prototype._toggleItemSelection=function(t){var n,s,o=this.getSelectedItem(),a=t.getDomRef(),r=t.getId()!==o,l=!0;a&&a.classList.contains("sapFSPOverflowItem")?this._toggleOverflowMenu(a):t.getEnabled()&&(!o||s&&!r||(l=this._fireToggle({item:r?i.byId(o):t,expanded:!1})),l&&(s=!!(n=r?t:null),this.setAssociation("selectedItem",n),!n||(this._bAnnounceSelected=!1,l=this._fireToggle({item:n,expanded:!0}))?(!e.system.phone&&this.getActionBarExpanded()&&this.setActionBarExpanded(!1),this._setSideContentExpanded(s)):this._setSideContentExpanded(!1)))},E.prototype._toggleOverflowMenu=function(e){var t=this.getAggregation("_overflowMenu"),i={onkeydown:this._overflowMenuOnkeydown.bind(this)};e?this._bOverflowMenuOpened?(this._setOverflowItemSelection(!1),t.close()):(this._setOverflowItemSelection(!0),setTimeout(function(){var n=!t.getAggregation("_menu");t.openBy(e,!1,s.Dock.BeginBottom,s.Dock.EndBottom,"3 0"),t._getMenu().getPopup().setExtraContent([this.getAggregation("_overflowItem")]),n&&t.getAggregation("_menu").addEventDelegate(i)}.bind(this),0)):this._bOverflowMenuOpened&&(this._bOverflowMenuOpened=!1)},E.prototype._overflowMenuOnkeydown=function(e){var t=this.getAggregation("_overflowItem");e.preventDefault(),e.which===y.ARROW_RIGHT?(this._closeOverflowMenu(),t&&t.focus()):e.which!==y.ARROW_LEFT||e.ctrlKey||e.metaKey||(this._closeOverflowMenu(),this.setActionBarExpanded(!1),this._focusMain())},E.prototype._getSelectedItem=function(){return i.byId(this.getSelectedItem())},E.prototype._getSideContentHeaderTitle=function(){var e=this._getSelectedItem();return this._contentHeaderTitle||(this._contentHeaderTitle=new h),e&&this._contentHeaderTitle.setText(e.getText())&&this._contentHeaderTitle.setTooltip(e.getText()),this._contentHeaderTitle},E.prototype._getSideContentHeaderIcon=function(){var e=this._getSelectedItem();return this._contentHeaderIcon||(this._contentHeaderIcon=new n),e&&this._contentHeaderIcon.setSrc(e.getIcon()),this._contentHeaderIcon},E.prototype._getSideContentHeaderCloseBtn=function(){var t,i=this.getAggregation("_closeButton");return t=this._isSingleItem()?e.system.phone?"sap-icon://navigation-down-arrow":"sap-icon://navigation-"+this.getSidePanelPosition().toLowerCase()+"-arrow":"sap-icon://decline",i?i.setIcon(t):(i=new d(this.getId()+"-closeButton",{type:"Transparent",tooltip:v.getText("SIDEPANEL_CLOSE_BUTTON_TEXT"),icon:t,press:function(){var e=this._getSelectedItem(),t=this.getAggregation("_overflowItem");this._bAnnounceSelected=!1,this._isSingleItem()||("none"===this.getDomRef().querySelector("#"+e.getId()).style.display?t&&t.focus():e&&e.focus()),this._closeSideContent()}.bind(this)}),this.setAggregation("_closeButton",i)),i},E.prototype._attachScrollHandler=function(){e.system.phone&&this.getDomRef()&&this.getDomRef().querySelector(".sapFSPMain").addEventListener("scroll",this._fnOnMainScroll)},E.prototype._detachScrollHandler=function(){e.system.phone&&this.getDomRef()&&this.getDomRef().querySelector(".sapFSPMain").removeEventListener("scroll",this._fnOnMainScroll)},E.prototype._closeOverflowMenu=function(){this._bOverflowMenuOpened&&(this._setOverflowItemSelection(!1),this.getAggregation("_overflowMenu").close())},E.prototype._attachMainFocusOutHandler=function(){if(!e.system.phone){var t=this.getDomRef();t&&t.querySelector(".sapFSPMain").addEventListener("focusout",this._fnOnMainFocusOut,!1)}},E.prototype._detachMainFocusOutHandler=function(){if(!e.system.phone){var t=this.getDomRef();t&&t.querySelector(".sapFSPMain").removeEventListener("focusout",this._fnOnMainFocusOut,!1)}},E.prototype._onMainFocusOut=function(e){this._oPreviousFocusedMainElement=e.target},E.prototype._handleScroll=function(e){var t,i,n;this.bScrolling||(this.bScrolling=!0,t=parseInt(e.target.scrollTop),setTimeout(function(){i=t>this._iLastScrollPosition,n=t<this._iLastScrollPosition,this.setActionBarExpanded(!i||n),this._iLastScrollPosition=t,this.bScrolling=!1}.bind(this),100))},E.prototype._handleGroupNavigation=function(e,t){var i=new jQuery.Event("keydown");this.$().trigger("focus"),i.target=e.target,i.key="F6",i.shiftKey=t,m.handleF6GroupNavigation(i)},E.prototype._isSingleItem=function(){return 1===this.getItems().length},E.prototype._calculatePixelWidth=function(e){return"string"==typeof e?"%"===(e=e.replace(/\s/g,"")).slice(-1)&&(e=parseInt(this._getControlWidth()*parseFloat(e)/100)+"px"):e=e.toString()+"px",e},E.prototype._getControlWidth=function(){return parseInt(window.getComputedStyle(this.getDomRef()).width)},E.prototype._getSidePanelWidth=function(){return this._calculatePixelWidth(this.getSidePanelWidth())},E.prototype._getSidePanelMinWidth=function(){return this._calculatePixelWidth(this.getSidePanelMinWidth())},E.prototype._getSidePanelMaxWidth=function(){return this._calculatePixelWidth(this.getSidePanelMaxWidth())},E.prototype._isResizable=function(){return this.getSidePanelResizable()&&!e.system.phone&&(this.getActionBarExpanded()||this._getSideContentExpanded())},E.prototype._attachResizableHandlers=function(){var t=this.getDomRef(),i=t&&t.querySelector(".sapFSPSplitterBar");i&&((e.system.combi||e.system.phone||e.system.tablet)&&(i.addEventListener("touchstart",this._fnOnTouchStart),i.addEventListener("touchend",this._fnOnTouchEnd),i.addEventListener("touchmove",this._fnOnTouchMove)),(e.system.desktop||e.system.combi)&&(i.addEventListener("dblclick",this._fnOnDblClick),i.addEventListener("mousedown",this._fnOnTouchStart),t.addEventListener("mouseup",this._fnOnTouchEnd),t.addEventListener("mousemove",this._fnOnTouchMove)))},E.prototype._detachResizableHandlers=function(){var t=this.getDomRef(),i=t&&t.querySelector(".sapFSPSplitterBar");i&&((e.system.combi||e.system.phone||e.system.tablet)&&(i.removeEventListener("touchstart",this._fnOnTouchStart),i.removeEventListener("touchend",this._fnOnTouchEnd),i.removeEventListener("touchmove",this._fnOnTouchMove)),(e.system.desktop||e.system.combi)&&(i.removeEventListener("dblclick",this._fnOnDblClick),i.removeEventListener("mousedown",this._fnOnTouchStart),t.removeEventListener("mouseup",this._fnOnTouchEnd),t.removeEventListener("mousemove",this._fnOnTouchMove)))},E.prototype._onTouchStart=function(t){t.preventDefault(),0!==t.button&&"touchstart"!==t.type||(!e.system.desktop&&!e.system.combi||e.system.tablet||e.system.phone||this.getDomRef().querySelector(".sapFSPSplitterBar").focus(),this._bResizeStarted=!0,this._iStartPositionX=t.touches?t.touches[0].pageX:t.pageX)},E.prototype._onTouchEnd=function(e){this._bResizeStarted&&e.preventDefault(),this._bResizeStarted=!1},E.prototype._onTouchMove=function(e){if(this._bResizeStarted){var t=e.touches?e.touches[0].pageX:e.pageX,i=this._iStartPositionX-t,n=this.getDomRef().querySelector(".sapFSPSide"),s=parseInt(window.getComputedStyle(n).width);e.preventDefault(),s&&(s+=i,this.setProperty("sidePanelWidth",s+"px",!0),n.style.width=s+"px",this._iStartPositionX=t,this._updateSplitViewClass(n),this._updateAriaValues())}},E.prototype._onDblClick=function(e){e.preventDefault(),this._iSidePanelPosition++,this._iSidePanelPosition>2&&(this._iSidePanelPosition=0),this._setSidePanelResizePosition(this._iSidePanelPosition)},E.prototype._setSidePanelResizePosition=function(e){var t=[this._getSidePanelMinWidth(),this._sSidePanelWidth,this._getSidePanelMaxWidth()];this.setProperty("sidePanelWidth",t[e],!0),this._fixSidePanelWidth()},E.prototype._moveSidePanelResizePositionWith=function(e){var t=this.getDomRef().querySelector(".sapFSPSide"),i=parseInt(window.getComputedStyle(t).width);e&&i&&(i+=e,this.setProperty("sidePanelWidth",i+"px",!0),t.style.width=i+"px",this._updateAriaValues())},E.prototype._showResizeContextMenu=function(e){var t=this._getContextMenu();this._bResizeStarted=!1,this._bContextMenuFromSplitter&&t.openBy(this.getDomRef().querySelector(".sapFSPSplitterBarGrip"))||t.openAsContextMenu(e,this)},E}));